"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_unsupportedIterableToArray(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,o=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){o=!0,e},f:function e(){try{i||null==t.return||t.return()}finally{if(o)throw e}}}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t,a=0;a<n.length;a++)(t=n[a]).enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _slicedToArray(e,n){return _arrayWithHoles(e)||_iterableToArrayLimit(e,n)||_unsupportedIterableToArray(e,n)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return _arrayLikeToArray(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,n):void 0}}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}function _iterableToArrayLimit(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,r,i=[],o=!0,u=!1;try{for(t=t.call(e);!(o=(a=t.next()).done)&&(i.push(a.value),!n||i.length!==n);o=!0);}catch(e){u=!0,r=e}finally{try{o||null==t.return||t.return()}finally{if(u)throw r}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var Shuang={resource:{dict:{},schemeList:{},scheme:{},emoji:{right:"‚úÖ",wrong:"‚ùé"}},core:{model:{},current:{},order:{shengIndex:0,yunIndex:0},history:[]},app:{setting:{config:{},reload:function(){}},staticJS:0,modeList:[],action:{}}},$=document.querySelector.bind(document),$$=document.querySelectorAll.bind(document);function importJS(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){Shuang.app.staticJS++};e="build/".concat(e,".min.js");var t=document.createElement("script");Object.assign(t,{src:e,onload:n}),document.body.appendChild(t)}function detectDarkMode(){return!(!window.matchMedia||!window.matchMedia("(prefers-color-scheme: dark)").matches)||!!(6>(new Date).getHours()||22<(new Date).getHours())}function readStorage(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return localStorage.getItem(e)}function writeStorage(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";localStorage.setItem(e,n)}Shuang.resource.dict={"":{a:"Âïä",ai:"Áà±",an:"ÂÆâ",ang:"ÊòÇ",ao:"Â••",e:"ÈπÖ",ei:["ËØ∂"],en:"ÂóØ",er:"ËÄ≥",o:"Âì¶",ou:"Ê¨ß"},b:{a:"Áà∏",ai:"ÁôΩ",an:"Áè≠",ang:"Â∏Æ",ao:"ÂåÖ",ei:"Ë¢´",en:"Êú¨",eng:"Â¥©",i:"ÂøÖ",ian:"Âèò",iao:"Ë°®",ie:"Âà´",in:"ÂÆæ",ing:"ÂÜ∞",o:"Êí≠",u:"‰∏ç"},c:{a:"Êì¶",ai:"ÂΩ©",an:"È§ê",ang:"Ëãç",ao:"Ëçâ",e:"Êµã",en:["Â≤ë"],eng:"Â±Ç",i:"ËØç",ong:"‰ªé",ou:"Âáë",u:"Á≤ó",uan:"Á™ú",ui:"ÂÇ¨",un:"Êùë",uo:"Èîô"},d:{a:"Â§ß",ai:"‰ª£",an:"‰ΩÜ",ang:"ÂΩì",ao:"Âà∞",e:"Âæ∑",ei:["Âæó"],eng:"Á≠â",i:"Â∏ù",ia:["Âó≤"],ian:"ÁÇπ",iao:"Èíì",ie:"Âè†",ing:"È°∂",iu:"‰∏¢",ong:"‰∏ú",ou:"Êñó",u:"ËØª",uan:"Áü≠",ui:"ÂØπ",un:"È°ø",uo:"Â§ö"},f:{a:"Ê≥ï",an:"Áøª",ang:"Êñπ",ei:"È£û",en:"ÂàÜ",eng:"È£é",o:"‰Ωõ",ou:["Âê¶"],u:"Êúç"},g:{a:["ÊóÆ"],ai:"ËØ•",an:"Âπ≤",ang:"Âàö",ao:"È´ò",e:"‰∏™",ei:["Áªô"],en:"Ë∑ü",eng:"Êõ¥",ong:"ÂÖ¨",ou:"Áãó",u:"Ë∞∑",ua:"Áìú",uai:"ÊÄ™",uan:"ÂÖ≥",uang:"ÂÖâ",ui:"È¨º",un:"Êªö",uo:"ÂõΩ"},h:{a:"Âìà",ai:"Êµ∑",an:"Ê±â",ang:"Êù≠",ao:"Â•Ω",e:"Âíå",ei:"Èªë",en:"Âæà",eng:"Ê®™",ong:"Á∫¢",ou:"Áå¥",u:"ËÉ°",ua:"Âçé",uai:"Âùè",uan:"Ê¨¢",uang:"ÈªÑ",ui:"ÁÅ∞",un:"Êòè",uo:"ÁÅ´"},j:{i:"Êú∫",ia:"ÂÆ∂",ian:"Èó¥",iang:"Ê±ü",iao:"‰∫§",ie:"Êù∞",in:"Èáë",ing:"‰∫¨",iong:"Á™ò",iu:"Êóß",u:"Â±Ö",uan:"Âç∑",ue:"Áªù",un:"ÂÜõ"},k:{a:["Âç°"],ai:"ÂºÄ",an:"Áúã",ang:"Â∫∑",ao:"Èù†",e:"Áßë",en:"ËÇØ",eng:"Âùë",ong:"Á©∫",ou:"Âè£",u:"Âì≠",ua:"Â§∏",uai:"Âø´",uan:"ÂÆΩ",uang:"Ê°Ü",ui:"‰∫è",un:"Âõ∞",uo:"Èòî"},l:{a:"Êãâ",ai:"Êù•",an:"Ëìù",ang:"Áãº",ao:"ËÄÅ",e:["‰πê"],ei:"Á¥Ø",eng:"ÂÜ∑",i:"Èáå",ia:["‰ø©"],ian:"Ëøû",iang:"Âáâ",iao:"ËÅä",ie:"Âàó",in:"Êûó",ing:"È¢Ü",iu:"Âàò",o:"ÂíØ",ong:"Èæô",ou:"Ê•º",u:"Ë∑Ø",uan:"‰π±",un:"ËΩÆ",uo:"ÁΩó",v:"Áªø",ve:"Áï•"},m:{a:"È©¨",ai:"‰π∞",an:"Êª°",ang:"Âøô",ao:"Áå´",e:"‰πà",ei:"Ê≤°",en:"Èó®",eng:"Ê¢¶",i:"Á±≥",ian:"Èù¢",iao:"Áßí",ie:"ÁÅ≠",in:"Ê∞ë",ing:"Êòé",iu:"Ë∞¨",o:"È≠î",ou:"Êüê",u:"Êú®"},n:{a:"Êãø",ai:"‰πÉ",an:"Âçó",ang:"Âõä",ao:"ËÑë",e:["Âë¢"],ei:"ÂÜÖ",en:"Â´©",eng:"ËÉΩ",i:"‰Ω†",ian:"Âπ¥",iang:"Â®ò",iao:"È∏ü",ie:"ËÅÇ",in:"ÊÇ®",ing:"ÂÆÅ",iu:"Áâõ",ong:"ÂÜú",u:"Âä™",uan:"Êöñ",uo:"Êå™",v:"Â•≥",ve:"Ëôê"},p:{a:"Áà¨",ai:"Áâå",an:"ÊΩò",ang:"ËÉñ",ao:"ÁÇÆ",ei:"ÈÖç",en:"Âñ∑",eng:"Èπè",i:"ÁöÆ",ian:"Áâá",iao:"È£ò",ie:"Êíá",in:"Êãº",ing:"Âá≠",o:"Á†¥",ou:"Ââñ",u:"ÊôÆ"},q:{i:"ÈΩê",ia:"Ê¥Ω",ian:"Ââç",iang:"Â¢ô",iao:"Ê°•",ie:"‰∏î",in:"Áê¥",ing:"ËΩª",iong:"Á©∑",iu:"Áßã",u:"Âéª",uan:"ÂÖ®",ue:"Á°Æ",un:"Áæ§"},r:{an:"ÁÑ∂",ang:"ËÆ©",ao:"Áªï",e:"ÁÉ≠",en:"‰ªÅ",eng:"‰ªç",i:"Êó•",ong:"ÂÆπ",ou:"ËÇâ",u:"Â¶Ç",uan:"ËΩØ",ui:"Áùø",un:"Ê∂¶",uo:"Ëã•"},s:{a:"Ëê®",ai:"Ëµõ",an:"‰ºû",ang:"Ê°ë",ao:"Êâ´",e:"Ëâ≤",en:"Ê£Æ",eng:"ÂÉß",i:"Âè∏",ong:"Êùæ",ou:"Êêú",u:"Ëãè",uan:"ÈÖ∏",ui:"Â≤Å",un:"Â≠ô",uo:"ÈîÅ"},t:{a:"ÂÆÉ",ai:"Âè∞",an:"Ë∞à",ang:"Ê±§",ao:"Ê∂õ",e:"Áâπ",eng:"Áñº",i:"‰Ωì",ian:"Â§©",iao:"Êù°",ie:"Ë¥¥",ing:"Âê¨",ong:"ÈÄö",ou:"Â§¥",u:"Âõæ",uan:"Âõ¢",ui:"Êé®",un:"Âêû",uo:"Êãñ"},w:{a:"Âìá",ai:"Â§ñ",an:"‰∏á",ang:"Áéã",ei:"‰∏∫",en:"Êñá",eng:"ÁøÅ",o:"Êàë",u:"Êó†"},x:{i:"Âñú",ia:"Â§è",ian:"Áé∞",iang:"Âêë",iao:"Â∞è",ie:"Ë∞¢",in:"ÂøÉ",ing:"Êòü",iong:"ÂÖÑ",iu:"ÁßÄ",u:"Âæê",uan:"ÈÄâ",ue:"Â≠¶",un:"ÂØª"},y:{a:"Âéã",an:"Ááï",ang:"Áæä",ao:"ËçØ",e:"È°µ",i:"‰ª•",in:"Èü≥",ing:"Ëµ¢",o:"Âìü",ong:"Áî®",ou:"Êúâ",u:"‰∏é",uan:"ÂÖÉ",ue:"Êúà",un:"‰∫ë"},z:{a:"Âíã",ai:"Âú®",an:"Ëµû",ang:"ËÑè",ao:"ÈÄ†",e:"Âàô",ei:"Ë¥º",en:"ÊÄé",eng:"Â¢û",i:"Â≠ê",ong:"ÂÆó",ou:"Ëµ∞",u:"ÁªÑ",uan:"Èíª",ui:"ÊúÄ",un:"ÈÅµ",uo:"ÂÅö"},ch:{a:"Ëå∂",ai:"ÊãÜ",an:"‰∫ß",ang:"Âú∫",ao:"Ë∂Ö",e:"ËΩ¶",en:"Èôà",eng:"Êàê",i:"ÂêÉ",ong:"ÂÖÖ",ou:"‰∏ë",u:"Âá∫",ua:["Ê¨ª"],uai:"Ë∏π",uan:"Á©ø",uang:"Â∫ä",ui:"Âêπ",un:"Á∫Ø",uo:"Êà≥"},sh:{a:"Ê≤ô",ai:"Êôí",an:"Â±±",ang:"‰∏ä",ao:"Â∞ë",e:"ËÆæ",en:"Ê∑±",eng:"Áîü",i:"ÊòØ",ou:"Êî∂",u:"‰π¶",ua:"Âà∑",uai:"Â∏Ö",uan:"Ê†ì",uang:"Âèå",ui:"Ê∞¥",un:"È°∫",uo:"ËØ¥"},zh:{a:"ÁÇ∏",ai:"Êëò",an:"Âç†",ang:"Âº†",ao:"Ëµµ",e:"ËÄÖ",en:"Áúü",eng:"Ê≠£",i:"‰πã",ong:"‰∏≠",ou:"Âë®",u:"‰∏ª",ua:"Áà™",uai:"ÊãΩ",uan:"‰∏ì",uang:"Ë£Ö",ui:"ËøΩ",un:"ÂáÜ",uo:"Êçâ"}},Object.entries(Shuang.resource.dict).forEach(function(e){var n=_slicedToArray(e,2),t=n[0],a=n[1];return Shuang.resource.dict[t].list=Object.keys(a)}),Shuang.resource.dict.list=Object.keys(Shuang.resource.dict),Shuang.resource.schemeList={ziranma:"Ëá™ÁÑ∂Á†Å",sougou:"ÊêúÁãóÂèåÊãº",weiruan:"ÂæÆËΩØÂèåÊãº",xiaohe:"Â∞èÈπ§ÂèåÊãº",zhinengabc:"Êô∫ËÉΩABC",pinyinjiajia:"ÊãºÈü≥Âä†Âä†",ziguang:"Á¥´ÂÖâÂèåÊãº",guobiao:"ÂõΩÊ†áÂèåÊãº*",xiaolang:"Â∞èÊµ™ÂèåÊãº*",daniu:"Â§ßÁâõÂèåÊãº*",jiandao3:"ÈîÆÈÅìÂèåÊãº3**",jiandao6:"ÈîÆÈÅìÂèåÊãº6**",xingkong:"ÊòüÁ©∫ÂèåÊãº**",xiaoguan:"ÂºÄÊ∫êÂ∞èÈπ≥**",xiaoyue:"Â∞èÊúàÂèåÊãº**",yunbiaokuaipin:"ÈüµÊ†áÂùóÊãº**",c:"CÂèåÊãº**"},Shuang.app.modeList={"all-random":{name:"ÂÖ®ÈÉ®ÈöèÊú∫",desc:"ÂÖ®ÈÉ®ÊãºÈü≥ÁªÑÂêà"},"all-order":{name:"ÂÖ®ÈÉ®È°∫Â∫è",desc:"ÂÖ®ÈÉ®ÊãºÈü≥ÁªÑÂêà"},"hard-random":{name:"Âõ∞ÈöæÈöèÊú∫",desc:"ÈüµÊØçÈúÄËΩ¨Êç¢"},"hard-random-without-pinyin":{name:"Êó†ÊãºÈü≥",desc:"Êó†ÊãºÈü≥ÊèêÁ§∫"}},Shuang.core.model=function(){function e(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";_classCallCheck(this,e),this.sheng=n.toLowerCase(),this.yun=t.toLowerCase(),this.dict=Shuang.resource.dict[this.sheng][this.yun],this.scheme=new Set,this.view={sheng:this.sheng.toUpperCase().slice(0,1)+this.sheng.slice(1),yun:this.yun}}return _createClass(e,[{key:"beforeJudge",value:function(){var e=this;this.scheme.clear();var n=Shuang.app.setting.config.scheme,t=Shuang.resource.scheme[n].detail,a=this.sheng+this.yun;if(t.other[a])Array.isArray(t.other[a])?t.other[a].forEach(function(n){return e.scheme.add(n)}):this.scheme.add(t.other[a]);else{var r,i=_createForOfIteratorHelper(t.sheng[this.sheng]);try{for(i.s();!(r=i.n()).done;){var o,u=r.value,s=_createForOfIteratorHelper(t.yun[this.yun]);try{for(s.s();!(o=s.n()).done;){var c=o.value;this.scheme.add(u+c)}}catch(e){s.e(e)}finally{s.f()}}}catch(e){i.e(e)}finally{i.f()}if("u"===this.yun&&"jqxy".includes(this.sheng)){var d,h=_createForOfIteratorHelper(t.sheng[this.sheng]);try{for(h.s();!(d=h.n()).done;){var g,l=d.value,y=_createForOfIteratorHelper(t.yun.v);try{for(y.s();!(g=y.n()).done;){var f=g.value;this.scheme.add(l+f)}}catch(e){y.e(e)}finally{y.f()}}}catch(e){h.e(e)}finally{h.f()}}}}},{key:"judge",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return this.beforeJudge(),this.scheme.has(e.toLowerCase()+n.toLowerCase())}}],[{key:"getRandom",value:function(){var n=Math.floor,t=Shuang.resource.dict.list[n(Math.random()*Shuang.resource.dict.list.length)],a=new e(t,Shuang.resource.dict[t].list[n(Math.random()*Shuang.resource.dict[t].list.length)]);return e.isSame(a,Shuang.core.current)?e.getRandom():a}},{key:"getHardRandom",value:function(){var n;do{n=e.getRandom()}while(""===n.sheng||1===n.yun.length);return n}},{key:"getByOrder",value:function(){for(;;){var n=Shuang.resource.dict.list[Shuang.core.order.shengIndex];if(void 0!==n){var t=Shuang.resource.dict[n].list[Shuang.core.order.yunIndex];if(t)return Shuang.core.order.yunIndex++,new e(n,t)}0===Shuang.core.order.yunIndex?Shuang.core.order.shengIndex=0:(Shuang.core.order.shengIndex++,Shuang.core.order.yunIndex=0)}}},{key:"isSame",value:function(e,n){return e.sheng===n.sheng&&e.yun===n.yun}}]),e}(),Shuang.app.setting={config:{},reload:function(){this.config={scheme:readStorage("scheme")||"ziranma",mode:readStorage("mode")||"all-random",showPic:readStorage("showPic")||"true",darkMode:readStorage("darkMode")||detectDarkMode().toString(),autoNext:readStorage("autoNext")||"true",autoClear:readStorage("autoClear")||"true",showKeys:readStorage("showKeys")||"true",showPressedKey:readStorage("showPressedKey")||"true",disableMobileKeyboard:readStorage("disableMobileKeyboard")||"false"};var e=this.config,n=e.scheme,t=e.mode,a=e.showPic,r=e.darkMode,i=e.autoNext,o=e.autoClear,u=e.showKeys,s=e.showPressedKey,c=e.disableMobileKeyboard;Array.prototype.find.call($("#scheme-select").children,function(e){return Shuang.resource.schemeList[n].startsWith(e.innerText)}).selected=!0,$("#mode-select")[Object.keys(Shuang.app.modeList).indexOf(t)].selected=!0,$("#pic-switcher").checked="true"===a,$("#dark-mode-switcher").checked="true"===r,$("#auto-next-switcher").checked="true"===i,$("#auto-clear-switcher").checked="true"===o,$("#show-keys").checked="true"===u,$("#show-pressed-key").checked="true"===s,$("#disable-mobile-keyboard").checked="true"===c,this.setScheme(Shuang.resource.schemeList[n],!1),this.setMode(Shuang.app.modeList[t].name),this.setPicVisible(a),this.setDarkMode(r),this.setAutoNext(i),this.setAutoClear(o),this.setShowKeys(u),this.setShowPressedKey(s),this.setDisableMobileKeyboard(c)},setScheme:function(e){var n=this,t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.config.scheme=Object.keys(Shuang.resource.schemeList)[Object.values(Shuang.resource.schemeList).findIndex(function(n){return n.startsWith(e)})],importJS("scheme/"+this.config.scheme,function(){t&&Shuang.app.action.next(),Shuang.core.current.beforeJudge(),n.updateKeysHint(),n.updateTips()}),writeStorage("scheme",this.config.scheme)},setMode:function(e){Shuang.core.history=[];for(var n=0,t=Object.entries(Shuang.app.modeList);n<t.length;n++){var a=_slicedToArray(t[n],2),r=a[0];if(a[1].name===e){this.config.mode=r,$("#mode-desc").innerText=Shuang.app.modeList[r].desc,$("#q").style.display="hard-random-without-pinyin"===r?"none":"block";break}}writeStorage("mode",this.config.mode)},setPicVisible:function(e){this.config.showPic=e.toString(),"false"===this.config.showPic?($("#keyboard").style.display="none",$("#pic-placeholder").style.display="none"):"true"===this.config.showPic&&($("#keyboard").style.display="block",$("#pic-placeholder").style.display="block"),writeStorage("showPic",this.config.showPic),this.updateKeysHintLayoutRatio()},setDarkMode:function(e){this.config.darkMode=e.toString(),"true"===this.config.darkMode?$("body").setAttribute("class","dark-mode"):"false"===this.config.darkMode&&$("body").setAttribute("class",""),writeStorage("darkMode",this.config.darkMode)},setAutoNext:function(e){this.config.autoNext=e.toString(),writeStorage("autoNext",this.config.autoNext)},setAutoClear:function(e){this.config.autoClear=e.toString(),writeStorage("autoClear",this.config.autoClear)},setShowKeys:function(e){this.config.showKeys=e.toString(),writeStorage("showKeys",this.config.showKeys),this.updateKeysHint()},setShowPressedKey:function(e){this.config.showPressedKey=e.toString(),writeStorage("showPressedKey",this.config.showPressedKey)},setDisableMobileKeyboard:function(e){this.config.disableMobileKeyboard=e.toString(),"true"===this.config.disableMobileKeyboard?$("#a").setAttribute("inputmode","none"):"false"===this.config.disableMobileKeyboard&&$("#a").setAttribute("inputmode","text"),writeStorage("disableMobileKeyboard",this.config.disableMobileKeyboard)},updateKeysHint:function(){var e,n=$$(".key"),t=_createForOfIteratorHelper(n);try{for(t.s();!(e=t.n()).done;){e.value.classList.remove("answer")}}catch(e){t.e(e)}finally{t.f()}if("false"!==this.config.showKeys){var a,r=_createForOfIteratorHelper(Shuang.core.current.scheme);try{for(r.s();!(a=r.n()).done;){var i=_slicedToArray(a.value,2),o=i[0],u=i[1];n["qwertyuiopasdfghjkl;zxcvbnm".indexOf(o)].classList.add("answer"),n["qwertyuiopasdfghjkl;zxcvbnm".indexOf(u)].classList.add("answer")}}catch(e){r.e(e)}finally{r.f()}this.updateKeysHintLayoutRatio()}},updateKeysHintLayoutRatio:function(){if(700>$("body").scrollWidth){var e=310===$("body").scrollWidth?310:$("#pic").scrollWidth,n=1874/1928*e/680;navigator&&navigator.userAgent&&/firefox/i.test(navigator.userAgent)?($("#keys").style.transform="scale(".concat(n,")"),$("#keys").style.transformOrigin="left top",$("#keys").style.margin="".concat(10*n,"px"),$("#pic-placeholder").style.height="".concat(e/680*300,"px")):($("#keys").style.marginLeft="10px",$("#keys").style.zoom=n,$("#pic-placeholder").style.zoom=n)}else navigator&&navigator.userAgent&&/firefox/i.test(navigator.userAgent)?($("#keys").style.transform="unset",$("#keys").style.transformOrigin="unset",$("#pic-placeholder").style.height="300px",$("#keys").style.margin="10px auto"):($("#keys").style.marginLeft="auto",$("#keys").style.zoom="unset",$("#pic-placeholder").style.zoom="unset")},updatePressedKeyHint:function(e){if("false"!==this.config.showPressedKey&&e){var n,t=$$(".key"),a=_createForOfIteratorHelper(t);try{for(a.s();!(n=a.n()).done;){n.value.classList.remove("pressed")}}catch(e){a.e(e)}finally{a.f()}var r="qwertyuiopasdfghjkl;zxcvbnm".indexOf(e.toLowerCase());-1===r||(t[r].classList.add("pressed"),setTimeout(function(){t[r].classList.remove("pressed")},250))}},updateTips:function(){var e=$("#tips");e.innerHTML="";var n=Shuang.resource.scheme[this.config.scheme];if(n.tips){var t,a=_createForOfIteratorHelper(Array.isArray(n.tips)?n.tips:[n.tips]);try{for(a.s();!(t=a.n()).done;){var r=t.value,i=document.createElement("div");i.classList.add("line"),i.innerHTML=r,e.appendChild(i)}}catch(e){a.e(e)}finally{a.f()}}$("#pic").setAttribute("src","img/".concat(this.config.scheme,".svg"))}},Shuang.app.action={init:function(){var e=this;function n(e,n,t){n.forEach(function(n){var t=document.createElement("option");n.disabled&&t.setAttribute("disabled","disabled"),t.innerText=n.text||n,e.appendChild(t)}),e.onchange=function(e){t(e.target.value)}}navigator&&navigator.userAgent&&/windows|linux/i.test(navigator.userAgent)&&(Shuang.resource.emoji={right:"‚úîÔ∏è",wrong:"üòâ"});var t=Object.values(Shuang.resource.schemeList),a={common:t.filter(function(e){return!e.endsWith("*")}),uncommon:t.filter(function(e){return e.endsWith("*")&&!e.endsWith("**")}).map(function(e){return e.slice(0,-1)}),rare:t.filter(function(e){return e.endsWith("**")}).map(function(e){return e.slice(0,-2)})},r=[{disabled:!0,text:"Â∏∏ËßÅ"}].concat(_toConsumableArray(a.common),[{disabled:!0,text:"Â∞è‰ºó"}],_toConsumableArray(a.uncommon),[{disabled:!0,text:"Áà±Â•ΩËÄÖ"}],_toConsumableArray(a.rare));n($("#scheme-select"),r,function(e){Shuang.app.setting.setScheme(e)}),n($("#mode-select"),Object.values(Shuang.app.modeList).map(function(e){return e.name}),function(n){Shuang.app.setting.setMode(n),e.next()}),Shuang.core.current=new Shuang.core.model("sh","uang"),$("#q").innerText=Shuang.core.current.view.sheng+Shuang.core.current.view.yun,$("#dict").innerText=Shuang.core.current.dict,Shuang.app.setting.reload(),document.addEventListener("keydown",function(e){["Backspace","Tab","Enter"," "].includes(e.key)&&(e.preventDefault?e.preventDefault():event.returnValue=!1)}),document.addEventListener("keyup",function(n){e.keyPressed(n)}),$("#pic-switcher").addEventListener("change",function(e){Shuang.app.setting.setPicVisible(e.target.checked)}),$("#dark-mode-switcher").addEventListener("change",function(e){Shuang.app.setting.setDarkMode(e.target.checked)}),$("#auto-next-switcher").addEventListener("change",function(e){Shuang.app.setting.setAutoNext(e.target.checked)}),$("#auto-clear-switcher").addEventListener("change",function(e){Shuang.app.setting.setAutoClear(e.target.checked)}),$("#show-keys").addEventListener("change",function(e){Shuang.app.setting.setShowKeys(e.target.checked)}),$("#show-pressed-key").addEventListener("change",function(e){Shuang.app.setting.setShowPressedKey(e.target.checked)}),$("#disable-mobile-keyboard").addEventListener("change",function(e){Shuang.app.setting.setDisableMobileKeyboard(e.target.checked)}),$(".pay-name#alipay").addEventListener("mouseover",function(){Shuang.app.action.qrShow("alipay-qr")}),$("#alipay-qr").addEventListener("click",function(e){Shuang.app.action.qrHide(e.target)}),$("#alipay-qr").addEventListener("mouseout",function(e){Shuang.app.action.qrHide(e.target)}),$(".pay-name#wxpay").addEventListener("mouseover",function(){Shuang.app.action.qrShow("wxpay-qr")}),$("#wxpay-qr").addEventListener("click",function(e){Shuang.app.action.qrHide(e.target)}),$("#wxpay-qr").addEventListener("mouseout",function(e){Shuang.app.action.qrHide(e.target)}),$("#wx-name").addEventListener("mouseover",function(){Shuang.app.action.qrShow("wx-qr")}),$("#wx-qr").addEventListener("click",function(e){Shuang.app.action.qrHide(e.target)}),$("#wx-qr").addEventListener("mouseout",function(e){Shuang.app.action.qrHide(e.target)}),$("#dict").addEventListener("click",function(){Shuang.core.current.beforeJudge(),$("#a").value=Shuang.core.current.scheme.values().next().value,e.judge()}),window.addEventListener("resize",Shuang.app.setting.updateKeysHintLayoutRatio),window.resizeTo(window.outerWidth,window.outerHeight);for(var i=$$(".key"),o=function(e){i[e].addEventListener("click",function(){var n=new KeyboardEvent("keyup",{key:"qwertyuiopasdfghjkl;zxcvbnm"[e].toUpperCase()});n.simulated=!0,document.dispatchEvent(n)})},u=0;u<i.length;u++)o(u);this.redo()},keyPressed:function(e){switch(e.key){case"Backspace":this.redo();break;case"Tab":Shuang.core.current.beforeJudge(),$("#a").value=Shuang.core.current.scheme.values().next().value,this.judge();break;case"Enter":case" ":this.judge()?this.next():this.redo();break;default:e.simulated&&($("#a").value+=e.key.toLowerCase()),$("#a").value=$("#a").value.slice(0,2).replace(/[^a-zA-Z;]/g,"").split("").map(function(e,n){return 0===n?e.toUpperCase():e.toLowerCase()}).join(""),Shuang.app.setting.updatePressedKeyHint(e.key);var n=2===$("#a").value.length,t=this.judge();n&&(t&&"true"===Shuang.app.setting.config.autoNext?this.next(e.simulated):!t&&"true"===Shuang.app.setting.config.autoClear&&this.redo(e.simulated))}},judge:function(){var e=this,n=$("#a"),t=$("#btn"),a=_slicedToArray(n.value,2),r=a[0],i=a[1];return i&&Shuang.core.current.judge(r,i)?(t.onclick=function(){return e.next(!0)},t.innerText=Shuang.resource.emoji.right,!0):(t.onclick=function(){return e.redo(!0)},t.innerText=Shuang.resource.emoji.wrong,!1)},redo:function(e){var n=this;$("#a").value="",e||$("#a").focus(),$("#btn").onclick=function(){return n.redo(e)},$("#btn").innerText=Shuang.resource.emoji.wrong},next:function(e){switch(this.redo(e),Shuang.app.setting.config.mode){case"all-random":Shuang.core.current=Shuang.core.model.getRandom();break;case"all-order":Shuang.core.current=Shuang.core.model.getByOrder();break;case"hard-random":Shuang.core.current=Shuang.core.model.getHardRandom();break;case"hard-random-without-pinyin":do{Shuang.core.current=Shuang.core.model.getHardRandom()}while(Array.isArray(Shuang.core.current.dict))}Shuang.core.history.includes(Shuang.core.current.sheng+Shuang.core.current.yun)?this.next():Shuang.core.history=[].concat(_toConsumableArray(Shuang.core.history),[Shuang.core.current.sheng+Shuang.core.current.yun]).slice(-100),$("#q").innerText=Shuang.core.current.view.sheng+Shuang.core.current.view.yun,$("#dict").innerText=Shuang.core.current.dict,Shuang.core.current.beforeJudge(),Shuang.app.setting.updateKeysHint()},qrShow:function(e){$("#"+e).style.display="block"},qrHide:function(e){e.style.display="none"}},Shuang.app.action.init();