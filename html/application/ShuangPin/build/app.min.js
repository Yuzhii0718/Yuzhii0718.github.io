"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_unsupportedIterableToArray(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,o=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){o=!0,e},f:function e(){try{i||null==t.return||t.return()}finally{if(o)throw e}}}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t,a=0;a<n.length;a++)(t=n[a]).enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _slicedToArray(e,n){return _arrayWithHoles(e)||_iterableToArrayLimit(e,n)||_unsupportedIterableToArray(e,n)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return _arrayLikeToArray(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,n):void 0}}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}function _iterableToArrayLimit(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,r,i=[],o=!0,u=!1;try{for(t=t.call(e);!(o=(a=t.next()).done)&&(i.push(a.value),!n||i.length!==n);o=!0);}catch(e){u=!0,r=e}finally{try{o||null==t.return||t.return()}finally{if(u)throw r}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var Shuang={resource:{dict:{},schemeList:{},scheme:{},emoji:{right:"✅",wrong:"❎"}},core:{model:{},current:{},order:{shengIndex:0,yunIndex:0},history:[]},app:{setting:{config:{},reload:function(){}},staticJS:0,modeList:[],action:{}}},$=document.querySelector.bind(document),$$=document.querySelectorAll.bind(document);function importJS(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){Shuang.app.staticJS++};e="build/".concat(e,".min.js");var t=document.createElement("script");Object.assign(t,{src:e,onload:n}),document.body.appendChild(t)}function detectDarkMode(){return!(!window.matchMedia||!window.matchMedia("(prefers-color-scheme: dark)").matches)||!!(6>(new Date).getHours()||22<(new Date).getHours())}function readStorage(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return localStorage.getItem(e)}function writeStorage(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";localStorage.setItem(e,n)}Shuang.resource.dict={"":{a:"啊",ai:"爱",an:"安",ang:"昂",ao:"奥",e:"鹅",ei:["诶"],en:"嗯",er:"耳",o:"哦",ou:"欧"},b:{a:"爸",ai:"白",an:"班",ang:"帮",ao:"包",ei:"被",en:"本",eng:"崩",i:"必",ian:"变",iao:"表",ie:"别",in:"宾",ing:"冰",o:"播",u:"不"},c:{a:"擦",ai:"彩",an:"餐",ang:"苍",ao:"草",e:"测",en:["岑"],eng:"层",i:"词",ong:"从",ou:"凑",u:"粗",uan:"窜",ui:"催",un:"村",uo:"错"},d:{a:"大",ai:"代",an:"但",ang:"当",ao:"到",e:"德",ei:["得"],eng:"等",i:"帝",ia:["嗲"],ian:"点",iao:"钓",ie:"叠",ing:"顶",iu:"丢",ong:"东",ou:"斗",u:"读",uan:"短",ui:"对",un:"顿",uo:"多"},f:{a:"法",an:"翻",ang:"方",ei:"飞",en:"分",eng:"风",o:"佛",ou:["否"],u:"服"},g:{a:["旮"],ai:"该",an:"干",ang:"刚",ao:"高",e:"个",ei:["给"],en:"跟",eng:"更",ong:"公",ou:"狗",u:"谷",ua:"瓜",uai:"怪",uan:"关",uang:"光",ui:"鬼",un:"滚",uo:"国"},h:{a:"哈",ai:"海",an:"汉",ang:"杭",ao:"好",e:"和",ei:"黑",en:"很",eng:"横",ong:"红",ou:"猴",u:"胡",ua:"华",uai:"坏",uan:"欢",uang:"黄",ui:"灰",un:"昏",uo:"火"},j:{i:"机",ia:"家",ian:"间",iang:"江",iao:"交",ie:"杰",in:"金",ing:"京",iong:"窘",iu:"旧",u:"居",uan:"卷",ue:"绝",un:"军"},k:{a:["卡"],ai:"开",an:"看",ang:"康",ao:"靠",e:"科",en:"肯",eng:"坑",ong:"空",ou:"口",u:"哭",ua:"夸",uai:"快",uan:"宽",uang:"框",ui:"亏",un:"困",uo:"阔"},l:{a:"拉",ai:"来",an:"蓝",ang:"狼",ao:"老",e:["乐"],ei:"累",eng:"冷",i:"里",ia:["俩"],ian:"连",iang:"凉",iao:"聊",ie:"列",in:"林",ing:"领",iu:"刘",o:"咯",ong:"龙",ou:"楼",u:"路",uan:"乱",un:"轮",uo:"罗",v:"绿",ve:"略"},m:{a:"马",ai:"买",an:"满",ang:"忙",ao:"猫",e:"么",ei:"没",en:"门",eng:"梦",i:"米",ian:"面",iao:"秒",ie:"灭",in:"民",ing:"明",iu:"谬",o:"魔",ou:"某",u:"木"},n:{a:"拿",ai:"乃",an:"南",ang:"囊",ao:"脑",e:["呢"],ei:"内",en:"嫩",eng:"能",i:"你",ian:"年",iang:"娘",iao:"鸟",ie:"聂",in:"您",ing:"宁",iu:"牛",ong:"农",u:"努",uan:"暖",uo:"挪",v:"女",ve:"虐"},p:{a:"爬",ai:"牌",an:"潘",ang:"胖",ao:"炮",ei:"配",en:"喷",eng:"鹏",i:"皮",ian:"片",iao:"飘",ie:"撇",in:"拼",ing:"凭",o:"破",ou:"剖",u:"普"},q:{i:"齐",ia:"洽",ian:"前",iang:"墙",iao:"桥",ie:"且",in:"琴",ing:"轻",iong:"穷",iu:"秋",u:"去",uan:"全",ue:"确",un:"群"},r:{an:"然",ang:"让",ao:"绕",e:"热",en:"仁",eng:"仍",i:"日",ong:"容",ou:"肉",u:"如",uan:"软",ui:"睿",un:"润",uo:"若"},s:{a:"萨",ai:"赛",an:"伞",ang:"桑",ao:"扫",e:"色",en:"森",eng:"僧",i:"司",ong:"松",ou:"搜",u:"苏",uan:"酸",ui:"岁",un:"孙",uo:"锁"},t:{a:"它",ai:"台",an:"谈",ang:"汤",ao:"涛",e:"特",eng:"疼",i:"体",ian:"天",iao:"条",ie:"贴",ing:"听",ong:"通",ou:"头",u:"图",uan:"团",ui:"推",un:"吞",uo:"拖"},w:{a:"哇",ai:"外",an:"万",ang:"王",ei:"为",en:"文",eng:"翁",o:"我",u:"无"},x:{i:"喜",ia:"夏",ian:"现",iang:"向",iao:"小",ie:"谢",in:"心",ing:"星",iong:"兄",iu:"秀",u:"徐",uan:"选",ue:"学",un:"寻"},y:{a:"压",an:"燕",ang:"羊",ao:"药",e:"页",i:"以",in:"音",ing:"赢",o:"哟",ong:"用",ou:"有",u:"与",uan:"元",ue:"月",un:"云"},z:{a:"咋",ai:"在",an:"赞",ang:"脏",ao:"造",e:"则",ei:"贼",en:"怎",eng:"增",i:"子",ong:"宗",ou:"走",u:"组",uan:"钻",ui:"最",un:"遵",uo:"做"},ch:{a:"茶",ai:"拆",an:"产",ang:"场",ao:"超",e:"车",en:"陈",eng:"成",i:"吃",ong:"充",ou:"丑",u:"出",ua:["欻"],uai:"踹",uan:"穿",uang:"床",ui:"吹",un:"纯",uo:"戳"},sh:{a:"沙",ai:"晒",an:"山",ang:"上",ao:"少",e:"设",en:"深",eng:"生",i:"是",ou:"收",u:"书",ua:"刷",uai:"帅",uan:"栓",uang:"双",ui:"水",un:"顺",uo:"说"},zh:{a:"炸",ai:"摘",an:"占",ang:"张",ao:"赵",e:"者",en:"真",eng:"正",i:"之",ong:"中",ou:"周",u:"主",ua:"爪",uai:"拽",uan:"专",uang:"装",ui:"追",un:"准",uo:"捉"}},Object.entries(Shuang.resource.dict).forEach(function(e){var n=_slicedToArray(e,2),t=n[0],a=n[1];return Shuang.resource.dict[t].list=Object.keys(a)}),Shuang.resource.dict.list=Object.keys(Shuang.resource.dict),Shuang.resource.schemeList={ziranma:"自然码",sougou:"搜狗双拼",weiruan:"微软双拼",xiaohe:"小鹤双拼",zhinengabc:"智能ABC",pinyinjiajia:"拼音加加",ziguang:"紫光双拼",guobiao:"国标双拼*",xiaolang:"小浪双拼*",daniu:"大牛双拼*",jiandao3:"键道双拼3**",jiandao6:"键道双拼6**",xingkong:"星空双拼**",xiaoguan:"开源小鹳**",xiaoyue:"小月双拼**",yunbiaokuaipin:"韵标块拼**",c:"C双拼**"},Shuang.app.modeList={"all-random":{name:"全部随机",desc:"全部拼音组合"},"all-order":{name:"全部顺序",desc:"全部拼音组合"},"hard-random":{name:"困难随机",desc:"韵母需转换"},"hard-random-without-pinyin":{name:"无拼音",desc:"无拼音提示"}},Shuang.core.model=function(){function e(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";_classCallCheck(this,e),this.sheng=n.toLowerCase(),this.yun=t.toLowerCase(),this.dict=Shuang.resource.dict[this.sheng][this.yun],this.scheme=new Set,this.view={sheng:this.sheng.toUpperCase().slice(0,1)+this.sheng.slice(1),yun:this.yun}}return _createClass(e,[{key:"beforeJudge",value:function(){var e=this;this.scheme.clear();var n=Shuang.app.setting.config.scheme,t=Shuang.resource.scheme[n].detail,a=this.sheng+this.yun;if(t.other[a])Array.isArray(t.other[a])?t.other[a].forEach(function(n){return e.scheme.add(n)}):this.scheme.add(t.other[a]);else{var r,i=_createForOfIteratorHelper(t.sheng[this.sheng]);try{for(i.s();!(r=i.n()).done;){var o,u=r.value,s=_createForOfIteratorHelper(t.yun[this.yun]);try{for(s.s();!(o=s.n()).done;){var c=o.value;this.scheme.add(u+c)}}catch(e){s.e(e)}finally{s.f()}}}catch(e){i.e(e)}finally{i.f()}if("u"===this.yun&&"jqxy".includes(this.sheng)){var d,h=_createForOfIteratorHelper(t.sheng[this.sheng]);try{for(h.s();!(d=h.n()).done;){var g,l=d.value,y=_createForOfIteratorHelper(t.yun.v);try{for(y.s();!(g=y.n()).done;){var f=g.value;this.scheme.add(l+f)}}catch(e){y.e(e)}finally{y.f()}}}catch(e){h.e(e)}finally{h.f()}}}}},{key:"judge",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return this.beforeJudge(),this.scheme.has(e.toLowerCase()+n.toLowerCase())}}],[{key:"getRandom",value:function(){var n=Math.floor,t=Shuang.resource.dict.list[n(Math.random()*Shuang.resource.dict.list.length)],a=new e(t,Shuang.resource.dict[t].list[n(Math.random()*Shuang.resource.dict[t].list.length)]);return e.isSame(a,Shuang.core.current)?e.getRandom():a}},{key:"getHardRandom",value:function(){var n;do{n=e.getRandom()}while(""===n.sheng||1===n.yun.length);return n}},{key:"getByOrder",value:function(){for(;;){var n=Shuang.resource.dict.list[Shuang.core.order.shengIndex];if(void 0!==n){var t=Shuang.resource.dict[n].list[Shuang.core.order.yunIndex];if(t)return Shuang.core.order.yunIndex++,new e(n,t)}0===Shuang.core.order.yunIndex?Shuang.core.order.shengIndex=0:(Shuang.core.order.shengIndex++,Shuang.core.order.yunIndex=0)}}},{key:"isSame",value:function(e,n){return e.sheng===n.sheng&&e.yun===n.yun}}]),e}(),Shuang.app.setting={config:{},reload:function(){this.config={scheme:readStorage("scheme")||"ziranma",mode:readStorage("mode")||"all-random",showPic:readStorage("showPic")||"true",darkMode:readStorage("darkMode")||detectDarkMode().toString(),autoNext:readStorage("autoNext")||"true",autoClear:readStorage("autoClear")||"true",showKeys:readStorage("showKeys")||"true",showPressedKey:readStorage("showPressedKey")||"true",disableMobileKeyboard:readStorage("disableMobileKeyboard")||"false"};var e=this.config,n=e.scheme,t=e.mode,a=e.showPic,r=e.darkMode,i=e.autoNext,o=e.autoClear,u=e.showKeys,s=e.showPressedKey,c=e.disableMobileKeyboard;Array.prototype.find.call($("#scheme-select").children,function(e){return Shuang.resource.schemeList[n].startsWith(e.innerText)}).selected=!0,$("#mode-select")[Object.keys(Shuang.app.modeList).indexOf(t)].selected=!0,$("#pic-switcher").checked="true"===a,$("#dark-mode-switcher").checked="true"===r,$("#auto-next-switcher").checked="true"===i,$("#auto-clear-switcher").checked="true"===o,$("#show-keys").checked="true"===u,$("#show-pressed-key").checked="true"===s,$("#disable-mobile-keyboard").checked="true"===c,this.setScheme(Shuang.resource.schemeList[n],!1),this.setMode(Shuang.app.modeList[t].name),this.setPicVisible(a),this.setDarkMode(r),this.setAutoNext(i),this.setAutoClear(o),this.setShowKeys(u),this.setShowPressedKey(s),this.setDisableMobileKeyboard(c)},setScheme:function(e){var n=this,t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.config.scheme=Object.keys(Shuang.resource.schemeList)[Object.values(Shuang.resource.schemeList).findIndex(function(n){return n.startsWith(e)})],importJS("scheme/"+this.config.scheme,function(){t&&Shuang.app.action.next(),Shuang.core.current.beforeJudge(),n.updateKeysHint(),n.updateTips()}),writeStorage("scheme",this.config.scheme)},setMode:function(e){Shuang.core.history=[];for(var n=0,t=Object.entries(Shuang.app.modeList);n<t.length;n++){var a=_slicedToArray(t[n],2),r=a[0];if(a[1].name===e){this.config.mode=r,$("#mode-desc").innerText=Shuang.app.modeList[r].desc,$("#q").style.display="hard-random-without-pinyin"===r?"none":"block";break}}writeStorage("mode",this.config.mode)},setPicVisible:function(e){this.config.showPic=e.toString(),"false"===this.config.showPic?($("#keyboard").style.display="none",$("#pic-placeholder").style.display="none"):"true"===this.config.showPic&&($("#keyboard").style.display="block",$("#pic-placeholder").style.display="block"),writeStorage("showPic",this.config.showPic),this.updateKeysHintLayoutRatio()},setDarkMode:function(e){this.config.darkMode=e.toString(),"true"===this.config.darkMode?$("body").setAttribute("class","dark-mode"):"false"===this.config.darkMode&&$("body").setAttribute("class",""),writeStorage("darkMode",this.config.darkMode)},setAutoNext:function(e){this.config.autoNext=e.toString(),writeStorage("autoNext",this.config.autoNext)},setAutoClear:function(e){this.config.autoClear=e.toString(),writeStorage("autoClear",this.config.autoClear)},setShowKeys:function(e){this.config.showKeys=e.toString(),writeStorage("showKeys",this.config.showKeys),this.updateKeysHint()},setShowPressedKey:function(e){this.config.showPressedKey=e.toString(),writeStorage("showPressedKey",this.config.showPressedKey)},setDisableMobileKeyboard:function(e){this.config.disableMobileKeyboard=e.toString(),"true"===this.config.disableMobileKeyboard?$("#a").setAttribute("inputmode","none"):"false"===this.config.disableMobileKeyboard&&$("#a").setAttribute("inputmode","text"),writeStorage("disableMobileKeyboard",this.config.disableMobileKeyboard)},updateKeysHint:function(){var e,n=$$(".key"),t=_createForOfIteratorHelper(n);try{for(t.s();!(e=t.n()).done;){e.value.classList.remove("answer")}}catch(e){t.e(e)}finally{t.f()}if("false"!==this.config.showKeys){var a,r=_createForOfIteratorHelper(Shuang.core.current.scheme);try{for(r.s();!(a=r.n()).done;){var i=_slicedToArray(a.value,2),o=i[0],u=i[1];n["qwertyuiopasdfghjkl;zxcvbnm".indexOf(o)].classList.add("answer"),n["qwertyuiopasdfghjkl;zxcvbnm".indexOf(u)].classList.add("answer")}}catch(e){r.e(e)}finally{r.f()}this.updateKeysHintLayoutRatio()}},updateKeysHintLayoutRatio:function(){if(700>$("body").scrollWidth){var e=310===$("body").scrollWidth?310:$("#pic").scrollWidth,n=1874/1928*e/680;navigator&&navigator.userAgent&&/firefox/i.test(navigator.userAgent)?($("#keys").style.transform="scale(".concat(n,")"),$("#keys").style.transformOrigin="left top",$("#keys").style.margin="".concat(10*n,"px"),$("#pic-placeholder").style.height="".concat(e/680*300,"px")):($("#keys").style.marginLeft="10px",$("#keys").style.zoom=n,$("#pic-placeholder").style.zoom=n)}else navigator&&navigator.userAgent&&/firefox/i.test(navigator.userAgent)?($("#keys").style.transform="unset",$("#keys").style.transformOrigin="unset",$("#pic-placeholder").style.height="300px",$("#keys").style.margin="10px auto"):($("#keys").style.marginLeft="auto",$("#keys").style.zoom="unset",$("#pic-placeholder").style.zoom="unset")},updatePressedKeyHint:function(e){if("false"!==this.config.showPressedKey&&e){var n,t=$$(".key"),a=_createForOfIteratorHelper(t);try{for(a.s();!(n=a.n()).done;){n.value.classList.remove("pressed")}}catch(e){a.e(e)}finally{a.f()}var r="qwertyuiopasdfghjkl;zxcvbnm".indexOf(e.toLowerCase());-1===r||(t[r].classList.add("pressed"),setTimeout(function(){t[r].classList.remove("pressed")},250))}},updateTips:function(){var e=$("#tips");e.innerHTML="";var n=Shuang.resource.scheme[this.config.scheme];if(n.tips){var t,a=_createForOfIteratorHelper(Array.isArray(n.tips)?n.tips:[n.tips]);try{for(a.s();!(t=a.n()).done;){var r=t.value,i=document.createElement("div");i.classList.add("line"),i.innerHTML=r,e.appendChild(i)}}catch(e){a.e(e)}finally{a.f()}}$("#pic").setAttribute("src","img/".concat(this.config.scheme,".svg"))}},Shuang.app.action={init:function(){var e=this;function n(e,n,t){n.forEach(function(n){var t=document.createElement("option");n.disabled&&t.setAttribute("disabled","disabled"),t.innerText=n.text||n,e.appendChild(t)}),e.onchange=function(e){t(e.target.value)}}navigator&&navigator.userAgent&&/windows|linux/i.test(navigator.userAgent)&&(Shuang.resource.emoji={right:"✔️",wrong:"😉"});var t=Object.values(Shuang.resource.schemeList),a={common:t.filter(function(e){return!e.endsWith("*")}),uncommon:t.filter(function(e){return e.endsWith("*")&&!e.endsWith("**")}).map(function(e){return e.slice(0,-1)}),rare:t.filter(function(e){return e.endsWith("**")}).map(function(e){return e.slice(0,-2)})},r=[{disabled:!0,text:"常见"}].concat(_toConsumableArray(a.common),[{disabled:!0,text:"小众"}],_toConsumableArray(a.uncommon),[{disabled:!0,text:"爱好者"}],_toConsumableArray(a.rare));n($("#scheme-select"),r,function(e){Shuang.app.setting.setScheme(e)}),n($("#mode-select"),Object.values(Shuang.app.modeList).map(function(e){return e.name}),function(n){Shuang.app.setting.setMode(n),e.next()}),Shuang.core.current=new Shuang.core.model("sh","uang"),$("#q").innerText=Shuang.core.current.view.sheng+Shuang.core.current.view.yun,$("#dict").innerText=Shuang.core.current.dict,Shuang.app.setting.reload(),document.addEventListener("keydown",function(e){["Backspace","Tab","Enter"," "].includes(e.key)&&(e.preventDefault?e.preventDefault():event.returnValue=!1)}),document.addEventListener("keyup",function(n){e.keyPressed(n)}),$("#pic-switcher").addEventListener("change",function(e){Shuang.app.setting.setPicVisible(e.target.checked)}),$("#dark-mode-switcher").addEventListener("change",function(e){Shuang.app.setting.setDarkMode(e.target.checked)}),$("#auto-next-switcher").addEventListener("change",function(e){Shuang.app.setting.setAutoNext(e.target.checked)}),$("#auto-clear-switcher").addEventListener("change",function(e){Shuang.app.setting.setAutoClear(e.target.checked)}),$("#show-keys").addEventListener("change",function(e){Shuang.app.setting.setShowKeys(e.target.checked)}),$("#show-pressed-key").addEventListener("change",function(e){Shuang.app.setting.setShowPressedKey(e.target.checked)}),$("#disable-mobile-keyboard").addEventListener("change",function(e){Shuang.app.setting.setDisableMobileKeyboard(e.target.checked)}),$(".pay-name#alipay").addEventListener("mouseover",function(){Shuang.app.action.qrShow("alipay-qr")}),$("#alipay-qr").addEventListener("click",function(e){Shuang.app.action.qrHide(e.target)}),$("#alipay-qr").addEventListener("mouseout",function(e){Shuang.app.action.qrHide(e.target)}),$(".pay-name#wxpay").addEventListener("mouseover",function(){Shuang.app.action.qrShow("wxpay-qr")}),$("#wxpay-qr").addEventListener("click",function(e){Shuang.app.action.qrHide(e.target)}),$("#wxpay-qr").addEventListener("mouseout",function(e){Shuang.app.action.qrHide(e.target)}),$("#wx-name").addEventListener("mouseover",function(){Shuang.app.action.qrShow("wx-qr")}),$("#wx-qr").addEventListener("click",function(e){Shuang.app.action.qrHide(e.target)}),$("#wx-qr").addEventListener("mouseout",function(e){Shuang.app.action.qrHide(e.target)}),$("#dict").addEventListener("click",function(){Shuang.core.current.beforeJudge(),$("#a").value=Shuang.core.current.scheme.values().next().value,e.judge()}),window.addEventListener("resize",Shuang.app.setting.updateKeysHintLayoutRatio),window.resizeTo(window.outerWidth,window.outerHeight);for(var i=$$(".key"),o=function(e){i[e].addEventListener("click",function(){var n=new KeyboardEvent("keyup",{key:"qwertyuiopasdfghjkl;zxcvbnm"[e].toUpperCase()});n.simulated=!0,document.dispatchEvent(n)})},u=0;u<i.length;u++)o(u);this.redo()},keyPressed:function(e){switch(e.key){case"Backspace":this.redo();break;case"Tab":Shuang.core.current.beforeJudge(),$("#a").value=Shuang.core.current.scheme.values().next().value,this.judge();break;case"Enter":case" ":this.judge()?this.next():this.redo();break;default:e.simulated&&($("#a").value+=e.key.toLowerCase()),$("#a").value=$("#a").value.slice(0,2).replace(/[^a-zA-Z;]/g,"").split("").map(function(e,n){return 0===n?e.toUpperCase():e.toLowerCase()}).join(""),Shuang.app.setting.updatePressedKeyHint(e.key);var n=2===$("#a").value.length,t=this.judge();n&&(t&&"true"===Shuang.app.setting.config.autoNext?this.next(e.simulated):!t&&"true"===Shuang.app.setting.config.autoClear&&this.redo(e.simulated))}},judge:function(){var e=this,n=$("#a"),t=$("#btn"),a=_slicedToArray(n.value,2),r=a[0],i=a[1];return i&&Shuang.core.current.judge(r,i)?(t.onclick=function(){return e.next(!0)},t.innerText=Shuang.resource.emoji.right,!0):(t.onclick=function(){return e.redo(!0)},t.innerText=Shuang.resource.emoji.wrong,!1)},redo:function(e){var n=this;$("#a").value="",e||$("#a").focus(),$("#btn").onclick=function(){return n.redo(e)},$("#btn").innerText=Shuang.resource.emoji.wrong},next:function(e){switch(this.redo(e),Shuang.app.setting.config.mode){case"all-random":Shuang.core.current=Shuang.core.model.getRandom();break;case"all-order":Shuang.core.current=Shuang.core.model.getByOrder();break;case"hard-random":Shuang.core.current=Shuang.core.model.getHardRandom();break;case"hard-random-without-pinyin":do{Shuang.core.current=Shuang.core.model.getHardRandom()}while(Array.isArray(Shuang.core.current.dict))}Shuang.core.history.includes(Shuang.core.current.sheng+Shuang.core.current.yun)?this.next():Shuang.core.history=[].concat(_toConsumableArray(Shuang.core.history),[Shuang.core.current.sheng+Shuang.core.current.yun]).slice(-100),$("#q").innerText=Shuang.core.current.view.sheng+Shuang.core.current.view.yun,$("#dict").innerText=Shuang.core.current.dict,Shuang.core.current.beforeJudge(),Shuang.app.setting.updateKeysHint()},qrShow:function(e){$("#"+e).style.display="block"},qrHide:function(e){e.style.display="none"}},Shuang.app.action.init();