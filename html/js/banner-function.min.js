function getXML(e,n){const t=new XMLHttpRequest;t.open("GET",e,!0),t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){const e=t.responseXML;e?n(e):(console.error("XML解析失败"),n(null))}else console.error("请求失败，状态码："+t.status),n(null)},t.onerror=function(){console.error("请求发生错误"),n(null)},t.send()}function initBanner(){getXML("common/banners.xml",function(e){e?createBanner(e):console.error("无法加载轮播图数据")})}function createBanner(e){const n=e.getElementsByTagName("banner");if(!n||0===n.length)return;const t=document.querySelector(".banner-wrapper"),r=document.querySelector(".banner-pagination");t.innerHTML="",r.innerHTML="";for(let e=0;e<n.length;e++){const o=n[e],a=o.getElementsByTagName("image")[0].textContent,c=o.getElementsByTagName("title")[0].textContent;let i=!1;const s=o.getElementsByTagName("showtitle");s.length>0&&(i="true"===s[0].textContent.toLowerCase());const l=document.createElement("div");l.className="banner-item",l.innerHTML=`\n            <img src="${a}" alt="${c}">\n            ${i?`<div class="banner-title">${c}</div>`:""}\n        `,t.appendChild(l);const u=document.createElement("div");u.className="banner-pagination-bullet",0===e&&u.classList.add("active"),u.setAttribute("data-index",e),r.appendChild(u)}t.style.transform="translateX(0)",setupBannerLogic(n.length)}function setupBannerLogic(e){let n,t,r=0;document.querySelectorAll(".banner-item");const o=document.querySelectorAll(".banner-pagination-bullet"),a=document.querySelector(".banner-button-prev"),c=document.querySelector(".banner-button-next"),i=document.querySelector(".banner-buttons"),s=document.querySelector(".banner-container");function l(n){n<0&&(n=e-1),n>=e&&(n=0),r=n,document.querySelector(".banner-wrapper").style.transform=`translateX(-${100*r}%)`,o.forEach((e,n)=>{e.classList.toggle("active",n===r)})}function u(){l(r+1)}function d(){m(),n=setInterval(u,5e3)}function m(){n&&clearInterval(n)}o.forEach(e=>{e.addEventListener("click",function(){l(parseInt(this.getAttribute("data-index"))),m(),d()})}),a&&a.addEventListener("click",function(){l(r-1),m(),d()}),c&&c.addEventListener("click",function(){u(),m(),d()}),s&&(s.addEventListener("mouseenter",function(){t&&(clearTimeout(t),t=null),i.classList.add("visible"),m()}),s.addEventListener("mouseleave",function(){t=setTimeout(()=>{i.classList.remove("visible")},1e3),d()})),d()}document.addEventListener("DOMContentLoaded",function(){initBanner()});