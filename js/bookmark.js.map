{"version":3,"names":["document","addEventListener","doSaveScroll","localStorage","setItem","location","pathname","window","scrollY","scrollToMark","top","getItem","Number","isNaN","hash","anime","targets","scrollingElement","duration","easing","scrollTop","trigger","link","querySelector","classList","toggle","passive","complete","setTimeout","style","init","CONFIG","bookmark","save"],"sources":["bookmark.js.map"],"sourcesContent":["/* global CONFIG */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  'use strict';\n\n  const doSaveScroll = () => {\n    localStorage.setItem('bookmark' + location.pathname, window.scrollY);\n  };\n\n  const scrollToMark = () => {\n    let top = localStorage.getItem('bookmark' + location.pathname);\n    top = Number(top);\n    // If the page opens with a specific hash, just jump out\n    if (!isNaN(top) && location.hash === '') {\n      // Auto scroll to the position\n      window.anime({\n        targets  : document.scrollingElement,\n        duration : 200,\n        easing   : 'linear',\n        scrollTop: top\n      });\n    }\n  };\n  // Register everything\n  const init = function(trigger) {\n    // Create a link element\n    const link = document.querySelector('.book-mark-link');\n    // Scroll event\n    window.addEventListener('scroll', () => link.classList.toggle('book-mark-link-fixed', window.scrollY === 0), { passive: true });\n    // Register beforeunload event when the trigger is auto\n    if (trigger === 'auto') {\n      // Register beforeunload event\n      window.addEventListener('beforeunload', doSaveScroll);\n      document.addEventListener('pjax:send', doSaveScroll);\n    }\n    // Save the position by clicking the icon\n    link.addEventListener('click', () => {\n      doSaveScroll();\n      window.anime({\n        targets : link,\n        duration: 200,\n        easing  : 'linear',\n        top     : -30,\n        complete: () => {\n          setTimeout(() => {\n            link.style.top = '';\n          }, 400);\n        }\n      });\n    });\n    scrollToMark();\n    document.addEventListener('pjax:success', scrollToMark);\n  };\n\n  init(CONFIG.bookmark.save);\n});\n"],"mappings":"AAEAA,SAASC,iBAAiB,oBAAoB,KAC5C,aAEA,MAAMC,EAAe,KACnBC,aAAaC,QAAQ,WAAaC,SAASC,SAAUC,OAAOC,QAAQ,EAGhEC,EAAe,KACnB,IAAIC,EAAMP,aAAaQ,QAAQ,WAAaN,SAASC,UACrDI,EAAME,OAAOF,GAERG,MAAMH,IAA0B,KAAlBL,SAASS,MAE1BP,OAAOQ,MAAM,CACXC,QAAWhB,SAASiB,iBACpBC,SAAW,IACXC,OAAW,SACXC,UAAWV,GAEf,GAGW,SAASW,GAEpB,MAAMC,EAAOtB,SAASuB,cAAc,mBAEpChB,OAAON,iBAAiB,UAAU,IAAMqB,EAAKE,UAAUC,OAAO,uBAA2C,IAAnBlB,OAAOC,UAAgB,CAAEkB,SAAS,IAExG,SAAZL,IAEFd,OAAON,iBAAiB,eAAgBC,GACxCF,SAASC,iBAAiB,YAAaC,IAGzCoB,EAAKrB,iBAAiB,SAAS,KAC7BC,IACAK,OAAOQ,MAAM,CACXC,QAAUM,EACVJ,SAAU,IACVC,OAAU,SACVT,KAAW,GACXiB,SAAU,KACRC,YAAW,KACTN,EAAKO,MAAMnB,IAAM,EAAE,GAClB,IAAI,GAET,IAEJD,IACAT,SAASC,iBAAiB,eAAgBQ,EAC5C,CAEAqB,CAAKC,OAAOC,SAASC,KAAK","ignoreList":[]}