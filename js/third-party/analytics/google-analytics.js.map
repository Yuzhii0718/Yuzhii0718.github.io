{"version":3,"names":["CONFIG","google_analytics","only_pageview","sendPageView","hostname","location","uid","localStorage","getItem","Math","random","setItem","fetch","URLSearchParams","api_secret","measure_protocol_api_secret","measurement_id","tracking_id","method","headers","body","JSON","stringify","client_id","events","name","params","page_location","href","page_title","document","title","mode","addEventListener","window","dataLayer","gtag","push","arguments","Date","page_path","pathname"],"sources":["google-analytics.js.map"],"sourcesContent":["/* global CONFIG, dataLayer, gtag */\n\nif (!CONFIG.google_analytics.only_pageview) {\n  if (CONFIG.hostname === location.hostname) {\n    window.dataLayer = window.dataLayer || [];\n    window.gtag = function() {\n      dataLayer.push(arguments);\n    };\n    gtag('js', new Date());\n    gtag('config', CONFIG.google_analytics.tracking_id);\n\n    document.addEventListener('pjax:success', () => {\n      gtag('event', 'page_view', {\n        page_location: location.href,\n        page_path    : location.pathname,\n        page_title   : document.title\n      });\n    });\n  }\n} else {\n  const sendPageView = () => {\n    if (CONFIG.hostname !== location.hostname) return;\n    const uid = localStorage.getItem('uid') || (Math.random() + '.' + Math.random());\n    localStorage.setItem('uid', uid);\n    fetch(\n      'https://www.google-analytics.com/mp/collect?' + new URLSearchParams({\n        api_secret    : CONFIG.google_analytics.measure_protocol_api_secret,\n        measurement_id: CONFIG.google_analytics.tracking_id\n      }),\n      {\n        method : 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          client_id: uid,\n          events   : [\n            {\n              name  : 'page_view',\n              params: {\n                page_location: location.href,\n                page_title   : document.title\n              }\n            }\n          ]\n        }),\n        mode: 'no-cors'\n      }\n    );\n  };\n  document.addEventListener('pjax:complete', sendPageView);\n  sendPageView();\n}\n"],"mappings":"AAEA,GAAKA,OAAOC,iBAAiBC,cAiBtB,CACL,MAAMC,EAAe,KACnB,GAAIH,OAAOI,WAAaC,SAASD,SAAU,OAC3C,MAAME,EAAMC,aAAaC,QAAQ,QAAWC,KAAKC,SAAW,IAAMD,KAAKC,SACvEH,aAAaI,QAAQ,MAAOL,GAC5BM,MACE,+CAAiD,IAAIC,gBAAgB,CACnEC,WAAgBd,OAAOC,iBAAiBc,4BACxCC,eAAgBhB,OAAOC,iBAAiBgB,cAE1C,CACEC,OAAS,OACTC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBC,UAAWjB,EACXkB,OAAW,CACT,CACEC,KAAQ,YACRC,OAAQ,CACNC,cAAetB,SAASuB,KACxBC,WAAeC,SAASC,WAKhCC,KAAM,WAET,EAEHF,SAASG,iBAAiB,gBAAiB9B,GAC3CA,GACF,MAjDMH,OAAOI,WAAaC,SAASD,WAC/B8B,OAAOC,UAAYD,OAAOC,WAAa,GACvCD,OAAOE,KAAO,WACZD,UAAUE,KAAKC,UACjB,EACAF,KAAK,KAAM,IAAIG,MACfH,KAAK,SAAUpC,OAAOC,iBAAiBgB,aAEvCa,SAASG,iBAAiB,gBAAgB,KACxCG,KAAK,QAAS,YAAa,CACzBT,cAAetB,SAASuB,KACxBY,UAAenC,SAASoC,SACxBZ,WAAeC,SAASC,OACxB","ignoreList":[]}