{"version":3,"names":["document","addEventListener","CONFIG","disqus","count","window","DISQUSWIDGETS","getCount","reset","NexT","utils","getScript","shortname","attributes","id","defer","page","comments","disqus_config","this","url","permalink","identifier","path","title","i18n","language","loadComments","then","DISQUS","reload","config","dataset","timestamp","Date"],"sources":["disqus.js.map"],"sourcesContent":["/* global NexT, CONFIG, DISQUS */\n\ndocument.addEventListener('page:loaded', () => {\n\n  if (CONFIG.disqus.count) {\n    if (window.DISQUSWIDGETS) {\n      window.DISQUSWIDGETS.getCount({ reset: true });\n    } else {\n      // Defer loading until the whole page loading is completed\n      NexT.utils.getScript(`https://${CONFIG.disqus.shortname}.disqus.com/count.js`, {\n        attributes: { id: 'dsq-count-scr', defer: true }\n      });\n    }\n  }\n\n  if (CONFIG.page.comments) {\n    // `disqus_config` should be a global variable\n    // See https://help.disqus.com/en/articles/1717084-javascript-configuration-variables\n    window.disqus_config = function() {\n      this.page.url = CONFIG.page.permalink;\n      this.page.identifier = CONFIG.page.path;\n      this.page.title = CONFIG.page.title;\n      if (CONFIG.disqus.i18n.disqus !== 'disqus') {\n        this.language = CONFIG.disqus.i18n.disqus;\n      }\n    };\n    NexT.utils.loadComments('#disqus_thread').then(() => {\n      if (window.DISQUS) {\n        DISQUS.reset({\n          reload: true,\n          config: window.disqus_config\n        });\n      } else {\n        NexT.utils.getScript(`https://${CONFIG.disqus.shortname}.disqus.com/embed.js`, {\n          attributes: { dataset: { timestamp: '' + +new Date() } }\n        });\n      }\n    });\n  }\n\n});\n"],"mappings":"AAEAA,SAASC,iBAAiB,eAAe,KAEnCC,OAAOC,OAAOC,QACZC,OAAOC,cACTD,OAAOC,cAAcC,SAAS,CAAEC,OAAO,IAGvCC,KAAKC,MAAMC,UAAU,WAAWT,OAAOC,OAAOS,gCAAiC,CAC7EC,WAAY,CAAEC,GAAI,gBAAiBC,OAAO,MAK5Cb,OAAOc,KAAKC,WAGdZ,OAAOa,cAAgB,WACrBC,KAAKH,KAAKI,IAAMlB,OAAOc,KAAKK,UAC5BF,KAAKH,KAAKM,WAAapB,OAAOc,KAAKO,KACnCJ,KAAKH,KAAKQ,MAAQtB,OAAOc,KAAKQ,MACI,WAA9BtB,OAAOC,OAAOsB,KAAKtB,SACrBgB,KAAKO,SAAWxB,OAAOC,OAAOsB,KAAKtB,OAEvC,EACAM,KAAKC,MAAMiB,aAAa,kBAAkBC,MAAK,KACzCvB,OAAOwB,OACTA,OAAOrB,MAAM,CACXsB,QAAQ,EACRC,OAAQ1B,OAAOa,gBAGjBT,KAAKC,MAAMC,UAAU,WAAWT,OAAOC,OAAOS,gCAAiC,CAC7EC,WAAY,CAAEmB,QAAS,CAAEC,UAAW,KAAM,IAAIC,QAElD,IAEJ","ignoreList":[]}