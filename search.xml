<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>欢迎来到 Yuzhii 的博客</title>
    <url>/1970/01/01/1/</url>
    <content><![CDATA[<div class="welcome">
  <p>L'homme est né libre, et partout il est dans les fers.</p>
</div>
<style>
.welcome {
  text-align: center;
}
.welcome p {
  font-size: 24px;
  color: #666;
  margin-top: 10px;
  font-style: italic;
  font-family: 'Cinzel Decorative', sans-serif;
  transition: all 0.2s ease;
}
.welcome p:hover {
    font-size: 28px;
    color: #4a6cf7;
}
</style>
<style>
:root {
  /* 颜色变量 */
  --primary-color: #4a6cf7;
  --primary-hover: #3151e4;
  --text-color: #333;
  --background: #f9f9f9;
  --card-bg: #ffffff;
  --shadow-color: rgba(0, 0, 0, 0.1);
  --transition-speed: 0.3s;
}

/* 卡片容器 */
.card-container {
  display: flex;
  overflow-x: auto;
  scroll-snap-type: x mandatory; /* 使滚动更平滑 */
  gap: 16px; /* 卡片之间的间距 */
  padding: 16px;
  -webkit-overflow-scrolling: touch; /* 在iOS上提供更流畅的滚动 */
  scroll-behavior: smooth; /* 添加平滑滚动效果 */
}

/* 卡片样式 */
.card {
  flex: 0 0 auto; /* 防止卡片被压缩 */
  width: calc(33.333% - 11px); /* 一行显示3个卡片，考虑间距 */
  min-width: 280px; /* 设置最小宽度，防止卡片太小 */
  scroll-snap-align: center; /* 改为center以便居中对齐 */
  transition: all 0.3s ease; /* 添加过渡效果 */
  height: 200px; /* 卡片高度 */
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 4px 15px var(--shadow-color);
  cursor: pointer;
  position: relative;
  overflow: hidden;
  border: 1px solid rgba(0, 0, 0, 0.05);
}

/* 鼠标悬停动画效果 */
.card:hover {
  transform: scale(1.05); /* 放大卡片 */
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2); /* 增强阴影 */
  z-index: 10; /* 确保悬停的卡片在其他卡片上方 */
}

/* 卡片标题 */
.card-title {
  font-size: 1.4rem;
  margin-bottom: 12px;
  color: var(--text-color);
  position: relative;
  transition: color var(--transition-speed);
}

.card:hover .card-title {
  color: var(--primary-color);
}

/* 卡片标题下划线动画 */
.card-title::after {
  content: '';
  position: absolute;
  bottom: -5px;
  left: 0;
  width: 0;
  height: 2px;
  background-color: var(--primary-color);
  transition: width var(--transition-speed) ease;
}

.card:hover .card-title::after {
  width: 50px;
}

/* 卡片内容 */
.card-content {
  color: #666;
  font-size: 0.95rem;
}

/* 隐藏滚动条样式（可选） */
.card-container::-webkit-scrollbar {
  display: none;
}
.card-container {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}
</style>
<div class="card-container">
  <div class="card">
      <h2 class="card-title">关于我</h2>
      <p class="card-content">
      关于我的内容
      </p>
      <a href="/about/index.html" class="btn">查看</a>
  </div>
  <div class="card">
      <h2 class="card-title">友链</h2>
      <p class="card-content">
      成为我的朋友，互相学习，共同进步。
      </p>
      <a href="/links/index.html" class="btn">查看</a>
  </div>
  <div class="card">
      <h2 class="card-title">Playlist</h2>
      <p class="card-content">
      或许我们可以一起听歌，分享音乐的乐趣。
      </p>
      <a href="/playlist/index.html" class="btn">查看</a>
  </div>
</div>
<script>
  // 添加JavaScript使卡片在鼠标悬停时居中
  document.addEventListener('DOMContentLoaded', function() {
    const cards = document.querySelectorAll('.card');
    const container = document.querySelector('.card-container');

    cards.forEach(card => {
      card.addEventListener('mouseenter', function() {
        // 计算卡片的中心位置
        const cardRect = card.getBoundingClientRect();
        const containerRect = container.getBoundingClientRect();

        // 计算需要滚动的距离，使卡片居中
        const cardCenter = cardRect.left + cardRect.width / 2;
        const containerCenter = containerRect.left + containerRect.width / 2;
        const scrollAmount = container.scrollLeft + (cardCenter - containerCenter);

        // 平滑滚动到计算出的位置
        container.scrollTo({
          left: scrollAmount,
          behavior: 'smooth'
        });
      });
    });
  });
</script>
]]></content>
  </entry>
  <entry>
    <title>达发 airoha en7562ct SoC 构成分析以及 OpenWrt 支持研究（下）</title>
    <url>/2025/07/10/1/</url>
    <content><![CDATA[<style>
:root {
  /* 颜色变量 */
  --primary-color: #4a6cf7;
  --primary-hover: #3151e4;
  --text-color: #333;
  --background: #f9f9f9;
  --card-bg: #ffffff;
  --shadow-color: rgba(0, 0, 0, 0.1);
  --transition-speed: 0.3s;
}

/* 卡片样式 */
.card {
  flex: 0 0 auto; /* 防止卡片被压缩 */
  width: calc(33.333% - 11px); /* 一行显示3个卡片，考虑间距 */
  min-width: 280px; /* 设置最小宽度，防止卡片太小 */
  scroll-snap-align: center; /* 改为center以便居中对齐 */
  transition: all 0.3s ease; /* 添加过渡效果 */
  height: 160px; /* 卡片高度 */
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 4px 15px var(--shadow-color);
  cursor: pointer;
  position: relative;
  overflow: hidden;
  border: 1px solid rgba(0, 0, 0, 0.05);
}

/* 鼠标悬停动画效果 */
.card:hover {
  transform: scale(1.05); /* 放大卡片 */
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2); /* 增强阴影 */
  z-index: 10; /* 确保悬停的卡片在其他卡片上方 */
}

/* 卡片标题 */
.card-title {
  font-size: 1.4rem;
  margin-bottom: 12px;
  color: var(--text-color);
  position: relative;
  transition: color var(--transition-speed);
}

.card:hover .card-title {
  color: var(--primary-color);
}

/* 卡片标题下划线动画 */
.card-title::after {
  content: '';
  position: absolute;
  bottom: -5px;
  left: 0;
  width: 0;
  height: 2px;
  background-color: var(--primary-color);
  transition: width var(--transition-speed) ease;
}

.card:hover .card-title::after {
  width: 50px;
}

/* 卡片内容 */
.card-content {
  color: #666;
  font-size: 0.95rem;
}

/* 隐藏滚动条样式（可选） */
.card-container::-webkit-scrollbar {
  display: none;
}
.card-container {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}
</style>
<p>接上文 <a href>SDG320 en7562ct ax3000 研究（上）</a></p>
<h2 id="SoC-构成研究">SoC 构成研究</h2>
<p>提出出来的 dts 是 en7523 的，有点意思，看起来这颗 SoC 不简单，应该是胶水封装的。</p>
<div class="card">
    <p class="card-title">相关文件</p>
    <p class="card-content">
    <b>有兴趣就研究一下吧！</b>
    </p>
    <a href="./collection.tar.gz" download="en7562-collection.tar.gz" target="_blank" class="btn" data-pjax-state="load">下载</a>
</div>
<h3 id="从原厂的编译信息分析">从原厂的编译信息分析</h3>
<p>/userfs/profile.cfg 有着一些编译信息。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;512k[bootloader],12m[rescue],1280k[reservearea],256k[romfile],5m[kernela],33m[rootfsa],5m[kernelb],33m[rootfsb],6m[data],50m[java],78m[osgi]&quot;</span><br></pre></td></tr></table></figure>
<p>这个分区信息是移动版本的，其他版本的是下面这样的</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;512k[bootloader],12m[rescue],1280k[reservearea],256k[romfile],5m[kernela],33m[rootfsa],5m[kernelb],33m[rootfsb],6m[data],16m[plugin1],16m[plugin2],96m[plugin3]&quot;</span><br></pre></td></tr></table></figure>
<p>UBOOT 2014 版本 ATF2_1</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TCSUPPORT_ARM_SECURE_BOOT=y</span><br><span class="line"># TCSUPPORT_SECURE_BOOT is not set</span><br></pre></td></tr></table></figure>
<p>这两个 SECURE_BOOT 有什么区别吗？应该上面这个是 ATF 的。</p>
<p>如果有高手，可以结合开源的 ATF 代码，尝试制作一个多功能 UBOOT，就像 uboot-mt798x 一样</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">TCSUPPORT_ETHPHY=5R_DIS</span><br><span class="line">TCSUPPORT_7562_CD=y</span><br><span class="line">TCSUPPORT_GCC10_3_0_GLIBC2_32_KERNEL5_4=y</span><br><span class="line"><span class="comment"># WAN Transfer Mode Support</span></span><br><span class="line">TCSUPPORT_SWITCH_8850=y</span><br><span class="line">TCSUPPORT_BUSYBOXCONFIG_TC3262=y</span><br></pre></td></tr></table></figure>
<p>这里只选取了最重要的差别，其他系统定义上的差别、驱动特性的差别没有给出。</p>
<p><code>TCSUPPORT_BUSYBOXCONFIG_TC3262=y</code> 指定了使用了 TC3262 的 BusyBox 配置。TC3262 是 TrendChip 的一个 SoC 系列，可能是为了兼容性或特定功能。</p>
<blockquote>
<p>TcBoot 是从 TrendChip 的 TC3262 衍生而来的极简引导加载程序。可能是为了支持 A/B 分区的相关特性，或是 NAND BBT/BMT 相关功能。</p>
</blockquote>
<p>某些编译信息，来自固件里打包的某些文件，这应该是编译 Airoha SDK 的工具链。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root@Ubuntu:tmp# /home/sdks/OEM/airoha_en75xx-evb2023/bin/arm-linux-gcc -v</span><br><span class="line">Using built-in specs.</span><br><span class="line">COLLECT_GCC=/home/sdks/OEM/buildroot-gcc1030-glibc232_kernel5_4/bin/arm-linux-gcc.br_real</span><br><span class="line">COLLECT_LTO_WRAPPER=/home/sdks/OEM/buildroot-gcc1030-glibc232_kernel5_4/bin/../libexec/gcc/arm-buildroot-linux-gnueabi/10.3.0/lto-wrapper</span><br><span class="line">Target: arm-buildroot-linux-gnueabi</span><br><span class="line">Configured with: ./configure --prefix=/opt/trendchip/buildroot-gcc1030-glibc232_kernel5_4 --sysconfdir=/opt/trendchip/buildroot-gcc1030-glibc232_kernel5_4/etc --enable-static --target=arm-buildroot-linux-gnueabi --with-sysroot=/opt/trendchip/buildroot-gcc1030-glibc232_kernel5_4/arm-buildroot-linux-gnueabi/sysroot --enable-__cxa_atexit --with-gnu-ld --disable-libssp --disable-multilib --disable-decimal-float --with-gmp=/opt/trendchip/buildroot-gcc1030-glibc232_kernel5_4 --with-mpc=/opt/trendchip/buildroot-gcc1030-glibc232_kernel5_4 --with-mpfr=/opt/trendchip/buildroot-gcc1030-glibc232_kernel5_4 --with-pkgversion=&#x27;Buildroot -g413d1bb&#x27; --with-bugurl=http://bugs.buildroot.net/ --without-zstd --disable-libquadmath --disable-libquadmath-support --enable-tls --enable-plugins --enable-lto --enable-threads --without-isl --without-cloog --with-float=soft --with-abi=aapcs-linux --with-cpu=cortex-a7 --with-float=soft --with-mode=arm --enable-languages=c,c++ --with-build-time-tools=/opt/trendchip/buildroot-gcc1030-glibc232_kernel5_4/arm-buildroot-linux-gnueabi/bin --enable-shared --disable-libgomp</span><br><span class="line">Thread model: posix</span><br><span class="line">Supported LTO compression algorithms: zlib</span><br><span class="line">gcc version 10.3.0 (Buildroot -g413d1bb)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>没有源码，看个乐呵。</p>
</blockquote>
<h3 id="设备树构建猜想">设备树构建猜想</h3>
<p>以下是进行推测的过程，可以直接跳到末尾最新的部分。</p>
<p>当然，<strong>这些都是推测，不保准准确，没有看到 dieshot 时，谁也不能确定</strong>。</p>
<hr>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL29wZW53cnQvb3BlbndydC9jb21taXQvZDlmYTE1NWQwMTNkYjk5MmNmMzkyODU3NTZlMTUzMTgyNmQ5YjU0ZQ==">airoha: add support for Gemtek W1700K<i class="fa fa-external-link-alt"></i></span></p>
<p>这个提交展示了如何在带有 Secure Boot 的达发设备上引导系统。W1700K 是一个基于 an7581 的设备，使用了 Secure Boot 机制。</p>
<p>我感觉有戏，感觉可以为该设备提供 OpenWrt 支持。但是主线上的 an7523 只有验证样品的 DTS 文件，没有模板。</p>
<p>不过话又说会来了，这个 dts 貌似不太完整，比如 keys、led 的 GPIO 都没有，而且也没有分区信息，应该是藏在内核脚本里了，还是要ttl看启动信息。</p>
<p>见参考资料 <sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>。</p>
<p>gdma 应该是一个 dma 设备，而 gdm 是一个以太网 mac 设备，frame_engine 集成了以太网相关的部分。</p>
<p>在 <sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup> 中提到：</p>
<blockquote>
<p>R5408M 的四个 2.5G 口是直通 CPU 的，…CPU EN7562C 里面集成有一个千兆交换机，5-8 号千兆口就是走这个交换芯片。…</p>
</blockquote>
<p>参考<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>:</p>
<blockquote>
<p>…CPU型号是EN7652CT，双核A53架构，频率1GHz，集成4个千兆PHY。…</p>
</blockquote>
<p>以及原厂编译配置文件中的</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">TCSUPPORT_HSGMII_LAN=y</span><br></pre></td></tr></table></figure>
<p>结合 <sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup> 、<sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup> 的信息以及使用 <code>ifconfig</code>/<code>iwconfig</code> 命令查看到的网口信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">eth0</span><br><span class="line">eth0.2</span><br><span class="line">eth0.3</span><br><span class="line">eth0.4</span><br></pre></td></tr></table></figure>
<p>可以确定，这确实是有一个千兆交换机内置在 en7562ct SoC 之中。GMAC1 扩展支持 SGMII 和 HSGMII</p>
<div class="card">
    <p class="card-title">EN8850 SERIES</p>
    <p class="card-content">
 <a>EN8850 是达发的一款交换机芯片，支持多种网络接口和协议</a>
    </p>
    <a href="./EN8850SERIES.pdf" download="EN8850SERIES.pdf" target="_blank" class="btn" data-pjax-state="load">下载</a>
</div>
<p>估计应该和 <code>EN8850DRE</code> 差不多</p>
<p>而设备树中包含了 <code>wdma</code> 和 <code>wed</code>，设备树中使用 <code>en751221</code> 作为兼容硬件，可能同样兼容 EN7526。</p>
<p>Pcie 方面，en7562ct 使用了兼容 mt7520 的 pcie 通道</p>
<p>而 hsgmii 是提供 2.5Gbps 内部接口(Interface)，或为 pon/xpon 提供支持。</p>
<p>参考<sup class="footnote-ref"><a href="#fn3" id="fnref3:1">[3:1]</a></sup>:</p>
<blockquote>
<p>…T和U的差别，从价格和扩展性来看，就差在3个HSGMII接口上。…</p>
</blockquote>
<p>千兆网口(PHY)来自内部的以太网交换机芯片。</p>
<blockquote>
<p>额外发现，airoha 的交换机芯片，后缀不一样，它们的结构可能也不相同，故此驱动可能也并不通用，特定型号只能期待 MTK/AIROHA 开源了。</p>
</blockquote>
<p>以及可以发现，小米 BE5000，使用了 en7563PT 处理器，推测该芯片应该是 en7562 的更新换代。以及还有一款 极客AP 也使用了 en7563pt 方案。</p>
<p>解包小米固件后，发现该 dts 与 an7562 的内核提取 dts 非常相似，也是基于 an7523 的设备树，但是多了 an7581 的 oop-table 频率表，GPIO、分区表、thermal-zones等。</p>
<p>另外，我们也可以查看另一个不同架构 SoC en751221 的相关资料，已经有人发表相关的文章。具体见参考资料 <sup class="footnote-ref"><a href="#fn1" id="fnref1:1">[1:1]</a></sup>。也已经有人为其适配 Linux/OpenWrt。</p>
<hr>
<p>en7561 一般搭配 MT7905DEN+MT7975DN 配置成 ax1800<br>
en7562 一般搭配 MT7976DN+MT7916AN 配置成 ax3000<br>
an7963 一般搭配 MT7976CN+MT7991AV/BV 配置成 be3600/be5000</p>
<blockquote>
<p>另外，airoha 的命名很混乱，en7561 是 mips 架构的，en7562/7563 是 arm 架构的，据说 en7561 是 mt7621 的改版，如果要尝试为 en7561 提供 OpenWrt 支持，可以参考 mt7621 的相关代码。</p>
</blockquote>
<hr>
<p>6月16日更新</p>
<p>这 econet 到底是 MTK 的子公司，其芯片（en7562）构成充满了 MTK 技术的影子；SoC 与 mt7622 相似、DMA 可能来自 RaLink、MT7622 的 PCIe、mt7621 的 i2c、mt7530 类似的交换机、mt7510 改进而来的 spi 控制器，结合了 MTK ATF 与 tc3262 的 U-Boot。。。</p>
<hr>
<p>7月10日更新</p>
<p>通过观察市场上的产品，我们可以确定，econet en7523 系列的 SoC 是层层改进的结果。</p>
<p>并且它们有一个特点，en752x 基本都在国外市场上销售，而 en756x 系列则主要在国内市场上销售。</p>
<h3 id="结论">结论</h3>
<p>7月9日更新</p>
<p>概述：</p>
<p>EN7562CT 是用于 xPON 应用的高度集成的单芯片解决方案。</p>
<p>它集成了四个以太网 GPHY、一个 DDR3 控制器、一个 USB3.0 Host、一个 USB2.0 Host、两个 PCIe Gen2 端口，以及用于 VoIP 应用的具有 ISI/ZSI 兼容接口的 PCM 控制器，从而完全满足未来智能家居网关的要求。</p>
<p>EN7562CT 采用 1.0GHz ARM CA53 双核 CPU 和强大的 Xmart PacketAccelerator（XPA），它可以支持无与伦比的网络功能，具有极高的数据包处理能力。</p>
<p>通过 XPA，EN7562CT 执行高级 QoS、安全性和灵活的协议管理。</p>
<p>EN7562CT 还集成了三个专有的 RISC-V 内核，以加速 WiFi 和安全应用程序。</p>
<p>EN7562CT 采用领先的节能技术制造系统板设计简单易行，提供系统成本低、超低能耗的独特消费者解决方案</p>
<hr>
<p>特性：</p>
<p>高度集成的广域网接口</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>符合 ITU-T G.984/G.988和IEEE802.3ah 标准</p>
</li>
<li class="lvl-2">
<p>支持主动以太网</p>
</li>
<li class="lvl-2">
<p>提供 MIB 计数器和嗅探器功能，用于快速现场调试非匹配和 Xmart 数据包处理引擎</p>
</li>
<li class="lvl-2">
<p>Xmart packet 加速器可以支持线速数据包处理和转发无需 CPU 参与的能力</p>
</li>
<li class="lvl-2">
<p>支持高达 32K 的流量，包括 L2 网桥、IPv4 NAT/路由、IPv4 NAPT、IPv6<br>
3/5 元组路由、6RD 和 DS-LITE、NPTv6、VxLAN、NVGRE</p>
</li>
<li class="lvl-2">
<p>强大的流量分类引擎解析 L2 到 L4 头信息</p>
</li>
<li class="lvl-2">
<p>TR-156 和 CTC Spec 中定义的灵活 VLAN 转换功能。</p>
</li>
<li class="lvl-2">
<p>支持 L2 和 L3 组播流和组播 VLAN 转换</p>
</li>
<li class="lvl-2">
<p>可配置的数据包缓冲区位置，具有高效的基于页面的链表缓冲区管理</p>
</li>
<li class="lvl-2">
<p>有效的 QoS 方案，包括按流 TrTCM 流量整形、SP/WRR/SP+WRR<br>
用于交通调度，尾部下降和红色用于拥堵处理</p>
</li>
<li class="lvl-2">
<p>支持高达 16K 的 jumboframe<br>
高度集成的局域网接口</p>
</li>
<li class="lvl-2">
<p>x4 GEPHY</p>
</li>
<li class="lvl-2">
<p>x3 HSGMII 与 PCIE/USB SerDes 的组合。强大的 SoC 平台</p>
</li>
<li class="lvl-2">
<p>1.0GHz ARM CA53 双核 CPU，256K L2 缓存</p>
</li>
<li class="lvl-2">
<p>集成三个专有的 RISC-V 内核，用于 WiFi 和安全加速</p>
</li>
<li class="lvl-2">
<p>支持高达 1GB DDR3-1866 SDRAM</p>
</li>
<li class="lvl-2">
<p>支持 SPI NOR/NAND 闪存</p>
</li>
<li class="lvl-2">
<p>两个用于双频 WiFi 应用的 PCIe Gen2 接口</p>
</li>
<li class="lvl-2">
<p>一个 USB3.0 接口和一个 USB2.0 接口</p>
</li>
<li class="lvl-2">
<p>提供一个 PCM 或两个 ZSI/ISI 接口</p>
</li>
<li class="lvl-2">
<p>用于安全应用的内置加密引擎</p>
</li>
<li class="lvl-2">
<p>两个 UART</p>
</li>
<li class="lvl-2">
<p>一个 I2C 主机和一个 I2C slave</p>
</li>
</ul>
<hr>
<p>方框图：</p>
<p><img src="./BLOCKDIAGRAM.png" alt></p>
<blockquote>
<p>注意：图中相关组件标注的型号只是代表该组件的功能相近，并不带不一定是该型号的组件或兼容组件。</p>
</blockquote>
<p>SerDes配置：</p>
<table>
<thead>
<tr>
<th>SerDes 名称</th>
<th>模式</th>
</tr>
</thead>
<tbody>
<tr>
<td>PONSerDes</td>
<td>PON/HSGMII/5GBASE-R</td>
</tr>
<tr>
<td>PCIe Gen2 SerDes</td>
<td>PCIe Gen2/HSGMII</td>
</tr>
<tr>
<td>USB3 SerDes</td>
<td>USB3/HSGMII</td>
</tr>
</tbody>
</table>
<hr>
<p>封装工艺:</p>
<p>LFBGA-361</p>
<hr>
<p>基于 en7523 的 SoC</p>
<p>EN7523DT<br>
EN7523DTM<br>
EN7523DU<br>
EN7523GU<br>
EN7523SU</p>
<p>EN7529CT<br>
EN7529CTM<br>
EN7529CU<br>
EN7529DT<br>
EN7529DTM<br>
EN7529DU<br>
EN7529GTH<br>
EN7529GTS<br>
EN7529IT<br>
EN7529ITM</p>
<p>EN7562CT<br>
EN7562CTM<br>
EN7562CU<br>
EN7562DT<br>
EN7562DTM<br>
EN7562DU<br>
EN7562GTH<br>
EN7562GTS</p>
<p>达发 ARM(a53/v7l) 命名规则：</p>
<p>第一位后缀代表频率，从默认频率到最高频率依次为 C(1GHZ)、D(1.2GHZ)、G(1.3GHZ)、P(1.4GHZ)，其中 S/I 是特殊版本（一般是性能更强）。注：括号内的频率并不一定是实际频率，只是为了便于理解。</p>
<p>第二位后缀代表内存封装，T 代表使用外置 DDR，U 代表使用内置 DDR。</p>
<p>第三位后缀意义不明，可能是内部的版本号或是其他含义，目前没有量产的版本。</p>
<blockquote>
<p>其实这个频率，他是可以超频的，也是可以降频的。如果未来有人研究的话，是可以将最基础的 C 版本超频到 1.4GHz 的，只要你想，改 bl2 的源码，超到 2GHZ 都不是问题，不过这颗芯片发热量巨大，即使降频也很难控制温度。不过用其他版本的厂商实在不多，也没有源码。此外，目前 airoha 新版 SDK(airoha SDK 7.3 kernel 5.4) 是统一 SDK，也就是说，只要你能拿到这个 SDK 的源码，你就可以编译出所有版本的 SoC 的固件（通过不同的 mak 配置）。</p>
</blockquote>
<hr>
<p>基于 EN7528 的 SoC</p>
<p>EN7528HU<br>
EN7528DU<br>
EN7561DU<br>
EN7526FH_EN7528DU<br>
EN7521G_EN7528DU</p>
<p>基于 EN7580 的 SoC</p>
<p>EN7580GT<br>
EN7580ST<br>
EN7580GAT<br>
EN7565</p>
<p>基于 EN7516 的 SoC</p>
<p>EN7516G</p>
<p>基于 EN7527 的 SoC</p>
<p>EN7527G<br>
EN7561G</p>
<p>基于 EN7512 的 SoC</p>
<p>EN7512<br>
EN7513<br>
EN7513G</p>
<p>基于 EN7521, EN7521FC 的 SoC</p>
<p>EN7521FCUD<br>
EN7521F<br>
EN7521S<br>
EN7526D<br>
EN7526F<br>
EN7526G<br>
EN7526FT<br>
EN7526FP<br>
EN7526FT_C</p>
<h2 id="OpenWrt-支持的可能性">OpenWrt 支持的可能性</h2>
<p>6月13日记录</p>
<p>今天有一个新的发现：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21lcmJhbmFuL2Fpcm9oYV9tbC90cmVlL21haW4=">airoha_ml<i class="fa fa-external-link-alt"></i></span></p>
<p>随后，我又从这些文件中发现了一个名为 <span class="exturl" data-url="aHR0cHM6Ly9kZXYuaW9wc3lzLmV1L2ZlZWQvdGFyZ2V0cw==">IOWRT Airoha integration<i class="fa fa-external-link-alt"></i></span>，目的是移植 Airoha SDK 到 IOWrt(Based On Openwrt)。</p>
<h3 id="6月15日记录">6月15日记录</h3>
<p>今天我又发现了一款使用 en7562ct 的设备（不过无线使用 7915）的 make config 文件，发现这是使用21年11月的编译配置，此时它直接使用了 en7523 相关配置，全然没有使用 8850 交换机选项和其他有区别于 en7523 的配置。</p>
<p>而这些变化发生于 22 年某个时间，发生这些变化的 SDK 来自 23 年，所以我更能确定了，早期的 en7562 设备直接使用 en7523 的设备树进行编译。</p>
<p>关于交换机，在设备树中的 Frame_Engine 设备中，就有一个交换机的节点。起初查看 /proc/device-tree/ 目录下的设备树文件时，没有发现交换机设备/以太网设备，我还以为是 airoha SDK 的原因，认为实际存在但没在设备树中显示，因为这些设备树的命名难以猜测，以及该设备运行的系统与寻常 linux 不同，似乎叫 tclinux。</p>
<p>即便不启用属于 en7562 家族的特性，它照样能够运行。</p>
<blockquote>
<p>是否好奇没有分区表要怎么启动？我也很好奇，然后查阅了文档，像一些 gpio，分区表，都可以写在 uboot 的环境变量/启动命令中。所以不必纠结分区表了和设备树了。这倒是提醒我备份 u-boot 环境变量十分重要。</p>
</blockquote>
<p>此外，我发现，userfs/ 目录下，存在：7523duled.conf、7523guled.conf、7529_62led.conf、7529_cd.conf、led.conf、led_fpga.conf 等文件，这些文件可能是用于配置 LED 灯的。所以，达发的 led gpio 可能是通用的，但也可能是厂商内部定义的。</p>
<p>通过查看 IOWrt Airoha integration 的代码，发现他们的也使用类似 airoha 的 led 配置方式。同样存在于 <code>userfs/led.conf</code> 文件中。</p>
<p>通过比较，可以确定 <code>led.conf</code> 并非是通用的，而是特定于某个设备的配置文件。适配系统时，需要通过 patch 的方式来修改该文件。</p>
<h3 id="6月16日更新">6月16日更新</h3>
<p>看来为路由器制作系统的想法还是有一些问题，当我下克隆源码后，阅读 <span class="exturl" data-url="aHR0cDovL1JFQURNRS5tZA==">README.md<i class="fa fa-external-link-alt"></i></span> 文件时，发现了一段隐藏的文本，我已将其翻译为中文：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">这个机器可以作为路由器，只要有一个带有正确驱动程序的 USB 加密狗（目前，内核配置为使用 RTL8169 驱动程序来支持使用此芯片组的 USB-Ethernet 加密狗）。</span><br><span class="line">网络配置如下：</span><br><span class="line">- 默认情况下，集成以太网端口上有一个 DHCP 服务器监听任何请求。如果有的话，从该接口可以在地址 192.168.1.1 上访问设备。</span><br><span class="line">- 如果有一个 USB 以太网加密狗连接到主板，它将被自动配置为从网络请求 IP 地址。</span><br><span class="line">- 内核还带有设备中无线硬件的驱动程序。无线接口可以配置为 AP 或 STA 模式。</span><br></pre></td></tr></table></figure>
<p>这段文本认为<strong>只有 USB 以太网加密狗</strong>才能作为路由器使用，这让我感到困惑。</p>
<p>但也可能是因为它的固件有问题，该设备系统 SDK 版本中使用其他方法实现拨号或是存在 BUG。</p>
<h3 id="6月29日更新">6月29日更新</h3>
<p>今天抽空连接了 TTL，看了一下 uboot 和 启动 log，看到了一下内容</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(1) insmod mdio_arht.ko</span><br><span class="line">insmod: cannot open module `/lib/modules/mdio_arht.ko&#x27;: No such file or directory</span><br><span class="line">(2) insmod air_en8811h.ko                                                   writeflash: total write 0x2ac5 bytes</span><br><span class="line"></span><br><span class="line">insmod: cannot open module `/lib/modules/air_en8811h.ko&#x27;: No such file or directory</span><br><span class="line"> [tcPhyInit] in  [tcPhyInit] out , r31 = (10, 0x0)</span><br><span class="line">(3) insmod 8811_bbu_api.ko</span><br><span class="line">insmo  GE R45 AnaCal zcal_idx(before table) (dec: 43) (hex: 0x2b)</span><br><span class="line">  GE R45 AnaCal Done! (cnt:11)(after table) ([7][6:0]:0x56) ([6:0]:0xd6)</span><br><span class="line">d: cannot open module `/lib/modules/8811_bbu_api.ko&#x27;: No such file or directory</span><br><span class="line">an8811 end</span><br></pre></td></tr></table></figure>
<p>这三个模块都是不存在的，但是系统想要加载它们。<code>en8811h</code> 是一个以太网 PHY 驱动，<code>8811_bbu_api</code> 是一个 BBU 驱动，<code>mdio_arht</code> 是一个 MDIO 驱动。</p>
<p>竟然不是 <code>en8850</code>，而是 <code>8811h</code>，也证实了不需要 en8850 的驱动。直接使用 en7523 的设备树就可以了。</p>
<p>然后就是，它真的有 efuse。</p>
<p>还有一个就是 led 相关的了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tcledctrl version: tcledctrl V1.1.0.0 (Nov 10 2023-16:08:25).</span><br><span class="line">ot not found led.conf</span><br><span class="line">led path:/userfs/7529_cd.conf</span><br></pre></td></tr></table></figure>
<p>以及相关的分区表和 gpio 确实存储在 <code>uboot-env</code> 中。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bootdelay=3</span><br><span class="line">bootfile=tclinux.bin</span><br><span class="line">bootpart=512k[bootloader],12m[rescue],1280k[reservearea],256k[romfile],5m[kernela],33m[rootfsa],5m[kernelb],33m[rootfsb],6m[data],50m[java],78m[osgi]</span><br><span class="line">...</span><br><span class="line">dsl_gpio=0b</span><br><span class="line">ether_gpio=0c</span><br><span class="line">internet_gpio=02</span><br><span class="line">multi_upgrade_gpio=0b020400000000000000000000000000</span><br><span class="line">power_gpio=0b0b</span><br></pre></td></tr></table></figure>
<h2 id="OpenWrt-实战研究">OpenWrt 实战研究</h2>
<p>7月3日更新</p>
<p>近几日尝试编译了基于 Linux 6.6 的固件，以及解决相关驱动问题。</p>
<p>结果是可以启动，但是以太网部分瘫痪，eth、switch、wlan 都无法正常工作。</p>
<p>另外编译过程中 <code>airoha_eth.c</code> 存在问题，使用 patch 解决了（编译报错，但是无法判断该驱动是否正确），不知道是否是因为这个问题导致以太网无法工作。还有 Airoha spi 驱动的问题需要解决。</p>
<p>IOWrt Airoha integration 项目可以当作参考，虽然他们开源了一部分代码，但是仍然有很多门槛，无法一步到位直接使用。</p>
<hr>
<p>7月5日更新</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1l1emhpaTA3MTgvb3BlbndydC90cmVlL2VuNzU2Mi0yNC4xMA==">en7562-24.10<i class="fa fa-external-link-alt"></i></span></p>
<p>目前系统能正常启动，但以太网部分仍然无法工作，具体的表现是 system-control/clock-control 无法正常工作，导致相关设备无法正常 resets，尝试使用 an7581 的 scu/syscon/clk 或是 ti 的 gsw resets 驱动，但是没有成功。</p>
<p>只能等待 airoha/mediatek 开源相关驱动，或是有大佬能提供相关文档/资源。</p>
<p>你可以尝试该 initramfs 镜像，理论 en7562/en7563 的设备都可以使用</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1l1emhpaTA3MTgvb3BlbndydC9yZWxlYXNlcy8=">Build for Airoha en7562ct<i class="fa fa-external-link-alt"></i></span></p>
<p>使用方法详见该分支的 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1l1emhpaTA3MTgvb3BlbndydC9ibG9iL2VuNzU2Mi0yNC4xMC9SRUFETUUubWQ=">README<i class="fa fa-external-link-alt"></i></span>。</p>
<hr>
<p>7月6日更新</p>
<p>这个 SoC 网络部分的驱动或许可以结合 en7521 和 an7581 的驱动代码，en7562 很明显是迭代过程的产品，en7521 有泄露的驱动代码，an7581 的驱动代码是官方开源的，但是这种没有 datasheet 的产品，寄存器地址、寄存器位的含义都不清楚，无法进行驱动开发。</p>
<p>还有我尝试在编译了 arm64 的内核，因为某些驱动原生是 arm64 开发的，不清楚是否兼容 v7l 内核，但是编译出来的内核无法正常开机，启动内核后直接 reset cpu。</p>
<p>捋一捋，可以发现：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>frame_engine 基于 en7521 的 frame_engine 并加上了一些 PPE/NPU 还有一些 ONU 相关的特性</p>
</li>
<li class="lvl-2">
<p>wed/wdma 兼容 en751221</p>
</li>
<li class="lvl-2">
<p>npu 可能是 an7581 npu 的前身</p>
</li>
<li class="lvl-2">
<p>watchdog 兼容 en7521 的 watchdog</p>
</li>
</ul>
<p>关键的 system-control 部分，我不太清楚，因为 reset-controller/clock-controller 令人折磨，不清楚这个 SoC 是如何工作的。</p>
<p>但是 an7581 的以太网已经是 eth + switch 的形式了，而加速器部分貌似只使用了 npu，wed、wdma 没有看见相关定义</p>
<p>wed 见于 mt7622，而 mt7622 上有 wed0、wed1，而该 SoC 上是 wed0、wed2、wed_test，暂时不知道他们的关系。wdma 见于 mt7623。</p>
<p>然后就是在 an7581 上，npu 用于加速 eth，那么在该 SoC 上，已经存在 npu 了，那么 wed 的作用是什么？</p>
<blockquote>
<p>小道消息：TW 某 M 开头芯片大厂据说由于降本增效裁员裁到大动脉，现在 mtwifi 部门与 mt76 部门合并，现在开发驱动的是大学生与阿三，npu 难产，开发3年没有结果，未来将回归 wed + ppe 路线。</p>
</blockquote>
<h3 id="关于-uboot">关于 uboot</h3>
<p>目前该 uboot 是 5.4 内核的，采用 a/b 分区的方式，使用了 ATF2_1 的 U-Boot。</p>
<p>虽然 tftpboot 启动不会破坏分区结构并且还是只读的，但是可能会破坏 uboot 环境变量。</p>
<p>所以需要在启动前备份 uboot 环境变量。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">printenv</span></span><br></pre></td></tr></table></figure>
<p>将输出的内容保存到一个文件中。</p>
<p>当环境变量被破环导致无法启动后，可以使用以下命令恢复：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">env</span> default -a <span class="comment"># 恢复默认环境变量</span></span><br><span class="line">saveenv</span><br></pre></td></tr></table></figure>
<p>然后参照之前的环境变量，重新设置。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">env</span> delete &lt;variable_name&gt; <span class="comment"># 删除某个变量</span></span><br><span class="line">setenv &lt;variable_name&gt; &lt;value&gt; <span class="comment"># 设置某个变量</span></span><br><span class="line">saveenv <span class="comment"># 保存环境变量</span></span><br></pre></td></tr></table></figure>
<p>然后启动</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">flash imgread 2048;\bootm</span><br></pre></td></tr></table></figure>
<h3 id="总结">总结</h3>
<p>目前的结论是：</p>
<p>目前主线 Linux/OpenWrt 可以直接启动所有 airoha mips/arm 的设备。</p>
<p>但是其他部分，比如 pcie/usb/eth/switch/gpio/watchdog/pinctrl/pwm/wed/npu/etc. 都需要特定的驱动支持。</p>
<h2 id="告一段落">告一段落</h2>
<p>驱动问题我实在无法解决，尝试使用多种解决方法，但是没有成功。</p>
<h2 id="参考资料">参考资料</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93aWtpZGV2aS53aS1jYXQucnUvVHJlbmRDaGlw">TrendChip<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93aWtpZGV2aS53aS1jYXQucnUvRWNvTmV0">EcoNet<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93aWtpZGV2aS53aS1jYXQucnUvTWVkaWFUZWsvU29D">MediaTek/SoC<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9mb3J1bS5vcGVud3J0Lm9yZy90L3F1YW50dW0tZmliZXItdzE3MDBrLXN1cHBvcnQv">Quantum Fiber W1700k support - For Developers - OpenWrt Forum<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0h5R3cvdGVzdA==">test_devkit_en7521_20161129.tgz<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NqZGVsaXNsZS9vcGVud3J0Lw==">cjdelisle’s openwrt<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9mb3J1bS5vcGVud3J0Lm9yZy90L3N1cHBvcnQtZm9yLXp5eGVsLXB4MzMyMS10MS8yMDMzMjQ=">Support for Zyxel - PX3321-T1<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FsZXhjZWx0YXJlMi9wbWc1NjE3Z2E=">Zyxel PMG5617GA router OEM GPL source code a.k.a. OPAL based on OpenWRT 14.07<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9mb3J1bS5vcGVud3J0Lm9yZy90L29wZW53cnQtc3VwcG9ydC1mb3Itenl4ZWwtcG1nNTYxN2dhLWFuZC1lY29uZXQtc29jcy1maXJzdC1ncG9uLXN1cHBvcnQvMTQ0MjMx">OpenWrt support for Zyxel PMG5617GA and Econet SoCs, first GPON support !?<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NqZGVsaXNsZS9lY29uZXQtbGludXgtd2lraQ==">econet-linux-wiki<i class="fa fa-external-link-alt"></i></span> <a href="#fnref1" class="footnote-backref">↩︎</a> <a href="#fnref1:1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucHVwYm9zcy5jb20vcG9zdC8yMDI0L3RsLXI1NDA4bS1pbnNwZWN0aW9uLWFuZC1yZXZpZXcv">TL-R5408M 拆机 芯片设计评测<i class="fa fa-external-link-alt"></i></span> <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn3" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aWZpLm5ldC8yNDA0MC5odG1s">烽火SR1041FU拆机，AX3000无线路由器<i class="fa fa-external-link-alt"></i></span> <a href="#fnref3" class="footnote-backref">↩︎</a> <a href="#fnref3:1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn4" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aWZpLm5ldC8yMzU3Ny5odG1s">TL-R5408M易展路由器拆机和小包转发测试<i class="fa fa-external-link-alt"></i></span> <a href="#fnref4" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn5" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aWZpLm5ldC8yNTgwMC5odG1s">TL-R5010PE-EN拆机全2.5G POE一体机，弱电箱好野<i class="fa fa-external-link-alt"></i></span> <a href="#fnref5" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>分享</tag>
        <tag>玩机</tag>
      </tags>
  </entry>
  <entry>
    <title>G-AX1800(F) 研究日志</title>
    <url>/2025/05/28/1/</url>
    <content><![CDATA[<p>1xx86运营商的路由器，G-AX1800，方案是MT7621AT+MT7905DAN+MT7975DN</p>
<p>这个玩意有好几个版本，应该是有几个代工，配置差不多，但是方案混乱，名字都叫G-AX1800，还有一个带F的版本，也是差不多的，原版固件是 LEDE 17.01-SNAPSHOT 定制版本。</p>
<p>这个机型目前大约20~25一台（25年6月），相比已经涨价的 MT7981 路由器，性价比还是不错的。</p>
<p>我如果要入手一个 MT7981 路由器，最少得配置 512 MB RAM 才行，价格在 50~70 之间才能接受。</p>
<p>毕竟是当作玩具来着，要有可玩性，同时具备性价比。如果不玩，完全可以入手20~30一台的海思处理器的 AX3000 路由器。</p>
<h2 id="版本以及硬件信息">版本以及硬件信息</h2>
<p>CPU: MT7621AT@880MHz<br>
RAM: DDR3 256MB@1200MHz<br>
NAND: 128MB<br>
Wi-Fi: MT7905DAN + MT7975DN<br>
Ethernet: 1xWAN + 3xLAN (1G)</p>
<blockquote>
<p>其他信息：BUS:220MHz, XTAL: 40MHz</p>
</blockquote>
<p><img src="./converted_g-ax1800.png" alt></p>
<p>G-AX1800-F 23版本拆机</p>
<p><img src="./converted_f-23-front.png" alt><br>
<img src="./converted_f-23-back.png" alt></p>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9jbWlpdGlkLmNuLzIwMjFBUDU0MDM=">G-AX1800-WHITE<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9jbWlpdGlkLmNuLzIwMjJBUDExNDA2">G-AX1800-BLACK<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9jbWlpdGlkLmNuLzIwMjJBUDk4Nzg=">G-AX1800-F<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<table>
<thead>
<tr>
<th>机构</th>
<th>G-AX1800</th>
<th>G-AX1800-F</th>
</tr>
</thead>
<tbody>
<tr>
<td>Flash</td>
<td>NAND</td>
<td>NAND-NMBM</td>
</tr>
<tr>
<td>网口顺序</td>
<td>WLLL</td>
<td>LLLWL</td>
</tr>
<tr>
<td>RESET</td>
<td>18</td>
<td>7</td>
</tr>
<tr>
<td>WPS/LINK</td>
<td>6</td>
<td>6</td>
</tr>
</tbody>
</table>
<blockquote>
<p>貌似带F的两个版本使用了同一个CMIT ID,但是方案有所不同，据说某一个版本使用了RTL8198D（软件版本2.0）。F-23版本只有3个Lan口，1个Wan口，但是确实是 LLLWL 的顺序</p>
</blockquote>
<p>可以确定，G-AX1800-F-23这个是浪潮代工的，有一款<span class="exturl" data-url="aHR0cHM6Ly9jbWlpdGlkLmNuLzIwMjJBUDE5NTY0">浪潮AP6113<i class="fa fa-external-link-alt"></i></span>和这玩意一模一样。</p>
<p>F-24版本，貌似配置有所不同，可能是带脚的螃蟹</p>
<h2 id="关于刷机">关于刷机</h2>
<p>MT7621的路由器，刷机还是比较简单的</p>
<p>可以使用 CR660X 的 <span class="exturl" data-url="aHR0cHM6Ly9kb3dubG9hZHMucGFuZ3Vib3guY29tOjYzNDQzL2xpbnRlbC9DUjY2MFgvcGItYm9vdC8=">PB-BOOT<i class="fa fa-external-link-alt"></i></span>，论坛里也有人专门适配了一些固件。也能刷 <code>集客ap246nd</code> 或者 <code>simax1800t</code></p>
<p>也可以使用 <span class="exturl" data-url="aHR0cHM6Ly9icmVlZC5oYWNrcGFzY2FsLm5ldC8=">breed<i class="fa fa-external-link-alt"></i></span>(xiaomi-r3g)，这个可以改 mac。</p>
<p>或者自己定制 u-boot。</p>
<h3 id="开-SSH">开 SSH</h3>
<ol>
<li class="lvl-3">
<p>TTL 连接</p>
</li>
<li class="lvl-3">
<p>上电</p>
</li>
<li class="lvl-3">
<p>不停按 Link 键，直到 ttl 输出停止</p>
</li>
<li class="lvl-3">
<p>输入标签上的账号和密码</p>
</li>
<li class="lvl-3">
<p>编辑 <code>/etc/config/dropbear</code> 文件</p>
</li>
<li class="lvl-3">
<p>启动 ssh 服务</p>
</li>
</ol>
<h3 id="TTL-刷机">TTL 刷机</h3>
<p>准备文件</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>putty.exe</p>
</li>
<li class="lvl-2">
<p>hfs.exe</p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9kb3dubG9hZHMucGFuZ3Vib3guY29tOjYzNDQzL2xpbnRlbC9DUjY2MFgvcGItYm9vdC8=">pb-boot.img<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><a href="./mtd-rw.ko">mtd-rw.ko</a></p>
</li>
</ul>
<p>拆机，TTL 连接 RX TX GND</p>
<p>电脑插入 ttl 板子，查看 COM 口，打开 putty，设置好 COM 口和波特率：115200，此时不需要Open</p>
<p>用网线连接电脑网口和路由器的任意 LAN 口，组成最小局域网，电脑不用连接外网，全程有线局域网操作</p>
<p>机器上电，点击 putty 的 Open 按钮，可以看到有跑码了</p>
<p>跑一会，会提示按 f 进入 lede 的安全模式，按【1】【2】【3】【4】登录定制固件</p>
<p>按数字键 1，会出现提示输入用户名，输入路由器背后登录名：admin，然后会提示输入密码，快速输入机器背后的登录密码，即可进入定制固件的命令行</p>
<p>此时可以看下电脑的网络连接(<code>ipconfig</code>)，应该是拿到了 192.168.10.x 的 IP(x表示路由器给电脑分配的IP)</p>
<p>打开 hfs.exe 文件，把<code>mtd-rw.ko</code>和<code>pb-boot.img</code>添加到 hfs 中</p>
<p>此时在 putty 窗口的定制固件的命令行中输入: <code>cd /tmp</code>，切换到 tmp 目录</p>
<p>命令行中继续输入: <code>wget http://192.168.10.x/mtd-rw.ko</code>，提示文件已下载到tmp目录下</p>
<p>命令行中继续输入: <code>insmod /tmp/mtd-rw.ko i_want_a_brick=1</code>，提示 setting writeable flag</p>
<p>命令行中继续输入: <code>mtd unlock Bootloader</code>，提示 Unlocking… Bootloader，已成功解锁 Bootloader 分区</p>
<p>命令行中继续输入: <code>mtd write pb-boot.img Bootloader</code>，提示 Writing from pb-boot to Bootloader …，pb-boot 成功写入 Bootloader 分区</p>
<p>路由器断电、上电重启，从 putty 的窗口中已可以看到 boot 已经是 PandoraBox-Boot，接下来就可以刷机了</p>
<h3 id="免拆刷机">免拆刷机</h3>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL2ZvcnVtLnBocD9tb2Q9dmlld3RocmVhZCZ0aWQ9ODM5MTU4OA==">第三台富春江路由器G-AX1800故事，暨黑色富春江免拆刷机成功<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="固件">固件</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL2ZvcnVtLnBocD9tb2Q9dmlld3RocmVhZCZ0aWQ9ODM2MDY4NQ==">富春江G-AX1800 Padavan4.4 纯净彩虹主题版<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL2ZvcnVtLnBocD9tb2Q9dmlld3RocmVhZCZ0aWQ9ODM5MjA3Mg==">富春江G-AX1800 黑色版本 Padavan 4.4 彩虹主题<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3ZiMTk4MC9wYWRhdmFuLTQuNA==">padavan-4.4_vb1980<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL2ZvcnVtLnBocD9tb2Q9dmlld3RocmVhZCZ0aWQ9ODMxNjk4Ng==">富春江G-AX1800和海尔HAR-20S2U1云编译padavan固件<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RkeWp5ai9wYWRhdmFuLTQuNA==">padavan-4.4_ddyjyj<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL2ZvcnVtLnBocD9tb2Q9dmlld3RocmVhZCZ0aWQ9ODMwNzMzMw==">【20240824】SIM AX18T/Hair HAR-20S2U1/JCG Q20/富春江G-AX1800白黑/360 T6M AsusModx<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3ZiMTk4MC9hc3Vzd3J0LW1vZHgtbmV4dA==">asuswrt-modx-next<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<div class="note warning"><p>因为本人入手的是带F-23的版本故此以下部分是以该机型为基础的</p>
</div>
<h2 id="备份固件">备份固件</h2>
<p>思路：cat /proc/mtd，dd if 备份，scp/nc 传回电脑</p>
<p>PC</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nc -l -p 12345 &gt; backup.img</span><br><span class="line">scp root@192.168.1.1:/tmp/backup.img ~/Downloads/</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> /proc/mtd</span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/mtdx of=/tmp/mtdx.img</span><br><span class="line">tftp -p -l /tmp/mtdx.img 192.168.10.x</span><br><span class="line">nc 192.168.10.x 12345 &lt; /dev/mtdx</span><br></pre></td></tr></table></figure>
<h2 id="提取-DTS">提取 DTS</h2>
<p>思路：备份 kernel 分区，然后使用 extract-dtb 提取 dtb，dtc 反编译成 dts</p>
<p>再根据这个 dts 进行修改，以适配不同的系统。</p>
<p>参考</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3ZiMTk4MC9wYWRhdmFuLTQuNC9ibG9iL21haW4vdHJ1bmsvbGludXgtNC40LngvYXJjaC9taXBzL2Jvb3QvZHRzL3JhbGluay9nLWF4MTgwMC1iLmR0cw==">g-ax1800-b.dts<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="定制-U-Boot">定制 U-Boot</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04MjU2NzEwLTEtMS5odG1s">一种在线定制 MT7621 u-boot 的方法<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0RyYWdvbkJsdWVwL3Vib290LW10NzYyMQ==">uboot-mt7621<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h2 id="定制系统">定制系统</h2>
<p>此处介绍3种系统的适配方法。</p>
<h3 id="定制-OpenWrt">定制 OpenWrt</h3>
<p>思路：找一个相似机型，查看适配代码提交记录，依葫芦画瓢。</p>
<p>参考</p>
<blockquote>
<p>这是适配 SIMAX1800T 的提交，还可以查看 CR660X、TX1801 等机型的提交。</p>
</blockquote>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2ltbW9ydGFsd3J0L2ltbW9ydGFsd3J0L2NvbW1pdC9mN2Y5MjAzODU0YzcxNzNhOTE2NTU2ODNhYTdhZDJhMGFmNDNmNTE4">Commit f7f9203<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2ltbW9ydGFsd3J0L2ltbW9ydGFsd3J0L2NvbW1pdC82MzYxYTk1MmFmYTQ4MjdlYjVlOWQ1MjIxYjliYjRiNTRhMjAxOWQ1">Commit 6361a95<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="定制-Asuswrt">定制 Asuswrt</h3>
<p>参考</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3ZiMTk4MC9hc3Vzd3J0LW1vZHgtbmV4dC9jb21taXQvODY5MzQ0MGE2ZmFmZmFlMGNmMGE1OWI5OWRkOTA3ZjM1NWIyOTVhMA==">Commit 8693440<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="定制-Padavan">定制 Padavan</h3>
<p>参考</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3ZiMTk4MC9wYWRhdmFuLTQuNC9jb21taXQvNDQ5OWJkMmQzMjVlZjIwOTQyZjFjYWZlMTFmNmZhZmNmYjRkMTlkZQ==">Commit 4499bd2<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="关于-F-版本">关于 F 版本</h2>
<p>我入手的是 F-23 版本，配置和不带 F 的版本一样，虽然目前没人玩机，但是没关系，适配的工作还是不怎么困难</p>
<p>适配思路：ttl 获取启动信息，开 SSH，提取 DTS，适配 OpenWrt/Asuswrt 等系统</p>
<p>关于 F-24 版本，该版本我没有入手，因为配置不确定（可能是带脚的螃蟹），以及我不太喜欢这个外观。</p>
<blockquote>
<p>综合来看黑色版本做工以及刷机资源都比较丰富，但是我不太喜欢这个外观，白色的版本也不好看，看起来很廉价，这个 F-23 的版本，白色外壳，可立着放也可以卧着放，我比较喜欢，最后18块入手。</p>
</blockquote>
<h3 id="说明">说明</h3>
<p>该机型使用的 NAND 是国产 HeYangTek 的 NAND，实际为海力士黑片，并开启了 NMBM，故此尽管配置与小米 CR660X 系列差不多，但是小米并没有使用 NMBM，如果颗粒有坏块，就不能使用它的 breed 或 pb-boot，也不能直接刷它的固件，尽管能够启动，但是长时间使用必将导致坏块的故障。</p>
<p>需要单独适配开启 NMBM 的 UBOOT，系统也需要适配开启 NMBM。</p>
<p>参看颗粒是否有坏块：在 uboot 下输入</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nmbm nmbm0 state</span><br></pre></td></tr></table></figure>
<p>根据输出的提示判断是否有坏块。</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1l1emhpaTA3MTgvdWJvb3QtbXQ3NjIxL3JlbGVhc2VzL3RhZy9GQ0pfRy1BWDE4MDAtRi0yMDI1LTA2LTAyLTA2LTUw">UBOOT<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1l1emhpaTA3MTgvbGVkZS9yZWxlYXNlcy90YWcvYnVpbGQyNTA2MDMwMDA1">LEDE<i class="fa fa-external-link-alt"></i></span></p>
<p>F 版是否能够免拆刷机，我推测是可以的，为什么是推测呢，因为等我找到这个免拆刷机的教程时，我已经完成了LEDE的适配工作并刷入了系统，所以我没有尝试过免拆刷机。</p>
<p>能够适配的系统有：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>OpenWrt系列</p>
</li>
<li class="lvl-2">
<p>Asuswrt系列</p>
</li>
</ul>
<blockquote>
<p>padavan 系列暂时没有适配，因为这个机型开启了 NMBM，padavan 系统似乎没有适配 NMBM 的代码。</p>
</blockquote>
<h3 id="改密码，开ssh">改密码，开ssh</h3>
<p>见参考，有一种免拆开启 ssh 和 telnet 的办法。</p>
<hr>
<p>先启动机器，led 发光后迅速连接 TTL 至电脑（同时打开已经配置好的串口），然后不停按 reset 进行中断</p>
<p>当提示出进入 openwrt failsafe时，输入1并回车，此时进入 failsafe</p>
<p>但是此时 dhcp 以及 uci 皆不可使用，即没有网络连接</p>
<p>需要输入 reboot 当重启后进入 uboot 的 bootmenu 界面，此时迅速在终端使用上下键中断启动，然后选择 boot 系统。</p>
<p>重启后，可以正常连接网络，使用 uci。</p>
<p>然后参照以下命令修改 root 密码并开启 ssh。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">BusyBox v1.25.1 () built-in shell (ash)</span><br><span class="line"></span><br><span class="line">     _________</span><br><span class="line">    /        /\      _    ___ ___  ___</span><br><span class="line">   /  LE    /  \    | |  | __|   \| __|</span><br><span class="line">  /    DE  /    \   | |__| _|| |) | _|</span><br><span class="line"> /________/  LE  \  |____|___|___/|___|                      lede-project.org</span><br><span class="line"> \        \   DE /</span><br><span class="line">  \    LE  \    /  -----------------------------------------------------------</span><br><span class="line">   \  DE    \  /    Reboot (17.01-SNAPSHOT, unknown)</span><br><span class="line">    \________\/    -----------------------------------------------------------</span><br><span class="line"></span><br><span class="line">root@LEDE:~# mount_root</span><br><span class="line">root@LEDE:~# passwd</span><br><span class="line">root@LEDE:~# vi /etc/config/dropbear</span><br><span class="line">root@LEDE:~# cat /etc/config/dropbear</span><br><span class="line">config dropbear</span><br><span class="line">        option PasswordAuth &#x27;on&#x27;</span><br><span class="line">        option RootPasswordAuth &#x27;on&#x27;</span><br><span class="line">        option Port &#x27;22&#x27;</span><br><span class="line">        option Interface &#x27;lan&#x27;</span><br><span class="line">root@LEDE:~# vi /etc/rc.local</span><br><span class="line">root@LEDE:~# cat /etc/rc.local</span><br><span class="line"># Put your custom commands here that should be executed once</span><br><span class="line"># the system init finished. By default this file does nothing.</span><br><span class="line"></span><br><span class="line">/etc/init.d/dropbear start</span><br><span class="line">/etc/init.d/dropbear restart</span><br><span class="line"></span><br><span class="line">exit 0</span><br><span class="line">root@LEDE:~# reboot </span><br></pre></td></tr></table></figure>
<h3 id="刷入-U-Boot">刷入 U-Boot</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>方法1：</p>
</li>
</ul>
<p>使用 TTL 连接，使用 putty 打开串口，设置波特率为 115200</p>
<p>上电，等待串口输出，进入 uboot 的 bootmenu 界面</p>
<p>选择 upgrade bootloader</p>
<p>此时电脑端打开 tftpd64.exe，设置好 tftp 目录，放入 uboot.bin 文件</p>
<p>然后终端回车，将会提示需要配置的网络信息，根据提示配置 server ip、mask 以及 gateway，最后输入 uboot.bin 的文件名，回车即可开始刷入 uboot</p>
<p>刷入成功将会自动重启，重启后再次进入 uboot 的 bootmenu 界面，然后将路由器断电。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>方法2：</p>
</li>
</ul>
<p>原版系统开启 ssh 后，与不带 F 的版本一样，使用 mtd 命令刷入 uboot。</p>
<p>此处不再赘述。</p>
<h4 id="进入-UBOOT-failsafe-模式">进入 UBOOT failsafe 模式</h4>
<p>断电的时候，按住 reset 键，然后上电，led 大概闪烁4~6次的时候，松开。</p>
<p>电脑端配置</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>ip <code>192.168.1.2</code></p>
</li>
<li class="lvl-2">
<p>mask <code>255.255.255.0</code></p>
</li>
<li class="lvl-2">
<p>gateway <code>192.168.1.1</code></p>
</li>
</ul>
<p>浏览器开无痕模式（防止缓存影响），访问 <code>192.168.1.1</code>，进入 UBOOT 的 failsafe 界面，上传固件即可，根据提示信息进行操作。</p>
<blockquote>
<p>有时候受到浏览器缓存的影响，可能导致失败，此时建议清除浏览器缓存，或者换一个浏览器，必要时打开浏览器开发者工具，查看控制台信息，正常情况下没有错误信息。</p>
</blockquote>
<h3 id="适配-lede">适配 lede</h3>
<p>该机型原版就是 LEDE-17 定制版系统，故此也适配 LEDE，使用最新的 LEDE R25.5.25(COMMIT ID:045b5eb8b89709fb79d9ca82e78ced8704418f18)进行适配，环境为 WSL2 UBUNTU22.04</p>
<h4 id="mac-offset">mac offset</h4>
<p>打开备份出的 <code>factory</code> 分区，使用 hex 编辑器查看</p>
<p>结合解包的原厂固件中的信息，可以得到以下信息：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">lan_mac_offset=0x3FFF4</span><br><span class="line">wan_mac_offset=0x3FFFA</span><br><span class="line">label_mac=wan_mac</span><br><span class="line">wifi-base-mac=0x4</span><br></pre></td></tr></table></figure>
<p>wifi-base-mac 是 eeprom 中的 mac 地址偏移，也是 2G 的 mac 地址偏移，而 5G 是在 2G 的基础上加 5。</p>
<h4 id="适配代码">适配代码</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>package/boot/uboot-envtools/files/ramips</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fcj,g-ax1800-f|\</span><br><span class="line">xiaomi,mi-router-cr660x)</span><br><span class="line"> ubootenv_add_uci_config <span class="string">&quot;/dev/mtd1&quot;</span> <span class="string">&quot;0x0&quot;</span> <span class="string">&quot;0x10000&quot;</span> <span class="string">&quot;0x20000&quot;</span></span><br><span class="line"> ;;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>target/linux/ramips/dts/mt7621_fcj_g-ax1800-f.dts</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: GPL-2.0-or-later OR MIT</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mt7621.dtsi&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;dt-bindings/gpio/gpio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;dt-bindings/input/input.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">/ &#123;</span><br><span class="line"> compatible = <span class="string">&quot;fcj,g-ax1800-f&quot;</span>, <span class="string">&quot;mediatek,mt7621-soc&quot;</span>;</span><br><span class="line"> model = <span class="string">&quot;FCJ G-AX1800-F&quot;</span>;</span><br><span class="line"></span><br><span class="line"> aliases &#123;</span><br><span class="line">  led-boot = &amp;led_status_red;</span><br><span class="line">  led-failsafe = &amp;led_status_green;</span><br><span class="line">  led-running = &amp;led_status_green;</span><br><span class="line">  led-upgrade = &amp;led_status_red;</span><br><span class="line">  label-mac-device = &amp;gmac0;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> chosen &#123;</span><br><span class="line">  bootargs = <span class="string">&quot;console=ttyS0,115200&quot;</span>;</span><br><span class="line">  bootargs-<span class="keyword">override</span> = <span class="string">&quot;console=ttyS0,115200&quot;</span>;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> leds &#123;</span><br><span class="line">  compatible = <span class="string">&quot;gpio-leds&quot;</span>;</span><br><span class="line"></span><br><span class="line">  led_status_red: sys_red &#123;</span><br><span class="line">   label = <span class="string">&quot;red:sys&quot;</span>;</span><br><span class="line">   gpios = &lt;&amp;gpio <span class="number">13</span> GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  led_status_green: sys_green &#123;</span><br><span class="line">   label = <span class="string">&quot;green:sys&quot;</span>;</span><br><span class="line">   gpios = &lt;&amp;gpio <span class="number">15</span> GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">  &#125;;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> keys &#123;</span><br><span class="line">  compatible = <span class="string">&quot;gpio-keys&quot;</span>;</span><br><span class="line"></span><br><span class="line">  reset &#123;</span><br><span class="line">   label = <span class="string">&quot;reset&quot;</span>;</span><br><span class="line">   gpios = &lt;&amp;gpio <span class="number">7</span> GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">   linux,code = &lt;KEY_RESTART&gt;;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  wps &#123;</span><br><span class="line">   label = <span class="string">&quot;wps&quot;</span>;</span><br><span class="line">   gpios = &lt;&amp;gpio <span class="number">6</span> GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">   linux,code = &lt;KEY_WPS_BUTTON&gt;;</span><br><span class="line">  &#125;;</span><br><span class="line"> &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;nand &#123;</span><br><span class="line"> status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line"> </span><br><span class="line"> mediatek,nmbm;</span><br><span class="line"> mediatek,bmt-max-ratio = &lt;<span class="number">1</span>&gt;;</span><br><span class="line"> mediatek,bmt-max-reserved-blocks = &lt;<span class="number">64</span>&gt;;</span><br><span class="line"> mediatek,bmt-remap-range = &lt;<span class="number">0x0000000</span> <span class="number">0x0a00000</span>&gt;;</span><br><span class="line"></span><br><span class="line"> partitions &#123;</span><br><span class="line">  compatible = <span class="string">&quot;fixed-partitions&quot;</span>;</span><br><span class="line">  <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">  <span class="meta">#size-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">  partition@<span class="number">0</span> &#123;</span><br><span class="line">   label = <span class="string">&quot;Bootloader&quot;</span>;</span><br><span class="line">   reg = &lt;<span class="number">0x0000000</span> <span class="number">0x0080000</span>&gt;;</span><br><span class="line">   read-only;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  partition@<span class="number">80000</span> &#123;</span><br><span class="line">   label = <span class="string">&quot;Config&quot;</span>;</span><br><span class="line">   reg = &lt;<span class="number">0x0080000</span> <span class="number">0x0080000</span>&gt;;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  factory: partition@<span class="number">100000</span> &#123;</span><br><span class="line">   label = <span class="string">&quot;Factory&quot;</span>;</span><br><span class="line">   reg = &lt;<span class="number">0x0100000</span> <span class="number">0x0080000</span>&gt;;</span><br><span class="line">   read-only;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  partition@<span class="number">180000</span> &#123;</span><br><span class="line">   label = <span class="string">&quot;kernel&quot;</span>;</span><br><span class="line">   reg = &lt;<span class="number">0x180000</span> <span class="number">0x800000</span>&gt;;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  partition@<span class="number">980000</span> &#123;</span><br><span class="line">   label = <span class="string">&quot;ubi&quot;</span>;</span><br><span class="line">   reg = &lt;<span class="number">0x980000</span> <span class="number">0x6e80000</span>&gt;;</span><br><span class="line">  &#125;;</span><br><span class="line"> &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;pcie &#123;</span><br><span class="line"> status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;pcie1 &#123;</span><br><span class="line"> wifi@<span class="number">0</span>,<span class="number">0</span> &#123;</span><br><span class="line">  compatible = <span class="string">&quot;mediatek,mt76&quot;</span>;</span><br><span class="line">  reg = &lt;<span class="number">0x0000</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>&gt;;</span><br><span class="line">  mediatek,mtd-eeprom = &lt;&amp;factory <span class="number">0x0</span>&gt;;</span><br><span class="line"> &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;gmac0 &#123;</span><br><span class="line"> mtd-mac-address = &lt;&amp;factory <span class="number">0x3fff4</span>&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;gmac1 &#123;</span><br><span class="line"> mtd-mac-address = &lt;&amp;factory <span class="number">0x3fffa</span>&gt;;</span><br><span class="line"> status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;gsw &#123;</span><br><span class="line"> mediatek,portmap = <span class="string">&quot;lllwl&quot;</span>;</span><br><span class="line"> status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;hnat &#123;</span><br><span class="line"> mtketh-wan = <span class="string">&quot;eth1&quot;</span>;</span><br><span class="line"> mtketh-ppd = <span class="string">&quot;eth0&quot;</span>;</span><br><span class="line"> mtketh-lan = <span class="string">&quot;eth0&quot;</span>;</span><br><span class="line"> mtketh-max-gmac = &lt;<span class="number">2</span>&gt;;</span><br><span class="line"> /<span class="keyword">delete</span>-property/ mtkdsa-wan-port;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;switch0 &#123;</span><br><span class="line"> status = <span class="string">&quot;disabled&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;state_default &#123;</span><br><span class="line"> gpio &#123;</span><br><span class="line">  groups = <span class="string">&quot;jtag&quot;</span>, <span class="string">&quot;uart3&quot;</span>, <span class="string">&quot;wdt&quot;</span>;</span><br><span class="line">  function = <span class="string">&quot;gpio&quot;</span>;</span><br><span class="line"> &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>target/linux/ramips/mt7621/base-files/etc/board.d/02_network</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fcj,g-ax1800-f)</span><br><span class="line"> ucidef_add_switch <span class="string">&quot;switch0&quot;</span> \</span><br><span class="line">   <span class="string">&quot;0:lan&quot;</span> <span class="string">&quot;1:lan&quot;</span> <span class="string">&quot;2:lan&quot;</span> <span class="string">&quot;3:wan&quot;</span> <span class="string">&quot;6u@eth0&quot;</span> <span class="string">&quot;5u@eth1&quot;</span></span><br><span class="line">;;</span><br><span class="line"></span><br><span class="line">fcj,g-ax1800-f|\</span><br><span class="line">xiaomi,mi-router-cr660x)</span><br><span class="line"> lan_mac=$(<span class="built_in">cat</span> /sys/class/net/eth0/address)</span><br><span class="line"> wan_mac=$(macaddr_add <span class="string">&quot;<span class="variable">$lan_mac</span>&quot;</span> -1)</span><br><span class="line"> ;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>关于分区，原厂与小米类似使用 Bootloader + Config + Factory 这种格式，可以替换成 uboot + uboot-env + factory；原厂使用了 firmware + firmware1 + rootfs + rootfs_data，此处合并为 kernel + ubi。关于 leds，原版 dts 配置的绿色的 gpio 实际并没有起作用，原版系统默认关闭的，该 greenled 只在启动时常亮，以及交替闪烁时发光，故此参照原版进行配置。关于网口交换机，原版系统使用 <code>lllwl</code> 进行配置，尽管该机型是 3lan + 1wan。</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>target/linux/ramips/mt7621/base-files/lib/upgrade/platform.sh</p>
</li>
</ul>
<p>将该机型型号加入即可。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>target/linux/ramips/mt7621/base-files/etc/hotplug.d/ieee80211/10_fix_wifi_mac</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fcj,g-ax1800-f)</span><br><span class="line"> [ <span class="string">&quot;<span class="variable">$PHYNBR</span>&quot;</span> = <span class="string">&quot;1&quot;</span> ] &amp;&amp; \</span><br><span class="line">  macaddr_add <span class="string">&quot;<span class="subst">$(mtd_get_mac_binary Factory 0x4)</span>&quot;</span> 5 &gt; /sys<span class="variable">$&#123;DEVPATH&#125;</span>/macaddress</span><br><span class="line"> ;;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>target/linux/ramips/image/mt7621.mk</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">define Device/fcj_g-ax1800-f</span><br><span class="line">  $(Device/dsa-migration)</span><br><span class="line">  $(Device/uimage-lzma-loader)</span><br><span class="line">  DEVICE_VENDOR := FCJ</span><br><span class="line">  DEVICE_MODEL := G-AX1800-F</span><br><span class="line">  BLOCKSIZE := 128k</span><br><span class="line">  PAGESIZE := 2048</span><br><span class="line">  UBINIZE_OPTS := -E 5</span><br><span class="line">  KERNEL_SIZE := 8192k</span><br><span class="line">  IMAGE_SIZE := 121344k</span><br><span class="line">  IMAGES += factory.bin</span><br><span class="line">  IMAGE/sysupgrade.bin := sysupgrade-tar | append-metadata</span><br><span class="line">  IMAGE/factory.bin := append-kernel | pad-to $$(KERNEL_SIZE) | append-ubi | \</span><br><span class="line"> check-size</span><br><span class="line">  DEVICE_PACKAGES += kmod-mt7915-firmware wpad-openssl uboot-envtools</span><br><span class="line">  SUPPORTED_DEVICES += fcj,g-ax1800-f</span><br><span class="line">endef</span><br><span class="line">TARGET_DEVICES += fcj_g-ax1800-f</span><br></pre></td></tr></table></figure>
<hr>
<p>mt7915 支持 80MHz 的 5G 频段，但是有人发现它其实可以支持 160MHz/80+80MHz 的 5G 频段。</p>
<p>但是对苹果设备存在兼容性问题，导致终端性能的下降。</p>
<p>如果你不使用苹果设备，或者不在意苹果设备的性能问题，可以尝试开启 160MHz/80+80MHz 的 5G 频段。</p>
<p>详细参看：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL29wZW53cnQvbXQ3Ni9pc3N1ZXMvNzQ4">wifi: mt76: mt7915: BW160 and BW80+80 add support back! #748<i class="fa fa-external-link-alt"></i></span></p>
<p>创建 <code>lede/package/kernel/mt76/patches/mt76-mt7915-enable-160mhz.patch</code></p>
<p>适用于：mt76-2023-09-18-2afc7285 版本驱动。</p>
<figure class="highlight patch"><table><tr><td class="code"><pre><span class="line"><span class="comment">--- a/mt7915/init.c</span></span><br><span class="line"><span class="comment">+++ b/mt7915/init.c</span></span><br><span class="line"><span class="meta">@@ -422,6 +422,7 @@</span></span><br><span class="line">    if (!dev-&gt;dbdc_support)</span><br><span class="line">     vht_cap-&gt;cap |=</span><br><span class="line">      IEEE80211_VHT_CAP_SHORT_GI_160 |</span><br><span class="line"><span class="addition">+     IEEE80211_VHT_CAP_SUPP_CHAN_WIDTH_160MHZ |</span></span><br><span class="line">      FIELD_PREP(IEEE80211_VHT_CAP_EXT_NSS_BW_MASK, 1);</span><br><span class="line">   &#125; else &#123;</span><br><span class="line">    phy-&gt;mt76-&gt;sband_5g.sband.ht_cap.ampdu_density =</span><br></pre></td></tr></table></figure>
<h3 id="适配-AsusWrt">适配 AsusWrt</h3>
<p>我很好奇，25年了，256M RAM 的 MT7621 处理器，能不能跑得动 AsusWrt 系统。</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1l1emhpaTA3MTgvYXN1c3dydC1tb2R4LW5leHQvY29tbWl0L2Y3ZDQ5ZDZiNzdlOTE0MzA3MDk5ODMyYmY0MWNlZmUwYTRhYzlhYmE=">asuswrt-modx-next<i class="fa fa-external-link-alt"></i></span></p>
<p>只是进行了适配的代码，并没有进行编译。</p>
<p>因为现在只有笔记本，台式机目前不在我身边，所以暂时没有编译。如果你有编译环境，可以尝试编译一下，看看能不能跑得动。</p>
<p>如果你有编译好的固件，可以发给我看一下。</p>
<p>如果跑不动，提交 Issue，或者 Pull Request。</p>
<hr>
<p>6月29日更新</p>
<p>做好环境编译好了系统，但是设备却又不在我这里了，编译中间还是有点波折的，因为这玩意好多地方和普通的设备不一样，比如各种高电平，还有 nmbm 什么的。现在已经将成品发布到了 Release 页面，但是能不能用，我也不晓得。</p>
<h2 id="参考资料">参考资料</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL2ZvcnVtLnBocD9tb2Q9dmlld3RocmVhZCZ0aWQ9ODM4NzMxMQ==">富春江 G-AX1800 &amp; G-AX1800-F 差别<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL0ZPUlVNL2ZvcnVtLnBocD9tb2Q9dmlld3RocmVhZCZ0aWQ9MzIzMjcw">友华WR1200JS刷入breed教程<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL2ZvcnVtLnBocD9tb2Q9dmlld3RocmVhZCZ0aWQ9ODMyNjYyOQ==">富春江G-AX1800拆机TTL刷PB-BOOT教程<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL2ZvcnVtLnBocD9tb2Q9dmlld3RocmVhZCZ0aWQ9ODM4NjEzNw==">富春江ttl刷机<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL2ZvcnVtLnBocD9tb2Q9dmlld3RocmVhZCZ0aWQ9ODM4MzQwOA==">第二台富春江路由器G-AX1800故事续，刷机成功，拆机新刷法<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04MjQ0NzMwLTEtMS5odG1s">新华三 H3C TX1800 Plus / TX1801 Plus / TX1806 OpenWrt 及刷机教程<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9wd2QwLmNvbS8xMjIuaHRtbA==">中国移动G-AX1800-F免拆开SSH和telnet<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>分享</tag>
        <tag>玩机</tag>
      </tags>
  </entry>
  <entry>
    <title>FuntouchOS 9 精简指南</title>
    <url>/2025/05/13/1/</url>
    <content><![CDATA[<p>受不了了这个系统，谁用谁知道，下滑只有通知栏，控制面板竟然是从底下划出，不打开调试端口(*#558#)，无法使用 adb 命令，甚至MTP 也无法使用，打开开发者选项，系统变卡，状态栏风险提示闪个不停。</p>
<p>精简之前安装好第三方桌面、输入法、浏览器以及文件管理器。</p>
<p>推荐使用 Trebuchet android O 构建作为桌面，Gboard Lite 作为输入法，文件管理器看自己喜好，浏览器建议使用一个调用系统内核的浏览器</p>
<p>升级最新的 WebView，内置的还是 66 版本的 WebView，太老了</p>
<div class="note warning"><p><strong>警告</strong><br>
请谨慎操作，可能会导致系统不稳定。这个精简列表精简掉了大多数系统应用，将会导致账号无法登录，查找手机等功能失效，设置中部分选项无法打开，无法更换壁纸，无法调整字体大小等。</p>
</div>
<p>使用 adb 命令删除系统应用</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">adb shell pm uninstall -k --user 0 &lt;package_name&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>其中 <code>&lt;package_name&gt;</code> 是要删除的应用包名。例如：<code>adb shell pm uninstall -k --user 0 com.vivo.safecenter</code>。其中 <code>-k</code> 参数表示保留数据和缓存，<code>--user 0</code> 表示删除当前用户的应用。你也可以使用 <code>adb shell pm uninstall &lt;package_name&gt;</code> 来完全卸载应用，这样比较彻底。</p>
</blockquote>
<p>或者使用类似黑域具有停用功能的应用来停用系统应用。小黑屋，冰箱之类可以冻结系统应用也可以。</p>
<p>存在于 <code>/data/app</code> 目录下的应用全部都可以直接删除</p>
<h2 id="精简列表">精简列表</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">com.vivo.safecenter # 安全中心</span><br><span class="line">com.android.notes # 便签</span><br><span class="line">com.vivo.findphone # 查找手机</span><br><span class="line">com.vivo.smartshot # 超级截屏</span><br><span class="line">com.vivo.pem # 电量守护</span><br><span class="line">com.vivo.fuelsummary # 电源信息</span><br><span class="line">com.chaozh.iReader # 电子书</span><br><span class="line">com.vivo.email # 电子邮件</span><br><span class="line">com.vlife.vivo.wallpaper # 动态锁屏服务</span><br><span class="line">com.vivo.smartmultiwindow # 分屏多任务</span><br><span class="line">com.vivo.appfilter # 管家服务插件</span><br><span class="line">com.android.skintwo # 黑色卡带</span><br><span class="line">com.android.skinfive # 吉他</span><br><span class="line">com.vivo.simplelauncher # 简易桌面</span><br><span class="line">com.vivo.quickpay # 快捷启动</span><br><span class="line">com.vivo.SmartKey # 快捷启动</span><br><span class="line">com.vivo.hybrid # 快应用</span><br><span class="line">com.mediatek.bluetooth.dtt # 蓝牙除错工具</span><br><span class="line">com.vivo.browser # 浏览器</span><br><span class="line">com.android.browser # 浏览器插件</span><br><span class="line">com.vivo.collage # 拼图</span><br><span class="line">com.vivo.globalsearch # 全局搜索</span><br><span class="line">com.vivo.widget.calendar # 日历挂件</span><br><span class="line">com.vivo.scanner # 扫一扫</span><br><span class="line">com.android.skinthree # 神秘音箱</span><br><span class="line">com.vivo.Tips # 使用技巧</span><br><span class="line">com.android.VideoPlayer # 视频</span><br><span class="line">com.sohu.inputmethod.sogou.vivo # 搜狗输入法定制版</span><br><span class="line">com.vivo.puresearch # 搜索挂件</span><br><span class="line">com.ibimuyu.lockscreen # 锁屏服务</span><br><span class="line">com.vivo.dream.weather # 天气(轻简约)</span><br><span class="line">com.vivo.pushservice # 推送引擎</span><br><span class="line">com.android.filemanager # 文件管理</span><br><span class="line">com.bbk.updater # 系统升级</span><br><span class="line">com.bbk.photoframewidget # 相框</span><br><span class="line">com.vivo.minscreen # 小屏</span><br><span class="line">com.vivo.floatingball # 悬浮球</span><br><span class="line">com.iflytek.speechsuite # 讯飞语音引擎</span><br><span class="line">com.vivo.vivokaraoke # 移动KTV</span><br><span class="line">com.vivo.doubleinstance # 应用分身</span><br><span class="line">com.bbk.appstore # 应用商店</span><br><span class="line">com.vivo.game # 游戏中心</span><br><span class="line">com.vivo.aitranslate # 语音翻译</span><br><span class="line">com.vivo.magazine # 阅图锁屏服务</span><br><span class="line">com.bbk.cloud # 云服务</span><br><span class="line">com.vivo.vtouch # 智慧视觉</span><br><span class="line">com.vivo.upnpserver # 智慧投屏</span><br><span class="line">com.vivo.abe # 智慧引擎</span><br><span class="line">com.vivo.hiboard # 智慧桌面</span><br><span class="line">com.vivo.aiengine # AI服务引擎</span><br><span class="line">com.vivo.aiservice # AIService</span><br><span class="line">com.vivo.contentcatcher # com.vivo.contentcatcher</span><br><span class="line">com.mobiletools.systemhelper # com.vivo.helper</span><br><span class="line">com.vivo.setupwizard # com.vivo.setupwizard.SetupWizard</span><br><span class="line">com.funtouch.uiengine # FuntouchUIEngine</span><br><span class="line">com.vivo.gamewatch # GameWatch</span><br><span class="line">com.vivo.doubletimezoneclock # i挂件</span><br><span class="line">com.iqoo.secure # i管家</span><br><span class="line">com.android.bbkmusic # i音乐</span><br><span class="line">com.bbk.theme # i主题</span><br><span class="line">com.vivo.dream.music # i音乐(轻简约)</span><br><span class="line">com.vivo.assistant # Jovi</span><br><span class="line">com.vivo.agent # Jovi语音</span><br><span class="line">com.android.bbklog # Log信息采集</span><br><span class="line">com.bbk.iqoo.logsystem # LogSystem</span><br><span class="line">com.bbk.scene.launcher.theme # SceneThemeLauncher</span><br><span class="line">com.vivo.vhomeguide # VHome</span><br><span class="line">com.vivo.space # vivo 官网</span><br><span class="line">com.vivo.daemonService # vivo服务</span><br><span class="line">com.vivo.sdkplugin # vivo服务安全插件</span><br><span class="line">com.vivo.wallet # vivo钱包</span><br><span class="line">com.bbk.account # vivo账号</span><br><span class="line">com.bbk.launcher2 # vivo桌面</span><br><span class="line">com.vivo.flash # vivoFlash</span><br></pre></td></tr></table></figure>
<blockquote>
<p>其中有些应用是开发阶段使用的应用，结果都被打包进了系统里，甚至某些十数年前已经废弃的应用也被打包进了系统里，导致手机变得臃肿不堪。</p>
</blockquote>
<p>最后只保留了基本系统服务，以及自带的电话、信息、联系人、相机、相册、日历、时钟、录音机、计算器、设置等应用，其他的应用都被删除了。</p>
<blockquote>
<p>当然你也可以根据自己的需求来选择保留或删除某些应用。</p>
</blockquote>
<h2 id="题外话">题外话</h2>
<p>VIVO 对系统有严格的限制，内核级别的反ROOT，系统严格的校验，secboot，MTK checksum等等，导致系统无法被修改。</p>
<p>但是安卓O本身支持Treble，或许通过硬改刷入GSI系统可以解决这个问题。</p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>分享</tag>
        <tag>玩机</tag>
      </tags>
  </entry>
  <entry>
    <title>为 SWRT 配置 DDNS-go</title>
    <url>/2025/05/06/1/</url>
    <content><![CDATA[<p>我使用了 SWRT 的固件，配置动态 DNS 非常简单。</p>
<p>但是我有一些特殊的需求，需要使用 IPv6 地址。</p>
<p>梅林DDNS虽然也可以选择CF，软件中心也有 Cloudflare 的插件，以及 DDNS-go 的插件，但是有点问题。</p>
<h2 id="1-配置-DDNS-go">1. 配置 DDNS-go</h2>
<p>在 SWRT 的 Web 界面中，进入 <strong>软件中心</strong> -&gt; <strong>多ddns合一</strong></p>
<p>这个虽然安装好了，但是不能正常使用。</p>
<p>我看了一下安装文件，发现 DDNS-go 的二进制只有2mb，与最新的版本差距很大。</p>
<p>故下载最新的 linux-arm64 的版本，放到 <code>/jffs/softcenter/bin</code> 目录下，重命名为 <code>ddns-go</code>，然后给它执行权限。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x /jffs/softcenter/bin/ddns-go</span><br></pre></td></tr></table></figure>
<p>然后进入插件，打开并运行，进入控制面板，设置 IPv6 地址，方法随意。</p>
<h2 id="2-配置梅林-DDNS">2. 配置梅林 DDNS</h2>
<p>在 SWRT 的 Web 界面中，进入 <strong>WAN</strong> -&gt; <strong>动态 DNS</strong></p>
<p>选择 <code>custom</code>，自定义需要的域名</p>
<h2 id="3-配置防火墙">3. 配置防火墙</h2>
<p>在系统管理 -&gt; 系统设置中，打开<code>从互联网设置 RAX80</code>，并且添加一个自定义的端口</p>
<p>转到防火墙，打开ipv6防火墙，添加一条规则，名称随意，本地IP：<code>0:0:0:0:0:0:0:1234/::FFFF:FFFF:FFFF:FFFF</code>，协议：TCP，端口：之前设置的端口</p>
<h2 id="Tips">Tips</h2>
<p>dns 并不会很快就解析出来，但是可以通过访问CF后台的DNS解析记录来查看是否解析成功。访问时不会自动https，很可能无法访问，手动添加https即可。访问的设备需要有ipv6地址，并且访问的链接格式为<code>http://[ipv6地址]:端口号</code>如果可以访问，说明配置成功。等待dns生效，通过<code>https://[域名]:端口号</code>即可访问。</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>分享</tag>
        <tag>玩机</tag>
      </tags>
  </entry>
  <entry>
    <title>Tyrano Studio 汉化</title>
    <url>/2025/04/27/1/</url>
    <content><![CDATA[<p>最近下了一个视觉小说游戏，发现是 Electron 打包的，使用了 Tyrano Studio 制作的。于是就想给它汉化一下。经过一番折腾，终于成功了。</p>
<h2 id="汉化步骤">汉化步骤</h2>
<ol>
<li class="lvl-3">
<p>下载 Tyrano Studio 的安装包，解压缩。</p>
</li>
<li class="lvl-3">
<p>找到 <code>TyranoStudio\resources\app\lang</code> 目录</p>
</li>
<li class="lvl-3">
<p>将汉化文件 <code>zh-CN.json</code> 放入该目录</p>
</li>
<li class="lvl-3">
<p>打开 <code>lang.txt</code> 文件，用以下内容覆盖：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">zh_CN</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-3">
<p>保存并关闭文件。</p>
</li>
</ol>
<div id="downloadcard">
    <div class="card">
        <p>下载文件</p>
        <a href="./zh-CN.json" download="zh-CN.json" class="download-btn" target="_blank" data-pjax-state="load">下载</a>
    </div>
</div>
<style>
    #downloadcard {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 0;
    }

    .card {
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        text-align: center;
    }

    .card p {
        margin-bottom: 20px;
    }

    .download-btn {
        display: block;
        margin: 10px 0;
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        text-decoration: none;
        border-radius: 4px;
        transition: background-color 0.3s;
    }

    .download-btn:hover {
        background-color: #0056b3;
    }
</style>
<h2 id="Tyrano-Script-游戏汉化">Tyrano Script 游戏汉化</h2>
<p>下载 Translator++，导入工程文件，然后选择需要汉化的文本，进行翻译和导出。</p>
]]></content>
  </entry>
  <entry>
    <title>RT-AC68U TM-AC1900</title>
    <url>/2025/04/25/1/</url>
    <content><![CDATA[<p>前面提到，痛失 hy3000 这台路由器，MTK 没得玩了，然而家里全是博通的设备，购物软件看了一下，即使博通的基本没固件玩，然而 MT798x 系列的路由器，要么配置合适，价格不合适，要么价格合适，配置不合适，最后还是选择了把家里这台老路由器折腾一下。</p>
<p>当初买的是美版 TM-AC1900，这款路由器的硬件配置和 AC68U 一模一样。</p>
<h2 id="基本信息">基本信息</h2>
<p>CPU: <span class="exturl" data-url="aHR0cHM6Ly90ZWNoaW5mb2RlcG90LnNob3V0d2lraS5jb20vd2lraS9Ccm9hZGNvbV9CQ000NzA4">BCM4708<i class="fa fa-external-link-alt"></i></span> 2CORE @ 800MHz<br>
RAM: 256MB DDR3@ 666MHz<br>
FLASH: 128MB NAND<br>
5G&amp;2.4G: <span class="exturl" data-url="aHR0cHM6Ly93d3cuYnJvYWRjb20uY29tL3Byb2R1Y3RzL3dpcmVsZXNzL3dpcmVsZXNzLWxhbi1pbmZyYXN0cnVjdHVyZS9iY200MzYw">BCM4360<i class="fa fa-external-link-alt"></i></span> x2<br>
USB: 3.0 x1, 2.0 x1<br>
WAN: 1000M x1<br>
LAN: 1000M x4</p>
<h2 id="固件">固件</h2>
<ol>
<li class="lvl-3">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuYXN1cy5jb20uY24vc3VwcG9ydG9ubHkvcnRhYzY4dS9oZWxwZGVza19iaW9zLz9tb2RlbDJOYW1lPVJUQUM2OFU=">ASUS Official<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-3">
<p><span class="exturl" data-url="aHR0cHM6Ly9hZHZhbmNlZHRvbWF0by5jb20vZG93bmxvYWRzL3JvdXRlci9ydC1hYzY4dQ==">AdvancedTomato<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-3">
<p><span class="exturl" data-url="aHR0cHM6Ly90b21hdG8uZ3Jvb3YucGwvZG93bmxvYWQvSzI2QVJNLw==">Tomato by Shibby<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-3">
<p><span class="exturl" data-url="aHR0cHM6Ly9kZC13cnQuY29tL3N1cHBvcnQvcm91dGVyLWRhdGFiYXNlLz9tb2RlbD1SVC1BQzY4VSUyMChBQzE5MDApXy0=">DD-WRT<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-3">
<p><span class="exturl" data-url="aHR0cHM6Ly9vcGVud3J0Lm9yZy90b2gvaHdkYXRhL2FzdXMvYXN1c19ydC1hYzY4dQ==">OpenWrt<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-3">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuYXN1c3dydC1tZXJsaW4ubmV0">Merlin<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-3">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cua29vbGNlbnRlci5jb20vYXJ0aWNsZS9maXJtd2FyZS82X2Rvd25sb2FkL21lcmxpbl9tb2QvNzBfcnQtYWM2OHVfbWVybGluX21vZC8=">Koolshare<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-3">
<p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLnBhbGRpZXIuY29tL3J0LWFjNjh1Lw==">SWRT<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-3">
<p><span class="exturl" data-url="aHR0cHM6Ly9mcmVzaHRvbWF0by5vcmcvZG93bmxvYWRzL2ZyZXNodG9tYXRvLWFybS8=">FreshTomato<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ol>
<blockquote>
<p>OpenWrt 缺少驱动，无法使用 ac 频段。</p>
</blockquote>
<h2 id="AC1900-转-AC68U-并开启-AIMESH">AC1900 转 AC68U 并开启 AIMESH</h2>
<p>流程改编自此<span class="exturl" data-url="aHR0cHM6Ly9tb3JlbGVzcy5tZWRpdW0uY29tL2ZsYXNoLXRtLWFjLTE5MDAtdG8tcnQtYWM2OHUtdG8tdXNlLWFpbWVzaC04MGI4NDM4NzM1OGE=">How to config ASUS RT-AC68U to use AiMesh<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="下载固件和工具">下载固件和工具</h3>
<p>从 <span class="exturl" data-url="aHR0cHM6Ly9tZWdhLm56L2ZpbGUvakFFaTBTNVMjSnZXWjBzOUc0cHdNTHBhSVc4alFfcS1aZDhNQmRpaGNoM1pTU0FzOFZzMA==">TM-AC1900toRT-AC68U.7z<i class="fa fa-external-link-alt"></i></span>下载</p>
<p><code>TM-AC1900_3.0.0.4_376_1703-g0ffdbba.trx</code> 用于降级当前固件以允许使用 SSH。</p>
<p><code>mtd-write</code> 是用于更改引导加载程序和固件的工具。</p>
<p><code>FW_RT_AC68U_30043763626.trx</code> 是将 TM-AC1900 升级为 RT-AC68U 的固件。</p>
<p>将文件解压到可以轻松使用安全复制 (scp) 的位置。我使用了“下载”文件夹，并将其挂载为 Linux 驱动器。</p>
<h3 id="启用-SSH">启用 SSH</h3>
<p>TM-AC1900 很可能预装了禁用 SSH 的固件版本。</p>
<p>路由器不允许直接降级固件。需要将其置于救援模式。</p>
<ol>
<li class="lvl-3">
<p>按住重置按钮 10 秒。</p>
</li>
<li class="lvl-3">
<p>按住重置按钮并关闭 TM-AC1900。</p>
</li>
<li class="lvl-3">
<p>继续按住重置按钮，等待 10 秒。</p>
</li>
<li class="lvl-3">
<p>打开 TM-AC1900，并继续按住重置按钮 10 秒。</p>
</li>
<li class="lvl-3">
<p>前面板的电源 LED 指示灯缓慢闪烁，表示无线路由器处于救援模式。</p>
</li>
</ol>
<p>连接到恢复模式下的路由器。</p>
<ol>
<li class="lvl-3">
<p>通过以太网将您的计算机连接到路由器。</p>
</li>
<li class="lvl-3">
<p>将您的计算机设置为使用静态 IPv4 地址 192.168.29.5，子网掩码 255.255.255.0。</p>
</li>
<li class="lvl-3">
<p>打开 Web 浏览器。</p>
</li>
<li class="lvl-3">
<p>导航至 192.168.29.1。</p>
</li>
</ol>
<p>选择 <code>TM-AC1900_3.0.0.4_376_1703-g0ffdbba.trx</code> 作为文件，然后点击上传。</p>
<p>刷机完成并重启路由器后，刷新网页至 192.168.29.1。</p>
<p>由于默认设置不起作用，我不得不重新设置管理员密码（设置得简单一些）。我保留了路由器的设置。您可以将其设置为接入点，但 IP 地址和子网掩码需要手动设置。</p>
<p>在 Web 图形用户界面中，依次选择“管理”&gt;“系统”。</p>
<p>点击启用 SSH 并应用。</p>
<h3 id="通过-SSH-连接到路由器">通过 SSH 连接到路由器</h3>
<p>打开终端并输入 <code>ssh admin@192.168.29.1</code>。</p>
<p>如果成功，请输入之前设置的管理员密码。</p>
<p>您将看到类似以下内容的提示：</p>
<p>admin@(none):/tmp/home/root#</p>
<h3 id="导出-Bootloader">导出 Bootloader</h3>
<p>首先要做的是复制引导加载程序 cfe。输入：</p>
<p>cat /dev/mtd0 &gt; original-cfe.bin</p>
<p>这会获取 <code>cat /dev/mtd0</code> 的输出，并将其保存到位于 /tmp/home/root/ 的 <code>original-cfe.bin</code> 中。</p>
<p>通过 WinSCP 或其他 SSH 客户端将 <code>original-cfe.bin</code> 复制到计算机。</p>
<p>使用 <span class="exturl" data-url="aHR0cHM6Ly9jZmVkaXRvci5mZW5nLnNpLw==">CFEditor<i class="fa fa-external-link-alt"></i></span> 进行编辑，</p>
<p>之后使用本地 CFEditor 进行CFE编辑(可选，这一步主要是为了进行超频和改善信号)</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">0:ccode=<span class="comment">#a</span></span><br><span class="line">1:ccode=<span class="comment">#a</span></span><br><span class="line">0:<span class="attr">maxp2ga0</span>=<span class="number">110</span></span><br><span class="line">0:<span class="attr">maxp2ga1</span>=<span class="number">110</span></span><br><span class="line">0:<span class="attr">maxp2ga2</span>=<span class="number">110</span></span><br><span class="line">1:<span class="attr">maxp5ga0</span>=<span class="number">110</span>,<span class="number">110</span>,<span class="number">110</span>,<span class="number">110</span></span><br><span class="line">1:<span class="attr">maxp5ga1</span>=<span class="number">110</span>,<span class="number">110</span>,<span class="number">110</span>,<span class="number">110</span></span><br><span class="line">1:<span class="attr">maxp5ga2</span>=<span class="number">110</span>,<span class="number">110</span>,<span class="number">110</span>,<span class="number">110</span></span><br><span class="line"><span class="attr">clkfreq</span>=<span class="number">1200</span>,<span class="number">800</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>地区如果是US则信号强度会固定，这里进行了超频，频率为 1200MHz，内存频率为 800MHz，如果不需要超频可以不改。</p>
</blockquote>
<p>上传 <code>original-cfe.bin</code>，选择 1.0.2.0 US AiMesh (RT-AC68U)，并将目标 CFE 下载到 Downloads 文件夹。</p>
<p>将名称更改为 <code>new-cfe.bin</code>。</p>
<h3 id="引导加载程序、固件和工具导入">引导加载程序、固件和工具导入</h3>
<p>更新引导加载程序和固件切换到通过 SSH 连接到路由器的终端。</p>
<p>mtd-write 需要赋予可执行权限。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> u+x mtd-write</span><br></pre></td></tr></table></figure>
<p>接下来更新引导加载程序。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./mtd-write new_cfe.bin boot</span><br></pre></td></tr></table></figure>
<p>最后，添加新固件。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mtd-write2 FW_RT_AC68U_30043763626.trx linux</span><br></pre></td></tr></table></figure>
<p>执行 NVRAM 重置。</p>
<ol>
<li class="lvl-3">
<p>关闭路由器。</p>
</li>
<li class="lvl-3">
<p>等待 10 秒。</p>
</li>
<li class="lvl-3">
<p>按住 WPS 按钮。</p>
</li>
<li class="lvl-3">
<p>启动路由器，并继续按住 WPS 按钮 15-20 秒，直到电源 LED 开始快速闪烁。配置 RT-AC68U<br>
路由器现在是 RT-AC68U，默认地址为 192.168.1.1/24，但只有在移除 mtd5 分区后才能升级固件。</p>
</li>
</ol>
<p>需要重新设置并启用 SSH。</p>
<p>通过 SSH 连接到路由器。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh admin@192.168.1.1</span><br></pre></td></tr></table></figure>
<p>输入以下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> /dev/mtd5 &gt; /jffs/mtd5_backup.bin</span><br><span class="line"><span class="built_in">mkdir</span> /tmp/asus_jffs</span><br><span class="line">mount -t jffs2 /dev/mtdblock5 /tmp/asus_jffs</span><br><span class="line"><span class="built_in">rm</span> -rf /tmp/asus_jffs/*</span><br><span class="line"><span class="built_in">sync</span> &amp;&amp; umount /tmp/asus_jffs</span><br><span class="line"><span class="built_in">rm</span> -rf /jffs/.sys/RT-AC68U</span><br><span class="line">nvram <span class="built_in">unset</span> fw_check &amp;&amp; nvram commit &amp;&amp; restart</span><br></pre></td></tr></table></figure>
<p>现在可以通过网页界面升级固件了。</p>
<h3 id="验证">验证</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">strings /dev/mtd5</span><br></pre></td></tr></table></figure>
<p>成功转换为 RT-AC68U 后，返回应该是空，不会有任何内容。然而如果没有成功转换，返回的内容应该是一些不明的字符。</p>
<p>此时执行:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /sbin/rc mtd-erase</span><br><span class="line">./mtd-erase -d asus</span><br></pre></td></tr></table></figure>
<p>如果并重复之前的操作，直到成功为止。</p>
<h3 id="验证-AIMESH">验证 AIMESH</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">strings /dev/mtd0 | grep odmpid</span><br></pre></td></tr></table></figure>
<p>如果返回 <code>odmpid=RT-AC68U</code>，则正确安装了 1.0.2.0 US AiMesh CFE。如果显示 <code>odmpid=ASUS</code>，那就是非 AiMesh 的那个。</p>
<h2 id="杂七杂八">杂七杂八</h2>
<p>一下是相关可能有用的命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wl -i eth1 txpwr_target_max &amp;&amp; wl -i eth2 txpwr_target_max <span class="comment"># 查看双频信号强度</span></span><br><span class="line">nvram get clkfreq <span class="comment"># 查看频率</span></span><br><span class="line">nvram get bl_version <span class="comment"># 查看CFE版本</span></span><br><span class="line"><span class="built_in">cat</span> /proc/cpuinfo <span class="comment"># 查看CPU信息</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> `nvram show | grep =$ `; <span class="keyword">do</span> var=<span class="variable">$&#123;line%*=&#125;</span>; nvram <span class="built_in">unset</span> <span class="variable">$var</span>; <span class="keyword">done</span>; nvram commit <span class="comment">## 清理NVRAM</span></span><br><span class="line">nvram <span class="built_in">set</span> local_domain=$(nvram get lan_ipaddr) <span class="comment">## 禁止跳转 router.asus.com</span></span><br><span class="line">nvram commit &amp;&amp; reboot <span class="comment">## 提交修改</span></span><br></pre></td></tr></table></figure>
<h2 id="参考">参考</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9tb3JlbGVzcy5tZWRpdW0uY29tL2ZsYXNoLXRtLWFjLTE5MDAtdG8tcnQtYWM2OHUtdG8tdXNlLWFpbWVzaC04MGI4NDM4NzM1OGE=">如何设定 ASUS RT-AC68U 以使用 AiMesh<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NoYXJwMjc1L1RNLUFDMTkwMC10by1SVC1BQzY4VS9ibG9iL21haW4vUmVhZG1lLm1k">Asus TM-AC1900 to RT-AC68U<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC0xOTc2NjgtMS0xLmh0bWw=">TM-AC1900（美国T-MOBILE马甲AC68U）到手 改造刷梅林成功<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly8weG8ubmV0LzE4MjM=">TM-AC1900 3199 版本固件刷回 AC68U 支持 AiMesh 及AC68U最新固件下载<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuc2xvdDQubmV0LzIwMTQvMDkvMDYvcnQtYWM2OHUtJUU0JUJGJUFFJUU2JTk0JUI5LWNmZS8=">一劳永逸，华硕 RT-AC68U 修改 CFE 改区成功<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY2hpcGhlbGwuY29tL3RocmVhZC0yNDM3OTcwLTEtMS5odG1s">老旧AC68U解锁AiMesh<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h2 id="题外话">题外话</h2>
<p>看到有一款博通芯片的路由器，Mifon x1，看起来不错，和 AX86U 配置差不多（强一点），但是没适配固件，然而直接刷 AX86U 的固件也可以用，但是5G频段，只有G1的1200MHz能用，G2的4800MHz的频率直接废了。那这直接变成AX1800了。。。(所以暂时观望中，看了一下Merlin.ng的源码，发现全是编译的.o文件，这怎么搞适配，还没有什么头绪，或许硬改成AX86U的硬件格局，直接上AX86U的固件就可以了？但我还是希望通过软件来实现，毕竟硬改还是有点麻烦的。)</p>
<h2 id="后续">后续</h2>
<p>在救援模式里，使用华硕官方下的新固件怎么都刷不进去，刷老固件才刷进去。也不知道这是怎么回事。</p>
<p>AC68U 的 MESH 是残废的，即使强开了，硬件有缺，没什么用，不如去闲鱼淘两个30块的 AX1800 刷梅林组MESH。</p>
]]></content>
  </entry>
  <entry>
    <title>为 Openwrt 配置 ddns-go</title>
    <url>/2025/04/23/1/</url>
    <content><![CDATA[<p>看了网上的教程，配置动态 DNS 非常简单。当时还是遇到了一些问题，故此记录一下。</p>
<h2 id="1-安装-ddns-go">1. 安装 ddns-go</h2>
<p>在 Openwrt 的 Web 界面中，进入 <strong>系统</strong> -&gt; <strong>软件包</strong>，使用链接进行安装</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NpcnBkYm95L2x1Y2ktYXBwLWRkbnMtZ28=">luci-app-ddns-go<i class="fa fa-external-link-alt"></i></span></p>
<p>在 Release 中找到最新版本，安装本体，luci，语言包</p>
<h2 id="2-配置防火墙">2. 配置防火墙</h2>
<p>网上很多配置 DDNS-Go 的教程都没有提到防火墙的配置，或许是因为教程大多是19年22年的，那个时候 Openwrt 的主流版本是 19.x 和 21.x</p>
<p>现在我使用的是 23.x 的版本，防火墙的配置和之前的版本有些不同</p>
<p>在 Openwrt 的 Web 界面中，进入 <strong>网络</strong> -&gt; <strong>防火墙</strong></p>
<p>点击暴露至公网，添加自定义的端口，以及勾选暴露后台至公网，协议:TCP</p>
<p>也可以手动编写通行规则</p>
<h3 id="手动编写通信规则">手动编写通信规则</h3>
<p>我发现上面的这种方法不是所有固件都适用，所以还有一种手动编写防火墙规则的方法</p>
<p><code>/etc/config/uhttpd</code> 找到以下内容</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">config uhttpd &#x27;main&#x27;</span><br><span class="line">    ...</span><br><span class="line">    option listen_https &#x27;<span class="section">[::]</span>:443&#x27;</span><br></pre></td></tr></table></figure>
<p>把443改成你的端口号，然后重启 <code>/etc/init.d/uhttpd restart</code></p>
<p>然后编写防火墙规则 <code>vi /etc/config/firewall</code></p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">config rule</span><br><span class="line">    option name &#x27;Allow-HTTPS-from-WAN-443&#x27;</span><br><span class="line">    option src &#x27;wan&#x27;</span><br><span class="line">    option dest_port &#x27;443&#x27;</span><br><span class="line">    option proto &#x27;tcp&#x27;</span><br><span class="line">    option family &#x27;ipv6&#x27;</span><br><span class="line">    option target &#x27;ACCEPT&#x27;</span><br></pre></td></tr></table></figure>
<p>把 <code>dest_port</code> 改成你设置的端口号</p>
<p>然后重启防火墙 <code>/etc/init.d/firewall restart</code></p>
<blockquote>
<p>为啥要改掉 443 呢？因为 ISP 封禁了 80、443、8080 端口的访问，导致无法访问 Openwrt 的后台，所以需要改成其他端口</p>
</blockquote>
<h2 id="3-配置-Cloudflare">3. 配置 Cloudflare</h2>
<p>在 Cloudflare 的后台，添加一个新的域名解析记录</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>类型：AAAA</p>
</li>
<li class="lvl-2">
<p>名称：自定义</p>
</li>
<li class="lvl-2">
<p>IPv6 地址：随便，填写 <code>fe80::1</code> 或者 <code>::1</code> 都可以</p>
</li>
<li class="lvl-2">
<p>TTL：自动</p>
</li>
<li class="lvl-2">
<p>代理状态：关闭</p>
</li>
</ul>
<p>然后退出域名，在个人中心的 <strong>API Tokens</strong> 中，点击 <strong>Create Token</strong>，选择 <strong>Edit zone DNS</strong> 的模板，指定你的域名，点击 <strong>Continue to summary</strong>，然后点击 <strong>Create Token</strong></p>
<h2 id="4-配置-ddns-go">4. 配置 ddns-go</h2>
<p>在 Openwrt 的 Web 界面中，进入 <strong>服务</strong> -&gt; <strong>DDNS-Go</strong>，点击启用</p>
<p>跳过证书验证，配置完成后，点击 <strong>保存并应用</strong></p>
<p>打开 <strong>ddns-go</strong> 的后台，设置账号密码</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>DNS 服务商：Cloudflare</p>
</li>
<li class="lvl-2">
<p>填入CloudFlare提供的Token</p>
</li>
<li class="lvl-2">
<p>IPv4 地址: 取消勾选</p>
</li>
<li class="lvl-2">
<p>IPv6 地址: 通过命令获取</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ip -6 addr | grep inet6 | awk -F <span class="string">&#x27;[ \t]+|/&#x27;</span> <span class="string">&#x27;$3 == &quot;::1&quot; &#123; next;&#125; $3 ~ /^fe80::/ &#123; next;&#125; /inet6/ &#123;print $3&#125;&#x27;</span> | <span class="built_in">head</span> -n 1 | awk <span class="string">&#x27;&#123;print &quot;[&quot; $1 &quot;]:你的端口号&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>这条命令会获取本机的 IPv6 地址，格式为 [IPv6地址]:端口号，但是好像又多此一举了，CF的后台并没有变化，可以使用前两种方式获取IP地址。</p>
</blockquote>
<h2 id="5-测试">5. 测试</h2>
<p>先ping域名，若无IP返回，检查DNS配置，如果没问题，</p>
<p>访问 <code>域名:端口号</code>，如果能访问到 Openwrt 的后台，说明配置成功；</p>
<p>否则检查防火墙配置。</p>
<p>因为大部分 CF 都配置了强制 HTTPS，所以访问时需要使用 HTTPS 协议。</p>
<h2 id="参考">参考</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9kZXZlbG9wZXIvYXJ0aWNsZS8yNDY1MDU1">OpenWrt配置和使用DDNS-GO<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9yb25ncm9uZ2JxLm1vZS8yMDIxLzA4L2ZpcmV3YWxsLWFuZC1ERE5TLXNldHRpbmdzLWZvci1JUHY2">正确地配置 IPv6 防火墙和 DDNS 以在公网访问设备<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>分享</tag>
        <tag>玩机</tag>
      </tags>
  </entry>
  <entry>
    <title>HEXO Next SEO 添加 Description 和 Keywords</title>
    <url>/2025/04/15/2/</url>
    <content><![CDATA[<p>目前我使用 HEXO 搭配 Next 主题，最近我的网页优化建议中，总是提醒我缺少 Description 和 Keywords。</p>
<p>我在网上找了很多资料，发现 Next 主题的配置文件中并没有提供这两个字段的配置项。</p>
<p>而 Description 的配置项在主题的 <code>_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">excerpt_description:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="1-修改-scaffolds">1. 修改 scaffolds</h2>
<p>在 <code>scaffolds</code> 目录下，找到 <code>post.md</code> 文件，添加如下代码：</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">&lt;!-- existed code --&gt;</span><br><span class="line">description: none</span><br><span class="line">keywords:</span><br><span class="line"><span class="section">&lt;!-- existed code --&gt;</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>
<p>这样在你新建文章的时候，就会有这两个字段了。</p>
<h2 id="2-修改布局文件">2. 修改布局文件</h2>
<p>在 <code>layout</code> 目录下，找到 <code>layout/layout.njk</code> 文件，添加如下代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  &#123;&#123; partial(&#x27;_partials/head/head.njk&#x27;, &#123;&#125;, &#123;cache: theme.cache.enable&#125;) &#125;&#125;</span><br><span class="line">    <span class="comment">&lt;!-- existed code --&gt;</span></span><br><span class="line"></span><br><span class="line">  &#123;% if page.description %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;&#123;&#123; page.description &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">  &#123;% else %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;&#123;&#123; theme.description &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">  </span><br><span class="line">  &#123;% if page.keywords %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;keywords&quot;</span> <span class="attr">content</span>=<span class="string">&quot;&#123;&#123; page.keywords &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">  &#123;% else %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;keywords&quot;</span> <span class="attr">content</span>=<span class="string">&quot;&#123;&#123; theme.keywords &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- existed code --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>关于 description，某些版本是支持 SEO 的，支持的话就不需要添加了。</p>
</blockquote>
]]></content>
  </entry>
  <entry>
    <title>ARMITAGE III - 奥美蒂 III</title>
    <url>/2025/04/15/1/</url>
    <content><![CDATA[<p>最近看推刷到一个贴子，review 了一款叫做 Armitage III 的日本动漫</p>
<p><img src="https://imgcn4.bgmbk.tv/file/bk/6108/881cdc9694866b3c9f9ef20e0860ee01.webp" alt></p>
<h2 id="1-作品介绍">1. 作品介绍</h2>
<p>罗斯·西利巴斯是一位芝加哥警察，他的搭档在与一个机器人的战斗中丧生。他刚刚被调往火星，成为一名机器人专家。然而，在离开太空港之前，他发现了一群形迹可疑的人，原来是一个带着机器人保镖的疯子。在候机楼等待他的即将成为搭档的娜奥米·奥美蒂的帮助下，他阻止了这些机器人，但他们的头目却逃脱了。</p>
<p>当他们发现这群人抬着一个机器人的尸体时，剧情变得更加扑朔迷离。这名机器人是一位非常受欢迎的乡村歌手，正在冒充人类。在火星警察局，罗斯和奥美蒂搭档调查这起不寻常的案件。事实证明，有人正在谋杀机器人——一种罕见且非法的第三类机器人，它们几乎与人类难以区分——而这些机器人一直以人类的身份生活，却未被发现。</p>
<p>罗斯对调查早已感到不安，当他发现奥美蒂本人也是第三代机器人时，他更是不知所措。在与机器人刺客的对峙中，他身负重伤，不得不用机械装置替换大部分身体，这让情况变得更加复杂。</p>
<p>与此同时，与地球的战争威胁始终笼罩着罗斯，而这些罪行似乎都与他息息相关。奥美蒂成为了一名被通缉的机器人，罗斯必须在她和他的偏见之间做出选择。</p>
<p>…</p>
<h2 id="2-感想">2. 感想</h2>
<p>90 年代的日本动画，画风和剧情都很不错，日本黄金时代结束后保持惯性的产品，可惜同时代有太多优秀的作品了，比如《攻壳机动队》，导致她的存在感不高。</p>
<p>不过这部作品的设定和剧情都很不错，值得一看。</p>
<h2 id="3-相关链接">3. 相关链接</h2>
<p><span class="exturl" data-url="aHR0cHM6Ly9ueWFhLmxhbmQvdmlldy83NzE4Nzk=">【1995-2002】 ARMITAGE III_奥美蒂(アミテージ・ザ・サード)_OVA.MOVIE<i class="fa fa-external-link-alt"></i></span><br>
<span class="exturl" data-url="aHR0cHM6Ly9hbmlkYi5uZXQvYW5pbWUvNDIw">Anime: Armitage III<i class="fa fa-external-link-alt"></i></span><br>
<span class="exturl" data-url="aHR0cHM6Ly9tb2V2aWxsYWdlLmNvbS8lRTUlQTUlQTUlRTclQkUlOEUlRTglOTIlODJJSUk=">奥美蒂III<i class="fa fa-external-link-alt"></i></span></p>
<p>在线流媒体可以去 bilibili 用户 @起名费劲太郎 进行观看。</p>
<h2 id="4-疑惑">4. 疑惑</h2>
<p>找资源的时候，发现无论如何都没有 Armitage III Poly Matrix 的日语声带，只有英文配音的版本。</p>
<p>后面发现了这段话</p>
<blockquote>
<p>Armitage III is shown in 2 versions: a 4-episode OAV version of Armitage III, and The Armitage III Polymatrix DVD. The DVD is only in English (with optional Japanese subtitles) The 4-episode OAV version is in Japanese with optional English subtitles and/or dubbing. Other aspects of the movie have also been changed.</p>
</blockquote>
<h2 id="5-背景故事">5. 背景故事</h2>
<p>2046年，地球的人口问题造成了火星的被殖民化——在“一类” 机器人的帮助下，人类开始能够将火星的不友好环境地球化并将圣洛厄尔市建成。殖民开始的七十年后城市建成，里面还居住着大量的人类和“一类”机器人的大幅改进版本——“二类”机器人。来自芝加哥的中年警察罗斯·西利巴斯乘航天飞机来到圣洛厄尔。西利巴斯之所以主动要转业到火星公安局是因为他要逃离他的过去以及那阴魂不散的记忆——他的上个搭档被机器人所杀。在圣洛厄尔空间港，他遇见了其新搭档——名为纳奥米·奥美蒂的年轻女子。</p>
<p>凯莉·麦克坎农——“宇宙间最后一位乡村歌手”与西利巴斯乘坐的是同一架航天飞机。当航天飞机接近航站楼时，一个谜之男子进入了货物区；不久，入侵者被发现而警铃亦随之响起。</p>
<p>不久，当罗斯下了航天飞机时，他目睹了空港的骇人一幕。那男人和他所拖着的那个大行李箱以及他的两个警卫装上了他。那之后不久，奥美蒂命令男人们立即停下，举手投降。罗斯注意到几滴血从谜之男子的行李箱里渗了出来。之后两个机器人警卫由奥美蒂杀死，不过尽管谜之男子受伤了，但他还是跑掉了。然而，他把行李箱落在了机场——箱子里是凯莉·麦克坎农的尸体。令所有人吃惊且恐惧的是，麦克坎农事实上是台机器人：一种外表与普通人类完全相同的、新型的、之前从未被人所见到过的“三型”机器人。</p>
<p>后来，谜之男子侵入公共电视系统并重放了监控录像。录像展示了男子杀死凯莉·麦克坎农的过程并揭示了她是个机器人的事实。谜之男子雷内·丹克劳德透露，三型机器人很久以来一直表现得像是普通人一样，而没人能把它们和人类区分开来。他也发布了三型机器人的列表，该列表证明，许多名人事实上都是机器人。当人们开始了捕捉所有他们所能找到的三型机器人并将其付之于火后，城内的暴动也就随之而开始了。与此同时，雷内·丹克劳德继续猎杀三型机器人。而两位主角也开始了他们的调查，调查发现受害者均为女性。</p>
<p>其中一个受害者为了使它们从屠杀中被拯救，在死前给奥美蒂发出了条消息，里面有三分之一的“三型”机器人名单。奥美蒂收到消息之后便开始追踪丹克劳德。之后，奥美蒂是个三型机器人的事实被发现，而随着警察对她的追捕，她开始隐藏其行踪。在名叫朱利安·摩尔的三型男机器人的帮助下，罗斯找到了她。丹克劳德之后袭击了他们。</p>
<p>警察以丹克劳德的捕获为由、结束案件后，奥美蒂与朱利安在数据中心搜索有关其起源的信息。奥美蒂最终击败了丹克劳德，但那已太迟了，朱利安还是被杀了。她和罗斯闯入医院，发现丹克劳德已经康复，而二人则亦已成了罪犯。</p>
<p>不久，奥美蒂与罗斯去找寻奥美蒂的“父亲”——朝仓博士。但却发现其已失去理智，正如一个绅士的、被重编程版本的丹克劳德所解释的那样，生活在其所创造的“第四”妄想之中。他们了解到剩下的三分之二的三型机器人原本上是“杀手机器人（Assassinroids）”——具有有机成分的致命机器人，通过伪装成人类来渗透进安全施设。此计划目的是解决火星居民的低出生率问题，计划其自身便是地球的强大的女权主义社会的政策：鼓励男性移民及阻止女性移民，所催生的结果。然而，地球方面对三型机器人的发现激怒了其领导层，这使火星方面改变其计划；地球需要火星消灭三型机器人、而地球女性移民——若不遵守，则地球方面将威胁开战。因此，“杀手机器人”计划被重激活来猎杀三型机器人，这些三型机器人自其被造出来后便以普通人类之身份生活于火星。</p>
<p>此事实令奥美蒂震惊且沮丧，这让她从罗斯那里寻求安慰。而罗斯在在肯定她作为生命的价值后肯定了与其的关系。翌日，在朝仓博士使奥美蒂进入维修模式，他在奥美蒂的机架上安装了天使羽翼及粒子炮。之后地球联合军队将想要朝仓和奥美蒂杀死，然而罗斯和奥美蒂最终干掉了军队。数月后，罗斯返回火星，并给奥美蒂获取了伪造的地球ID，再丢掉这张ID卡后，奥美蒂告诉罗斯说她已经怀上了罗斯的孩子，“毕竟我也是第三系列的机器人”。</p>
]]></content>
  </entry>
  <entry>
    <title>飞利浦 幻域3000 philips hy3000 探索</title>
    <url>/2025/04/07/1/</url>
    <content><![CDATA[<p>其实这台机器很早就有 Openwrt 固件和 UBoot 了，只是奸商们不愿意放出来（特指某黄鱼上卖100-200的垃圾价格）。</p>
<p>所以只能重复造轮子了。</p>
<p>然后我从本地代理免费拿了一台。</p>
<p><a href="#%E5%90%8E%E7%BB%AD">翻车！！！</a></p>
<h2 id="配置信息">配置信息</h2>
<p>CPU: <span class="exturl" data-url="aHR0cHM6Ly93d3cuZWRhbHRlY2guY29tL3Byb2R1Y3RzL21lZGlhdGVrL210Nzk4MWJhLWEuaHRtbA==">MT7981BA<i class="fa fa-external-link-alt"></i></span><br>
RAM: <span class="exturl" data-url="aHR0cHM6Ly93d3cuc2hpY2h1YW5neWkuY29tL0RSQU1uYWN1bm1venUvMjEuaHRtbA==">1GB DDR4 SCY DP4DQ8C16FJB<i class="fa fa-external-link-alt"></i></span><br>
ROM: <span class="exturl" data-url="aHR0cHM6Ly93d3cuc2hpY2h1YW5neWkuY29tL3FpYW5ydXNoaWN1bmNodXhpbnBpYW4vNy5odG1s">128GB eMMC SCY E128CYMT2ABE00<i class="fa fa-external-link-alt"></i></span><br>
Switch: <span class="exturl" data-url="aHR0cHM6Ly93d3cuZWRhbHRlY2guY29tL3Byb2R1Y3RzL21lZGlhdGVrL210NzUzMWFlLmh0bWw=">MT7531AE<i class="fa fa-external-link-alt"></i></span><br>
RF: <span class="exturl" data-url="aHR0cHM6Ly93d3cuZWRhbHRlY2guY29tL3Byb2R1Y3RzL21lZGlhdGVrL210Nzk3NmNuLWIuaHRtbA==">MT7976CN<i class="fa fa-external-link-alt"></i></span></p>
<p>参考 <sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9mbGJvb2suY29tLmNuL3YvSmVXd1Ztek1jRQ==">飞利浦幻域3000路由器项目白皮书<i class="fa fa-external-link-alt"></i></span></p>
<p>2.4G和5G天线都是2个3DBi的单频PCB天线</p>
<p>PCB 图</p>
<p><img src="./PCB_DETAIL.png" alt></p>
<p>有几个空焊盘，其中有USB的、FLASH的、ETH的</p>
<p>USB2.0 的空焊盘，可以补焊一个 90度弯角测查式USB2.0母座，补两个数据线补0欧的电阻，但是因为是USB2.0的，速率低，干扰小，所以也不补什么电阻电容了，直接一坨锡焊上去就行了。</p>
<p><img src="./usb.png" alt></p>
<p>空的8脚焊盘疑似是 FLASH 的。</p>
<p>空的 60 PIN QFN 焊盘疑似是 <span class="exturl" data-url="aHR0cHM6Ly93d3cuYWlyb2hhLmNvbS9wcm9kdWN0cy9wL3RLa203RFBYaTVtNndZMkQ=">EN8811H<i class="fa fa-external-link-alt"></i></span>，在香蕉派 BPI R3迷你开发板上也有类似的芯片。就算知道了，但是没什么用。。。</p>
<h2 id="原版固件过滤-PCDN">原版固件过滤 PCDN</h2>
<p>将其链接再另一台具备 ADGUARD 的设备上，添加以下规则</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">data-video.71edge.^$important</span><br><span class="line">ipes-gin.iqiyi.com^$important</span><br><span class="line">msg.71edge.com^$important</span><br><span class="line">app. jinyudalu.com^$important</span><br><span class="line">flux-sec.71edge.com$important</span><br><span class="line">udp-app.jinyudalu.com^$important</span><br><span class="line">www.taobao.com^$client=&#x27;192.168.10.116&#x27;</span><br><span class="line">www.baidu.com^$client=&#x27;192.168.10.116&#x27;</span><br><span class="line">policy-video.71edge.com^$important</span><br><span class="line">flux.hcdn.71edge.com^$important </span><br></pre></td></tr></table></figure>
<h2 id="原版固件开启-SSH-Telnet">原版固件开启 SSH Telnet</h2>
<p>有人反映新版固件里面 <code>sshd</code> 和 <code>telnetd</code> 被删除了，导致无法开启 SSH 和 Telnet。</p>
<p>解包发现 <code>bin\start_cdn.sh</code> 里面</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">random_char</span></span> () &#123;</span><br><span class="line">  <span class="built_in">local</span> char_set=<span class="string">&quot;<span class="variable">$&#123;1:-0-9a-zA-Z&#125;</span>&quot;</span></span><br><span class="line">  <span class="built_in">local</span> random_num</span><br><span class="line">  random_num=<span class="string">&quot;<span class="subst">$(head /dev/urandom | LC_ALL=C tr -dc <span class="string">&quot;<span class="variable">$char_set</span>&quot;</span> | head -c 1)</span>&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -n <span class="string">&quot;<span class="variable">$random_num</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">password=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..12&#125;; <span class="keyword">do</span></span><br><span class="line">  password=<span class="string">&quot;<span class="variable">$&#123;password&#125;</span><span class="subst">$(random_char)</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cus=`factory_hm info | grep telnet | <span class="built_in">cut</span> -d <span class="string">&#x27;=&#x27;</span> -f 2`</span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;1&quot;</span> == <span class="string">&quot;<span class="variable">$cus</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">   killall -9 telnetd</span><br><span class="line">   <span class="built_in">mv</span> /usr/sbin/telnetd /usr/sbin/tn</span><br><span class="line">    p_file=<span class="string">&quot;/lib/pwd_cfg&quot;</span></span><br><span class="line">    p_s=<span class="variable">$&#123;password&#125;</span><span class="string">&quot;-7RU-&quot;</span></span><br><span class="line">  <span class="keyword">if</span> [ ! -f <span class="string">&quot;<span class="variable">$p_file</span>&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">   (<span class="built_in">echo</span> <span class="variable">$p_s</span>;<span class="built_in">sleep</span> 1;<span class="built_in">echo</span> <span class="variable">$p_s</span>) | passwd &gt; /dev/null</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>这个是随机生成一个密码，然后使用 <code>passwd</code> 命令设置密码。以及将 <code>telnetd</code> 重命名为 <code>tn</code>，然后杀掉 <code>telnetd</code> 进程。</p>
<p>但是 <code>openwrt</code> 有一个 <code>ubus</code> 机制</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">================= FAILSAFE MODE active ================</span><br><span class="line">special commands:</span><br><span class="line">* firstboot      reset settings to factory defaults</span><br><span class="line">* mount_root  mount root-partition with config files</span><br><span class="line"></span><br><span class="line">after mount_root:</span><br><span class="line">* passwd    change root&#x27;s password</span><br><span class="line">* /etc/config      directory with config files</span><br><span class="line"></span><br><span class="line">for more help see:</span><br><span class="line">https://openwrt.org/docs/guide-user/troubleshooting/</span><br><span class="line">- failsafe_and_factory_reset</span><br><span class="line">- root_password_reset</span><br><span class="line">=======================================================</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>可以进入 <code>failsafe</code> 模式，使用 <code>passwd</code> 命令修改密码</p>
<p>然后使用 ubus 修改密码</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ubus call luci setPassword <span class="string">&#x27;&#123; &quot;username&quot;: &quot;root&quot;, &quot;password&quot;: &quot;test&quot; &#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>参考 <span class="exturl" data-url="aHR0cHM6Ly9vcGVud3J0Lm9yZy9kb2NzL2d1aWRlLXVzZXIvdHJvdWJsZXNob290aW5nL2ZhaWxzYWZlX2FuZF9mYWN0b3J5X3Jlc2V0">Failsafe mode, factory reset, and recovery mode<i class="fa fa-external-link-alt"></i></span></p>
<p>重设密码后，使用 <code>root</code> 用户登录，将 <code>tn</code> 重命名为 <code>telnetd</code>，然后启用。</p>
<p>参考 <sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p>
<h2 id="下载文件">下载文件</h2>
<div id="downloadcard">
    <div class="card">
        <p>下载文件</p>
        <a href="./files/all.zip" download="philips-hy3000.zip" class="download-btn" target="_blank" data-pjax-state="load">暂未提供</a>
    </div>
</div>
<style>
    #downloadcard {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 0;
    }

    .card {
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        text-align: center;
    }

    .card p {
        margin-bottom: 20px;
    }

    .download-btn {
        display: block;
        margin: 10px 0;
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        text-decoration: none;
        border-radius: 4px;
        transition: background-color 0.3s;
    }

    .download-btn:hover {
        background-color: #0056b3;
    }
</style>
<p>个人技术力有限，还在探索中，故暂时不提供某些文件。</p>
<hr>
<details>
<p>以下是我自行制作的固件和 UBoot</p>
<p><strong>但是没有经过测试，可能会导致设备变砖，请谨慎使用</strong>。</p>
<summary>固件和 UBoot</summary>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1l1emhpaTA3MTgvYmwtbXQ3OTh4LXBoaWxpcHMtaHkzMDAwL3JlbGVhc2Vz">fip-uboot<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1l1emhpaTA3MTgvaW1tb3J0YWx3cnQtbXQ3OTh4LXBoaWxpcHMtaHkzMDAwL3JlbGVhc2Vz">immortalwrt<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1l1emhpaTA3MTgvQWN0aW9ucy1PcGVuV3J0L3JlbGVhc2Vz">autoBuild<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<p>如果有什么问题，邮件联系我，或者在 GitHub 上提 issue。</p>
</details>
<h2 id="TTL-连接">TTL 连接</h2>
<p>拆机，找到主板上的串口，连接 RX TX GND（可能需要焊接）。</p>
<p>以 CH340G 为例</p>
<ol>
<li class="lvl-3">
<p>安装驱动</p>
</li>
<li class="lvl-3">
<p>连接 RX TX GND</p>
</li>
<li class="lvl-3">
<p>打开设备管理器，查看 COM 口号（假设串口号是COM9）</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">start devmgmt.msc</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-3">
<p>关闭防火墙以及安全软件，使用 Putty、Xbash 或者 HyperTerminal 等串口调试助手</p>
</li>
<li class="lvl-3">
<p>打开串口调试助手，设置波特率115200，数据位8，停止位1，无校验位，串口COM9</p>
</li>
<li class="lvl-3">
<p>选择对应的 COM 口，点击打开串口</p>
</li>
<li class="lvl-3">
<p>连接成功后，打开路由器电源</p>
</li>
</ol>
<h2 id="备份固件">备份固件</h2>
<p>暂未完成… 因为有人已经做了，我就不做了，只是说一下大致的步骤</p>
<p>参考<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup> <sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看分区信息</span></span><br><span class="line">fdisk -l</span><br><span class="line"><span class="comment"># emmc 分区</span></span><br><span class="line"><span class="built_in">cat</span> /proc/partitions</span><br><span class="line"><span class="comment"># nand 分区</span></span><br><span class="line"><span class="built_in">cat</span> /proc/mtd</span><br></pre></td></tr></table></figure>
<p>使用 <code>dd</code> 命令备份分区</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># dd if=/dev/mmcblk0boot0 of=/mnt/mmcblk0p8/mmcblk0boot0_bl2.bin conv=fsync</span></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/mmcblk0p1 of=/mnt/mmcblk0p8/mmcblk0p1_PMBR.bin conv=fsync</span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/mmcblk0p2 of=/mnt/mmcblk0p8/mmcblk0p2_u-boot-env.bin conv=fsync</span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/mmcblk0p3 of=/mnt/mmcblk0p8/mmcblk0p3_factory.bin conv=fsync</span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/mmcblk0p4 of=/mnt/mmcblk0p8/mmcblk0p4_fip.bin conv=fsync</span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/mmcblk0p5 of=/mnt/mmcblk0p8/mmcblk0p5_kernel.bin conv=fsync</span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/mmcblk0p6 of=/mnt/mmcblk0p8/mmcblk0p6_rootfs.bin conv=fsync</span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/mmcblk0p7 of=/mnt/mmcblk0p8/mmcblk0p7.bin conv=fsync</span><br></pre></td></tr></table></figure>
<p>用命令或者 <code>winscp</code>、<code>xshell</code> 等工具传输到本地</p>
<h3 id="分区信息">分区信息</h3>
<p>原厂分区信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">guid/type=PartitionTypes.LinuxFilesystem first-block=0 size=34 name=gpt</span><br><span class="line">guid/type=PartitionTypes.LinuxFilesystem first-block=8192 size=1024 name=u-boot-env</span><br><span class="line">guid/type=PartitionTypes.LinuxFilesystem first-block=9216 size=4096 name=factory</span><br><span class="line">guid/type=PartitionTypes.LinuxFilesystem first-block=13312 size=4096 name=fip</span><br><span class="line">guid/type=PartitionTypes.LinuxFilesystem first-block=17408 size=65536 name=kernel</span><br><span class="line">guid/type=PartitionTypes.LinuxFilesystem first-block=82944 size=1024001 name=rootfs</span><br><span class="line">guid/type=PartitionTypes.LinuxFilesystem first-block=1107968 size=20480 name=</span><br><span class="line">guid/type=PartitionTypes.LinuxFilesystem first-block=1128448 size=8388608 name=</span><br><span class="line">guid/type=PartitionTypes.LinuxFilesystem first-block=9517056 size=230686720 name=</span><br><span class="line">guid/type=PartitionTypes.LinuxFilesystem first-block=240203776 size=20480 name=</span><br><span class="line">guid/type=PartitionTypes.LinuxFilesystem first-block=240224256 size=4028383 name=</span><br></pre></td></tr></table></figure>
<h3 id="提取-dts">提取 dts</h3>
<p>先取得 <code>kernel.bin</code>，</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1BhYmxvQ2FzdGVsbGFuby9leHRyYWN0LWR0Yg==">extract-dtb<i class="fa fa-external-link-alt"></i></span></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/PabloCastellano/extract-dtb.git</span><br><span class="line"><span class="built_in">cd</span> extract-dtb</span><br></pre></td></tr></table></figure>
<p>转换 bin 到 dtb</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./extract-dtb/extract-dtb.py kernel.bin</span><br><span class="line"><span class="built_in">cd</span> dtb</span><br></pre></td></tr></table></figure>
<p>得到的较大的文件就是需要的 dtb 文件（02_xxx.dtb）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install device-tree-compiler</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">dtc -I dtb -O dts -o mt7981-ph-hy3000.dts <span class="string">&#x27;./mt7981-ph-hy3000.dtb&#x27;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>原厂的参数基本是16进制的，但是要适配 Openwrt 的话，必须是10进制的，所以需要转换一下</p>
</blockquote>
<p>参考 <sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup></p>
<h3 id="制作好的-dts">制作好的 dts</h3>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1l1emhpaTA3MTgvQWN0aW9ucy1IWTMwMDAvdHJlZS9tYWluL0hZMzAwMF9EVFM=">HY3000_DTS<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="刷写-UBOOT">刷写 UBOOT</h2>
<p>参考 <sup class="footnote-ref"><a href="#fn6" id="fnref6">[6]</a></sup> <sup class="footnote-ref"><a href="#fn7" id="fnref7">[7]</a></sup> <sup class="footnote-ref"><a href="#fn8" id="fnref8">[8]</a></sup></p>
<p><code>fip.bin</code> 为某个机子的 uboot;<br>
<code>mtk_uartboot</code> 是一个通过ttl接口，把uboot通过ttl传入，ram的一种启动方式，通过mtk_uartboot启动7981设备的时候除了需要uboot还需要BL2，这个BL2和刷机用的BL2不一样，这个是ram管理用的BL2，刷机是Flash用的BL2，请不要搞混。<br>
<code>BL2</code> 是用于关闭安全引导的，<code>gpt.bin</code> 是分区表。</p>
<p>这个设备没有安全引导，所以无需刷写 <code>BL2</code>，直接刷 <code>fip.bin</code> 即可。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">.\mtk_uartboot\mtk_uartboot.exe -s COM9 -p .\mtk_uartboot\mt7981\mt7981-ddr4-bl2-ram-boot.bin -a -f .\fip\mt7981_philips_hy3000-fip.bin --brom-load-baudrate 115200 --bl2-load-baudrate 115200</span><br></pre></td></tr></table></figure>
<p>或者使用脚本 <code>ph-hy3000.bat</code></p>
<h3 id="1-运行命令后会出现等待握手信息">1.运行命令后会出现等待握手信息</h3>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">Using serial port: COM9</span><br><span class="line">Handshake...</span><br></pre></td></tr></table></figure>
<h3 id="2-然后路由器上电开机，握手成功CMD会输出sending-payload信息开始发送bl2">2.然后路由器上电开机，握手成功CMD会输出sending payload信息开始发送bl2</h3>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">hw code: <span class="number">0</span>x7981</span><br><span class="line">hw sub code: <span class="number">0</span>x8a00</span><br><span class="line">hw <span class="built_in">ver</span>: <span class="number">0</span>xca00</span><br><span class="line">sw <span class="built_in">ver</span>: <span class="number">0</span>x1</span><br><span class="line">Baud rate <span class="built_in">set</span> to <span class="number">115200</span></span><br><span class="line">sending payload to <span class="number">0</span>x201000...</span><br></pre></td></tr></table></figure>
<h3 id="3-发送完成加载bl2会输出信息同时开始发送fip">3.发送完成加载bl2会输出信息同时开始发送fip</h3>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="function">Checksum: 0<span class="title">x3c82</span></span></span><br><span class="line"><span class="function"><span class="title">Setting</span> <span class="title">baudrate</span> <span class="title">back</span> <span class="title">to</span> 115200</span></span><br><span class="line"><span class="function"><span class="title">Jumping</span> <span class="title">to</span> 0<span class="title">x201000</span> <span class="title">in</span> <span class="title">aarch64</span>...</span></span><br><span class="line"><span class="function"><span class="title">Waiting</span> <span class="title">for</span> <span class="title">BL2</span>. <span class="title">Message</span> <span class="title">below</span>:</span></span><br><span class="line"><span class="function">==================================</span></span><br><span class="line"><span class="function"><span class="title">NOTICE</span>:  <span class="title">BL2</span>: <span class="title">v2</span>.10.0   (<span class="title">release</span>):<span class="title">v2</span>.4-<span class="title">rc0</span>-5845-<span class="title">gbacca82a8</span>-<span class="title">dirty</span></span></span><br><span class="line"><span class="function"><span class="title">NOTICE</span>:  <span class="title">BL2</span>: <span class="title">Built</span> : 20:30:05, <span class="title">Feb</span>  2 2024</span></span><br><span class="line"><span class="function"><span class="title">NOTICE</span>:  <span class="title">WDT</span>: <span class="title">Cold</span> <span class="title">boot</span></span></span><br><span class="line"><span class="function"><span class="title">NOTICE</span>:  <span class="title">WDT</span>: <span class="title">disabled</span></span></span><br><span class="line"><span class="function"><span class="title">NOTICE</span>:  <span class="title">CPU</span>: <span class="title">MT7981</span> (1300<span class="title">MHz</span>)</span></span><br><span class="line"><span class="function"><span class="title">NOTICE</span>:  <span class="title">EMI</span>: <span class="title">Using</span> <span class="title">DDR4</span> <span class="title">settings</span></span></span><br><span class="line"><span class="function"><span class="title">NOTICE</span>:  <span class="title">EMI</span>: <span class="title">Detected</span> <span class="title">DRAM</span> <span class="title">size</span>: 1024<span class="title">MB</span></span></span><br><span class="line"><span class="function"><span class="title">NOTICE</span>:  <span class="title">EMI</span>: <span class="title">complex</span> <span class="title">R</span>/<span class="title">W</span> <span class="title">mem</span> <span class="title">test</span> <span class="title">passed</span></span></span><br><span class="line"><span class="function"><span class="title">NOTICE</span>:  <span class="title">Starting</span> <span class="title">UART</span> <span class="title">download</span> <span class="title">handshake</span> ...</span></span><br><span class="line"><span class="function">==================================</span></span><br><span class="line"><span class="function"><span class="title">BL2</span> <span class="title">UART</span> <span class="title">DL</span> <span class="title">version</span>: 0<span class="title">x10</span></span></span><br><span class="line"><span class="function"><span class="title">Baudrate</span> <span class="title">set</span> <span class="title">to</span>: 115200</span></span><br></pre></td></tr></table></figure>
<p>此时在上传fip，600KB的fip使用1500000波特率只需要几秒钟，低波特率则大概45秒。此时如果需要进入uboot webui可以直接按住reset按键不放，等待uboot指示灯闪烁并进入uboot。如果没有按reset会直接启动固件，进入固件再恢复刷砖的分区也行。</p>
<h3 id="4-fip加载完后输出">4.fip加载完后输出</h3>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">FIP sent.</span><br><span class="line">==================================</span><br><span class="line"><span class="function">NOTICE:  <span class="title">Received</span> <span class="title">FIP</span> 0<span class="title">x90b59</span> @ 0<span class="title">x40400000</span> ...</span></span><br><span class="line"><span class="function">==================================</span></span><br></pre></td></tr></table></figure>
<p>此时程序已经执行完，已经加载uboot，如果不进行打断将会直接启动固件。</p>
<p>参考 <sup class="footnote-ref"><a href="#fn9" id="fnref9">[9]</a></sup></p>
<p>所以需要立即关闭cmd窗口，同时其他ssh工具连接串口(比如 putty,XShell)，进入后使用键盘上下键移动光标</p>
<p>晚了打断启动，可以试试按路由复位键，重复以上步骤</p>
<blockquote>
<p>注意:ttl加载uboot，可能有个问题，就是你来不及打开com口，uboot就跳去引导固件了，启动不成功又去加载你闪存的uboot,这就成了个环，你又不能提前打开com口。你又不知道。所以试试安住reset键，再给路由器上电。</p>
</blockquote>
<p>此时输出</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">MT7981&gt;</span><br></pre></td></tr></table></figure>
<p>表示已经进入uboot命令行</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">MT7981&gt; bootmenu</span><br></pre></td></tr></table></figure>
<p>进入uboot菜单</p>
<h3 id="5-进入uboot-webui">5.进入uboot webui</h3>
<p>进入路由器进入uboot后，电脑设置IP为<code>192.168.1.254</code>，子网掩码为<code>255.255.255.0</code></p>
<p>先ping一下路由器，确认连接正常</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ping 192.168.1.1</span><br></pre></td></tr></table></figure>
<p>如果ping不通，检查网线是否连接好，或者路由器是否正常工作。</p>
<p>先刷写 uboot</p>
<p><code>192.168.1.1/uboot.html</code> 上传 <code>mt7981_philips_hy3000-fip.bin</code></p>
<p>然后刷 gpt（可选）</p>
<p><code>192.168.1.1/gpt.html</code> 上传 <code>Philips hy3000-PMBR-gpt.bin</code></p>
<h2 id="刷新固件">刷新固件</h2>
<p>uboot 下，进入 <code>192.168.1.1</code> 上传固件</p>
<h2 id="恢复原厂固件">恢复原厂固件</h2>
<p>暂未完成…</p>
<p>参考 <sup class="footnote-ref"><a href="#fn10" id="fnref10">[10]</a></sup></p>
<p>使用 <code>dd</code> 命令</p>
<p>暂时没有回到原厂的想法，毕竟一个PCDN，没什么用。</p>
<h2 id="定制环境搭建">定制环境搭建</h2>
<p>使用 VirtualBox 搭建 Ubuntu 64 位虚拟机</p>
<p>推荐使用 2204，其他版本也可以</p>
<p>其他虚拟机也可以，VMware 也可以</p>
<p>跳过自动安装，选择 <code>Try Ubuntu</code> 进入系统</p>
<p>一切默认即可，最小安装</p>
<blockquote>
<p>可以先试用系统，更改分辨率，然后再安装系统，这样比较好操作</p>
</blockquote>
<p>安装完重启虚拟机，安装增强功能。</p>
<p>共享剪切板与拖放改为双向，共享文件夹改为一个方便的目录，挂载点改为 <code>/home/username/shareDir</code>，自动挂载，固定分配</p>
<p>关闭屏保、息屏以及省电相关设置</p>
<p>apt 升级（非必须）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt upgrade</span><br></pre></td></tr></table></figure>
<p>恢复默认源（非必须）</p>
<p>参考 <sup class="footnote-ref"><a href="#fn11" id="fnref11">[11]</a></sup>，有时候系统会默认只有国内源，然而有一些包没有，就需要恢复默认源（追加即可），完成后进行上一步 apt 升级。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> gedit /etc/apt/sources.list</span><br></pre></td></tr></table></figure>
<p>安装软件包</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install curl</span><br></pre></td></tr></table></figure>
<p>配置环境</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> bash -c <span class="string">&#x27;bash &lt;(curl -sL https://build-scripts.immortalwrt.eu.org/init_build_environment.sh)&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="定制-immortalwrt-固件">定制 immortalwrt 固件</h2>
<p>参考 <sup class="footnote-ref"><a href="#fn12" id="fnref12">[12]</a></sup> <sup class="footnote-ref"><a href="#fn13" id="fnref13">[13]</a></sup> <sup class="footnote-ref"><a href="#fn14" id="fnref14">[14]</a></sup></p>
<ol>
<li class="lvl-3">
<p>克隆仓库</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --depth=1 https://github.com/hanwckf/immortalwrt-mt798x.git</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-3">
<p>进入目录</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> immortalwrt-mt798x</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-3">
<p>获取最新 feed</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./scripts/feeds update -a</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果出现报错（即有error或者xx停止等字样） 参考 <sup class="footnote-ref"><a href="#fn15" id="fnref15">[15]</a></sup></p>
</blockquote>
 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Build dependency: Please install ncurses. (Missing libncurses.so or ncurses.h)</span><br><span class="line"></span><br><span class="line">Build dependency: Please install a static zlib. (Missing libz.a or zlib.h)</span><br><span class="line"></span><br><span class="line">Build dependency: Please install the openssl library (with development headers)</span><br><span class="line"></span><br><span class="line">Build dependency: Please install GNU &#x27;awk&#x27;</span><br><span class="line"></span><br><span class="line">Build dependency: Please install the Subversion client</span><br></pre></td></tr></table></figure>
<p>当前编译环境缺少依赖组件</p>
<p>（可选，出现问题后使用）可一次性全部安装所需依赖组件，输入:</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install gcc g++ binutils patch bzip2 flex bison make autoconf gettext texinfo unzip sharutils subversion libncurses5-dev ncurses-term zlib1g-dev subversion git-core gawk asciidoc libz-dev zlib1g-dev libssl-dev</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-3">
<p>链接 feed</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./scripts/feeds install -a</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-3">
<p>选择配置</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cp</span> -f defconfig/mt7981-ax3000.config .config</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-3">
<p>使用 <code>make menuconfig</code> 选择编译选项</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make menuconfig</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-3">
<p>配置选项</p>
<ul class="lvl-2">
<li class="lvl-6">Target System 选择 <code>MediaTek Ralink ARM</code></li>
<li class="lvl-6">Subtarget 选择 <code>MT7981</code></li>
<li class="lvl-6">Target Profile 选择 <code>philips-hy3000</code>，但是目前没有这个选项，查看 <code>### 适配 philips-hy3000</code></li>
<li class="lvl-6">Kernel module -&gt; File systems -&gt; 添加 ext4、f2fs、brtfs 支持</li>
<li class="lvl-6">其他选项根据需要选择</li>
<li class="lvl-6"><code>&lt;save&gt;</code> 保存配置</li>
<li class="lvl-6"><code>&lt;exit&gt;</code> 退出配置</li>
</ul>
</li>
<li class="lvl-3">
<p>编译固件</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make -j$(<span class="built_in">nproc</span>) V=s</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>-j$(nproc)</code> 表示使用所有 CPU 核心进行编译<br>
<code>-j1</code> 表示使用单核编译<br>
<code>-j8</code> 表示使用八核编译<br>
<code>V=s</code> 表示显示详细编译信息<br>
<code>V=sc</code> 表示显示编译信息和警告<br>
<code>V=99</code> 表示显示所有编译信息</p>
</blockquote>
</li>
</ol>
<blockquote>
<p>如果编译过程中出现错误，或者使用 Ctrl+C 中断编译，可以使用 <code>make clean</code> 清理编译缓存，然后重新编译。参考 <sup class="footnote-ref"><a href="#fn16" id="fnref16">[16]</a></sup><br>
linux 工具 quilt 可能会执行相当长时间，不要以为卡住了，不要中断编译，耐心等待。</p>
</blockquote>
<p>编译完成后，固件文件在 <code>bin</code> 目录下</p>
<h3 id="适配-philips-hy3000">适配 philips-hy3000</h3>
<p>对于没有配置的情况，我们需要手动添加配置文件</p>
<p>所以需要拆机，查看具体的硬件信息，可以查看 <code>## 配置信息</code> 中的配置</p>
<blockquote>
<p>区分单臂路由，看 <code>dts</code> 中的 <code>gmac</code>，单臂路由器只有一个 <code>gmac</code>，其他路由器有两个 <code>gmac</code>。或者拆开看主板上的PCB布局</p>
</blockquote>
<p>所以寻找一个类似的路由器，在其基础上进行修改，比如 SL-3000 这款机型就比较接近</p>
<p>有关 dts 的部分在前文中已经提到过了，这里就不再赘述了</p>
<ol>
<li class="lvl-3">
<p>进入 <code>target/linux/mediatek/files-5.4/arch/arm64/boot/dts/mediatek/</code> 目录创建<code>mt7981-philips-hy3000.dts</code>以 <a href="https://github.com/kiddin9/Kwrt/blob/master/devices/mediatek_filogic/diy/target/linux/mediatek/dts/mt7981-sl-3000-emmc.dts"><code>mt7981-sl3000.dts</code></a> 为基础，进行修改</p>
<p>需要修改的地方有：</p>
<ul class="lvl-2">
<li class="lvl-6">
<p>key、leds、gsw、eth、hnat</p>
</li>
<li class="lvl-6">
<p>这个设备只有红、绿两种灯</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>gpio</th>
<th>address(10)</th>
<th>level</th>
</tr>
</thead>
<tbody>
<tr>
<td>led:red</td>
<td>8</td>
<td>high</td>
</tr>
<tr>
<td>led:green</td>
<td>13</td>
<td>low</td>
</tr>
<tr>
<td>key:reset</td>
<td>1</td>
<td>low</td>
</tr>
<tr>
<td>key:mesh</td>
<td>0</td>
<td>high</td>
</tr>
</tbody>
</table>
<p>这里没有用原厂的网络接口配置方法，使用了 <code>mt7981-360t7-base.dtsi</code> 的配置方法</p>
<p>参考 <sup class="footnote-ref"><a href="#fn17" id="fnref17">[17]</a></sup></p>
<p>还有就是 USB，即xhci，出场主板上就没有焊接，可以不需要，需要配的话就照着2.0的来就行了</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">@xhci &#123;</span><br><span class="line">    status = &quot;okay&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-3">
<p>打开 <code>target\linux\mediatek\mt7981\base-files\etc\board.d\02_network</code> 文件</p>
<p>根据 factory 里面的信息</p>
 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">label=wan=E0:FF:FF:FF:FF:3C</span><br><span class="line">ra0=E0:FF:FF:FF:FF:3D</span><br><span class="line">rax0=E0:FF:FF:FF:FF:3E</span><br><span class="line">eth1=E0:FF:FF:FF:FF:3F</span><br><span class="line">eth2=E0:FF:FF:FF:FF:40</span><br><span class="line">eth3=E0:FF:FF:FF:FF:3B</span><br><span class="line">eth4=E0:FF:FF:FF:FF:3C</span><br><span class="line"></span><br><span class="line">sn=PH0XXXXXXXXX9</span><br><span class="line"></span><br><span class="line">0x74 = E0:FF:FF:FF:FF:3D</span><br><span class="line">0x10000 = PH0XXXXXXXXX9</span><br></pre></td></tr></table></figure>
<p>适配的接口信息 <code>02_network</code></p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">philips,hy3000)</span><br><span class="line">ucidef_set_interfaces_lan_wan &quot;eth0&quot; &quot;eth1&quot;</span><br><span class="line">ucidef_add_switch &quot;switch0&quot; \</span><br><span class="line">&quot;1:lan&quot; &quot;2:lan&quot; &quot;3:lan&quot; &quot;0:wan&quot; &quot;6u@eth0&quot; &quot;5u@eth1&quot;</span><br><span class="line">;;</span><br></pre></td></tr></table></figure>
<p>所以添加网络mac信息</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">philips,hy3000)</span><br><span class="line">lan_mac=$(mmc_get_mac_binary factory 0x74)</span><br><span class="line">wan_mac=$(macaddr factory $lan_mac 1)</span><br><span class="line">label_mac=$wan_mac</span><br><span class="line">;;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-3">
<p>打开 <code>target\linux\mediatek\mt7981\base-files\lib\preinit\90_extract_caldata</code> 文件函数 <code>do_extract_caldata()</code>中添加 <code>philips-hy3000</code> 的信息</p>
</li>
<li class="lvl-3">
<p>打开 <code>target\linux\mediatek\mt7981\base-files\lib\upgrade\platform.sh</code> 文件函数 <code>platform_do_upgrade()</code>、<code>platform_check_image()</code> 中添加 <code>philips-hy3000</code> 的信息</p>
</li>
<li class="lvl-3">
<p>打开 <code>target\linux\mediatek\image\mt7981.mk</code> 文件添加适配信息 参考<sup class="footnote-ref"><a href="#fn18" id="fnref18">[18]</a></sup></p>
 <figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">define</span> Device/philips_hy3000</span><br><span class="line">    DEVICE_VENDOR := Philips</span><br><span class="line">    DEVICE_MODEL := HY3000</span><br><span class="line">    DEVICE_DTS := mt7981-philips-hy3000</span><br><span class="line">    DEVICE_DTS_DIR := <span class="variable">$(DTS_DIR)</span>/mediatek</span><br><span class="line">    SUPPORTED_DEVICES := philips,hy3000</span><br><span class="line">    DEVICE_PACKAGES := <span class="variable">$(MT7981_USB_PKGS)</span> f2fsck losetup mkf2fs kmod-fs-f2fs kmod-mmc \</span><br><span class="line">        luci-app-samba4</span><br><span class="line">    IMAGE/sysupgrade.bin := sysupgrade-tar | append-metadata</span><br><span class="line"><span class="keyword">endef</span></span><br><span class="line">TARGET_DEVICES += philips_hy3000</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-3">
<p>打开 <code>defconfig\mt7981-ax3000.config</code> 文件添加 <code>philips-hy3000</code> 的信息</p>
 <figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">CONFIG_TARGET_DEVICE_mediatek_mt7981_DEVICE_philips_hy3000</span>=y</span><br><span class="line"><span class="attr">CONFIG_TARGET_DEVICE_PACKAGES_mediatek_mt7981_DEVICE_philips_hy3000</span>=<span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="定制-uboot">定制 uboot</h2>
<p>参考 <sup class="footnote-ref"><a href="#fn14" id="fnref14:1">[14:1]</a></sup> <sup class="footnote-ref"><a href="#fn19" id="fnref19">[19]</a></sup> <sup class="footnote-ref"><a href="#fn20" id="fnref20">[20]</a></sup></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git <span class="built_in">clone</span> https://github.com/hanwckf/bl-mt798x.git</span><br><span class="line"><span class="built_in">cd</span> bl-mt798x</span><br></pre></td></tr></table></figure>
<p>UBoot 有 2022 与 2023 版本，根据自己的需求选择</p>
<p>以相近设备的配置为基础进行修改</p>
<p><code>atf-20220606-637ba581b\configs\mt7981_philips_hy3000__defconfig</code><br>
<code>uboot-mtk-20220606\configs\mt7981_philips_hy3000_defconfig</code></p>
<p>修改 <code>uboot-mtk-time/arch/arm/dts</code> 中的类似机型 dts 文件</p>
<p>参照 openwrt 的 dts 文件进行修改</p>
<p><code>build.sh</code> 中修改相关信息，比如需要编译的版本 22/23，如果编译22版，则把23版注释掉</p>
<p>然后编译</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SOC=mt7981 BOARD=philips_hy3000 ./build.sh</span><br></pre></td></tr></table></figure>
<p>编译后的文件在 <code>output</code> 目录下</p>
<h2 id="GPT-BL2">GPT&amp;BL2</h2>
<p>参考 <sup class="footnote-ref"><a href="#fn21" id="fnref21">[21]</a></sup> <sup class="footnote-ref"><a href="#fn22" id="fnref22">[22]</a></sup> <sup class="footnote-ref"><a href="#fn23" id="fnref23">[23]</a></sup> <sup class="footnote-ref"><a href="#fn24" id="fnref24">[24]</a></sup> <sup class="footnote-ref"><a href="#fn25" id="fnref25">[25]</a></sup> <sup class="footnote-ref"><a href="#fn26" id="fnref26">[26]</a></sup></p>
<p>bl-mt798x 项目中</p>
<p>在 <code>atf/tools/dev/gpt_editor</code> 目录下存在 <code>mtk_gpt.py</code> 脚本文件</p>
<p>编写相应的 <code>gpt.json</code> 分区表</p>
<p>参考  <sup class="footnote-ref"><a href="#fn10" id="fnref10:1">[10:1]</a></sup></p>
<p>使用该脚本即可生成对应的 <code>gpt.bin</code> 文件</p>
<p>在对应设备的 <code>deconfig</code> 文件中添加 <code>CONFIG_TARGET_ALL_NO_SEC_BOOT=y</code></p>
<p>然后编译 <code>bl-mt798x</code> 项目，生成的 <code>bl2.bin</code> 文件在 <code>output</code> 目录下</p>
<p>这台设备不需要 BL2。</p>
<p>新的 ATF <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21lZGlhdGVrLW9wZW53cnQvYXJtLXRydXN0ZWQtZmlybXdhcmUvdHJlZS9tdGtzb2M=">arm-trusted-firmware<i class="fa fa-external-link-alt"></i></span></p>
<p>这是复刻自 ARM-software 仓库的一个分支</p>
<h2 id="主线-FIT">主线 FIT</h2>
<p>暂未完成…</p>
<p>参考 <sup class="footnote-ref"><a href="#fn24" id="fnref24:1">[24:1]</a></sup> <sup class="footnote-ref"><a href="#fn27" id="fnref27">[27]</a></sup> <sup class="footnote-ref"><a href="#fn28" id="fnref28">[28]</a></sup> <sup class="footnote-ref"><a href="#fn29" id="fnref29">[29]</a></sup> <sup class="footnote-ref"><a href="#fn30" id="fnref30">[30]</a></sup> <sup class="footnote-ref"><a href="#fn31" id="fnref31">[31]</a></sup></p>
<p>在 oss 项目 <sup class="footnote-ref"><a href="#fn31" id="fnref31:1">[31:1]</a></sup> 观察到 dts 文件中有 mtd 相关的配置</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mtd-layout &#123;</span><br><span class="line"> layout@0 &#123;</span><br><span class="line">  label = &quot;default&quot;;</span><br><span class="line">  cmdline = &quot;console=ttyS0,115200n8 earlycon=uart8250,mmio32,0x11002000&quot;;</span><br><span class="line">  mtdids = &quot;nmbm0=nmbm0&quot;;</span><br><span class="line">  mtdparts = &quot;nmbm0:1024k(bl2),512k(u-boot-env),2048k(Factory),2048k(fip),512k(product_info),512k(kdump),64512k(ubi)&quot;;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> layout@1 &#123;</span><br><span class="line">  label = &quot;ubi-107m&quot;;</span><br><span class="line">  mtdids = &quot;nmbm0=nmbm0&quot;;</span><br><span class="line">  mtdparts = &quot;nmbm0:1024k(bl2),512k(u-boot-env),2048k(Factory),2048k(fip),512k(product_info),512k(kdump),109568k(ubi)&quot;;</span><br><span class="line"> &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>但是很显然，这是 nand 的配置</p>
<p>同时观察到 atf deconfig 文件中</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- CONFIG_TARGET_FIP_NO_SEC_BOOT=y</span></span><br><span class="line"><span class="addition">+ CONFIG_TARGET_ALL_NO_SEC_BOOT=y</span></span><br></pre></td></tr></table></figure>
<p>随后，我在 openwrt 项目的github页面找到了一个设备的 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL29wZW53cnQvb3BlbndydC9ibG9iL21haW4vdGFyZ2V0L2xpbnV4L21lZGlhdGVrL2R0cy9tdDc5ODFiLXVuaWVsZWMtdTc5ODEtMDEtZW1tYy5kdHM=">dts mt7981b-unielec-u7981-01-emmc.dts<i class="fa fa-external-link-alt"></i></span></p>
<p>里面关于 emmc 的处理是这样的</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&amp;mmc0 &#123;</span><br><span class="line"> pinctrl-names = &quot;default&quot;, &quot;state_uhs&quot;;</span><br><span class="line"> pinctrl-0 = &lt;&amp;mmc0_pins_default&gt;;</span><br><span class="line"> pinctrl-1 = &lt;&amp;mmc0_pins_uhs&gt;;</span><br><span class="line"> bus-width = &lt;8&gt;;</span><br><span class="line"> max-frequency = &lt;52000000&gt;;</span><br><span class="line"> cap-mmc-highspeed;</span><br><span class="line"> vmmc-supply = &lt;&amp;reg_3p3v&gt;;</span><br><span class="line"> non-removable;</span><br><span class="line"> status = &quot;okay&quot;;</span><br><span class="line"></span><br><span class="line"> card@0 &#123;</span><br><span class="line">  compatible = &quot;mmc-card&quot;;</span><br><span class="line">  reg = &lt;0&gt;;</span><br><span class="line"></span><br><span class="line">  block &#123;</span><br><span class="line">   compatible = &quot;block-device&quot;;</span><br><span class="line">   partitions &#123;</span><br><span class="line">    block-partition-env &#123;</span><br><span class="line">     partname = &quot;u-boot-env&quot;;</span><br><span class="line"></span><br><span class="line">     nvmem-layout &#123;</span><br><span class="line">      compatible = &quot;u-boot,env&quot;;</span><br><span class="line">     &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    block-partition-factory &#123;</span><br><span class="line">     partname = &quot;factory&quot;;</span><br><span class="line"></span><br><span class="line">     nvmem-layout &#123;</span><br><span class="line">      compatible = &quot;fixed-layout&quot;;</span><br><span class="line">      #address-cells = &lt;1&gt;;</span><br><span class="line">      #size-cells = &lt;1&gt;;</span><br><span class="line"></span><br><span class="line">      eeprom_factory_0: eeprom@0 &#123;</span><br><span class="line">       reg = &lt;0x0 0x1000&gt;;</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      macaddr_factory_4: macaddr@4 &#123;</span><br><span class="line">       compatible = &quot;mac-base&quot;;</span><br><span class="line">       reg = &lt;0x4 0x6&gt;;</span><br><span class="line">       #nvmem-cell-cells = &lt;1&gt;;</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      macaddr_factory_1000: macaddr@1000 &#123;</span><br><span class="line">       compatible = &quot;mac-base&quot;;</span><br><span class="line">       reg = &lt;0x1000 0x6&gt;;</span><br><span class="line">       #nvmem-cell-cells = &lt;1&gt;;</span><br><span class="line">      &#125;;</span><br><span class="line">     &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">   &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line"> &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>我不能确定这是否就是 emmc 主线 FIT 的处理方式，然后我找到了 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL29wZW53cnQvb3BlbndydC9ibG9iL21haW4vdGFyZ2V0L2xpbnV4L21lZGlhdGVrL2R0cy9tdDc5ODFiLWNtY2MtcmF4MzAwMG0tZW1tYy5kdHNv">mt7981b-cmcc-rax3000m-emmc.dtso<i class="fa fa-external-link-alt"></i></span></p>
<p>进行了确认，这种写法确实是 emmc 的处理方式。</p>
<p>参考 <sup class="footnote-ref"><a href="#fn32" id="fnref32">[32]</a></sup> <sup class="footnote-ref"><a href="#fn33" id="fnref33">[33]</a></sup></p>
<p>可以确定，即便编写了相关 dts，仍然不能够支持主线 FIT 的 ibt 固件，需要刷下对应 preloader</p>
<p>在 openwrt 的下载页面 <span class="exturl" data-url="aHR0cDovL2Rvd25sb2Fkcy5vcGVud3J0Lm9yZy9yZWxlYXNlcy8yNC4xMC4wL3RhcmdldHMvbWVkaWF0ZWsvZmlsb2dpYy8=">Index of (root) / releases / 24.10.0 / targets / mediatek / filogic /<i class="fa fa-external-link-alt"></i></span> 可以找到很多 preloader 的固件</p>
<p>我不太确定是否使用支持 FIT 的 dts 进行编译，就可以自动生成 preloader 的固件</p>
<p>我在openwrt官方仓库里找到了该提交 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL29wZW53cnQvb3BlbndydC9jb21taXQvNDIzMTg2ZDdkOGI0ZjIzYWVlOTFmY2E0ZjE3NzRhMTk1ZWJhMDBkOA==">423186d<i class="fa fa-external-link-alt"></i></span></p>
<p>该提交详细展示了如何适配 FIT</p>
<p>以及 immortalwrt 的仓库找到了该提交</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2ltbW9ydGFsd3J0L2ltbW9ydGFsd3J0L2NvbW1pdC83NmJjODIwMGNjM2Q3MzU3ZWJmN2Y4MzJlZTc1YzU5ODhiNDliZDRl">76bc820 mediatek: add CMCC RAX3000M eMMC custom U-Boot layout<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2ltbW9ydGFsd3J0L2ltbW9ydGFsd3J0L2NvbW1pdC8zOGU4NzYyMWU4MTEyNTk2Y2U4ZTI2NmRkM2JlOTRjZGMyNjk1MzBl">38e8762 mediatek: add ubootenv support for cmcc rax3000m emmc/nand version<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2ltbW9ydGFsd3J0L2ltbW9ydGFsd3J0L2NvbW1pdC9kMTdlYjM2NTc4ZDM5ZGE0YTdjZDE1YjFiMTkwMjFkY2UwMjU0ZjE1">d17eb36 arm-trusted-firmware-mediatek: add emmc/spim-nand ddr4 build for mt7981<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2ltbW9ydGFsd3J0L2ltbW9ydGFsd3J0L2NvbW1pdC9lYjEwNWU1ZGRlOWY4OTc2YmJiYzkyNGY0NDVlMzZiMTFmZmFkMTgw">eb105e5 mediatek: convert eeprom/macaddr to nvmem format for cmcc rax3000m<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2ltbW9ydGFsd3J0L2ltbW9ydGFsd3J0L2NvbW1pdC8zOGU4NzYyMWU4MTEyNTk2Y2U4ZTI2NmRkM2JlOTRjZGMyNjk1MzBl">38e8762 mediatek: add ubootenv support for cmcc rax3000m emmc/nand version<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<p>可以推测，进入主线 FIT 的设备将会在编译的时候自动生成 bl31-uboot,preloader</p>
<p>不过好像这个 FIT 也没什么用，懒得研究了。</p>
<h2 id="自动化">自动化</h2>
<p>参考 <sup class="footnote-ref"><a href="#fn34" id="fnref34">[34]</a></sup></p>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1l1emhpaTA3MTgvYmwtbXQ3OTh4LXBoaWxpcHMtaHkzMDAwL3JlbGVhc2Vz">fip-uboot<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1l1emhpaTA3MTgvQWN0aW9ucy1PcGVuV3J0">Actions-OpenWrt<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<p>复刻到自己的 GitHub 上，运行 Actions 即可。</p>
<h2 id="超频">超频</h2>
<p>暂未完成…</p>
<p>参考 <sup class="footnote-ref"><a href="#fn35" id="fnref35">[35]</a></sup> <sup class="footnote-ref"><a href="#fn36" id="fnref36">[36]</a></sup></p>
<p>据说这颗芯片具有较大的超频潜力。</p>
<p>就是制作超频 BL2。</p>
<p>需要给 Openwrt 源码打 patch</p>
<p>参考 <sup class="footnote-ref"><a href="#fn37" id="fnref37">[37]</a></sup> <sup class="footnote-ref"><a href="#fn38" id="fnref38">[38]</a></sup> <sup class="footnote-ref"><a href="#fn39" id="fnref39">[39]</a></sup></p>
<p>工程量较大，暂时搁置。。。</p>
<h2 id="梅林的研究">梅林的研究</h2>
<p>在该项目中 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1JNZXJsL2FzdXN3cnQtbWVybGluLm5n">asuswrt-merlin.ng<i class="fa fa-external-link-alt"></i></span></p>
<p>看到支持了 AX57_Go，这也是一款 mt7981 的路由器</p>
<p>但是由于 hy3000 这台设备是 emmc 的</p>
<p>梅林好像也没看见哪台设备适配 emmc</p>
<p>所以暂时不考虑</p>
<blockquote>
<p>其实我挺喜欢梅林的，以前一直用的博通的路由器，买了几台华硕，组 mesh 很方便，配合梅林固件使用很省心，不用一直折腾，直到 WIFI6 时代，我也买了一台 RAX80，但是翻车了，现在博通的路由器也不行了，又贵又发热，还不开源。</p>
</blockquote>
<h2 id="后续">后续</h2>
<p>翻车了，后来怎么了，就是他们搞 PCDN 的要收回去升级，然后不给我了。。。</p>
<blockquote>
<p>有小道消息说是 PCDN 的程序写的太烂，跑不起来，赚不到钱，我看了一下，原厂固件里有一个 <code>start_yh</code> 的二进制，估计就是这个程序了，确实看起来很简陋</p>
</blockquote>
<p>故此无限期暂停对此的研究。</p>
<h2 id="参考">参考</h2>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL2ZvcnVtLnBocD9tb2Q9dmlld3RocmVhZCZ0aWQ9ODQxNzg4OQ==">飞利浦幻域3000首拆？？？？<i class="fa fa-external-link-alt"></i></span> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC00MDQ5NzUzLTEtMS5odG1s">微加云（以及其他openwrt的设备）破解后台密码<i class="fa fa-external-link-alt"></i></span> <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn3" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04MjcyNjMwLTEtMS5odG1s">360T7官方固件分区备份及刷回官方固件教程<i class="fa fa-external-link-alt"></i></span> <a href="#fnref3" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn4" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9jbWkuaGFud2NrZi50b3AvcC8zNjB0Ny10ZWxuZXQtdWJvb3QtY29uc29sZS8=">360 T7 路由器 开启telnet及uboot控制台方法<i class="fa fa-external-link-alt"></i></span> <a href="#fnref4" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn5" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9taW50cmFiYml0cGx1cy5jb20vMjAyNC8wMy8yMS9tdDc5ODYlRTQlQkQlQkYlRTclOTQlQThtdDc1MzEtc3dpdGNoLSVFNyU5QSU4NGRldmljZS10cmVlLSVFNiU4RSVBMiVFOCVBOCU4RS8=">MT7986使用MT7531 Switch 的Device Tree 探討<i class="fa fa-external-link-alt"></i></span> <a href="#fnref5" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn6" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04NDIzMDMyLTEtMS5odG1s">飞利浦 幻域 3000 Philips hy3000 TTL刷机 救砖教程<i class="fa fa-external-link-alt"></i></span> <a href="#fnref6" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn7" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04MzY4NjE1LTEtMS5odG1s">JCG Q30 PRO救砖教程，MTK mt798x 系列基本通用<i class="fa fa-external-link-alt"></i></span> <a href="#fnref7" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn8" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vcDEyMy9wLzE4MDQ2Njc5">MediaTek Filogic 系列路由器串口救砖教程<i class="fa fa-external-link-alt"></i></span> <a href="#fnref8" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn9" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04MzcyNDM3LTEtMS5odG1s">诺基亚贝尔EA0326GMP (AX3000) TTL救砖时TFTP无效U-Boot console用loady模式刷回uboot<i class="fa fa-external-link-alt"></i></span> <a href="#fnref9" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn10" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9nb2RzdW4ucHJvL2Jsb2cvamRjJTIwQVg2MDAwLXVwZGF0ZS10dGw=">京东云 AX6000 百里单分区刷机 + 回原厂 + TTL 救砖教程<i class="fa fa-external-link-alt"></i></span> <a href="#fnref10" class="footnote-backref">↩︎</a> <a href="#fnref10:1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn11" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY29kZWxlYWRpbmcuY29tL2FydGljbGUvMTYzOTUzNzIxNTIv">Ubuntu18.04 默认源 恢复默认源 恢复备份源<i class="fa fa-external-link-alt"></i></span> <a href="#fnref11" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn12" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2hhbndja2YvaW1tb3J0YWx3cnQtbXQ3OTh4">immortalwrt-mt798x<i class="fa fa-external-link-alt"></i></span> <a href="#fnref12" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn13" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9jbWkuaGFud2NrZi50b3AvcC9pbW1vcnRhbHdydC1tdDc5OHgv">immortalwrt-mt798x项目介绍<i class="fa fa-external-link-alt"></i></span> <a href="#fnref13" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn14" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vMTAyNzg3NDc3">ZhuanyiOp的个人空间-ZhuanyiOp个人主页-哔哩哔哩视频<i class="fa fa-external-link-alt"></i></span> <a href="#fnref14" class="footnote-backref">↩︎</a> <a href="#fnref14:1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn15" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucGlhbnNoZW4uY29tL2FydGljbGUvNDc2MzY2NDA0Ny8=">OpenWRT下载与编译<i class="fa fa-external-link-alt"></i></span> <a href="#fnref15" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn16" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC00Njk0MDAtMS0xLmh0bWw=">openwrt编译笔记，有些技巧是自己试验出来的，很多人死也不肯说<i class="fa fa-external-link-alt"></i></span> <a href="#fnref16" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn17" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL0ZPUlVNL3RocmVhZC04MzI3NjQ5LTEtMS5odG1s">讨论市售MT7981/MT7986/MT7988方案的GMAC到LAN连接的差异<i class="fa fa-external-link-alt"></i></span> <a href="#fnref17" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn18" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9vcGVud3J0Lm9yZy9kb2NzL2d1aWRlLXVzZXIvbmV0d29yay9uZXR3b3JrX2NvbmZpZ3VyYXRpb24=">Network configuration /etc/config/network<i class="fa fa-external-link-alt"></i></span> <a href="#fnref18" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn19" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2hhbndja2YvYmwtbXQ3OTh4">bl-mt798x<i class="fa fa-external-link-alt"></i></span> <a href="#fnref19" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn20" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9jbWkuaGFud2NrZi50b3AvcC9tdDc5OHgtdWJvb3QtdXNhZ2Uv">mt798x uboot 功能介绍<i class="fa fa-external-link-alt"></i></span> <a href="#fnref20" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn21" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cub3BlbndydC5wcm8vcG9zdC02NDAuaHRtbA==">mtk 开源U-Boot ATF配置和编译教程<i class="fa fa-external-link-alt"></i></span> <a href="#fnref21" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn22" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0FSTS1zb2Z0d2FyZS9hcm0tdHJ1c3RlZC1maXJtd2FyZQ==">arm-trusted-firmware<i class="fa fa-external-link-alt"></i></span> <a href="#fnref22" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn23" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04NDE2NzUwLTEtMS5odG1s">【求助】关于刷入支持主线的u-boot的问题<i class="fa fa-external-link-alt"></i></span> <a href="#fnref23" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn24" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04NDAwMzA2LTEtMS5odG1s">MT798x 支持主线 OpenWrt 的 U-Boot<i class="fa fa-external-link-alt"></i></span> <a href="#fnref24" class="footnote-backref">↩︎</a> <a href="#fnref24:1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn25" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04MzExMzgwLTEtMS5odG1s">【2023-11-07】CMCC RAX3000M EMMC 64G mt7981 算力版 固件+ubootshu小白防砖教程<i class="fa fa-external-link-alt"></i></span> <a href="#fnref25" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn26" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9wb3N0LnNtemRtLmNvbS9wL2F3bzdxenpwLw==">【教程】rax3000m emmc刷机 支持硬件QOS MT7981到底值不值<i class="fa fa-external-link-alt"></i></span> <a href="#fnref26" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn27" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY2hpcGhlbGwuY29tL3RocmVhZC0yNjM2NjI1LTEtMS5odG1s">【网络】 bpi-r4, sd卡uboot，支持web刷写openwrt主线以及237固件！<i class="fa fa-external-link-alt"></i></span> <a href="#fnref27" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn28" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLzE3MTUxNzMzMjkvYmwtbXQ3OTh4LW9zcy90cmVlL2ZpdC1leGFtcGxl">bl-mt798x-oss<i class="fa fa-external-link-alt"></i></span> <a href="#fnref28" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn29" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04MzA4MjgxLTEtMS5odG1s">移动RAX3000M 64G EMMC 算力版开启ssh以及刷uboot和刷机教程<i class="fa fa-external-link-alt"></i></span> <a href="#fnref29" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn30" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04MzExMzgwLTEtMS5odG1s">【2023-11-07】CMCC RAX3000M EMMC 64G mt7981 算力版 固件+ubootshu小白防砖教程<i class="fa fa-external-link-alt"></i></span> <a href="#fnref30" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn31" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLzE3MTUxNzMzMjkvYmwtbXQ3OTh4LW9zcy90cmVlL2ZpdC1leGFtcGxl">bl-mt798x-oss<i class="fa fa-external-link-alt"></i></span> <a href="#fnref31" class="footnote-backref">↩︎</a> <a href="#fnref31:1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn32" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC8yZGJhMjNjODI2YTE=">U-Boot/Linux设备树简明使用手册<i class="fa fa-external-link-alt"></i></span> <a href="#fnref32" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn33" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLjUxY3RvLmNvbS91XzE1Nzc3NTU3LzEzNzczMzM2I0RUU0RUU09EVEJPX18z">DTS、DTSO、DTBO三种文件的关系及编译流程<i class="fa fa-external-link-alt"></i></span> <a href="#fnref33" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn34" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xnczIwMDdtL0FjdGlvbnMtT3BlbldydC90cmVlL21haW4=">Actions-OpenWrt<i class="fa fa-external-link-alt"></i></span> <a href="#fnref34" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn35" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93dXNpeXUubWUvb3BlbndydC1vbmUtbXQ3OTgxLWJsMi1vdmVyY2xvY2tpbmctY29tcGlsZS1ndWlkZS8=">OpenWrt One 路由器（MT7981，主线op）超频bl2编译教程<i class="fa fa-external-link-alt"></i></span> <a href="#fnref35" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn36" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL2ZvcnVtLnBocD9tb2Q9dmlld3RocmVhZCZ0aWQ9ODM4Nzk3OQ==">T798X CPU超频1.65G/一键修改无线最大功率方法<i class="fa fa-external-link-alt"></i></span> <a href="#fnref36" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn37" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9mamtmd3ouZ2l0aHViLmlvLzIwMTQvMTIvMDQvT3BlbndydC1QYXRjaGVzLw==">Openwrt Patch 制作及打补丁<i class="fa fa-external-link-alt"></i></span> <a href="#fnref37" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn38" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vYWRhbS1tYS9wLzE3NzEyOTQwLmh0bWwjJUU3JUJCJTk5a2VybmVsJUU2JTg5JTkzcGF0Y2g=">如何给OpenWrt的源码打patch<i class="fa fa-external-link-alt"></i></span> <a href="#fnref38" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn39" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dVQTgxMjJIT1UvYXJ0aWNsZS9kZXRhaWxzLzEzMzAyMDAxOQ==">【openwrt学习笔记】新patch的制作和旧patch的修改<i class="fa fa-external-link-alt"></i></span> <a href="#fnref39" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>分享</tag>
        <tag>玩机</tag>
      </tags>
  </entry>
  <entry>
    <title>Deepseek R1 本地部署</title>
    <url>/2025/03/05/1/</url>
    <content><![CDATA[<h2 id="前言">前言</h2>
<p>最近国产的大模型很火，所以想到搞一个玩一玩。</p>
<p>我使用了 Deepseek R1，Ollama，Open WebUI进行了本地部署。</p>
<p>不过我的电脑配置有限，使用了8b参数的版本。</p>
<h2 id="准备工作">准备工作</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>Ollama 0.5.13</p>
</li>
<li class="lvl-2">
<p>Docker version 27.2.0, build 3ab4256</p>
</li>
</ul>
<h2 id="部署">部署</h2>
<h3 id="安装-Ollama">安装 Ollama</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">OllamaSetup.exe /DIR=D:\Ollama</span><br></pre></td></tr></table></figure>
<blockquote>
<p>指定安装目录</p>
</blockquote>
<p>环境变量 -&gt; 系统变量 -&gt; Path -&gt; 添加 <code>D:\Ollama</code><br>
环境变量 -&gt; 系统变量 -&gt; 新建 <code>OLLAMA_MODELS</code> -&gt; 值 <code>D:\Ollama\models</code></p>
<blockquote>
<p>配置环境变量，然后重启电脑</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ollama run deepseek-r1:8b</span><br></pre></td></tr></table></figure>
<blockquote>
<p>运行 Deepseek R1</p>
</blockquote>
<h3 id="安装-Open-WebUI-docker-ver">安装 Open WebUI docker ver</h3>
<p>这里是使用了 Docker 进行部署，版本 <code>v0.5.19</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d -p 3000:8080 --gpus all --add-host=host.docker.internal:host-gateway -v open-webui:/app/backend/data --name open-webui --restart always ghcr.io/open-webui/open-webui:cuda</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这个是使用了显卡的版本，如果没有英伟达显卡，运行 <code>docker run -d -p 3000:8080 --add-host=host.docker.internal:host-gateway -v open-webui:/app/backend/data --name open-webui --restart always ghcr.io/open-webui/open-webui:main</code></p>
</blockquote>
<h3 id="访问">访问</h3>
<p>打开浏览器，输入 <code>http://localhost:3000</code>，初始化账号密码，然后就可以使用了。</p>
<h2 id="quickstart">quickstart</h2>
<p>为了快速使用，我提供了一个快速使用的脚本。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">set</span> CONTAINER_ID=319bd612c784</span><br><span class="line">title 本地AI快捷启动脚本</span><br><span class="line">color 0a</span><br><span class="line">mode con cols=80 lines=30</span><br><span class="line">:menu</span><br><span class="line">cls</span><br><span class="line"><span class="built_in">echo</span> ==================================================================</span><br><span class="line"><span class="built_in">echo</span>                       本地 AI 快捷启动脚本</span><br><span class="line"><span class="built_in">echo</span> ==================================================================</span><br><span class="line"><span class="built_in">echo</span> 1. 运行 Deepseek7B                Ⅱ     5. 停止 Deepseek7B</span><br><span class="line"><span class="built_in">echo</span> 2. 运行 Deepseek8B                Ⅱ     6. 停止 Deepseek8B</span><br><span class="line"><span class="built_in">echo</span> 3. 运行 Open-WebUI Docker         Ⅱ     7. 停止 Open-WebUI Docker</span><br><span class="line"><span class="built_in">echo</span> 4. 打开浏览器访问 Open-WebUI      Ⅱ     8. 停止 Ollama</span><br><span class="line"><span class="built_in">echo</span> ==================================================================</span><br><span class="line"><span class="built_in">echo</span> a. 查看显卡状态                   Ⅱ</span><br><span class="line"><span class="built_in">echo</span> b. 查看 Ollama 模型状态           Ⅱ     d. 启动 Ollama</span><br><span class="line"><span class="built_in">echo</span> c. 查看 Docker 容器状态           Ⅱ     e. 启动 Docker</span><br><span class="line"><span class="built_in">echo</span> ==================================================================</span><br><span class="line"><span class="built_in">echo</span> 0. 退出</span><br><span class="line"><span class="built_in">echo</span>. </span><br><span class="line"><span class="built_in">set</span> /p choice=请选择一个选项:</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;%choice%&quot;</span>==<span class="string">&quot;&quot;</span> (</span><br><span class="line">    <span class="built_in">echo</span> 未选择任何选项，请重新选择。</span><br><span class="line">    pause</span><br><span class="line">    goto menu</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;%choice%&quot;</span>==<span class="string">&quot;1&quot;</span> goto runDeepseek7B</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;%choice%&quot;</span>==<span class="string">&quot;2&quot;</span> goto runDeepseek8B</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;%choice%&quot;</span>==<span class="string">&quot;3&quot;</span> goto runOpenWebUI</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;%choice%&quot;</span>==<span class="string">&quot;4&quot;</span> goto openBrowser</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;%choice%&quot;</span>==<span class="string">&quot;5&quot;</span> goto stopDeepseek7B</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;%choice%&quot;</span>==<span class="string">&quot;6&quot;</span> goto stopDeepseek8B</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;%choice%&quot;</span>==<span class="string">&quot;7&quot;</span> goto stopOpenWebUI</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;%choice%&quot;</span>==<span class="string">&quot;8&quot;</span> goto stopOllama</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;%choice%&quot;</span>==<span class="string">&quot;0&quot;</span> goto <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;%choice%&quot;</span>==<span class="string">&quot;a&quot;</span> goto nvidia-smi</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;%choice%&quot;</span>==<span class="string">&quot;b&quot;</span> goto model-status</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;%choice%&quot;</span>==<span class="string">&quot;c&quot;</span> goto docker-ps</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;%choice%&quot;</span>==<span class="string">&quot;d&quot;</span> goto startOllama</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;%choice%&quot;</span>==<span class="string">&quot;e&quot;</span> goto startDocker</span><br><span class="line"></span><br><span class="line">:runDeepseek7B</span><br><span class="line">start cmd /c <span class="string">&quot;ollama run deepseek-r1:7b&quot;</span></span><br><span class="line"><span class="built_in">echo</span> 新窗口 Ctrl + D 退出 </span><br><span class="line">pause</span><br><span class="line">goto menu</span><br><span class="line"></span><br><span class="line">:runDeepseek8B</span><br><span class="line">start cmd /c <span class="string">&quot;ollama run deepseek-r1:8b&quot;</span></span><br><span class="line"><span class="built_in">echo</span> 新窗口 Ctrl + D 退出 </span><br><span class="line">pause</span><br><span class="line">goto menu</span><br><span class="line"></span><br><span class="line">:runOpenWebUI</span><br><span class="line">start cmd /c <span class="string">&quot;docker start %CONTAINER_ID%&quot;</span></span><br><span class="line"><span class="built_in">echo</span> 打开浏览器并访问 http://localhost:3000</span><br><span class="line">pause</span><br><span class="line">goto menu</span><br><span class="line"></span><br><span class="line">:openBrowser</span><br><span class="line">start cmd /c <span class="string">&quot;start http://localhost:3000&quot;</span></span><br><span class="line">goto menu</span><br><span class="line"></span><br><span class="line">:stopDeepseek7B</span><br><span class="line">start cmd /c <span class="string">&quot;ollama stop deepseek-r1:7b&quot;</span></span><br><span class="line"><span class="built_in">echo</span> 停止 Deepseek7B</span><br><span class="line">pause</span><br><span class="line">goto menu</span><br><span class="line"></span><br><span class="line">:stopDeepseek8B</span><br><span class="line">start cmd /c <span class="string">&quot;ollama stop deepseek-r1:8b&quot;</span></span><br><span class="line"><span class="built_in">echo</span> 停止 Deepseek8B</span><br><span class="line">pause</span><br><span class="line">goto menu</span><br><span class="line"></span><br><span class="line">:stopOpenWebUI</span><br><span class="line">start cmd /c <span class="string">&quot;docker kill %CONTAINER_ID%&quot;</span></span><br><span class="line"><span class="built_in">echo</span> 停止 Open-WebUI</span><br><span class="line">pause</span><br><span class="line">goto menu</span><br><span class="line"></span><br><span class="line">:stopOllama</span><br><span class="line">start cmd /c <span class="string">&quot;taskkill /f /t /im &quot;</span>ollama app.exe<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="built_in">echo</span> 停止 Ollama</span><br><span class="line">pause</span><br><span class="line">goto menu</span><br><span class="line"></span><br><span class="line">:<span class="built_in">exit</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">:nvidia-smi</span><br><span class="line">nvidia-smi</span><br><span class="line">pause</span><br><span class="line">goto menu</span><br><span class="line"></span><br><span class="line">:model-status</span><br><span class="line">ollama ps</span><br><span class="line">pause</span><br><span class="line">goto menu</span><br><span class="line"></span><br><span class="line">:docker-ps</span><br><span class="line">docker ps -a</span><br><span class="line">pause</span><br><span class="line">goto menu</span><br><span class="line"></span><br><span class="line">:startOllama</span><br><span class="line">start cmd /c <span class="string">&quot;D:\Ollama\ollama app.exe&quot;</span></span><br><span class="line"><span class="built_in">echo</span> 启动 Ollama</span><br><span class="line">pause</span><br><span class="line">goto menu</span><br><span class="line"></span><br><span class="line">:startDocker</span><br><span class="line">start cmd /c <span class="string">&quot;C:\Program Files\Docker\Docker\Docker Desktop.exe&quot;</span></span><br><span class="line"><span class="built_in">echo</span> 启动 Docker</span><br><span class="line">pause</span><br><span class="line">goto menu</span><br></pre></td></tr></table></figure>
<p>根据 Docker 容器 ID 修改 <code>CONTAINER_ID</code> 的值。</p>
<h2 id="结语">结语</h2>
<p>大家都说 Deepseek R1 很强，但是在我这里并没有体现出来，可能是我的电脑配置太低了。</p>
<h2 id="参考">参考</h2>
<p><span class="exturl" data-url="aHR0cHM6Ly9vbGxhbWEuY29tL2xpYnJhcnkvZGVlcHNlZWstcjE=">Ollama<i class="fa fa-external-link-alt"></i></span><br>
<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL29wZW4td2VidWkvb3Blbi13ZWJ1aQ==">Open WebUI<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>分享</category>
      </categories>
  </entry>
  <entry>
    <title>烽火光猫 HG261GS 开启 telnet·破解超密</title>
    <url>/2025/01/24/1/</url>
    <content><![CDATA[<h2 id="前提">前提</h2>
<ul class="lvl-0">
<li class="lvl-2">江西电信</li>
<li class="lvl-2">软件版本 G50D1.12MC000</li>
</ul>
<h2 id="获取超密">获取超密</h2>
<p>打开 <span class="exturl" data-url="aHR0cDovLzE5Mi4xNjguMS4xL2NnaS1iaW4vYmFzZWluZm9TZXQuY2dp">http://192.168.1.1/cgi-bin/baseinfoSet.cgi<i class="fa fa-external-link-alt"></i></span></p>
<p>得到一个 json<br>
其中 <code>TELECOMACCOUNT</code> 和 <code>TELECOMPASSWORD</code> 就是超密</p>
<h2 id="开启-TELNET">开启 TELNET</h2>
<p>打开控制台</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">arp -a 192.168.1.1</span><br></pre></td></tr></table></figure>
<p>得到一个物理地址</p>
<p>打开</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">http://192.168.1.1/cgi-bin/telnetenable.cgi?telnetenable=1&amp;key=得到的物理地址去掉-并且大写</span><br></pre></td></tr></table></figure>
<p>提示 telnet 已开启</p>
<p>控制台登录 telent</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">telnet root@192.168.1.1</span><br></pre></td></tr></table></figure>
<p>密码 <code>hg2x0</code></p>
<h2 id="常用命令">常用命令</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/rom/fhshell/misc_shell/stdaction factory precfg_in <span class="comment"># 进入工厂模式</span></span><br><span class="line"><span class="built_in">cat</span> /flash/cfg/agentconf/factory.conf <span class="comment"># 查看配置</span></span><br><span class="line"><span class="built_in">cat</span> /flash/cfg/agentconf/param.xml <span class="comment"># 查看参数</span></span><br><span class="line">/rom/fhshell/misc_shell/cfg_bak_restore.sh factory_reset remote_reset factory <span class="comment"># 退出工厂模式</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="详细参数">详细参数</h2>
<table>
<thead>
<tr>
<th>部件</th>
<th>型号</th>
<th>参数</th>
</tr>
</thead>
<tbody>
<tr>
<td>CPU</td>
<td>SD5115 H</td>
<td>NO DATASHEET，推测 armv7l 1core@647MHZ</td>
</tr>
<tr>
<td>STORAGE</td>
<td>SAMSUNG K9F1G08U0D-SCB0</td>
<td>1-Gbit(128M x 8bit)，工作电压：3.3V</td>
</tr>
<tr>
<td>MEMORY</td>
<td>SAMSUNG K4B4G1646D-BCH9</td>
<td>4-Gbit(256M x 16) DDR3-1333(9-9-9)，工作电压：1.5V</td>
</tr>
<tr>
<td>GPON</td>
<td>NOG22-D8C-ST</td>
<td>Mentech 铭普光磁，EPON版本的是千兆的光收发</td>
</tr>
<tr>
<td>TELCOM INTERFACE IC</td>
<td>LE89156PQC</td>
<td>Microchip Technology，工作电压：3.3V</td>
</tr>
<tr>
<td>OS</td>
<td>Linux</td>
<td>2.6.34.10_sd5115h_v100f</td>
</tr>
</tbody>
</table>
<p>两个网口都是百兆的。</p>
<summary>点击查看具体信息</summary>
<details>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">~ # uname -a</span><br><span class="line">Linux (none) 2.6.34.10_sd5115h_v100f #1 Thu Dec 22 17:08:19 CST 2016 armv7l unknown</span><br><span class="line">~ # cat /proc/meminfo</span><br><span class="line">MemTotal:         111372 kB</span><br><span class="line">MemFree:           30340 kB</span><br><span class="line">Buffers:               0 kB</span><br><span class="line">Cached:            33372 kB</span><br><span class="line">SwapCached:            0 kB</span><br><span class="line">Active:            32632 kB</span><br><span class="line">Inactive:          26628 kB</span><br><span class="line">Active(anon):      29308 kB</span><br><span class="line">Inactive(anon):     4624 kB</span><br><span class="line">Active(file):       3324 kB</span><br><span class="line">Inactive(file):    22004 kB</span><br><span class="line">Unevictable:           0 kB</span><br><span class="line">Mlocked:               0 kB</span><br><span class="line">HighTotal:             0 kB</span><br><span class="line">HighFree:              0 kB</span><br><span class="line">LowTotal:         111372 kB</span><br><span class="line">LowFree:           30340 kB</span><br><span class="line">SwapTotal:             0 kB</span><br><span class="line">SwapFree:              0 kB</span><br><span class="line">Dirty:                 0 kB</span><br><span class="line">Writeback:             0 kB</span><br><span class="line">AnonPages:         25912 kB</span><br><span class="line">Mapped:             3360 kB</span><br><span class="line">Shmem:              8044 kB</span><br><span class="line">Slab:              13340 kB</span><br><span class="line">SReclaimable:       1128 kB</span><br><span class="line">SUnreclaim:        12212 kB</span><br><span class="line">KernelStack:         800 kB</span><br><span class="line">PageTables:          636 kB</span><br><span class="line">NFS_Unstable:          0 kB</span><br><span class="line">Bounce:                0 kB</span><br><span class="line">WritebackTmp:          0 kB</span><br><span class="line">CommitLimit:       55684 kB</span><br><span class="line">Committed_AS:     360000 kB</span><br><span class="line">VmallocTotal:     139264 kB</span><br><span class="line">VmallocUsed:       20548 kB</span><br><span class="line">VmallocChunk:     109556 kB</span><br><span class="line">~ # cat /proc/cpuinfo</span><br><span class="line">Processor       : ARMv7 Processor rev 0 (v7l)</span><br><span class="line">BogoMIPS        : 1297.61</span><br><span class="line">Features        : swp half thumb fastmult edsp</span><br><span class="line">CPU implementer : 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant     : 0x3</span><br><span class="line">CPU part        : 0xc09</span><br><span class="line">CPU revision    : 0</span><br><span class="line"></span><br><span class="line">Hardware        : hsan</span><br><span class="line">Revision        : 0000</span><br><span class="line">Serial          : 0000000000000000</span><br><span class="line">~ # cat /proc/stat</span><br><span class="line">cpu  3787 4761 7879 437002 0 2 226 0 0 0</span><br><span class="line">cpu0 3787 4761 7879 437002 0 2 226 0 0 0</span><br><span class="line">intr 486593 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 2257 0 453762 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 30570 0 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span><br><span class="line">ctxt 173469</span><br><span class="line">btime 1289820569</span><br><span class="line">processes 23510</span><br><span class="line">procs_running 1</span><br><span class="line">procs_blocked 0</span><br><span class="line">softirq 579308 0 453657 4463 30793 0 0 1016 0 0 89379</span><br><span class="line">~ # df -h</span><br><span class="line">Filesystem                Size      Used Available Use% Mounted on</span><br><span class="line">rootfs                   16.0M      8.1M      7.9M  51% /</span><br><span class="line">/dev/root                16.0M      8.1M      7.9M  51% /</span><br><span class="line">/dev/mtdblock2           20.0M     12.2M      7.8M  61% /rom</span><br><span class="line">/dev/mtdblock8           10.0M    888.0k      9.1M   9% /flash</span><br><span class="line">/dev/mtdblock9            4.0M    396.0k      3.6M  10% /usr/local/ct</span><br><span class="line">/dev/mtdblock10          14.0M      3.0M     11.0M  21% /usr/local/fh</span><br><span class="line">/dev/mtdblock7            2.0M    572.0k      1.4M  28% /data</span><br><span class="line">tmpfs                    54.4M     16.0k     54.4M   0% /tmp</span><br><span class="line">tmpfs                    54.4M      8.4M     45.9M  16% /var</span><br><span class="line">tmpfs                    54.4M         0     54.4M   0% /mnt</span><br><span class="line">~ # cat /etc/fstab</span><br><span class="line"># /etc/fstab: static file system information.</span><br><span class="line">#</span><br><span class="line"># &lt;file system&gt; &lt;mount pt&gt;     &lt;type&gt;   &lt;options&gt;         &lt;dump&gt; &lt;pass&gt;</span><br><span class="line">proc            /proc          proc     defaults          0      0</span><br><span class="line">devpts          /dev/pts       devpts   defaults,gid=5,mode=620   0      0</span><br><span class="line">tmpfs           /tmp           tmpfs    defaults          0      0</span><br><span class="line">sysfs           /sys           sysfs    defaults          0      0</span><br><span class="line">tmpfs           /var           tmpfs    defaults          0      0</span><br><span class="line">tmpfs           /mnt           tmpfs    defaults          0      0      ~ #</span><br><span class="line">~ # cat /proc/mtd</span><br><span class="line">dev:    size   erasesize  name</span><br><span class="line">mtd0: 00200000 00020000 &quot;boot&quot;</span><br><span class="line">mtd1: 00400000 00020000 &quot;KernelA&quot;</span><br><span class="line">mtd2: 01400000 00020000 &quot;AppA&quot;</span><br><span class="line">mtd3: 01000000 00020000 &quot;RootfsA&quot;</span><br><span class="line">mtd4: 00400000 00020000 &quot;KernelB&quot;</span><br><span class="line">mtd5: 01400000 00020000 &quot;AppB&quot;</span><br><span class="line">mtd6: 01000000 00020000 &quot;RootfsB&quot;</span><br><span class="line">mtd7: 00200000 00020000 &quot;ConfigurationA&quot;</span><br><span class="line">mtd8: 00a00000 00020000 &quot;ConfigurationB&quot;</span><br><span class="line">mtd9: 00400000 00020000 &quot;UserLocalCT&quot;</span><br><span class="line">mtd10: 00e00000 00020000 &quot;Userdata&quot;</span><br><span class="line">/ # tftp -p -l mtd0 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd1 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd2 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd3 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd4 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd5 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd6 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd7 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd8 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd9 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd10 192.168.1.2</span><br></pre></td></tr></table></figure>
</details>
<h2 id="参考">参考</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vSEdORVQvcC8xNzk5MjUyOQ==">移动烽火HG光猫超密破解<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC00MTQ0MDgwLTEtMS5odG1s">【烽火】 烽火光猫开telnet及改sn教程<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2p0amxqeS9hcnRpY2xlL2RldGFpbHMvOTgyNDc3OTg=">烽火HG261GS——获取超级管理员密码<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04MzY5NzQ3LTEtMS5odG1s">【烽火】 烽火HG2861-A/HG6861-A修改运营商界面、SN、MAC、PON对称模式等信息，可以开SSH<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>分享</tag>
        <tag>玩机</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo 简繁体转换</title>
    <url>/2024/12/31/2/</url>
    <content><![CDATA[<h2 id="hexo-简繁体转换">hexo 简繁体转换</h2>
<p><span class="exturl" data-url="aHR0cHM6Ly93ZWlsaW5pbmcuZ2l0aHViLmlvLzI2Ni5odG1s">Hexo NexT 支持简体繁体一键切换<i class="fa fa-external-link-alt"></i></span></p>
<p>参考上面的链接，实现简繁体转换功能。</p>
<p>但是我要补充一点，如果开启了 PJAX 功能，需要在 <code>footer.njk</code> 的 <code>&lt;script&gt;</code> 标签中末尾添加以下代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">document.addEventListener(&quot;pjax:complete&quot;, function() &#123;</span><br><span class="line">    translateInitilization();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这样就可以在 PJAX 切换页面时，重新初始化简繁体转换功能。</p>
]]></content>
      <tags>
        <tag>分享</tag>
      </tags>
  </entry>
  <entry>
    <title>软件设计模式总结 02</title>
    <url>/2024/12/31/1/</url>
    <content><![CDATA[<h2 id="单例模式">单例模式</h2>
<pre><code class="highlight mermaid">classDiagram
    class Singleton &#123;
        - instance: Singleton
        - Singleton()
        + getInstance(): Singleton
    &#125;
    note for Singleton &quot;if (instance == null) &#123;
        instance = new Singleton();
        return instance; &#125;&quot;
    Singleton o--&gt; Singleton : instance</code></pre>
<p>结构</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>Singleton</p>
</li>
</ul>
<p>单例模式只有一个类，没有接口。</p>
<blockquote>
<p>单例模式是一种创建型设计模式，让你能够保证一个类只有一个实例，并提供一个访问该实例的全局节点。</p>
</blockquote>
<h2 id="适配器模式">适配器模式</h2>
<pre><code class="highlight mermaid">---
title: class adapter
---
classDiagram
    class Target &#123;
        &lt;&lt;interface&gt;&gt;
        + request()
    &#125;
    class Adaptee &#123;
        + request()
    &#125;
    class Adapter &#123;
        - specificRequest()
    &#125;
    note for Adapter &quot;super.request();&quot;
    class Client
    Client ..&gt; Target
    Target &lt;|.. Adapter
    Adapter --&gt; Adaptee</code></pre>
<pre><code class="highlight mermaid">---
title: object adapter
---
classDiagram
    class Target &#123;
        + request()
    &#125;
    class Adaptee &#123;
        + request()
    &#125;
    class Adapter &#123;
        + specificRequest()
    &#125;
    note for Adapter &quot;adaptee.specificRequest();&quot;
    class Client
    Client ..&gt; Target
    Target &lt;|-- Adapter
    Adapter --&gt; Adaptee</code></pre>
<p>结构</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>Target</p>
</li>
<li class="lvl-2">
<p>Adaptee</p>
</li>
<li class="lvl-2">
<p>Adapter</p>
</li>
</ul>
<p>Target 是客户端所期待的接口，Adaptee 是需要适配的类，Adapter 是适配器。</p>
<blockquote>
<p>适配器模式是一种结构型设计模式，它能使接口不兼容的对象能够相互合作。</p>
</blockquote>
<h2 id="桥接模式">桥接模式</h2>
<pre><code class="highlight mermaid">classDiagram
    class Implementor &#123;
        &lt;&lt;interface&gt;&gt;
        + operationImpl()
    &#125;
    class ConcreteImplementorA &#123;
        + operationImpl()
    &#125;
    class ConcreteImplementorB &#123;
        + operationImpl()
    &#125;
    class Abstraction &#123;
        + operation()
    &#125;
    class Client
    note for Abstraction &quot;impl.operationImpl();&quot;
    class RefinedAbstraction &#123;
        + operation()
    &#125;
    Abstraction &lt;|-- RefinedAbstraction
    Abstraction o--&gt; Implementor : impl
    ConcreteImplementorA ..|&gt; Implementor
    ConcreteImplementorB ..|&gt; Implementor

    class Client
    Client ..&gt; Abstraction
    Client ..&gt; Implementor</code></pre>
<p>结构</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>Implementor - 实现者接口</p>
</li>
<li class="lvl-2">
<p>ConcreteImplementor - 具体实现者</p>
</li>
<li class="lvl-2">
<p>Abstraction - 抽象类</p>
</li>
<li class="lvl-2">
<p>RefinedAbstraction - 扩充抽象类</p>
</li>
</ul>
<blockquote>
<p>桥接模式是一种结构型设计模式，可将一个大类或一系列紧密相关的类拆分为抽象和实现两个独立的层次结构，从而能在开发时分别使用。</p>
</blockquote>
<h2 id="组合模式">组合模式</h2>
<pre><code class="highlight mermaid">classDiagram
    class Component &#123;
        &lt;&lt;interface&gt;&gt;
        + operation()
    &#125;
    class Leaf &#123;
        + operation()
    &#125;
    class Composite &#123;
        + operation()
        + add(Component c)
        + remove(Component c)
        + getChild(int index): Component
    &#125;
    note for Composite &quot;for (Component c : children) &#123;
        c.operation(); &#125;&quot;
    class Client
    Component &lt;|-- Leaf
    Component &lt;|-- Composite
    Composite o--&gt; Component : children
    Client ..&gt; Component</code></pre>
<p>结构</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>Component - 抽象构件</p>
</li>
<li class="lvl-2">
<p>Leaf - 叶节点</p>
</li>
<li class="lvl-2">
<p>Composite - 容器构件</p>
</li>
</ul>
<blockquote>
<p>组合模式是一种结构型设计模式，你可以使用它将对象组合成树状结构，并且能像使用独立对象一样使用它们。</p>
</blockquote>
<h2 id="装饰器模式">装饰器模式</h2>
<pre><code class="highlight mermaid">classDiagram
    class Component &#123;
        + operation()
    &#125;
    class ConcreteComponent &#123;
        + operation()
    &#125;
    class Decorator &#123;
        + operation()
    &#125;
    note for Decorator &quot;component.operation();&quot;
    class ConcreteDecoratorA &#123;
        - addedState
        + operation()
    &#125;
    class ConcreteDecoratorB &#123;
        - addedBehavior
        + operation()
    &#125;
    note for ConcreteDecoratorA &quot;super.operation();
    addedBehavior();&quot;
    Component &lt;|-- ConcreteComponent
    Component &lt;|-- Decorator
    Component &lt;--o Decorator : component
    Decorator &lt;|-- ConcreteDecoratorA
    Decorator &lt;|-- ConcreteDecoratorB</code></pre>
<p>结构</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>Component - 抽象构件</p>
</li>
<li class="lvl-2">
<p>ConcreteComponent - 具体构件</p>
</li>
<li class="lvl-2">
<p>Decorator - 抽象装饰器</p>
</li>
<li class="lvl-2">
<p>ConcreteDecorator - 具体装饰器</p>
</li>
</ul>
<blockquote>
<p>装饰器模式是一种结构型设计模式，允许你通过将对象放入包含行为的特殊封装对象中来为原对象绑定新的行为。</p>
</blockquote>
<h2 id="外观模式">外观模式</h2>
<pre><code class="highlight mermaid">classDiagram
    class Subsystem1 &#123;
        + operation1()
    &#125;
    class Subsystem2 &#123;
        + operation2()
    &#125;
    class Subsystem3 &#123;
        + operation3()
    &#125;
    class Facade &#123;
        + operation()
    &#125;
    note for Facade &quot;subsystem1.operation1();
    subsystem2.operation2();
    subsystem3.operation3();&quot;
    Client ..&gt; Facade
    Facade --&gt; Subsystem1 : subsystem1
    Facade --&gt; Subsystem2 : subsystem2
    Facade --&gt; Subsystem3 : subsystem3</code></pre>
<p>结构</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>Subsystem - 子系统</p>
</li>
<li class="lvl-2">
<p>Facade - 外观</p>
</li>
</ul>
<blockquote>
<p>外观模式是一种结构型设计模式，它为复杂子系统提供一个简单接口，使其更易于使用。</p>
</blockquote>
<h2 id="代理模式">代理模式</h2>
<pre><code class="highlight mermaid">classDiagram
    class Subject &#123;
        &lt;&lt;interface&gt;&gt;
        + request()
    &#125;
    class RealSubject &#123;
        + request()
    &#125;
    class Proxy &#123;
        - realSubject: RealSubject
        + preRequest()
        + request()
        + postRequest()
    &#125;
    note for Proxy &quot;preRequest();
    realSubject.request();
    postRequest();&quot;
    Subject &lt;|-- RealSubject
    Subject &lt;|-- Proxy
    Proxy --&gt; RealSubject : realSubject
    Client ..&gt; Subject</code></pre>
<p>结构</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>Subject - 抽象主题</p>
</li>
<li class="lvl-2">
<p>RealSubject - 真实主题</p>
</li>
<li class="lvl-2">
<p>Proxy - 代理</p>
</li>
</ul>
<blockquote>
<p>代理模式是一种结构型设计模式，让你能提供对象的替代品或其占位符。代理控制对于原始对象的访问，并允许在将请求提交给对象前后进行一些处理。</p>
</blockquote>
<h2 id="迭代器模式">迭代器模式</h2>
<pre><code class="highlight mermaid">classDiagram
    class Iterator &#123;
        &lt;&lt;interface&gt;&gt;
        + first()
        + next()
        + isDone()
        + currentItem()
    &#125;
    class ConcreteIterator &#123;
        + first()
        + next()
        + isDone()
        + currentItem()
    &#125;
    class Aggregate &#123;
        &lt;&lt;interface&gt;&gt;
        + createIterator()
    &#125;
    class ConcreteAggregate &#123;
        + createIterator()
    &#125;
    Iterator &lt;|.. ConcreteIterator
    Aggregate &lt;|.. ConcreteAggregate
    ConcreteAggregate ..&gt; ConcreteIterator
    ConcreteAggregate &lt;-- ConcreteIterator : aggregate</code></pre>
<p>结构</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>Iterator - 迭代器</p>
</li>
<li class="lvl-2">
<p>ConcreteIterator - 具体迭代器</p>
</li>
<li class="lvl-2">
<p>Aggregate - 抽象聚合</p>
</li>
<li class="lvl-2">
<p>ConcreteAggregate - 具体聚合</p>
</li>
</ul>
<blockquote>
<p>迭代器模式是一种行为设计模式， 让你能在不暴露集合底层表现形式（列表、栈和树等）的情况下遍历集合中所有的元素。</p>
</blockquote>
]]></content>
      <categories>
        <category>SoftwareEngineering</category>
      </categories>
  </entry>
  <entry>
    <title>BOSS直聘 爬虫·数据分析·数据可视化</title>
    <url>/2024/12/22/1/</url>
    <content><![CDATA[<h2 id="BOSS直聘-爬虫·数据分析·数据可视化">BOSS直聘 爬虫·数据分析·数据可视化</h2>
<p>做了一个项目，爬取了BOSS直聘上的数据分析岗位的招聘信息，进行了数据分析和数据可视化。</p>
<h3 id="项目背景">项目背景</h3>
<p>期末了，正好有一个爬虫课的实习，于是就想到了爬取BOSS直聘上的数据分析岗位的招聘信息，进行数据分析和数据可视化。</p>
<p>采用了Selenium + Mysql + Flask + Echarts + Bootstrap 的技术栈。</p>
<h3 id="项目目标">项目目标</h3>
<p><input type="checkbox" id="checkbox7" checked="true"><label for="checkbox7">爬取BOSS直聘上的数据分析岗位的招聘信息</label><br>
<input type="checkbox" id="checkbox6" checked="true"><label for="checkbox6">对爬取的数据进行数据分析</label><br>
<input type="checkbox" id="checkbox5" checked="true"><label for="checkbox5">对数据进行数据可视化</label></p>
<h3 id="成果">成果</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1l1emhpaTA3MTgvYm9venAtbmVv">boss-selenium and web-page - GitHub<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><a href="https://yuzhii0718.eu.org/boozp-neo/">在线演示：BOSS直聘 互联网/AI 岗位分析可视化</a></p>
</li>
</ul>
]]></content>
      <tags>
        <tag>分享</tag>
      </tags>
  </entry>
  <entry>
    <title>利用 Cisco Packet Tracer 进行组网实验 2</title>
    <url>/2024/12/21/1/</url>
    <content><![CDATA[<p><a href="/2024/11/10/2/">上文</a></p>
<p>前两个是设计题，后几个是应用题。</p>
<h2 id="配置Serial静态路由">配置Serial静态路由</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>画出基本的网络拓扑，然后进行配置。</p>
<p>放置2台 <code>Router-PT</code>，2台 <code>PT-PC</code><br>
<code>PC0</code> 和 <code>PC1</code> 使用铜交叉线连接到 <code>Router0</code><br>
<code>Router0</code> 和 <code>Router1</code> 使用<code>串行DCE</code>线连接</p>
<p><img src="./%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1.png" alt></p>
</li>
<li class="lvl-2">
<p>配置 <code>Router</code> 的 <code>IP</code> 地址</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">int f0/0</span><br><span class="line">ip address [IP] [MASK]</span><br><span class="line">no shutdown</span><br></pre></td></tr></table></figure>
<p>路由器0左边配置为192.168.1.0网段</p>
<p>路由器0至路由器1配置为192.168.2.0网段</p>
<p>路由器1右边配置为192.168.3.0网段</p>
<p>路由器0 f0/0 为 <code>192.168.1.1/24</code><br>
路由器0 s2/0 为 <code>192.168.2.1/24</code><br>
路由器1 f0/0 为 <code>192.168.3.1/24</code><br>
路由器1 s2/0 为 <code>192.168.2.2/24</code></p>
</li>
<li class="lvl-2">
<p>使用IP配置工具分别配置PC0和PC1的IP和网关</p>
<p><code>PC0</code> 为 <code>192.168.1.2/24</code> 网关为 <code>192.168.1.1</code><br>
<code>PC1</code> 为 <code>192.168.3.2/24</code> 网关为 <code>192.168.3.1</code></p>
</li>
<li class="lvl-2">
<p>同步串行DCE线的时钟</p>
<p>在路由器与路由器之间使用串行DCE线连接时，需要同步时钟</p>
<p>鼠标指向线两端的三角形，会浮出时钟图标，则该路由器需要配置时钟</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">int s2/0</span><br><span class="line">clock rate 64000</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>配置静态路由</p>
<p>在路由器中配置到达下一跳的路由</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">ip route [目标网段] [子网掩码] [下一跳地址]</span><br></pre></td></tr></table></figure>
<p>路由器0</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ip route 192.168.3.0 255.255.255.0 192.168.2.2</span><br></pre></td></tr></table></figure>
<p>路由器1</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ip route 192.168.1.0 255.255.255.0 192.168.2.1</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>模拟通信</p>
<p>在 <code>PC0</code> 中 ping <code>PC1</code>，查看是否能够通信</p>
<p>在模拟器中查看数据包的传输过程</p>
</li>
</ul>
<blockquote>
<p>静态路由是在路由器上手动配置的路由，用于指定到达目的网络的下一跳地址。</p>
</blockquote>
<h2 id="两层交换机路由">两层交换机路由</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>画出基本的网络拓扑，然后进行配置。</p>
<p>放置2台 <code>2960-24</code> 交换机，4台 <code>PT-PC</code>，1台 <code>1841</code> 路由器使用铜直通线连接交换机和电脑以及路由器</p>
<p><img src="./%E4%B8%A4%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%E8%B7%AF%E7%94%B1.png" alt></p>
<p>PC0 连接到 <code>Switch0</code> 的 <code>f0/1</code> 端口<br>
PC1 连接到 <code>Switch0</code> 的 <code>f0/2</code> 端口<br>
PC2 连接到 <code>Switch1</code> 的 <code>f0/1</code> 端口<br>
PC3 连接到 <code>Switch1</code> 的 <code>f0/2</code> 端口<br>
<code>Switch0</code> 的 <code>f0/3</code> 端口连接到 <code>Router0</code> 的 <code>f0/0</code> 端口<br>
<code>Switch1</code> 的 <code>f0/3</code> 端口连接到 <code>Router0</code> 的 <code>f0/1</code> 端口</p>
</li>
<li class="lvl-2">
<p>配置 <code>PC</code> 的 <code>IP</code> 地址</p>
<p>PC0: 10.0.0.2/8 网关 10.0.0.1<br>
PC1: 20.0.0.2/8 网关 20.0.0.1<br>
PC2: 30.0.0.2/8 网关 30.0.0.1<br>
PC3: 40.0.0.2/8 网关 40.0.0.1</p>
</li>
<li class="lvl-2">
<p><code>Switch0</code> 和 <code>Switch1</code> 划分 VLAN</p>
<p><code>Switch0</code>:</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">vlan 10</span><br><span class="line">name vlan10</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">vlan 20</span><br><span class="line">name vlan20</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/1</span><br><span class="line">switchport mode access</span><br><span class="line">switchport access vlan 10</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/2</span><br><span class="line">switchport mode access</span><br><span class="line">switchport access vlan 20</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/3</span><br><span class="line">switchport mode trunk</span><br></pre></td></tr></table></figure>
<p><code>Switch1</code>:</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">vlan 30</span><br><span class="line">name vlan30</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">vlan 40</span><br><span class="line">name vlan40</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/1</span><br><span class="line">switchport mode access</span><br><span class="line">switchport access vlan 30</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/2</span><br><span class="line">switchport mode access</span><br><span class="line">switchport access vlan 40</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/3</span><br><span class="line">switchport mode trunk</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>配置路由</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">int f0/0</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/1</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/0.1</span><br><span class="line">encapsulation dot1Q 10</span><br><span class="line">ip address 10.0.0.1 255.0.0.0</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/0.2</span><br><span class="line">encapsulation dot1Q 20</span><br><span class="line">ip address 20.0.0.1 255.0.0.0</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/1.3</span><br><span class="line">encapsulation dot1Q 30</span><br><span class="line">ip address 30.0.0.1 255.0.0.0</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/1.4</span><br><span class="line">encapsulation dot1Q 40</span><br><span class="line">ip address 40.0.0.1 255.0.0.0</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>模拟模式中使用 IMCP 协议进行 ping 测试</p>
<p>PC0 ping<br>
PC1 ping<br>
PC2 ping<br>
PC3 ping</p>
</li>
</ul>
<h2 id="三层交换机双臂路由">三层交换机双臂路由</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>画出基本的网络拓扑，然后进行配置。</p>
<p>放置2台 <code>2960-24</code> 交换机，4台 <code>PT-PC</code>，1台 <code>3560-24PS</code> 三层交换机使用铜直通线连接交换机和电脑</p>
<p><img src="./%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%8F%8C%E8%87%82%E8%B7%AF%E7%94%B1.png" alt></p>
<p>PC0 连接到 <code>Switch0</code> 的 <code>f0/1</code> 端口<br>
PC1 连接到 <code>Switch0</code> 的 <code>f0/2</code> 端口<br>
PC2 连接到 <code>Switch1</code> 的 <code>f0/1</code> 端口<br>
PC3 连接到 <code>Switch1</code> 的 <code>f0/2</code> 端口<br>
<code>Switch0</code> 的 <code>f0/3</code> 端口连接到 <code>MultilayerSwitch0</code> 的 <code>f0/1</code> 端口<br>
<code>Switch1</code> 的 <code>f0/3</code> 端口连接到 <code>MultilayerSwitch0</code> 的 <code>f0/2</code> 端口</p>
</li>
<li class="lvl-2">
<p>配置 <code>PC</code> 的 <code>IP</code> 地址</p>
<p>PC0: 10.0.0.2/8 网关 10.0.0.1<br>
PC1: 20.0.0.2/8 网关 20.0.0.1<br>
PC2: 30.0.0.2/8 网关 30.0.0.1<br>
PC3: 40.0.0.2/8 网关 40.0.0.1</p>
</li>
<li class="lvl-2">
<p><code>MultilayerSwitch0</code> 划分 VLAN</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">vlan 10</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">vlan 20</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">vlan 30</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">vlan 40</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int vlan 10</span><br><span class="line">ip address 10.0.0.1 255.0.0.0</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int vlan 20</span><br><span class="line">ip address 20.0.0.1 255.0.0.0</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int vlan 30</span><br><span class="line">ip address 30.0.0.1 255.0.0.0</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int vlan 40</span><br><span class="line">ip address 40.0.0.1 255.0.0.0</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">ip routing</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p><code>Switch0</code> 和 <code>Switch1</code> 划分 VLAN</p>
<p><code>Switch0</code>:</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">vlan 10</span><br><span class="line">name vlan10</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">vlan 20</span><br><span class="line">name vlan20</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/1</span><br><span class="line">switchport mode access</span><br><span class="line">switchport access vlan 10</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/2</span><br><span class="line">switchport mode access</span><br><span class="line">switchport access vlan 20</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/3</span><br><span class="line">switchport mode trunk</span><br></pre></td></tr></table></figure>
<p><code>Switch1</code>:</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">vlan 30</span><br><span class="line">name vlan30</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">vlan 40</span><br><span class="line">name vlan40</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/1</span><br><span class="line">switchport mode access</span><br><span class="line">switchport access vlan 10</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/2</span><br><span class="line">switchport mode access</span><br><span class="line">switchport access vlan 20</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/3</span><br><span class="line">switchport mode trunk</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>模拟模式中使用 IMCP 协议进行 ping 测试</p>
<p>PC0 ping<br>
PC1 ping<br>
PC2 ping<br>
PC3 ping</p>
</li>
<li class="lvl-2">
<p>实体环境中测试</p>
</li>
</ul>
<h2 id="自动-DHCP-配置">自动 DHCP 配置</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>画出基本的网络拓扑，然后进行配置。</p>
<p>放置2台 <code>PT-Router</code> 路由器，2台 <code>PT-PC</code><br>
使用铜交叉线连接 <code>Router</code> 和 <code>PC</code><br>
使用串行DCE线连接两台 <code>Router</code></p>
<p><img src="./%E8%87%AA%E5%8A%A8DHCP%E9%85%8D%E7%BD%AE.png" alt></p>
<p>PC0 连接到 <code>Router0</code> 的 <code>f0/0</code> 端口<br>
PC1 连接到 <code>Router1</code> 的 <code>f0/0</code> 端口<br>
<code>Router0</code> 的 <code>s2/0</code> 连接到 <code>Router1</code> 的 <code>s2/0</code> 端口</p>
</li>
<li class="lvl-2">
<p>配置 <code>Router</code> 的 <code>IP</code> 地址</p>
<p><code>Router0</code>:</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">int f0/0</span><br><span class="line">ip address 192.168.1.1 255.255.255.0</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int s2/0</span><br><span class="line">ip address 192.168.20.1 255.255.255.0</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
<p><code>Router1</code>:</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">int f0/0</span><br><span class="line">ip address 172.16.0.1 255.255.0.0</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int s2/0</span><br><span class="line">ip address 192.168.20.2 255.255.255.0</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>DCE 线配置</p>
<p>找到有时钟标记的 <code>Router</code>，在该 <code>Router</code> 上配置 <code>DCE</code> 线</p>
<p><code>Router</code> :</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">int s2/0</span><br><span class="line">clock rate 64000</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>配置 <code>Router</code> 之间的路由</p>
<p><code>Router0</code>:</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">ip route 172.16.0.0 255.255.0.0 192.168.20.2</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
<p><code>Router1</code>:</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">ip route 192.168.1.0 255.255.255.0 192.168.20.1</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>在 <code>Router0</code> 上配置 <code>DHCP</code> 服务</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">ip dhcp pool LAN1</span><br><span class="line">network 192.168.1.0 255.255.255.0</span><br><span class="line">default-router 192.168.1.1</span><br><span class="line">dns-server 1.1.1.1</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>在 <code>Router1</code> 上配置 <code>DHCP</code> 服务</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">ip dhcp pool LAN2</span><br><span class="line">network 172.16.0.0 255.255.0.0</span><br><span class="line">default-router 172.16.0.1</span><br><span class="line">dns-server 1.1.1.1</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>PC 配置</p>
<p>PC0: <code>DHCP</code><br>
PC1: <code>DHCP</code></p>
</li>
<li class="lvl-2">
<p>测试</p>
<p>PC0 ping PC1</p>
</li>
</ul>
<h2 id="中继代理-DHCP-配置">中继代理 DHCP 配置</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>画出基本的网络拓扑，然后进行配置。</p>
<p>放置2台 <code>PT-Router</code> 路由器，2台 <code>PT-PC</code><br>
使用铜交叉线连接 <code>Router</code> 和 <code>PC</code><br>
使用串行DCE线连接两台 <code>Router</code></p>
<p><img src="./%E4%B8%AD%E7%BB%A7%E4%BB%A3%E7%90%86DHCP.png" alt></p>
<p>PC0 连接到 <code>Router0</code> 的 <code>f0/0</code> 端口 网段 192.168.1.0<br>
PC1 连接到 <code>Router1</code> 的 <code>f0/0</code> 端口 网段 172.16.0.0<br>
<code>Router0</code> 的 <code>s2/0</code> 连接到 <code>Router1</code> 的 <code>s2/0</code> 端口 网段 192.168.20.0</p>
<p><code>Router0</code> 自动 DHCP 服务，<code>Router1</code> 中继代理 DHCP 服务</p>
</li>
<li class="lvl-2">
<p>配置 <code>Router</code> 的 <code>IP</code> 地址</p>
<p><code>Router0</code>:</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">int f0/0</span><br><span class="line">ip address 192.168.1.1 255.255.255.0</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int s2/0</span><br><span class="line">ip address 192.168.20.1 255.255.255.0</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
<p><code>Router1</code>:</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">int f0/0</span><br><span class="line">ip address 172.16.0.1 255.255.0.0</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int s2/0</span><br><span class="line">ip address 192.168.20.2 255.255.255.0</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>DCE 线配置</p>
<p>找到有时钟标记的 <code>Router</code>，在该 <code>Router</code> 上配置 <code>DCE</code> 线</p>
<p><code>Router</code> :</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">int s2/0</span><br><span class="line">clock rate 64000</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>配置 <code>Router</code> 之间的路由</p>
<p><code>Router0</code>:</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">ip route 172.16.0.0 255.255.0.0 192.168.20.2</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
<p><code>Router1</code>:</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">ip route 192.168.1.0 255.255.255.0 192.168.20.1</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>在 <code>Router0</code> 上配置 <code>DHCP</code> 服务</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">ip dhcp pool LAN1</span><br><span class="line">network 192.168.1.0 255.255.255.0</span><br><span class="line">default-router 192.168.1.1</span><br><span class="line">dns-server 1.1.1.1</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">ip dhcp pool LAN2</span><br><span class="line">network 172.16.0.0 255.255.0.0</span><br><span class="line">default-router 172.16.0.1</span><br><span class="line">dns-server 1.1.1.1</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>在 <code>Router1</code> 上配置 中继代理 <code>DHCP</code> 服务</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">service dhcp</span><br><span class="line">int f0/0</span><br><span class="line">ip helper-address 192.168.20.1</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
<p><code>ip helper-address</code> 用于将广播的 DHCP 请求转发到指定的 DHCP 服务器</p>
</li>
<li class="lvl-2">
<p>测试</p>
<p>PC0 ping PC1</p>
</li>
</ul>
<h2 id="访问控制列表">访问控制列表</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>画出基本的网络拓扑，然后进行配置。</p>
<p>放置一台 <code>1841</code> 路由器，两台 <code>PT-PC</code>，1台 <code>Server-PT</code> 服务器使用铜交叉线连接交换机和电脑以及服务器</p>
<p><img src="./%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8.png" alt><br>
对 <code>Router0</code> 进行改装，增加2个 <code>WIC-1NET</code> 模块，或者 <code>WIC-4ESW</code> 模块，本次使用 <code>WIC-4ESW</code> 模块<br>
PC0 连接到 <code>Router0</code> 的 <code>fa0/0/0</code> 端口<br>
PC1 连接到 <code>Router0</code> 的 <code>fa0/0/1</code> 端口<br>
<code>Server0</code> 连接到 <code>Router0</code> 的 <code>f0/0</code> 端口</p>
</li>
<li class="lvl-2">
<p>配置 <code>PC</code> 的 <code>IP</code> 地址</p>
<p>PC0: 192.168.2.2/24 网关 192.168.2.1<br>
PC1: 192.168.3.2/24 网关 192.168.3.1<br>
Server0: 192.168.4.2/24 网关 192.168.4.1</p>
</li>
<li class="lvl-2">
<p>配置路由</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">vlan 10</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">vlan 20</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/0/0</span><br><span class="line">switchport mode access</span><br><span class="line">switchport access vlan 10</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/0/1</span><br><span class="line">switchport mode access</span><br><span class="line">switchport access vlan 20</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int vlan 10</span><br><span class="line">ip address 192.168.2.1 255.255.255.0</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int vlan 20</span><br><span class="line">ip address 192.168.3.1 255.255.255.0</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/0</span><br><span class="line">ip address 192.168.4.1 255.255.255.0</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>在 <code>Router0</code> 上配置拒绝192.168.2.0网段的机子访问服务器。(ftp ping web-server 都不通)</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">configure terminal</span><br><span class="line">access-list 101 deny ip 192.168.2.0 0.0.0.255 host 192.168.4.2</span><br><span class="line">access-list 101 permit ip any any</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>在 <code>Router0</code> 上配置禁止192.168.3.0网段的机子访问服务器的HTTP服务(<code>http://192.168.4.2</code>)，其他服务正常(可以 ftp ping)。</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">access-list 102 deny tcp 192.168.3.0 0.0.0.255 host 192.168.4.2 eq www</span><br><span class="line">access-list 102 permit ip any any</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>在 <code>Router0</code> 启用访问控制列表</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">int f0/0</span><br><span class="line">ip access-group 101 out</span><br><span class="line">ip access-group 102 out</span><br></pre></td></tr></table></figure>
<blockquote>
<p>in 表示进入接口，out 表示出接口，服务器在 f0/0 端口，是出接口，是外部访问，所以使用 out</p>
</blockquote>
</li>
<li class="lvl-2">
<p>查看访问控制列表</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">show access-list</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>实体环境中测试</p>
<p>PC0 ping<br>
PC1 ping<br>
PC1 访问 <code>Server0</code> 的 <code>HTTP</code> 服务（使用 Web 浏览器访问 <code>192.168.4.2</code>）</p>
</li>
</ul>
<h2 id="注意事项">注意事项</h2>
<ol>
<li class="lvl-3">
<p>相同设备用交叉线连接，不同设备用直通线连接。比如 <code>PC</code> 和 <code>Router</code> 之间用交叉线连接，<code>Router</code> 之间用直通线连接。PC 和交换机之间用直通线连接。</p>
</li>
<li class="lvl-3">
<p>访问控制列表时，<code>permit</code> 表示允许，<code>deny</code> 表示拒绝</p>
</li>
<li class="lvl-3">
<p>访问控制列表时，<code>in</code> 表示进入接口，<code>out</code> 表示出接口</p>
</li>
<li class="lvl-3">
<p>访问控制列表时，<code>access-list</code> 后面的数字表示访问控制列表的编号</p>
</li>
<li class="lvl-3">
<p>多层交换机路由时，<code>no switchport</code> 表示将端口转换为路由端口</p>
</li>
<li class="lvl-3">
<p>三层交换机双臂路由时，<code>ip routing</code> 表示开启路由功能</p>
</li>
<li class="lvl-3">
<p>路由器的 <code>FastEthernet</code> 端口用于连接 <code>PC</code>，<code>Serial</code> 端口用于连接其他路由器。</p>
</li>
<li class="lvl-3">
<p>在连接两台路由器时，需要使用 <code>DCE</code> 线连接，并且需要配置时钟。</p>
</li>
</ol>
]]></content>
      <categories>
        <category>Network</category>
      </categories>
  </entry>
  <entry>
    <title>HEXO 插件重置</title>
    <url>/2024/11/22/1/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉，您输入的密码错误，请检查后重新输入。" data-whm="抱歉, 当前文章不能被校验, 不过您还是可以看看解密后的内容。">
  <script id="hbeData" type="hbeData" data-hmacdigest="c36b5f1d20d3b035cf9b2878f85d46a466cf74879722f7b88eace3436af5e0fe">269e7d5347b7159857e2b73e7f7f62c059b1279b43e1175d87d1a505941affef6fa60bd3a1d1a7f81a128a5f5893bc7e87b6af68c73321e0bdcd7af1b9262f5ad49e25cf5d3878a289aa097b13bee65a7d2143d0fe11a125ba94d8b27e44f4603ac5899dcc88441daa79b3260d2f7428c5e183de0ee119f2b81e5ee1514ecb31fe2afbd2d31a9db0d7b96539862265cab648ad3c541a21f086d8f78f7c2212840070bb63bd05351e61287cd24b3b1b351aefa692c28814e9e76c8846308415bb15d3619cbea8d79269d9b0c5d3c5ce7ca407ff84aeaa6b3b24faa24144fd8fbbee2f20268208222adf87640fc95a67450bf7ca802993390c00a0465efe50dbb6eb3313528eb1efe0d8c4a4b5a80be434d5194a455ef27abfebfca25e352d8de8609e30ffdaf9b60763f953ddd274ff1be0a24383769097bf4b3ccb571673134b1ba1d1305411126c4a27c24fddb61155e3f0bc89acadf0fba4acd5f4404b993873e865c0892a1bb45600fac55529363f2bd6b0abaded14e339c6e21b81787675459b30c041c824d6539d46b359ee2c6130d4cd4867d3035fb4294c9f22c9a6dd960308b662a8ebc308c837d345627f1d5b42971ddfa63c56981cc4b0c2ce26298dfce69f084a9f3387c1e1ddd8f4184a826b7c76aa4541574e139a95c2b4ac41aeec646a92762685f18db2d8e8def317dd6511467a7bde05456b69ab205805e1a31c600ca3545bb5c1d92a9af04c5c10a9ca808fdbd3c13210f9c84ccec15daa4b2e1d15cd5fac5a361962d586104171c1b8f6efa9037809f1e7f3a501a40d978f0fee0611f7d47144855ede2600ffc21b8a668efaecd7dc56a4f125ef9b1a72f4d22985ba539238b8a31adb113b9493d4218269452213d5580974698148b0dfbda8d2ff68a539c3163ee0c7c1b765548e17e58c8f92d3175ffe92a2cb0a385e4acf1e35bda20dda8b6b0c37624118292414258f357c8f4aeecc5c5ce9444d499c21675abd75cdbeef2eb3adb8b452ed2125e303f23478d5c60629a72a5deb409511d83596b68dae940aad7577a79db6135c297a8c5838d081eee77eedf6c62397848dee45bbf51f81f8b4a14319a051328817b369dcf29d6776ebc9ea7babd933d0a3344cd23bed409313b85597b27328ebf118ef4c78cb9835f4c82e90c0e2e76dd4fd2b4d2f1eeb804693c3b5681843ec93449df670d46e089fc89cb6e95dbd55888a1b18c5c52ee520e06b0f101cd73cacc917f308e16909881275d3e9cdac65f3a413a4970565412ac622995009b42736c65306aa5eecf70fd01ceb04437232acf5d474f24c70731499ea9c4eac6bf4a3f8cc3b3eda2d73f0694a230b8017476dacc8eb343009b871705ff40d27c006e98030083c9efe3d805bc50fd9b44321f727ac9f3d107fa269976bd981522659b85cb1384d81a31b1e7ccb577872a54655a1eb76d2e7b2b866db6abe7ab10e107988137f24389aaed09721f7822e1add45a8534bfd5e6bc3eb26f4a511f6e52bde8271b4f1ad844ef3707f07f39a5b5a6bdb14c54bdf1139acef96470848752a010f86cb634dc0c3befd7e25ab3b50e861fe6b50f81d39a915bc86c7d3af2eea5bb9137eacfe89c37dc63b0662d90e3fac5165389b2a1df257ecca7f5b493ab0f8e71ebbcb361fc50b3df3511a89fb6b092be5082783b0a4fe6b938238eceb8937c0b815d998ee3ef416228c030c627b13c6d6d6132b4d73746e7f158c9924776474f95824290b55aff534b18b60808bf6d9110c5ad8f4c90d00a100ba281864dcca71843f102b30e6a7a07290bee70a925f84d6c3b1f8fff1d9bbdbdd7eff07c1fa822e1f0ec0a46ffe23d62a729b32fc709561865a2bed9859cb5b05d533e7abae1fbfb1c9feb5fde84b82a7a8e0f3d978296d17a13e477b95b043466eba4b23d8920967b03c99c6d926340d20a06a7f31be1508946a80630ce4bedf71798d6381c076101f510b4967df7fe900334cc486e58e2fe68dafa1d17487ca813c11c99294044ca30841bd5b0cda50d97e8158dbc2d61d9ef029a9d247c04edb41e7ef9e85bc441802fb70fb83408cadd40acc54b04d4e2a1a54732ba65917daa5e3d54babc357673ae2d5befc77562e3585fcf7ac3700f0c6db6ad50e181a740c92113f8a4cba9c5640661fba1914cfacdce97d4fdcd7f42779c349d88338f5e78ea2acf5b8ef6098f8c7828de88366963fb0d901372299e0e362d4889fedc8f385bd9f5db73ceaf191a6082dcb854ef647fae31690f9c2d050f74a42d8182159c631cc455af6e627ec4d6eed796995091c891b15c837c2ad011fc635cef2f65135170b2ce02b5de686d43c624c58958a7e1b15abb1109d63f0aa1896ca7773b1440c562a6b9022519a4785cd3adf72dd54462843777d905fa2cac4af71a5c4c5427ee12c1b44351ea19f1f1b3b77220924e5ee6317f745d56a1ec8d748ea29390dc5a1fc02477e56e1ccd0d997c67c5e263cf590f20db0b9158b35b476c27858182431343b83975eb717f24d4157654be64938078c7714681ccbdbe87d45901d3b3e5aa8f4337f32ac3b9f1277747d0dad6547a64380b9f02f2e94ab14ffb8b5ecc7fc7583b03ac093213d1d28f48debd8a71d398eb06eae232b855c1d5c3041a875a0b9b342baaa76a9c07042afaee57ae116c746646b756b2b10c199cba7b954df1528eba1d10020675c2d6b5f22ee35ae86735d35c9c2826a47e81bcf51fe2edb1cae69974f5ae97a2d39e07d89c73845cdcb136833920f64bf29af53cfb9b6153ffa9003f33ea174300da020de38b481ade4447f3a4f68613107fabd939ae7a38555192ab9e5eda18f7ba61e7512618ce9381865d444c02e54591a7392693e0fdea2f6611c625722b0fb73b9057bcfffbae3b2b8cffe556a0c974d103974c969b3d49b4990533785f4b3d52898d205405f70d2df2b2cf2e8dc7e970d1c191634800474c73c75b567d0df1355f2d4fc5a309fced65198bdfa1d5c7cb4a18b1a8441990dfda3a40a30f2bcc1174b4099c44de0bac7342bd111bcd89f75053a58c010d8465bf46585a539ff70c5e79c561bee94748a772cd5badba62abb077859fcfe13c2500202227e8ff7828fdebd9eb09e2f9b5b0e51fa56861ae285188587b1c263be3b524f4edd56c3ff69c6b6de3fdb42fb467d92c2b5cc5f7d43ef8746453528b8d7f8bb59dbd328a25c3369b7836cef7bc8acc86bb17c2fa08d9d0f61f347f35be542bf68fae4f7ddb4890fcfd36d377c6719893e8dc870d5cf6b8c6ff9ccd4059e6ae416876e2002ab01b7f64c480f5cac1c1dde2ff7ce2a432105d9a427bd0648f9b846f4d51889aeceba8ba17caa8a57a06d5e78fb766a20660e65941c5523040cf0557a37f107add8e5b8d78e0160cd7a260e8a4c3ee1cb4e5d32b157523d1f365c1bbe7bc24d8b41ed268654e5f24f94c52ce98157aad50bc82e4489fa4a0363ef6606692aba3309b7025129dcaf7ce4423cda313dcea1279ecc277c928450a901f5900677731519304028fe48e5d0fd659c97b433a0fb170d863941d09196d04eeca549913a55988a2a1aba7bd1c367abe55b931330cdd23c6675b2c2ab66e8c75b1f8292bab1ca</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">当前文章暂不对外可见，请输入访问密码后查看！</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
  </entry>
  <entry>
    <title>利用 Cisco Packet Tracer 进行组网实验 1</title>
    <url>/2024/11/10/2/</url>
    <content><![CDATA[<h2 id="安装和汉化">安装和汉化</h2>
<ol>
<li class="lvl-3">下载安装包官网下载地址：<span class="exturl" data-url="aHR0cHM6Ly93d3cubmV0YWNhZC5jb20vemgtY24vYWJvdXQvY29udGFjdC11cy9wYWNrZXQtdHJhY2Vy">Cisco Packet Tracer<i class="fa fa-external-link-alt"></i></span></li>
<li class="lvl-3">安装</li>
<li class="lvl-3">汉化</li>
</ol>
<p><img alt="Network Knowledge" src="https://www.netacad.com/sfa-assets/images/svg/netacad_logo_black.svg" decoding="async" width="128" height="128"></p>这个思科的模拟器，我制作了相关汉化<br><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1l1emhpaTA3MTgvQ2lzY28tUGFja2V0LVRyYWNlci1DaGluZXNl">Cisco-Packet-Tracer-Chinese<i class="fa fa-external-link-alt"></i></span>
<p>遵循项目中的 <code>README.md</code> 进行操作即可。</p>
<h2 id="组建对等网">组建对等网</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>画出基本的网络拓扑，然后进行配置。</p>
<p>放置一台 <code>2950-24</code> 交换机，两台 <code>PT-PC</code><br>
使用铜直通线连接交换机和电脑</p>
<p><img src="./%E7%BB%84%E5%BB%BA%E5%AF%B9%E7%AD%89%E7%BD%91.png" alt></p>
</li>
<li class="lvl-2">
<p>在配置页面配置 PC IP 地址</p>
<p>分别为192.168.2.1/192.168.2.2/192.168.2.3</p>
</li>
<li class="lvl-2">
<p>ping 测试</p>
<p>在 PC1 中 ping PC2 和 PC3，查看是否能够通信</p>
</li>
</ul>
<p>常见思科交换机命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span> <span class="comment"># 进入特权模式</span></span><br><span class="line">config -t <span class="comment"># 进入全局配置模式 -t 表示进入特定模式</span></span><br><span class="line">int f0/1 <span class="comment"># 进入接口配置模式</span></span><br><span class="line"><span class="built_in">exit</span> <span class="comment"># 退出当前模式</span></span><br></pre></td></tr></table></figure>
<h2 id="跨交换机VLAN通信">跨交换机VLAN通信</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>画出基本的网络拓扑，然后进行配置。</p>
<p>放置2台 <code>2950-24</code> 交换机，4台 <code>PT-PC</code><br>
<code>PC1</code> 和 <code>PC2</code> 连接到 <code>Switch0</code>，<code>PC3</code> 和 <code>PC4</code> 连接到 <code>Switch1</code><br>
<code>PC</code> 与 <code>Switch</code> 之间使用铜直通线连接<br>
<code>Switch</code> 之间使用交叉线连接</p>
<p><img src="./%E8%B7%A8%E4%BA%A4%E6%8D%A2%E6%9C%BAVLAN%E9%80%9A%E4%BF%A1.png" alt></p>
</li>
<li class="lvl-2">
<p>配置 <code>PC</code> 的 <code>IP</code> 地址</p>
<p><code>PC0</code> 为 <code>192.168.2.1</code><br>
<code>PC1</code> 为 <code>192.168.3.1</code><br>
<code>PC2</code> 为 <code>192.168.2.2</code><br>
<code>PC3</code> 为 <code>192.168.3.2</code></p>
</li>
<li class="lvl-2">
<p>ping 测试</p>
<p>在 <code>PC0</code> 中 ping <code>PC1</code> 和 <code>PC2</code>，查看是否能够通信</p>
</li>
<li class="lvl-2">
<p>配置 <code>VLAN</code></p>
<p>两台交换机分别配置 <code>VLAN</code>，并将 <code>PC</code> 分配到不同的 <code>VLAN</code> 中</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">int f0/1</span><br><span class="line">switchport mode access <span class="comment"># 设置端口模式为访问模式</span></span><br><span class="line">switchport access vlan 10 <span class="comment"># 设置端口所属的 VLAN</span></span><br></pre></td></tr></table></figure>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">int f0/2</span><br><span class="line">switchport mode access</span><br><span class="line">switchport access vlan 20</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>配置 <code>Trunk</code> 端口</p>
<p>两台交换机之间的连接端口配置为 <code>Trunk</code> 端口</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">int f0/3</span><br><span class="line">switchport mode trunk</span><br></pre></td></tr></table></figure>
<blockquote>
<p>有没有配置成功可以在图形界面上查看端口</p>
</blockquote>
</li>
<li class="lvl-2">
<p>ping 测试</p>
<p>在 <code>PC0</code> 中 ping <code>PC2</code>，查看是否能够通信在 <code>PC1</code> 中 ping <code>PC3</code>，查看是否能够通信</p>
</li>
<li class="lvl-2">
<p>模拟测试</p>
<p>在 <code>PC0</code> 中使用 <code>ping</code> 命令，在模拟器中查看数据包的传输过程（仅查看 ICMP 以提升效率）</p>
</li>
</ul>
<blockquote>
<p>trunk 端口是用来连接两台交换机的，可以传输多个 VLAN 的数据，而 access 端口只能传输一个 VLAN 的数据。</p>
</blockquote>
<h2 id="路由器和网关">路由器和网关</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>画出基本的网络拓扑，然后进行配置。</p>
<p>放置1台 <code>1841-Router</code>，2台 <code>PT-PC</code><br>
<code>PC0</code> 和 <code>PC1</code> 使用铜交叉线连接到 <code>Router</code></p>
<p><img src="./%E8%B7%AF%E7%94%B1%E5%99%A8%E5%92%8C%E7%BD%91%E5%85%B3.png" alt></p>
</li>
<li class="lvl-2">
<p>配置 <code>Router</code> 的 <code>IP</code> 地址</p>
<p>FastEthernet0/0 为 <code>192.168.2.1</code><br>
FastEthernet0/1 为 <code>192.168.3.1</code></p>
</li>
<li class="lvl-2">
<p>配置 <code>PC</code> 的 <code>IP</code> 地址</p>
<p><code>PC0</code> 为 <code>192.168.2.2</code><br>
<code>PC1</code> 为 <code>192.168.3.2</code></p>
</li>
<li class="lvl-2">
<p>配置 <code>PC</code> 的 网关</p>
<p><code>PC0</code> 的网关为 <code>192.168.2.1</code><br>
<code>PC1</code> 的网关为 <code>192.168.3.1</code></p>
</li>
<li class="lvl-2">
<p>ping 测试在 <code>PC0</code> 中 ping <code>PC1</code>，查看是否能够通信</p>
</li>
</ul>
<blockquote>
<p>路由器是用来连接不同网络的设备，可以实现不同网络之间的通信。网关(Gateway)是用来连接不同网络的设备，可以实现不同网络之间的通信。</p>
</blockquote>
<h2 id="单臂路由">单臂路由</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>画出基本的网络拓扑，然后进行配置。</p>
<p>放置一台 <code>2950-24</code> 交换机，两台 <code>PT-PC</code><br>
使用铜直通线连接交换机和电脑</p>
<p><img src="./%E5%8D%95%E8%87%82%E8%B7%AF%E7%94%B1.png" alt></p>
<p>PC0 连接到 <code>Switch0</code> 的 <code>f0/1</code> 端口<br>
PC1 连接到 <code>Switch0</code> 的 <code>f0/2</code> 端口<br>
<code>Switch0</code> 的 <code>f0/3</code> 端口连接到 <code>Router0</code> 的 <code>f0/0</code> 端口</p>
</li>
<li class="lvl-2">
<p>配置 <code>PC</code> 的 <code>IP</code> 地址</p>
<p>PC0: 192.168.1.1/24 网关 192.168.1.2<br>
PC1: 192.168.2.1/24 网关 192.168.2.2</p>
</li>
<li class="lvl-2">
<p>交换机划分 VLAN</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">vlan 10</span><br><span class="line">name vlan10</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">vlan 20</span><br><span class="line">name vlan20</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/1</span><br><span class="line">switchport mode access</span><br><span class="line">switchport access vlan 10</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/2</span><br><span class="line">switchport mode access</span><br><span class="line">switchport access vlan 20</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/3</span><br><span class="line">switchport mode trunk</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>配置路由</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">int f0/0</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/0.1</span><br><span class="line">encapsulation dot1Q 10</span><br><span class="line">ip address 192.168.1.2 255.255.255.0</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/0.2</span><br><span class="line">encapsulation dot1Q 20</span><br><span class="line">ip address 192.168.2.2 255.255.255.0</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">ip routing</span><br><span class="line">show ip route</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>模拟模式中使用 IMCP 协议进行 ping 测试</p>
<p>PC0 ping<br>
PC1 ping</p>
</li>
<li class="lvl-2">
<p>实体环境中测试</p>
</li>
</ul>
<h2 id="多层交换机路由">多层交换机路由</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>画出基本的网络拓扑，然后进行配置。</p>
<p>放置两台 <code>PT-PC</code>，1台 <code>3560-24PS</code> 多层交换机使用铜直通线连接交换机和电脑</p>
<p><img src="./%E5%A4%9A%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%E8%B7%AF%E7%94%B1.png" alt></p>
<p>PC0 连接到 <code>MultilayerSwitch0</code> 的 <code>f0/1</code> 端口<br>
PC1 连接到 <code>MultilayerSwitch0</code> 的 <code>f0/2</code> 端口</p>
</li>
<li class="lvl-2">
<p>配置 <code>PC</code> 的 <code>IP</code> 地址</p>
<p>PC0: 192.168.1.1/24 网关 192.168.1.2<br>
PC1: 192.168.2.1/24 网关 192.168.2.2</p>
</li>
<li class="lvl-2">
<p><code>MultilayerSwitch0</code> 配置</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">int f0/1</span><br><span class="line">no switchport</span><br><span class="line">ip address 192.168.1.2 255.255.255.0</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/2</span><br><span class="line">no switchport</span><br><span class="line">ip address 192.168.2.2 255.255.255.0</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">ip routing</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">show ip route</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>模拟模式中使用 IMCP 协议进行 ping 测试</p>
<p>PC0 ping<br>
PC1 ping</p>
</li>
<li class="lvl-2">
<p>实体环境中测试</p>
</li>
</ul>
<h2 id="静态NAT配置">静态NAT配置</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>画出基本的网络拓扑，然后进行配置。</p>
<p>放置一台 <code>1841</code> 路由器，3台 <code>PT-PC</code>，1台 <code>2950-24</code> 交换机使用铜交叉线连接 <code>Router0</code> 和 <code>PC0</code><br>
使用铜直通线连接 <code>Switch0</code> 和 <code>PC1</code>, <code>PC2</code></p>
<p><img src="./%E9%9D%99%E6%80%81NAT%E9%85%8D%E7%BD%AE.png" alt></p>
<p>PC0 连接到 <code>Router0</code> 的 <code>f0/0</code> 端口<br>
PC1 连接到 <code>Switch0</code> 的 <code>f0/2</code> 端口<br>
PC1 连接到 <code>Switch0</code> 的 <code>f0/3</code> 端口<br>
<code>Switch0</code> 的 <code>f0/1</code> 端口连接到 <code>Router0</code> 的 <code>f0/1</code> 端口</p>
</li>
<li class="lvl-2">
<p>配置 <code>PC</code> 的 <code>IP</code> 地址</p>
<p>PC0: 20.20.20.1 网关 20.20.20.2<br>
PC1: 192.168.2.1 网关 192.168.2.2<br>
PC2: 192.168.3.1 网关 192.168.3.2</p>
</li>
<li class="lvl-2">
<p>交换机划分 VLAN</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">vlan 10</span><br><span class="line">name vlan10</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">vlan 20</span><br><span class="line">name vlan20</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/1</span><br><span class="line">switchport mode trunk</span><br><span class="line">int f0/2</span><br><span class="line">switchport mode access</span><br><span class="line">switchport access vlan 10</span><br><span class="line">int f0/3</span><br><span class="line">switchport mode access</span><br><span class="line">switchport access vlan 20</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>配置路由</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">enable</span></span><br><span class="line">config -t</span><br><span class="line">int f0/0</span><br><span class="line">ip address 20.20.20.2</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/1</span><br><span class="line">no shutdown</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/1.1</span><br><span class="line">encapsulation dot1Q 10</span><br><span class="line">ip address 192.168.2.2 255.255.255.0</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/1.2</span><br><span class="line">encapsulation dot1Q 20</span><br><span class="line">ip address 192.168.3.2 255.255.255.0</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">ip routing</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>在路由器配置静态NAT</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">int f0/0</span><br><span class="line">ip nat outside</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">int f0/1</span><br><span class="line">ip nat inside</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">ip nat inside <span class="built_in">source</span> static 192.168.2.1 20.20.20.3</span><br><span class="line">ip nat inside <span class="built_in">source</span> static 192.168.3.1 20.20.20.4</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">show ip nat translations</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>测试</p>
<p>在内网任意一台 <code>PC</code> 上 ping 外网 <code>PC0</code></p>
</li>
</ul>
<h2 id="注意事项1">注意事项1</h2>
<ol>
<li class="lvl-3">
<p>交换机的 <code>Trunk</code> 端口用于连接两台交换机，可以传输多个 <code>VLAN</code> 的数据。</p>
</li>
<li class="lvl-3">
<p>交换机的 <code>Access</code> 端口用于连接 <code>PC</code>，只能传输一个 <code>VLAN</code> 的数据。</p>
</li>
<li class="lvl-3">
<p>通常，路由器的端口默认是关闭的，需要手动打开。</p>
</li>
<li class="lvl-3">
<p>静态路由是在路由器上手动配置的路由，用于指定到达目的网络的下一跳地址。</p>
</li>
<li class="lvl-3">
<p>NAT 配置时，<code>inside</code> 表示内网，<code>outside</code> 表示外网</p>
</li>
<li class="lvl-3">
<p>配置 <code>NAT</code> 时，<code>inside</code> 的 <code>IP</code> 地址是内网 <code>IP</code> 地址，<code>outside</code> 的 <code>IP</code> 地址是外网 <code>IP</code> 地址</p>
</li>
</ol>
]]></content>
      <categories>
        <category>Network</category>
      </categories>
  </entry>
  <entry>
    <title>ZTE光猫开启telnet·备份固件·记录</title>
    <url>/2024/11/10/1/</url>
    <content><![CDATA[<h2 id="下载工具">下载工具</h2>
<ul class="lvl-0">
<li class="lvl-2"><span class="exturl" data-url="aHR0cHM6Ly9naXRjb2RlLmNvbS9vcGVuLXNvdXJjZS10b29sa2l0LzE3ZjA5L292ZXJ2aWV3P3V0bV9zb3VyY2U9dG9vbHNfZ2l0Y29kZSZpbmRleD10b3AmdHlwZT1ocmVmJg==">factorymode_crack<i class="fa fa-external-link-alt"></i></span></li>
<li class="lvl-2"><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1NlcHRydW0xMDEvenRlT251">zteOnu<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<h2 id="前提">前提</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>你的光猫是中兴的</p>
</li>
<li class="lvl-2">
<p>运营商还没有下发配置（意味着你需要reset）</p>
</li>
<li class="lvl-2">
<p>factorymode_crack 适用老款光猫</p>
</li>
<li class="lvl-2">
<p>zteOnu 兼容新款光猫</p>
</li>
<li class="lvl-2">
<p>在中兴F653GV9上测试通过</p>
</li>
</ul>
<h2 id="factorymode-crack-使用方法">factorymode_crack 使用方法</h2>
<ol>
<li class="lvl-3">
<p>cd 到 factorymode_crack 目录</p>
</li>
<li class="lvl-3">
<p>运行相关命令</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./factorymode_crack.exe -l xxx open -i 192.168.1.1 -u CMCCAdmin -pw aDm8H%MdA -p 80</span><br></pre></td></tr></table></figure>
<p>如果不行可以将80端口改为8080端口</p>
<h2 id="zteOnu-使用方法">zteOnu 使用方法</h2>
<ol>
<li class="lvl-3">
<p>cd 到 zteOnu 目录</p>
</li>
<li class="lvl-3">
<p>运行相关命令</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./zteOnu --ip 192.168.1.1 --user CMCCAdmin --pass aDm8H%MdA --port 80</span><br></pre></td></tr></table></figure>
<p>加上 --telnet 参数可以固化telnet，但在我这台机器上不行，所以我就不加了</p>
<h2 id="telnet">telnet</h2>
<p>使用windows自带的telnet工具可能会出现无法打开23端口的情况，可以使用putty工具</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">telnet 192.168.1.1</span><br></pre></td></tr></table></figure>
<p>可以看一下路由器的配置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ls</span> /proc/capability/</span><br></pre></td></tr></table></figure>
<p>然后 <code>cat</code> 里面的文件，可以看到一些配置信息</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 把光猫背面的普通用户提升为超级管理员</span></span><br><span class="line">sendcmd 1 DB <span class="built_in">set</span> DevAuthInfo 1 Level 1</span><br><span class="line"><span class="comment"># 设置修改超级管理员的用户名和密码</span></span><br><span class="line">sendcmd 1 DB <span class="built_in">set</span> DevAuthInfo 0 User xxxxxxxx</span><br><span class="line">sendcmd 1 DB <span class="built_in">set</span> DevAuthInfo 0 Pass yyyyyyyy</span><br></pre></td></tr></table></figure>
<hr>
<p>本人的光猫是移动版中兴 F653GV9</p>
<p>在此记录具体信息</p>
<p>通过命令，可以得知以下信息：</p>
<table>
<thead>
<tr>
<th>项目</th>
<th>型号</th>
</tr>
</thead>
<tbody>
<tr>
<td>处理器</td>
<td>ARMv7 Processor rev 1 (v7l)</td>
</tr>
<tr>
<td>内存</td>
<td>512MB</td>
</tr>
<tr>
<td>内核版本</td>
<td>4.1.25</td>
</tr>
<tr>
<td>芯片</td>
<td>ZX279127S</td>
</tr>
<tr>
<td>核心数</td>
<td>1</td>
</tr>
<tr>
<td>芯片厂商</td>
<td>ZXIC</td>
</tr>
<tr>
<td>固件大小</td>
<td>256M</td>
</tr>
<tr>
<td>设备树</td>
<td>ZTE ZX27912X</td>
</tr>
<tr>
<td>BogoMIPS</td>
<td>1987.37</td>
</tr>
<tr>
<td>主频（推测）</td>
<td>993.7MHz</td>
</tr>
</tbody>
</table>
<p>这个光猫还是不错的，虽然单核A9的处理器配512MB内存很难绷得住，但是全千兆端口、无Wifi、稳定性很好，不过没有源码，只能充当光电转换的角色。</p>
<summary>点击查看具体信息</summary>
<details>
<div class="note info"><p>固件和芯片</p>
</div>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/ # uname -a</span><br><span class="line">Linux F653GV9 4.1.25 #1 SMP Fri Jul 22 10:26:33 CST 2022 armv7l GNU/Linux</span><br><span class="line">/ # cat /proc/version</span><br><span class="line">Linux version 4.1.25 (dubaoshan@localhost.localdomain) (gcc version 4.9.4 (Buildroot 2017.05-svn2186) ) #72 SMP Sun Jun 06 21:16:58 CST 2021</span><br><span class="line">/ # cat /proc/cpuinfo</span><br><span class="line">processor       : 0</span><br><span class="line">model name      : cortex-a9 (arm v7l)</span><br><span class="line">BogoMIPS        : 1987.37</span><br><span class="line">Features        : half fastmult edsp tls</span><br><span class="line">CPU implementer : 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant     : 0x4</span><br><span class="line">CPU part        : 0xc09</span><br><span class="line">CPU revision    : 1</span><br><span class="line"></span><br><span class="line">Hardware        : ZTE ZX27912X (Device Tree)</span><br><span class="line">Revision        : 0000</span><br><span class="line">Serial          : 0000000000000000</span><br><span class="line">/ # cat /proc/capability/boardtype</span><br><span class="line">type       : F653GV9</span><br><span class="line">flag       : 1</span><br><span class="line">vid        : 167</span><br><span class="line">optype     : 0</span><br><span class="line">optname    : DF</span><br><span class="line">tmtype     : 0</span><br><span class="line">cpuname    : ZX279127S</span><br><span class="line">cpuid      : 4</span><br><span class="line">chipvendor : ZXIC</span><br><span class="line">/ # cat /proc/capability/ethernetmac</span><br><span class="line">IfName EMAC Mode Speed    Duplex   AutoNeg CurMode Port</span><br><span class="line">eth0   0    1    1000Mbps full     1       GMII    3</span><br><span class="line">eth1   0    1    1000Mbps full     1       GMII    2</span><br><span class="line">eth2   0    1    1000Mbps full     1       GMII    1</span><br><span class="line">eth3   0    1    1000Mbps full     1       GMII    0</span><br><span class="line">wan_lport: 3</span><br><span class="line">/ # free</span><br><span class="line">              total         used         free       shared      buffers</span><br><span class="line">  Mem:       524288       208224       316064         1144         3432</span><br><span class="line"> Swap:            0            0            0</span><br><span class="line">Total:       524288       208224       316064</span><br><span class="line">/ # cat /proc/stat</span><br><span class="line">cpu  21685 0 30484 4788950 5442 0 6943 0 0 0</span><br><span class="line">cpu0 21685 0 30484 4788950 5442 0 6943 0 0 0</span><br><span class="line">intr 16666950 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 4853504 0 0 644176 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 55191 0 0 0 0 1353694 0 0 7 7 2 7 0 0 0 0 9706974 0 0 0 0 0 0 0 53388</span><br><span class="line">ctxt 52842244</span><br><span class="line">btime 4294967295</span><br><span class="line">processes 2134</span><br><span class="line">procs_running 1</span><br><span class="line">procs_blocked 0</span><br><span class="line">softirq 17183364 9706467 4853357 19422 1354886 3090 0 61 0 0 1246081</span><br><span class="line">/ # cat sys/bus/cpu/devices/cpu0/uevent</span><br><span class="line">OF_NAME=cpu</span><br><span class="line">OF_FULLNAME=/cpus/cpu@0</span><br><span class="line">OF_TYPE=cpu</span><br><span class="line">OF_COMPATIBLE_0=arm,cortex-a9</span><br><span class="line">OF_COMPATIBLE_N=1</span><br></pre></td></tr></table></figure>
<div class="note info"><p>分区和挂载</p>
</div>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/ # fdisk -l</span><br><span class="line"></span><br><span class="line">Disk /dev/loop0: 20 MB, 20418560 bytes</span><br><span class="line">255 heads, 63 sectors/track, 2 cylinders</span><br><span class="line">Units = cylinders of 16065 * 512 = 8225280 bytes</span><br><span class="line"></span><br><span class="line">Disk /dev/loop0 doesn&#x27;t contain a valid partition table</span><br><span class="line"></span><br><span class="line">Disk /dev/mtdblock0: 268 MB, 268435456 bytes</span><br><span class="line">255 heads, 63 sectors/track, 32 cylinders</span><br><span class="line">Units = cylinders of 16065 * 512 = 8225280 bytes</span><br><span class="line"></span><br><span class="line">Disk /dev/mtdblock0 doesn&#x27;t contain a valid partition table</span><br><span class="line"></span><br><span class="line">Disk /dev/mtdblock10: 52 MB, 52428800 bytes</span><br><span class="line">255 heads, 63 sectors/track, 6 cylinders</span><br><span class="line">Units = cylinders of 16065 * 512 = 8225280 bytes</span><br><span class="line"></span><br><span class="line">Disk /dev/mtdblock10 doesn&#x27;t contain a valid partition table</span><br><span class="line">/ # df</span><br><span class="line">Filesystem           1024-blocks    Used Available Use% Mounted on</span><br><span class="line">/dev/root                32640     27332      5308  84% /</span><br><span class="line">/dev/loop0               19968     19968         0 100% /kmodule</span><br><span class="line">/dev/mtdblock3            4096       456      3640  11% /tagparam</span><br><span class="line">tmpfs                    20480       252     20228   1% /var</span><br><span class="line">tmpfs                    25600         0     25600   0% /vasdocker</span><br><span class="line">tmpfs                    81920         0     81920   0% /upgtempfile</span><br><span class="line">tmpfs                     2048         0      2048   0% /var/osstmp</span><br><span class="line">tmpfs                     2048         0      2048   0% /mnt</span><br><span class="line">tmpfs                    16384        24     16360   0% /var/felix-temp</span><br><span class="line">tmpfs                    15360        32     15328   0% /tmp</span><br><span class="line">/dev/mtdblock5            8192       640      7552   8% /userconfig</span><br><span class="line">/dev/mtdblock6            4096       384      3712   9% /kmodule/usr/local/ct</span><br><span class="line">ubi0_0                   41628     25872     15756  62% /kmodule/usr/tmp</span><br><span class="line">/dev/loop1               26624     26624         0 100% /kmodule/usr/java</span><br><span class="line">ubi1_0                   55508      9788     42852  19% /kmodule/usr/plugin</span><br><span class="line">/dev/mtdblock4            4096       404      3692  10% /wlan</span><br><span class="line">cgroup_root             222696         0    222696   0% /sys/fs/cgroup</span><br><span class="line">/ # cat /etc/fstab</span><br><span class="line"># &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;    &lt;dump&gt; &lt;pass&gt;</span><br><span class="line"></span><br><span class="line"># The syntax of busybox&#x27;s fstab entry&#x27;s a little different than traditional</span><br><span class="line"># mount, and doesn&#x27;t work with the usual &#x27;rootfs / rootfs rw 0 0&#x27; entry.</span><br><span class="line"># Actually, it&#x27;s not needed unless you&#x27;re mounting from a non-nfs device,</span><br><span class="line"># like a hard disk.  In that case, you probably need something like the</span><br><span class="line"># following:</span><br><span class="line"></span><br><span class="line"># /dev/hda1       /               ext3    rw           1      1</span><br><span class="line"></span><br><span class="line">proc            /proc           proc    defaults     0      0</span><br><span class="line">sysfs           /sys            sysfs   defaults     0      0</span><br><span class="line">#devpts          /dev/pts        devpts  defaults     0      0</span><br><span class="line">#tmpfs           /var            tmpfs   rw     0      0</span><br><span class="line">/ # cat /proc/mtd</span><br><span class="line">dev:    size   erasesize  name</span><br><span class="line">mtd0: 10000000 00020000 &quot;whole flash&quot;</span><br><span class="line">mtd1: 00200000 00020000 &quot;u-boot&quot;</span><br><span class="line">mtd2: 00400000 00020000 &quot;others&quot;</span><br><span class="line">mtd3: 00400000 00020000 &quot;parameter tags&quot;</span><br><span class="line">mtd4: 00400000 00020000 &quot;wlan&quot;</span><br><span class="line">mtd5: 00800000 00020000 &quot;usercfg&quot;</span><br><span class="line">mtd6: 00400000 00020000 &quot;middleware&quot;</span><br><span class="line">mtd7: 02000000 00020000 &quot;kernel1&quot;</span><br><span class="line">mtd8: 02000000 00020000 &quot;kernel2&quot;</span><br><span class="line">mtd9: 03200000 00020000 &quot;osgi1&quot;</span><br><span class="line">mtd10: 03200000 00020000 &quot;osgi2&quot;</span><br><span class="line">mtd11: 04100000 00020000 &quot;plugin_data&quot;</span><br><span class="line">mtd12: 01fe0000 00020000 &quot;rootfs&quot;</span><br></pre></td></tr></table></figure>
<div class="note info"><p>备份固件</p>
</div>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/ # mtd_debug read /dev/mtd0 0 0x10000000 /mnt/usb1_1/mtd0</span><br><span class="line">/ # tftp -p -l mtd0 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd1 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd2 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd3 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd4 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd5 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd6 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd7 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd8 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd9 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd10 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd11 192.168.1.2</span><br><span class="line">/ # tftp -p -l mtd12 192.168.1.2</span><br></pre></td></tr></table></figure>
<div class="note info"><p>分区具体信息</p>
</div>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">/ # cd /dev/</span><br><span class="line">/ # mtd_debug info mtd0</span><br><span class="line">mtd.type = MTD_NANDFLASH</span><br><span class="line">mtd.flags =</span><br><span class="line">mtd.size = 268435456 (256M)</span><br><span class="line">mtd.erasesize = 131072 (128K)</span><br><span class="line">mtd.oobblock = 2048 (2K)</span><br><span class="line">mtd.oobsize = 64</span><br><span class="line">mtd.ecctype = MTD_ECC_NONE</span><br><span class="line">regions = 0</span><br><span class="line"></span><br><span class="line">/ # mtd_debug info mtd1</span><br><span class="line">mtd.type = MTD_NANDFLASH</span><br><span class="line">mtd.flags =</span><br><span class="line">mtd.size = 2097152 (2M)</span><br><span class="line">mtd.erasesize = 131072 (128K)</span><br><span class="line">mtd.oobblock = 2048 (2K)</span><br><span class="line">mtd.oobsize = 64</span><br><span class="line">mtd.ecctype = MTD_ECC_NONE</span><br><span class="line">regions = 0</span><br><span class="line"></span><br><span class="line">/ # mtd_debug info mtd2</span><br><span class="line">mtd.type = MTD_NANDFLASH</span><br><span class="line">mtd.flags =</span><br><span class="line">mtd.size = 4194304 (4M)</span><br><span class="line">mtd.erasesize = 131072 (128K)</span><br><span class="line">mtd.oobblock = 2048 (2K)</span><br><span class="line">mtd.oobsize = 64</span><br><span class="line">mtd.ecctype = MTD_ECC_NONE</span><br><span class="line">regions = 0</span><br><span class="line"></span><br><span class="line">/ # mtd_debug info mtd3</span><br><span class="line">mtd.type = MTD_NANDFLASH</span><br><span class="line">mtd.flags =</span><br><span class="line">mtd.size = 4194304 (4M)</span><br><span class="line">mtd.erasesize = 131072 (128K)</span><br><span class="line">mtd.oobblock = 2048 (2K)</span><br><span class="line">mtd.oobsize = 64</span><br><span class="line">mtd.ecctype = MTD_ECC_NONE</span><br><span class="line">regions = 0</span><br><span class="line"></span><br><span class="line">/ # mtd_debug info mtd4</span><br><span class="line">mtd.type = MTD_NANDFLASH</span><br><span class="line">mtd.flags =</span><br><span class="line">mtd.size = 4194304 (4M)</span><br><span class="line">mtd.erasesize = 131072 (128K)</span><br><span class="line">mtd.oobblock = 2048 (2K)</span><br><span class="line">mtd.oobsize = 64</span><br><span class="line">mtd.ecctype = MTD_ECC_NONE</span><br><span class="line">regions = 0</span><br><span class="line"></span><br><span class="line">/ # mtd_debug info mtd5</span><br><span class="line">mtd.type = MTD_NANDFLASH</span><br><span class="line">mtd.flags =</span><br><span class="line">mtd.size = 8388608 (8M)</span><br><span class="line">mtd.erasesize = 131072 (128K)</span><br><span class="line">mtd.oobblock = 2048 (2K)</span><br><span class="line">mtd.oobsize = 64</span><br><span class="line">mtd.ecctype = MTD_ECC_NONE</span><br><span class="line">regions = 0</span><br><span class="line"></span><br><span class="line">/ # mtd_debug info mtd6</span><br><span class="line">mtd.type = MTD_NANDFLASH</span><br><span class="line">mtd.flags =</span><br><span class="line">mtd.size = 4194304 (4M)</span><br><span class="line">mtd.erasesize = 131072 (128K)</span><br><span class="line">mtd.oobblock = 2048 (2K)</span><br><span class="line">mtd.oobsize = 64</span><br><span class="line">mtd.ecctype = MTD_ECC_NONE</span><br><span class="line">regions = 0</span><br><span class="line"></span><br><span class="line">/ # mtd_debug info mtd7</span><br><span class="line">mtd.type = MTD_NANDFLASH</span><br><span class="line">mtd.flags =</span><br><span class="line">mtd.size = 33554432 (32M)</span><br><span class="line">mtd.erasesize = 131072 (128K)</span><br><span class="line">mtd.oobblock = 2048 (2K)</span><br><span class="line">mtd.oobsize = 64</span><br><span class="line">mtd.ecctype = MTD_ECC_NONE</span><br><span class="line">regions = 0</span><br><span class="line"></span><br><span class="line">/ # mtd_debug info mtd8</span><br><span class="line">mtd.type = MTD_NANDFLASH</span><br><span class="line">mtd.flags =</span><br><span class="line">mtd.size = 33554432 (32M)</span><br><span class="line">mtd.erasesize = 131072 (128K)</span><br><span class="line">mtd.oobblock = 2048 (2K)</span><br><span class="line">mtd.oobsize = 64</span><br><span class="line">mtd.ecctype = MTD_ECC_NONE</span><br><span class="line">regions = 0</span><br><span class="line"></span><br><span class="line">/ # mtd_debug info mtd9</span><br><span class="line">mtd.type = MTD_NANDFLASH</span><br><span class="line">mtd.flags =</span><br><span class="line">mtd.size = 52428800 (50M)</span><br><span class="line">mtd.erasesize = 131072 (128K)</span><br><span class="line">mtd.oobblock = 2048 (2K)</span><br><span class="line">mtd.oobsize = 64</span><br><span class="line">mtd.ecctype = MTD_ECC_NONE</span><br><span class="line">regions = 0</span><br><span class="line"></span><br><span class="line">/ # mtd_debug info mtd10</span><br><span class="line">mtd.type = MTD_NANDFLASH</span><br><span class="line">mtd.flags =</span><br><span class="line">mtd.size = 52428800 (50M)</span><br><span class="line">mtd.erasesize = 131072 (128K)</span><br><span class="line">mtd.oobblock = 2048 (2K)</span><br><span class="line">mtd.oobsize = 64</span><br><span class="line">mtd.ecctype = MTD_ECC_NONE</span><br><span class="line">regions = 0</span><br><span class="line"></span><br><span class="line">/ # mtd_debug info mtd11</span><br><span class="line">mtd.type = MTD_NANDFLASH</span><br><span class="line">mtd.flags =</span><br><span class="line">mtd.size = 68157440 (65M)</span><br><span class="line">mtd.erasesize = 131072 (128K)</span><br><span class="line">mtd.oobblock = 2048 (2K)</span><br><span class="line">mtd.oobsize = 64</span><br><span class="line">mtd.ecctype = MTD_ECC_NONE</span><br><span class="line">regions = 0</span><br><span class="line"></span><br><span class="line">/ # mtd_debug info mtd12</span><br><span class="line">mtd.type = MTD_NANDFLASH</span><br><span class="line">mtd.flags =</span><br><span class="line">mtd.size = 33423360 (31M)</span><br><span class="line">mtd.erasesize = 131072 (128K)</span><br><span class="line">mtd.oobblock = 2048 (2K)</span><br><span class="line">mtd.oobsize = 64</span><br><span class="line">mtd.ecctype = MTD_ECC_NONE</span><br><span class="line">regions = 0</span><br></pre></td></tr></table></figure>
</details>
<h2 id="常用-telnet-命令">常用 telnet 命令</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看所有配置</span></span><br><span class="line">sendcmd 1 DB p all <span class="comment"># 有些版本不现实</span></span><br><span class="line"><span class="comment">#超密查询</span></span><br><span class="line">sendcmd 1 DB p DevAuthInfo</span><br><span class="line"><span class="comment">#telnet密码查询</span></span><br><span class="line">sendcmd 1 DB p TelnetCfg</span><br><span class="line"><span class="comment">#pppoe密码查询</span></span><br><span class="line">sendcmd 1 DB p WANCPPP</span><br><span class="line"><span class="comment">#wifi密码查询</span></span><br><span class="line">sendcmd 1 DB p WLANPSK</span><br><span class="line"> </span><br><span class="line"><span class="comment">#1指的是APPID，对应进程cspd，可通过命令sendcmd -pc show 查看进程列表</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭运营商远程操作</span></span><br><span class="line">sendcmd 1 DB <span class="built_in">set</span> MgtServer 0 Tr069Enable 0</span><br></pre></td></tr></table></figure>
<h2 id="配置分析">配置分析</h2>
<p>超级管理员账号为CMCCAdmin，密码变成了CMCCAdmin+8位随机字符串（数字/字母/特殊字符）这个基本上是随机的没有规律</p>
<p>pppoe拨号的账号为手机号@net，密码为12345678</p>
<h2 id="参考">参考</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9kbW0uaW5rLzIwMjQvMDYvMDEvenh0ZWxuZXR0ZWxuZXQxLw==">中兴光猫开临时telnet-修改超管密码-固化开启telnet—-第一期<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04MTYzMDg3LTEtMS5odG1s">【天翼天邑】 中兴电信光猫天翼4.0破解获取超级密码教程<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY2hpcGhlbGwuY29tL2ZvcnVtLnBocD9tb2Q9dmlld3RocmVhZCZ0aWQ9MjU5ODM5Mg==">【网络】 简单分享F7015TV3新款光猫详细参数及分享个人光猫修改经验<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04MjY2NDA1LTEtMS5odG1s">F653GV9 成功开启telnet 备份固件<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC00NTM2MTgtMS0xLmh0bWw=">光猫破解教程二：固件备份（小白升级篇，同样适用于路由器）<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRjb2RlLmNzZG4ubmV0LzY1ZTkzYmJhMWE4MzY4MjVlZDc4ZTU1Mi5odG1s">移动光猫固件备份、刷机、改sn和mac等<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL29wdXMvOTU4ODQ1NzAyMTg5ODc1MjIw">中兴7015TV3 开启telnet 换光猫 折腾记录<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04MzA4NTcxLTEtMS5odG1s">【中兴】 中兴光猫 ZXHNTelnet设置代码大全<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2dzbHMyMDA4MDgvYXJ0aWNsZS9kZXRhaWxzLzEzMjgwNTg1Nw==">移动中兴ZXHN F6610M光猫拨号密码查询<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h2 id="后续-挂在-OpenWrt-上的-Python-脚本">后续 挂在 OpenWrt 上的 Python 脚本</h2>
<p>这光猫的系统是 Linux，并且有 BusyBox，理论可以通过 BusyBox 的一些命令来实现一些高级操作</p>
<p>然而还是我想多了，这个光猫的 BusyBox 版本太低，而且有大量的命令被删除了，所以只能用来做一些简单的操作</p>
<p>比如 iptables，可以通过 iptables 命令来设置防火墙规则，然而并不生效</p>
<p>又比如 tc，可以通过 tc 命令来设置网络带宽，然而 qdisc 的算法都被删除了</p>
<p>或许你可以想到使用 shell 脚本来实现一些功能，然而这个光猫的固件使用了 UBI 文件系统，ROOTFS 是只读的，以及没有任何文本编辑器（vi、vim、nano、emacs 都没有），即使是 sh 也是 not found。</p>
<p>只有 ifconfig 还算正常，可以通过 ifconfig 命令来设置网络接口</p>
<p>故此，只能另辟蹊径了，比如使用 Python 来实现一些功能</p>
<p>可以利用上述脚本模拟延迟</p>
<p>把它添加应用到 bash 脚本中，再使用路由器的定时任务中，可以实现某时段的延迟</p>
<p>至于限速，目前则是无能为力了。</p>
<p>由于一些原因，不能直接从外网访问到该路由（并非是没有 IPv6），故，通过挂在其下的 OpenWrt 来实现</p>
<h3 id="功能">功能</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p><input type="checkbox" id="checkbox0" checked="true"><label for="checkbox0">命令执行</label></p>
</li>
</ul>
<p>我用于执行 ifconfig 命令，可以指定延迟和随机延迟，以及执行次数</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><input type="checkbox" id="checkbox1" checked="true"><label for="checkbox1">计划任务脚本生成</label></p>
</li>
</ul>
<p>一个 Python 脚本来生成一个计划任务列表，追加到 crontab 中</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><input type="checkbox" id="checkbox2" checked="true"><label for="checkbox2">通过 git 从外网获取实时 IP</label></p>
</li>
</ul>
<p>没有自己的服务器，我们要怎么把 IP 传递到外网呢？</p>
<p>可以通过 git 来实现，git 有一个功能，就是可以通过 <code>git push</code> 命令，把本地的文件推送到远程仓库</p>
<p>在 openwrt 上，安装 git、openssh-keygen、openssh-client、python3</p>
<p>搭配默认的 crontab 计划任务，每隔一段时间执行一次脚本，把 IP 写入到一个文件中，然后通过 git 推送到远程仓库</p>
<p>那么就可以实现通过 git 来获取 IP 了</p>
<p>在 openwrt 上执行以下命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> /proc/net/arp <span class="comment"># 可以得到 ipv4 mac 连接的硬件接口</span></span><br><span class="line">iwinfo phy1-ap0 info <span class="comment"># 可以得到无线接口的信息</span></span><br><span class="line">iwinfo phy1-ap0 assoclist <span class="comment"># 可以得到无线接口连接的设备信息</span></span><br><span class="line">iw dev phy1-ap0 station dump  <span class="comment"># 可以得到无线接口详细参数</span></span><br><span class="line"><span class="built_in">cat</span> /tmp/dhcp.leases <span class="comment"># 可以得到 dhcp 信息（ipv4 mac 以及设备名）</span></span><br><span class="line"><span class="built_in">cat</span> /tmp/hosts/odhcpd <span class="comment"># 可以得到 dhcp 信息（ipv6 以及设备名）</span></span><br><span class="line">ifconfig <span class="comment"># 可以得到所有接口的信息</span></span><br><span class="line">ip addr <span class="comment"># 可以得到所有接口的信息</span></span><br></pre></td></tr></table></figure>
<p>结合以上命令，可以得到当前连接到路由器的设备的 IP 地址</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><input type="checkbox" id="checkbox3" checked="true"><label for="checkbox3">检测 log 文件的大小</label></p>
</li>
</ul>
<p>一个 Python 脚本来检测 /tmp/python-script/ 目录下的所有 .log 文件的大小，当大小达到 1MB 时，删除前半段内容</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><input type="checkbox" id="checkbox4"><label for="checkbox4">通过 git 读取配置文件、</label></p>
</li>
</ul>
<p>同理，可以通过 git 来读取配置文件，然后执行相应的操作</p>
<h3 id="使用方法">使用方法</h3>
<div id="downloadcard">
    <div class="card">
        <h2>脚本文件</h2>
        <a href="./pyscript.zip" download="pyscript.zip" class="download-btn" target="_blank" data-pjax-state="load">下载</a>
    </div>
</div>
<style>
    #downloadcard {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 0;
    }

    .card {
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        text-align: center;
    }

    .card h2 {
        margin-bottom: 20px;
    }

    .download-btn {
        display: block;
        margin: 10px 0;
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        text-decoration: none;
        border-radius: 4px;
        transition: background-color 0.3s;
    }

    .download-btn:hover {
        background-color: #0056b3;
    }
</style>
<p>将脚本文件解压到 openwrt 的 /usr/bin/ 目录下</p>
<p>然后在 openwrt 上执行以下命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x /usr/bin/pyscript.py</span><br></pre></td></tr></table></figure>
<p>然后编辑 cron 计划任务</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/crontabs/root</span><br></pre></td></tr></table></figure>
<p>添加以下内容</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 每天 0 点执行一次</span><br><span class="line">0 0 * * * /usr/bin/python3 /usr/bin/pyscript.py</span><br></pre></td></tr></table></figure>
<blockquote>
<p>我将一些路径设定在了 /tmp/python-script/ 目录下，你可以根据自己的需要修改这个路径重启后会清空，可以改到 /root/ 目录下，这个目录是可以持久化的</p>
</blockquote>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>分享</tag>
        <tag>玩机</tag>
      </tags>
  </entry>
  <entry>
    <title>网件 AX8 RAX80 路由器探索 硬件·散热·改装·固件·救砖</title>
    <url>/2024/11/04/1/</url>
    <content><![CDATA[<h2 id="引子">引子</h2>
<p>最近老的 RT-AC68U 老是断流，加之已经用了很久了，LAN 口也有点老化，不能发挥全部性能了，所以以 338.5CNY 的价格入手了一台网件的 AX8 RAX80 路由器<s>万能拼多多，百分百官翻</s>，这是一款支持 WiFi 6 的路由器。</p>
<h2 id="硬件差异以及散热改装">硬件差异以及散热改装</h2>
<p>这台路由器的硬件配置是：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>CPU: <span class="exturl" data-url="aHR0cHM6Ly93d3cuYnJvYWRjb20uY29tL3Byb2R1Y3RzL3dpcmVsZXNzL3dpcmVsZXNzLWxhbi1pbmZyYXN0cnVjdHVyZS9iY200OTQwOA==">BCM4908/BCM49408<i class="fa fa-external-link-alt"></i></span>,4cores 1.8GHz.（终于不是A7的架构了）</p>
</li>
<li class="lvl-2">
<p>5G&amp;2.4G: <span class="exturl" data-url="aHR0cHM6Ly93d3cuYnJvYWRjb20uY29tL3Byb2R1Y3RzL3dpcmVsZXNzL3dpcmVsZXNzLWxhbi1pbmZyYXN0cnVjdHVyZS9iY200MzY4NA==">BCM43684<i class="fa fa-external-link-alt"></i></span>,802.11ax support.</p>
</li>
<li class="lvl-2">
<p>5G RFFE,<span class="exturl" data-url="aHR0cHM6Ly93d3cubW91c2VyLmNvbS9kYXRhc2hlZXQvMi80NzIvU0tZODU3NDNfMzFfMjA1NDgxQV9QUy0zNTE5ODI5LnBkZg==">SKY85743<i class="fa fa-external-link-alt"></i></span>.</p>
</li>
<li class="lvl-2">
<p>2.4G RFFE,<span class="exturl" data-url="aHR0cHM6Ly93d3cubW91c2VyLmNvbS9kYXRhc2hlZXQvMi80NzIvU0tZU19TX0EwMDAyNTI2MTI2XzEtMjUxNTI5NC5wZGY=">SKY85331<i class="fa fa-external-link-alt"></i></span>.</p>
</li>
<li class="lvl-2">
<p>RAM: <span class="exturl" data-url="aHR0cHM6Ly9zZW1pY29uZHVjdG9yLnNhbXN1bmcuY29tL2RyYW0vZGRyL2RkcjMvazRiNGcxNjQ2ZS1ieW1hLw==">1GB(512MB*2) DDR3@1866MHZ<i class="fa fa-external-link-alt"></i></span>.</p>
</li>
<li class="lvl-2">
<p>Flash: <span class="exturl" data-url="aHR0cHM6Ly93d3cud2luYm9uZC5jb20vcmVzb3VyY2UtZmlsZXMvdzI5bjA0Z3Z4aWFhX3JldmMucGRm">512MB NAND<i class="fa fa-external-link-alt"></i></span>.</p>
</li>
</ul>
<p>这个配置与华硕 AX88U 基本一致，但是价格便宜了许多，意味着它可以使用梅林固件。</p>
<p>在一些文章中展示了它使用了一个台达风扇(EFB0505LA.)，但是在我这台路由器上并没有看到风扇，可能是后期的版本取消了风扇。</p>
<p>参考 参考链接<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>、参考链接<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>、参考链接<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup> 中有详细的硬件拆解和评测。可以看到路由器内部的构造。</p>
<div class="note success"><p>无风扇版本手动添加风扇</p>
</div>
<p>我们可以手动添加风扇，但是不一定生效，需要刷写固件，这里按下不表。只先讲一讲怎么添加风扇。</p>
<p>但是有一些版本只是没装风扇，这种版本直接加装风扇连接主板即可。</p>
<p>但是有一些版本连风扇的电路都没有，所以需要注意。没有电路的版本需要你补齐电路，但是这不太容易。也可以从 DC 口上取电，使用降压模块（比如 MP1584EN、XL1509 等，）降压到 5V/12V 然后接风扇，这样风扇的选择就很简单了，两线风扇足可。</p>
<p><img src="./converted_fan_pcb.png" alt></p>
<p><img src="./converted_FAN_MOD.png" alt></p>
<blockquote>
<p>如果没有风扇电路，可以参考上图（PCB 背面）中的电路图，使用降压模块降压到 5V/12V，然后接风扇。</p>
</blockquote>
<p>在 <span class="exturl" data-url="aHR0cHM6Ly93d3cuY2hpcGhlbGwuY29tL3BvcnRhbC5waHA/bW9kPXZpZXcmYWlkPTIyMzA3JnBhZ2U9Mw==">Netgear RAX80 评测<i class="fa fa-external-link-alt"></i></span> 中讲解了详细的拆解过程，可以参考。</p>
<p>不需要与官方一样的型号，规格一致即可，原装的台达EFB0505LA. 5V 0.1A风扇，台达风扇大多是 OEM 的，不容易找到，台达一般不对外零售，淘宝上基本是假货，所以找同规格替代即可</p>
<p>购买一个 5010 规格的风扇，市面上许多风扇假装是 3 线风扇，实际上是 2 线风扇，所以需要注意。其实 2 线风扇也可以使用，只是没有PWM调速功能，但是某宝上的风扇大多都虚标，即使最快也没正版的快，所以不用太在意。也可以使用12v风扇，这样不能满血，但是也能降温，而且噪音更小，降压使用寿命更长。</p>
<blockquote>
<p>关于风扇线序，一般是红线为正极，黑线为负极，黄线为转速信号线，蓝色线为PWM调速线，但是这个路由器没有 PWM 调速功能，所以不用管蓝线。</p>
</blockquote>
<p><img src="./FAN.png" alt></p>
<p>我DIY过很多，买过很多风扇，得出一个结论，除了拆机正品，其他的都是假的，所以不用太在意，挑便宜的买。</p>
<p>比如之前买过一个20块的，和一个2块的，结果都只能用一年（全天运行）…</p>
<p>没有风扇的版本，同样不带螺丝柱，所以需要自己安装螺丝柱，然后安装风扇。</p>
<p>当然，这个东西也不好找，可以使用胶水、热熔胶，或者是扎带固定。</p>
<p>也可以买一些子母铆钉，这个挺便宜<s>也美观(盖上盖子没人看得到)</s>，也要注意规格，不要买太大的，最好配一些垫片，这样可以防止螺丝摩擦到主板。</p>
<p>参考 参考链接<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup> 中讲解了详细的添加风扇的过程，可以参考。</p>
<p>参考 参考链接<sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup> 中讲解了被动散热的改装，可以参考。</p>
<div class="note success"><p>被动散热改装</p>
</div>
<p>关于被动散热，成本比较高，因为是定制的散热片，所以不推荐（三百多的主机，散热花掉50块是很不划算的）。但是可以自己买铜带自己做，这个成本比较低（物料大概也就5块的样子），但是要比较全的工具，以及一些五金件加工的经验。</p>
<div class="note info"><p>风扇控制固件问题</p>
</div>
<p>这里还有关风扇控制的问题，主要是固件的问题。</p>
<p>官方的固件也是有风扇控制的，但是极为保守，刚开机时可以看到转一下，然后就不转了；SWRT官改固件内置了自动风扇控制，但是不能调节，也没有开关，为此我从 koolshare 移植了该插件，详见梅林固件部分；koolshare 固件可以调节风扇转速，但是这个固件很久没有维护了。</p>
<p>不过，我还是没有添加风扇和被动散热，我直接在底座加了一个电脑用的散热风扇底座，就是那种老式的，里面6个小风扇，总功率大约2.5W，可以通过 USB 接口供电，我直接把它接线到 DC 适配器上，以前用AC68U的时候，一直插在路由器上，久而久之，USB接口接触不良了…好在还有一个3.0的接口，2.0的接口就不管了。</p>
<p>实测效果也不错，从 70 度降到 57 度，但是噪音有点大，不过我不在意（我把路由器放在电视机旁边的柜子上，那个柜子有 2.2m 高）。</p>
<div class="note warning"><p><strong>博通设备在修改/刷写系统前请务必使用编程器备份</strong></p>
<p><strong>本文仅供参考！！！</strong></p>
<p><em><strong>如对设备造成损坏概不负责！！！</strong></em></p>
</div>
<h2 id="官方固件">官方固件</h2>
<p>如何下载官方固件？</p>
<p>参考链接<sup class="footnote-ref"><a href="#fn6" id="fnref6">[6]</a></sup></p>
<p>官方固件下载地址：<span class="exturl" data-url="aHR0cHM6Ly93d3cubmV0Z2Vhci5jb20vc3VwcG9ydC9wcm9kdWN0L1JBWDgwLmFzcHg=">https://www.netgear.com/support/product/RAX80.aspx<i class="fa fa-external-link-alt"></i></span></p>
<p>这里只提供了最新版本的固件下载，如果需要下载旧版本的固件，可以通过以下方法获取：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>在网件的美国官网搜索页面中输入“RAX80 Firmware&quot;，然后点击搜索按钮，即可看到部分的固件版本。例如: <span class="exturl" data-url="aHR0cHM6Ly93d3cubmV0Z2Vhci5jb20vc2VhcmNoLz89JnJlZmVycmVyUGFnZVVybD0mcXVlcnk9UkFYODArRmlybXdhcmUr">https://www.netgear.com/search/?=&amp;referrerPageUrl=&amp;query=RAX80+Firmware+<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p>但是，这样得到的固件版本并不全，如果需要下载更多的固件版本，可以通过以下方法获取。前提是你需要知道具体的版本号，例如：<code>1.0.1.40_1.0.22</code>、<code>1.0.0.30_1.0.17</code>，然后补全到以下链接中：<code>https://www.downloads.netgear.com/files/GDC/RAX80/RAX80-V1.0.2.76_1.0.35.zip</code>替换其中的版本号即可下载到对应的固件版本。</p>
</li>
</ul>
<blockquote>
<p>据说 1.0.0.30_1.0.17 这个版本还支持 SuperWifi，以及不锁区，支持开启 telnet<br>
网件的更新真是开倒车，越来越差了。</p>
</blockquote>
<h3 id="官方固件打开-telnet">官方固件打开 telnet</h3>
<p>打开网件路由器的telnet功能，可以通过以下方法实现：</p>
<div class="note info"><p>固件后台页面打开 telnet</p>
</div>
<p><span class="exturl" data-url="aHR0cDovLzEwLjAuMC4xL2RlYnVnLmh0bQ==">http://10.0.0.1/debug.htm<i class="fa fa-external-link-alt"></i></span></p>
<p>勾选上<code>Enable Telnet</code>，然后点击<code>Apply</code>按钮即可。</p>
<blockquote>
<p>该方法只适用于部分固件版本，如果你的固件版本不支持，可以尝试回滚老版本固件，<br>
1.0.1.40活着1.0.1.62活着1.0.1.64都可以，低于这几个版本的也可</p>
</blockquote>
<div class="note info"><p>开源工具打开 telnet</p>
</div>
<p>或者使用工具 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3pzaC9uZXRnZWFyX3RlbG5ldA==">netgear_telnet<i class="fa fa-external-link-alt"></i></span></p>
<p>按照要求，配置 python 虚拟环境，然后执行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./telnet-enable.py &lt;ip&gt; &lt;mac&gt; &lt;username&gt; [<span class="string">&#x27;&lt;password&gt;&#x27;</span>]</span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./telnet-enable.py 192.168.1.1 A0:40:A0:69:B6:30 admin <span class="string">&#x27;mypassword&#x27;</span></span><br></pre></td></tr></table></figure>
<p>但是这个工具已经将仓库标记为存档状态，所以可能不再维护。</p>
<p>你也可以尝试拆机使用 TTL 线连接路由器，然后通过串口方式进入路由器的系统。只不过这样的方式比较麻烦，不推荐。</p>
<p>参考链接<sup class="footnote-ref"><a href="#fn7" id="fnref7">[7]</a></sup></p>
<h3 id="官方固件更改地区">官方固件更改地区</h3>
<div class="note info"><p>开发者工具更改地区</p>
</div>
<p>可以尝试使用开发者工具，检查网页元素，将标签的<code>disabled</code>属性去掉，然后选择地区，点击<code>Apply</code>按钮即可。</p>
<blockquote>
<p>还有進去看代碼有找到hid_telnet的部分，但 style=”display:none;” 的部分沒有看到找對應的地方硬改成 style=”display:center;</p>
</blockquote>
<p>这种方式只适用于部分固件版本</p>
<div class="note info"><p>telnet 更改地区</p>
</div>
<p>其次可以使用 telnet 进入路由器系统，然后通过命令行的方式修改地区。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">telnet 10.0.0.1</span><br><span class="line"><span class="built_in">cd</span> sbin</span><br><span class="line">artmtd -w region PR</span><br></pre></td></tr></table></figure>
<blockquote>
<p>PR是People’s Republic of China的缩写，其他区域代码NA、WW、GR、RU、BZ、IN、KO、JP、AU、CA、US，若想查询当前区域，可通过artmtd -r region命令。参考链接<sup class="footnote-ref"><a href="#fn8" id="fnref8">[8]</a></sup></p>
</blockquote>
<p>AU是澳大利亚区，功率最高。<br>
WW是欧区，无线全区域可选。</p>
<p>然后 <code>reboot</code> 重启路由器即可。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">更新一些区域代码</span><br><span class="line">0x001 is for region NA</span><br><span class="line">0x002 is for region WW</span><br><span class="line">0x003 is for region GR</span><br><span class="line">0x004 is for region PR</span><br><span class="line">0x005 is for region RU</span><br><span class="line">0x006 is for region BZ</span><br><span class="line">0x007 is for region IN</span><br><span class="line">0x008 is for region KO</span><br><span class="line">0x009 is for region JP</span><br><span class="line">0x000A is for region AU</span><br><span class="line">0x000B is for region CA</span><br><span class="line">0x000C is for region US</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">burnsku 0x0002 <span class="comment"># 解除地区限制</span></span><br><span class="line">burnsku 0x0004 <span class="comment"># 则可改回国区</span></span><br></pre></td></tr></table></figure>
<h2 id="梅林固件">梅林固件</h2>
<p>截至24年11月，我收集到的固件有：官方固件，SWRT官改固件，koolshare 固件</p>
<p>这些在搜索引擎中搜索即可找到最新版</p>
<p>比较推荐使用 SWRT官改固件，这个固件是基于梅林固件的，但是有一些改动,添加了软件中心，可以安装一些插件。</p>
<p>具体的安装方法它们的发布页都有详细的说明。</p>
<h3 id="SWRT-官改固件移植风扇控制插件">SWRT 官改固件移植风扇控制插件</h3>
<p>移植自 koolshare 的 <code>rogsoft</code> 项目中的 <code>rog</code> ROG 工具箱 插件</p>
<p>在软件中心离线安装主体部分</p>
<p><strong>而其中的库文件需要解包固件</strong>，将压缩包中<code>/rax80/</code>文件夹中的文件复制到根目录，再打包成新的固件，然后刷入路由器。</p>
<p>解包打包固件的方法可以参考本文的 <a href="#%E5%9B%BA%E4%BB%B6%E8%A7%A3%E6%9E%90">固件解析</a> 部分。</p>
<div class="downloadcard">
    <div class="card">
        <p><b>下载文件</b></p><p>
        <a href="./files/rog.tar.gz" download="rog.tar.gz" class="download-btn" target="_blank" data-pjax-state="load">下载 RAX80 工具箱</a>
    </p></div>
</div>
<style>
    .downloadcard {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 0;
    }

    .card {
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        text-align: center;
    }

    .card h2 {
        margin-bottom: 20px;
    }

    .download-btn {
        display: block;
        margin: 10px 0;
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        text-decoration: none;
        border-radius: 4px;
        transition: background-color 0.3s;
    }

    .download-btn:hover {
        background-color: #0056b3;
    }
</style>
<h2 id="救砖">救砖</h2>
<div class="note info"><p>使用 TFTP 救砖</p>
</div>
<p>据网友的经验，这个路由器的救砖方法比较简单，只需要使用 TFTP 协议，将固件上传到路由器即可。</p>
<p>参考链接<sup class="footnote-ref"><a href="#fn9" id="fnref9">[9]</a></sup> 中讲解了详细的救砖过程，可以参考。</p>
<p>注意上传的固件必须是 <code>.chk</code> 格式的固件，否则可能发生出乎意料的问题。</p>
<p>这个方法需要拆机 TTL，比较麻烦，所以有两个不需要拆机的方法。</p>
<p>参考链接<sup class="footnote-ref"><a href="#fn10" id="fnref10">[10]</a></sup> 中讲解了详细的救砖过程，可以参考。</p>
<div class="note primary"><p>主要方法</p>
</div>
<ul class="lvl-0">
<li class="lvl-2">
<p>Windows 终端执行</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmrpflash.exe -i net24 -f RAX80-V1.0.0.30_1.0.17.chk -t 20000</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>linux命令在终端执行前加上sudo即可</p>
</li>
</ul>
<blockquote>
<p>注意-t 20000必须加否则上传必失败。</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>关机后按住重置按钮并打开电源，当nmrpflash开始上传后松开，等待nmrpflash上传完成提醒重启，大概3分钟时间。</p>
</li>
<li class="lvl-2">
<p>系统启动后当可以打开192.168.1.1时按住重置按钮大约30秒恢复出厂，重启后即可完全恢复原厂系统。</p>
</li>
<li class="lvl-2">
<p>之后可以重新设置电脑为自动获取ip。</p>
</li>
</ul>
<div class="note info"><p>Koolshare 提供的救砖方法</p>
</div>
<p>另一种方法来自 koolshare，为防止他们网站关闭，我将其转载在这里。</p>
<p>一、打开TFTP功能<br>
windows + R组合键，调出命令运行窗口，输入：OptionalFeatures后回车，打开windows功能窗口找到TFTP客户端功能，勾选后点击确定</p>
<p>二、准备救砖软件安装npcap后，才能正常使用nmrpflash，下载地址：<span class="exturl" data-url="aHR0cHM6Ly9ucGNhcC5jb20v">npcap-1.50.exe<i class="fa fa-external-link-alt"></i></span><br>
下载nmrpflash程序：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2pjbGVobmVyL25tcnBmbGFzaA==">nmrpflash.zip<i class="fa fa-external-link-alt"></i></span>，解压得到nmrpflash文件夹，内有nmrpflash.exe程序。将nmrpflash文件夹放进C盘根目录中，方便以后使用。</p>
<p>三、准备救砖固件网件固件救砖必须使用.chk后缀的RAX80固件，既可以使用网件官方固件，比如RAX80-V1.0.0.30_1.0.17.chk,也可以使用RAX80梅林固件的chk版本本文使用梅林固件：<code>RAX80_386.3_0_ubi_koolshare.chk</code>进行救砖操作，救砖前将固件文件放进C盘的nmrp文件夹</p>
<p>四、网卡设置首先使用网线将RAX80的LAN口与电脑的网卡进行连接在windows操作系统中，将网卡的IP地址设置成<code>192.168.1.2</code>，掩码：<code>255.255.255.0</code>，网关：<code>192.168.1.1</code>注意，网卡的IP地址请严格按照以上进行设置</p>
<p>五、Powershell<br>
打开3个Windows PowerShell窗口，分别为命令窗口1，命令窗口2，命令窗口3，将他们并排显示在桌面上在第二个和第三个PowerShell窗口内输入命令：<code>cd C:\nmrpflash\</code>，以切换到nmrpflash.exe所在的文件夹如果此时RAX80电源是开启的，请关闭RAX80电源在命令窗口1中，输入<code>ping 192.168.1.1 -t</code>并回车，此时应该会显示请求超时在命令窗口2中，输入<code>.\nmrpflash.exe -L</code>并回车，找到RAX80连接的电脑网卡编号，我的是net24<br>
在命令窗口3中，输入以下命令，但是不敲回车执行，备用<br>
<code>tftp -i 192.168.1.1 PUT .\RAX80_386.3_0_ubi_koolshare</code></p>
<p>六、刷机在命令窗口2中，运行以下命令（其中，net24换成你自己的网卡编号，<code>RAX80_386.3_0_ubi_koolshare.chk</code>换成你要刷的固件）：</p>
<p><code>.\nmrpflash.exe -i net24 A 192.168.1.2 -a 192.168.1.1 -f .\RAX80_386.3_0_ubi_koolshare.chk</code><br>
以上命令运行后，立即按下RAX80开关，给RAX80通电，然后观察命令窗口1，是否出现TTL=100的回复（参考救砖教程图片版）</p>
<p>上面的命令运行后，观察命令窗口1，是否出现TTL=100的回复（参考救砖教程图片版）</p>
<p>如果命令窗口2中的nmrplfash命令已经执行结束，但是命令窗口1中还未出现<code>TTL=100</code>，或者是出现的<code>TTL=100</code>回复中断了，那么就在立即在命令窗口2中再执行一次上面的命令（可以使用键盘上的向上方向键，调出上一条命令后，直接按下回车执行）。</p>
<p>再次执行后，观察命令窗口1中是否稳定刷出<code>TTL=100</code>的回复，如果是，立即在命令窗口3中将之前准备好的命令执行（回车执行）</p>
<p>命令执行后等待二十秒左右，在命令窗口3中会出现传输成功字样，这就是TFTP刷机成功的标识</p>
<p>此时再等待2 - 3分钟后，可以手动将RAX80路由器断电再开启，即可进入你要刷的系统</p>
<p>请记得将最开始对网卡静态IP的设置更改为动态获取，以顺利访问路由器后台地址</p>
<div class="note warning"><p>救砖总结：</p>
</div>
<p>nmrp是网件自己的一个协议，可以用于网件固件的救砖，但是由于网件自己的nmrp软件过于老旧，必须在windows xp上运行，而nmrpflash是基于nmrp协议实现的第三方救砖工具，可以在windows 10、macOS、linux下运行。</p>
<p>理论上nmrpflash救砖只需要命令窗口2中的nmrpflash令执行后就可以了，不需要命令窗口3中的tftp命令参与，但是因为RAX80在开机后只有很短的时间会收到nmrp协议的广播，而且即使收到，也大概率会出现Timeout，从而无法成功上传固件（成功使用nmrpflash给RAX80上传固件的时间窗口很难把握）。</p>
<p>即使nmrpflash无法成功使用刷到固件，但也会触发RAX80进入TFTP模式，（TTL=100就是进入TFTP模式的标识，相信使用TFTP刷华硕机器的朋友并不陌生）。</p>
<p>那么就能利用TFTP命令进行固件的刷写了，所以以上步骤，如果完全没有偏差的执行，那么从ML固件刷回网件原厂是完全没有任何问题的。</p>
<h2 id="固件解析">固件解析</h2>
<p>这台设备使用两种格式的固件，分别是官方的 <code>chk</code> 格式和华硕的 <code>w</code> 格式。</p>
<h3 id="chk-格式">chk 格式</h3>
<p>chk 格式的固件比较简单，只需要使用 <code>binwalk</code> 工具解析即可。</p>
<p>最新的 <code>binwalk</code> 使用了 rust 语言，不再是 pytohn 了，</p>
<p>所以我们使用 <code>docker</code> 来运行 <code>binwalk</code>。</p>
<p>这里记录 windows 下的使用方法，linux 下的使用方法类似。</p>
<p>使用的前提是安装了 <code>docker</code>，以及 <code>WSL2</code>环境，不太推荐使用 <code>Hyper-V</code>。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/ReFirmLabs/binwalk.git</span><br><span class="line"><span class="built_in">cd</span> binwalk</span><br><span class="line"><span class="built_in">sudo</span> docker build -t binwalkv3 .</span><br><span class="line"><span class="built_in">sudo</span> docker run -t -v.:/analysis binwalkv3 -Me firmware.chk</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这里的 <code>firmware.chk</code> 是你的固件文件，运行完成后打开 <code>extractions</code> 文件夹即可看到解析的文件。</p>
</blockquote>
<p>打包可以看 参考链接<sup class="footnote-ref"><a href="#fn11" id="fnref11">[11]</a></sup>、参考链接<sup class="footnote-ref"><a href="#fn12" id="fnref12">[12]</a></sup></p>
<h3 id="w-格式">w 格式</h3>
<p>w 格式的固件比较复杂，需要使用 <code>ubi_reader</code> 工具解析。</p>
<p>参考链接<sup class="footnote-ref"><a href="#fn13" id="fnref13">[13]</a></sup></p>
<p>首先使用 python 创建虚拟环境</p>
<p>激活环境后，使用 <code>pip</code> 安装 <code>ubi_reader</code>。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install --user ubi_reader</span><br></pre></td></tr></table></figure>
<p>参考链接<a href="#">^11</a>、参考链接<sup class="footnote-ref"><a href="#fn14" id="fnref14">[14]</a></sup> 中讲解了详细的解析过程，可以参考。</p>
<p>打开 CMD</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ubireader_display_info firmware.w <span class="comment">#获取UBI信息以及布局块等信息</span></span><br><span class="line">ubireader_extract_images firmware.w <span class="comment">#提取镜像</span></span><br><span class="line">ubireader_extract_files firmware.w <span class="comment">#提取文件内容</span></span><br><span class="line">bireader_utils_info firmware.w <span class="comment">#分析UBI镜像并创建shell脚本和UBI配置文件</span></span><br></pre></td></tr></table></figure>
<p>在 Windows 下，到提取镜像这一步基本就结束了，因为 Windows 下没有类似 Linux 下的相关命令，而且基本上提取文件内容也是空的。这里得到了一个 <code>.ubifs</code> 文件，这个文件是一个 UBI 文件系统，需要在 Linux 下进一步解析。</p>
<p>提取镜像后转到 Linux 下，这里我是用的 WSL2，Ubuntu 22.04。</p>
<p>用file查看属性，发现是squashfs文件系统</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">file img.ubifs</span><br></pre></td></tr></table></figure>
<p>可以发现是一个 squashfs 文件系统，使用 unsquashfs 解压就得到了文件系统。</p>
<p>先获取文件系统信息</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">unsquashfs -s img.ubifs</span><br></pre></td></tr></table></figure>
<p>这里会输出一些信息，以及解压的文件目录。记住这些信息，因为这些信息会告诉你这个文件系统的一些信息。</p>
<p>然后解压文件系统</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">unsquashfs img.ubifs</span><br></pre></td></tr></table></figure>
<p>打包文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mksquashfs squashfs-root img2.squashfs -b 128K -comp xz</span><br></pre></td></tr></table></figure>
<p>具体参考链接<sup class="footnote-ref"><a href="#fn15" id="fnref15">[15]</a></sup> <sup class="footnote-ref"><a href="#fn16" id="fnref16">[16]</a></sup></p>
<p>更多有关固件逆向的信息可以参考链接<sup class="footnote-ref"><a href="#fn17" id="fnref17">[17]</a></sup>。</p>
<h2 id="为适配-asuswrt-GPL-做准备">为适配 asuswrt GPL 做准备</h2>
<p>由于闭源固件的不可靠性和不稳定性，由于官方固件的封闭，适配 asuswrt GPL 固件是一个不错的选择。</p>
<p>配置对比<sup class="footnote-ref"><a href="#fn3" id="fnref3:1">[3:1]</a></sup>,<sup class="footnote-ref"><a href="#fn18" id="fnref18">[18]</a></sup></p>
<p><img src="./comparison.png" alt></p>
<table>
<thead>
<tr>
<th>机构</th>
<th>RAX80</th>
<th>AX88U</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>CPU</td>
<td>BCM4908/BCM49408</td>
<td>BCM4908/BCM49408</td>
<td>基本一致</td>
</tr>
<tr>
<td>RAM</td>
<td><span class="exturl" data-url="aHR0cHM6Ly9zZW1pY29uZHVjdG9yLnNhbXN1bmcuY29tL2RyYW0vZGRyL2RkcjMvazRiNGcxNjQ2ZS1ieW1hLw==">SAMSUNG K4B4G1646E-BYMA<i class="fa fa-external-link-alt"></i></span> *2</td>
<td><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWxsZGF0YXNoZWV0LmNvbS9kYXRhc2hlZXQtcGRmL3BkZi8xNDI1NjIxL05BTllBL05UNUNDMjU2TTE2RVAtREkuaHRtbA==">NANYA NT5CC256M16EP-DI<i class="fa fa-external-link-alt"></i></span> *2</td>
<td>两颗 DDR3 512MB</td>
</tr>
<tr>
<td>Flash</td>
<td><span class="exturl" data-url="aHR0cHM6Ly93d3cud2luYm9uZC5jb20vcmVzb3VyY2UtZmlsZXMvdzI5bjA0Z3Z4aWFhX3JldmMucGRm">Winbond W29N04GVSIAA<i class="fa fa-external-link-alt"></i></span></td>
<td><span class="exturl" data-url="aHR0cHM6Ly93d3cud2luYm9uZC5jb20vcmVzb3VyY2UtZmlsZXMvVzI5TjAyR1Z4eEFGX1JldkQucGRm">Winbond W29N02GVSAF<i class="fa fa-external-link-alt"></i></span></td>
<td>网件使用 512MB，华硕使用 256MB</td>
</tr>
<tr>
<td>WI1-chip1</td>
<td>BCM43684</td>
<td>BCM43684</td>
<td>一致</td>
</tr>
<tr>
<td>WI1-chip2</td>
<td>BCM43684</td>
<td>BCM43684</td>
<td>一致</td>
</tr>
<tr>
<td>PHY-modes</td>
<td>abgn+ac+ax</td>
<td>abgn+ac+ax</td>
<td>一致</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>CPU</th>
<th>Arch.</th>
<th>Cores</th>
<th>Freq.</th>
<th>FCC</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>BCM49408</td>
<td>ARM v8 Cortex-B53</td>
<td>4</td>
<td>1.8 GHz</td>
<td>2018-02-14</td>
<td>2.5GbE PHY (SGMII+), SATA 3, 2x USB 3.0, 3x PCIe, 5x GbE PHY/SW, XStream, 28nm</td>
</tr>
<tr>
<td>BCM4908</td>
<td>ARM v8 Cortex-A53</td>
<td>4</td>
<td>1.8 GHz</td>
<td>2017-01-30 (CES 2016)</td>
<td>2.5GbE PHY (SGMII+), SATA 3, 2x USB 3.0, 3x PCIe, 6x GbE PHY/SW, XStream, 28nm</td>
</tr>
</tbody>
</table>
<p>BCM49408</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>Low power quad core B53, 64-bit ARM @ 1.8 GHz</p>
</li>
<li class="lvl-2">
<p>1MB shared L2 cache w/ ECC</p>
</li>
<li class="lvl-2">
<p>IPSEC Crypto support</p>
</li>
<li class="lvl-2">
<p>32-bit DDR3-1600</p>
</li>
<li class="lvl-2">
<p>3x PCIe Gen2, USB3, SATA3</p>
</li>
<li class="lvl-2">
<p>2.5G-phy support (SGMII+)</p>
</li>
<li class="lvl-2">
<p>5 Integrated GE PHYs and switch</p>
</li>
</ul>
<p>BCM4908 查看下方资料</p>
<p><sup class="footnote-ref"><a href="#fn19" id="fnref19">[19]</a></sup></p>
<div class="downloadcard">
    <div class="card">
        <p><b>下载文件</b></p><p>
        <a href="./files/BROADCOM 802.11AX Solution_BCM4908+BCM43684.pdf" download="BROADCOM 802.11AX Solution_BCM4908+BCM43684.pdf" class="download-btn" target="_blank" data-pjax-state="load">下载</a>
    </p></div>
</div>
<p>可以确定，<span class="exturl" data-url="aHR0cHM6Ly9kM3VrZ3UzMm5odzA3by5jbG91ZGZyb250Lm5ldC9yZWxlYXNlL3BkZl9maWxlNTY5NWNjMTg3MGU3MC5wZGY=">BCM4908<i class="fa fa-external-link-alt"></i></span> 和 BCM49408 是同一代的处理器，BCM49408 是 BCM4908 的升级版。<sup class="footnote-ref"><a href="#fn20" id="fnref20">[20]</a></sup></p>
<p>使用 BCM4908 + BCM43684 的 SoC 方案，最大是 AX11000，而可以阉割出 AX5700,AX6000,AX6600 等变种。</p>
<p>可以在华硕的官网上找到 AX88U 的 GPL 代码包。</p>
<p>适配 asuswrt GPL 固件可能需要的工作</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>GPIO</p>
</li>
<li class="lvl-2">
<p>LED</p>
</li>
<li class="lvl-2">
<p>USB</p>
</li>
<li class="lvl-2">
<p>NAND</p>
</li>
<li class="lvl-2">
<p>UBI</p>
</li>
<li class="lvl-2">
<p>etc.</p>
</li>
</ul>
<h2 id="适配-asuswrt-GPL">适配 asuswrt GPL</h2>
<p>未完待续。。。</p>
<p>思路：不必纠结于机型名称，进行单独适配，直接在 AX88U 的基础上进行修改。</p>
<!-- 网口信息
    - `asuswrt\release\src\router\nfcm\nfsw.c`
    - `asuswrt\release\src\router\rc\lan.c`
    - `asuswrt\release\src\router\shared\defaults.c`
LED 信息 `asuswrt\release\src\router\rc\ate.c`
无线信息 `asuswrt\release\src\router\rc\erp_monitor.c`
init 信息 `asuswrt\release\src\router\rc\init.c`
jffs 信息 `asuswrt\release\src\router\rc\jffs2.c`
pcie 信息 `asuswrt\release\src-rt-5.02axhnd\bcmdrivers\opensource\bus\pci\host\impl1\arm\pcie-bcm963xx.c`

其他杂七杂八不进行列举。 -->
<h2 id="结束">结束</h2>
<p>我把它卖了，博通大火炉实在难用，即便是华硕系统也没啥可玩性，太笨重了</p>
<p>然后就是我的体验其实感觉不太好，虽然是 AX6000，但是我实际用下来，并没有赢 mt7981 AX3000 太多</p>
<p>虽然 CPU 性能很强，但是我日常用不到，但是优点也是有的，很多网口，以及有两个 USB3，可以做轻度 NAS</p>
<p>但是缺少 2.5G 网口是个硬伤，再结合价格，性价比不高，但虽说如此，网件这么多年了，还是有情怀价值的</p>
<p>至于做工，呵呵，越南产。</p>
<hr>
<p>至此，该篇博客完结，以后可能会有小修改，但是不太能有实际内容上的更新了。</p>
<p>25年7月31日</p>
<h2 id="参考链接">参考链接</h2>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9wb3N0LnNtemRtLmNvbS9wLzczMDYwOS8=">小白教程：Nighthawk RAX80轻松突出千兆极限，重要资料全备份<i class="fa fa-external-link-alt"></i></span> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly96aWVnZXIudHcvcmV2aWV3cy1uZXRnZWFyLXJheDgwLw==">實際使用心得| NETGEAR Nighthawk RAX80 – 消失的風扇！<i class="fa fa-external-link-alt"></i></span> <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn3" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY2hpcGhlbGwuY29tL2FydGljbGUtMjIzMDctMS5odG1s">Netgear RAX80 评测<i class="fa fa-external-link-alt"></i></span> <a href="#fnref3" class="footnote-backref">↩︎</a> <a href="#fnref3:1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn4" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly90aWViYS5iYWlkdS5jb20vcC83NzU0NjczMTcy">一次改造成功仍然翻车的经历—网件RAX80加装风扇<i class="fa fa-external-link-alt"></i></span> <a href="#fnref4" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn5" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly90aWViYS5iYWlkdS5jb20vcC84NTAwMzE1OTc4">Rax80被动散热加强<i class="fa fa-external-link-alt"></i></span> <a href="#fnref5" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn6" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cubmV0Z2Vhci5jb20vc3VwcG9ydC9wcm9kdWN0L3JheDgwLyNkb3dubG9hZA==">RAX80 — Nighthawk AX8 8-Stream WiFi Router<i class="fa fa-external-link-alt"></i></span> <a href="#fnref6" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn7" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2JrZXJsZXIvbmV0Z2Vhcl90ZWxuZXQ=">netgear_telnet<i class="fa fa-external-link-alt"></i></span> <a href="#fnref7" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn8" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9uZ2FiYnMuY29tL3JlYWQucGhwP3RpZD0yMTcyMzg4NiZyYW5kPTEw">【硬件升级】 NETGEAR RAX系列wifi6路由器锁区解决办法<i class="fa fa-external-link-alt"></i></span> <a href="#fnref8" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn9" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93aWZpaGVsbC5jb20vMjA2Lmh0bWw=">NETGEAR RAX80 救砖修复刷回原厂固件教程<i class="fa fa-external-link-alt"></i></span> <a href="#fnref9" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn10" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9mdy5rb29sY2VudGVyLmNvbS9iaW5hcnkvbm1ycC8lRTclQkQlOTElRTQlQkIlQjZSQVg4MCVFNiU5NSU5MSVFNyVBMCU5NiVFNiU5NiU4NyVFNSVBRCU5NyVFNiU5NSU5OSVFNyVBOCU4Qi5odG1s">网件RAX80救砖文字教程<i class="fa fa-external-link-alt"></i></span> <a href="#fnref10" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn11" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL2ZvcnVtLnBocD9tb2Q9dmlld3RocmVhZCZ0aWQ9MzI5MzQz">【k3】【假装是大佬系列】官改魔改教程~站在A大的肩膀上改固件其实超级简单<i class="fa fa-external-link-alt"></i></span> <a href="#fnref11" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn12" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phY2tvbmUxMjM0Ny9hcnRpY2xlL2RldGFpbHMvMTIxOTY3NDc4">binwalk<i class="fa fa-external-link-alt"></i></span> <a href="#fnref12" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn13" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL29uZWtleS1zZWMvdWJpX3JlYWRlcg==">ubi_reader<i class="fa fa-external-link-alt"></i></span> <a href="#fnref13" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn14" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzQ4Nzg0OS9hcnRpY2xlL2RldGFpbHMvMTI2MjgxOTY2">固件提取——ASUS.w格式固件提取遇到的问题<i class="fa fa-external-link-alt"></i></span> <a href="#fnref14" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn15" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01lbmdYUC9hcnRpY2xlL2RldGFpbHMvMTA4ODEwMDcx">squashfs重打包和ubi重打包<i class="fa fa-external-link-alt"></i></span> <a href="#fnref15" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn16" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL29wdXMvNzY2MDg4OTQwMjExOTI5MTQ0">华硕 路由器固件解包打包<i class="fa fa-external-link-alt"></i></span> <a href="#fnref16" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn17" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDExMzQ2OS9hcnRpY2xlL2RldGFpbHMvMTEzNzQ0MTQ3">路由器固件逆向&amp;&amp;AFL 入门<i class="fa fa-external-link-alt"></i></span> <a href="#fnref17" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn18" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuZXhwcmV2aWV3LmNvbS82OTI4Ny5odG1s">华硕RT-AX88U路由器评测，性能表现优异，路由玩家专属<i class="fa fa-external-link-alt"></i></span> <a href="#fnref18" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn19" class="footnote-item"><p><span class="exturl" data-url="aHR0cDovL3d3dy56eW9udGVjaC5jb20vcHJvZHVjdGluZm8vNjI5NDcxLmh0bWw=">BROADCOM 802.11AX Solution:BCM4908+BCM43684wifi主板定制 开发板研制ODM<i class="fa fa-external-link-alt"></i></span> <a href="#fnref19" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn20" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93aWtpZGV2aS53aS1jYXQucnUvQnJvYWRjb20vU29D">Broadcom SoC<i class="fa fa-external-link-alt"></i></span> <a href="#fnref20" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>分享</tag>
        <tag>玩机</tag>
      </tags>
  </entry>
  <entry>
    <title>软件设计模式总结 01</title>
    <url>/2024/10/14/1/</url>
    <content><![CDATA[<h2 id="什么是设计模式">什么是设计模式</h2>
<p>设计模式是一套被反复使用、多数人知晓、经过分类编目的代码设计经验的总结。使用设计模式是为了重用代码，让代码更容易被他人理解，保证代码可靠性。</p>
<h3 id="基本要素">基本要素</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>模式名称(Pattern Name)</p>
</li>
<li class="lvl-2">
<p>问题(Problem)</p>
</li>
<li class="lvl-2">
<p>解决方案(Solution)</p>
</li>
<li class="lvl-2">
<p>效果(Consequences)</p>
</li>
</ul>
<h3 id="分类">分类</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>目的</p>
<ul class="lvl-2">
<li class="lvl-4">创建型模式</li>
<li class="lvl-4">结构型模式</li>
<li class="lvl-4">行为型模式</li>
</ul>
</li>
<li class="lvl-2">
<p>作用范围</p>
<ul class="lvl-2">
<li class="lvl-4">类模式</li>
<li class="lvl-4">对象模式</li>
</ul>
</li>
</ul>
<h2 id="OOP-设计原则">OOP 设计原则</h2>
<ol>
<li class="lvl-3">
<p>Single Responsibility Principle 单一职责原则</p>
</li>
<li class="lvl-3">
<p>Open Closed Principle 开闭原则</p>
</li>
<li class="lvl-3">
<p>Liskov Substitution Principle 里氏替换原则</p>
</li>
<li class="lvl-3">
<p>Interface Segregation Principle 接口隔离原则</p>
</li>
<li class="lvl-3">
<p>Dependency Inversion Principle 依赖倒置原则</p>
</li>
<li class="lvl-3">
<p>Composite Reuse Principle 合成复用原则</p>
</li>
<li class="lvl-3">
<p>Law of Demeter 迪米特法则</p>
</li>
</ol>
<p>参考：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU09MSUQ=">SOLID - wikipedia<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9nZWVrLWRvY3MuY29tL2Rlc2lnbi1wYXR0ZXJuL2Rlc2lnbi1wcmluY2lwbGUvZGVzaWduLXByaW5jaXBsZS1pbmRleC5odG1s">设计原则 - 极客教程<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h2 id="认识-ClassDiagram">认识 ClassDiagram</h2>
<p>参考链接：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9tZXJtYWlkLm5vZGVqcy5jbi9zeW50YXgvY2xhc3NEaWFncmFtLmh0bWw=">中文<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9tZXJtYWlkLmpzLm9yZy9zeW50YXgvY2xhc3NEaWFncmFtLmh0bWw=">英文<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<p>要素：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>标题</p>
</li>
<li class="lvl-2">
<p>类</p>
</li>
<li class="lvl-2">
<p>符号</p>
</li>
<li class="lvl-2">
<p>连线</p>
</li>
<li class="lvl-2">
<p>箭头</p>
</li>
<li class="lvl-2">
<p>注释</p>
</li>
</ul>
<pre><code class="highlight mermaid">---
title: Animal example
---
classDiagram
    note &quot;From Duck till Zebra&quot;
    Animal &lt;|-- Duck
    note for Duck &quot;can fly\ncan swim\ncan dive\ncan help in debugging&quot;
    Animal &lt;|-- Fish
    Animal &lt;|-- Zebra
    Animal : +int age
    Animal : +String gender
    Animal: +isMammal()
    Animal: +mate()
    class Duck&#123;
        +String beakColor
        +swim()
        +quack()
    &#125;
    class Fish&#123;
        -int sizeInFeet
        -canEat()
    &#125;
    class Zebra&#123;
        +bool is_wild
        +run()
    &#125;
</code></pre>
<h3 id="类、接口、抽象类">类、接口、抽象类</h3>
<pre><code class="highlight mermaid">classDiagram
    class NormalClass1&#123;
        +int age
        +String
        +isMammal() boolean
        +mate() void
    &#125;
    class interface1&#123;
        &lt;&lt;interface&gt;&gt;
        +int age
        +String
        +isMammal() boolean
        +mate() void
    &#125;
    class abstract1&#123;
        &lt;&lt;abstract&gt;&gt;
        +int age
        +String
        +isMammal() boolean
        +mate() void
    &#125;</code></pre>
<blockquote>
<p>在一些图中，接口会显示为一个 -o 的标记，不是直接显示 <code>&lt;&lt;interface&gt;&gt;</code>。</p>
</blockquote>
<h3 id="符号">符号</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">+ Public // 公共</span><br><span class="line">- Private // 私有</span><br><span class="line"># Protected // 保护</span><br><span class="line">~ Package/Internal // 包内</span><br></pre></td></tr></table></figure>
<h3 id="连线">连线</h3>
<pre><code class="highlight mermaid">classDiagram
    class A
    class B
    A -- B

    class C
    class D
    C .. D</code></pre>
<blockquote>
<p>连线可以使用 <code>--</code> 或 <code>..</code>，前者表示实线，后者表示虚线。代表不同的关系。</p>
</blockquote>
<h3 id="箭头">箭头</h3>
<pre><code class="highlight mermaid">classDiagram
    class A
    class B
    A --&gt; B

    class C
    class D
    C --o D

    class E
    class F
    E --|&gt; F

    class G
    class H
    G --* H</code></pre>
<blockquote>
<p>箭头有多种类型，代表不同的关系。配合不同的连线，代表不同的关系，目前有 8 种不同的关系。</p>
</blockquote>
<table>
<thead>
<tr>
<th>符号</th>
<th>含义</th>
<th>中文</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt;|–</td>
<td>Inheritance</td>
<td>继承</td>
</tr>
<tr>
<td>*–</td>
<td>Composition</td>
<td>组合</td>
</tr>
<tr>
<td>o–</td>
<td>Aggregation</td>
<td>聚合</td>
</tr>
<tr>
<td>–&gt;</td>
<td>Association</td>
<td>关联</td>
</tr>
<tr>
<td>–</td>
<td>Link (Solid)</td>
<td>链接（实线）</td>
</tr>
<tr>
<td>…&gt;</td>
<td>Dependency</td>
<td>依赖</td>
</tr>
<tr>
<td>…|&gt;</td>
<td>Realization</td>
<td>实现</td>
</tr>
<tr>
<td>…</td>
<td>Link (Dashed)</td>
<td>链接（虚线）</td>
</tr>
</tbody>
</table>
<pre><code class="highlight mermaid">classDiagram
classA &lt;|-- classB : Inheritance继承
classC *-- classD : Composition组合
classE o-- classF : Aggregation聚合
classG &lt;-- classH : Association关联</code></pre>
<pre><code class="highlight mermaid">classDiagram
classI -- classJ : Link实线
classK &lt;.. classL : Dependency依赖
classM &lt;|.. classN : Realization实现
classO .. classP : Link虚线</code></pre>
<blockquote>
<p>一条带有箭头的线表示两个类之间的关系，一条连线可以有2个箭头，分别指向不同的类。</p>
</blockquote>
<h2 id="简单工厂模式">简单工厂模式</h2>
<pre><code class="highlight mermaid">classDiagram
    class chart &#123;
        &lt;&lt;interface&gt;&gt;
        +display() void
    &#125;
    class HistogramChart &#123;
        +HistogramChart()
        +display() void
    &#125;
    class PieChart &#123;
        +PieChart()
        +display() void
    &#125;
    class LineChart &#123;
        +LineChart()
        +display() void
    &#125;
    class ChartFactory &#123;
        +getChart(String type) chart
    &#125;

    chart &lt;|.. HistogramChart
    chart &lt;|.. PieChart
    chart &lt;|.. LineChart
    ChartFactory ..&gt; HistogramChart : create
    ChartFactory ..&gt; PieChart : create
    ChartFactory ..&gt; LineChart : create</code></pre>
<blockquote>
<p>简单工厂模式：一个工厂类根据传入的参数决定创建哪一种产品类的实例。</p>
</blockquote>
<p>结构</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>工厂</p>
</li>
<li class="lvl-2">
<p>抽象产品</p>
</li>
<li class="lvl-2">
<p>具体产品</p>
</li>
</ul>
<h2 id="工厂方法模式">工厂方法模式</h2>
<pre><code class="highlight mermaid">classDiagram
    class Client
    class Factory &#123;
        &lt;&lt;interface&gt;&gt;
        +create() Product
    &#125;
    class ConcreteFactoryA &#123;
        +create() Product
    &#125;
    class ConcreteFactoryB &#123;
        +create() Product
    &#125;
    class Product &#123;
        &lt;&lt;interface&gt;&gt;
        +display() void
    &#125;
    class ConcreteProductA &#123;
        +display() void
    &#125;
    class ConcreteProductB &#123;
        +display() void
    &#125;

    Factory &lt;|.. ConcreteFactoryA
    Factory &lt;|.. ConcreteFactoryB
    Product &lt;|.. ConcreteProductA
    Product &lt;|.. ConcreteProductB
    ConcreteProductA &lt;.. ConcreteFactoryA : create
    ConcreteProductB &lt;.. ConcreteFactoryB : create
    Client --&gt; Factory : factory
    Client --&gt; Product : product</code></pre>
<blockquote>
<p>工厂方法模式：定义一个用于创建对象的接口，让子类决定实例化哪一个类。工厂方法使一个类的实例化延迟到其子类。</p>
</blockquote>
<p>结构</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>抽象工厂</p>
</li>
<li class="lvl-2">
<p>具体工厂</p>
</li>
<li class="lvl-2">
<p>抽象产品</p>
</li>
<li class="lvl-2">
<p>具体产品</p>
</li>
</ul>
<h3 id="反射与配置文件">反射与配置文件</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>反射：在运行状态中，动态获取类的信息并创建对象。</p>
</li>
<li class="lvl-2">
<p>配置文件：将参数放置在配置文件中，用户通过输入数字来决定选择哪个具体的工厂对象。</p>
</li>
</ul>
<h3 id="工厂方法的重载与隐藏">工厂方法的重载与隐藏</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>重载：在一个类中定义多个同名方法，参数列表不同。</p>
</li>
<li class="lvl-2">
<p>隐藏：在工厂中直接调用产品类业务方法，客户端无需调用工厂方法创建产品对象。</p>
</li>
</ul>
<h2 id="抽象工厂模式">抽象工厂模式</h2>
<pre><code class="highlight mermaid">classDiagram
    class Client
    class SkinFactory &#123;
        &lt;&lt;interface&gt;&gt;
        +createButton() Button
        +createTextField() TextField
    &#125;

    class SpringSkinFactory &#123;
        +createButton() : Button
        +createTextField() TextField
    &#125;

    class SummerSkinFactory &#123;
        +createButton() : Button
        +createTextField() TextField
    &#125;

    class Button &#123;
        &lt;&lt;interface&gt;&gt;
        +display() void
    &#125;

    class SpringButton &#123;
        +display() void
    &#125;

    class SummerButton &#123;
        +display() void
    &#125;

    class TextField &#123;
        &lt;&lt;interface&gt;&gt;
        +display() void
    &#125;

    class SpringTextField &#123;
        +display() void
    &#125;

    class SummerTextField &#123;
        +display() void
    &#125;

    SkinFactory &lt;|.. SpringSkinFactory
    SkinFactory &lt;|.. SummerSkinFactory
    Button &lt;|.. SpringButton
    Button &lt;|.. SummerButton
    TextField &lt;|.. SpringTextField
    TextField &lt;|.. SummerTextField

    SpringButton &lt;.. SpringSkinFactory : create
    SpringTextField &lt;.. SpringSkinFactory : create
    SummerButton &lt;.. SummerSkinFactory : create
    SummerTextField &lt;.. SummerSkinFactory : create

    Client ..&gt; SkinFactory : factory
    Client ..&gt; Button
    Client ..&gt; TextField</code></pre>
<blockquote>
<p>抽象工厂模式：提供一个创建一系列相关或相互依赖对象的接口，而无需指定它们具体的类。</p>
</blockquote>
<p>结构</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>抽象工厂</p>
</li>
<li class="lvl-2">
<p>具体工厂</p>
</li>
<li class="lvl-2">
<p>抽象产品</p>
</li>
<li class="lvl-2">
<p>具体产品</p>
</li>
</ul>
<h3 id="开闭原则的倾斜性">开闭原则的倾斜性</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>开闭原则：对扩展开放，对修改关闭。</p>
</li>
<li class="lvl-2">
<p>倾斜性：抽象工厂模式在增加新产品时，需要修改抽象工厂接口和所有具体工厂类。</p>
</li>
</ul>
<h2 id="建造者模式">建造者模式</h2>
<pre><code class="highlight mermaid">classDiagram
    class Actor &#123;
        +type : String
        +gender : String
        +face : String
        +costume : String
        +hairstyle : String
        +setType(String type) void
        +setGender(String gender) void
        +setFace(String face) void
        +setCostume(String costume) void
        +setHairstyle(String hairstyle) void
        +getType() String
        +getGender() String
        +getFace() String
        +getCostume() String
        +getHairstyle() String
    &#125;
    class ActorBuilder &#123;
        &lt;&lt;abstract&gt;&gt;
        #actor : Actor
        +buildType() void
        +buildGender() void
        +buildFace() void
        +buildCostume() void
        +buildHairstyle() void
        +createActor() Actor
    &#125;
    class HeroBuilder &#123;
        +buildType() void
        +buildGender() void
        +buildFace() void
        +buildCostume() void
        +buildHairstyle() void
    &#125;
    class AngelBuilder &#123;
        +buildType() void
        +buildGender() void
        +buildFace() void
        +buildCostume() void
        +buildHairstyle() void
    &#125;
    class ActorController &#123;
        +construct(ActorBuilder ab) Actor
    &#125;

    Actor &lt;--* ActorBuilder
    ActorBuilder &lt;|-- HeroBuilder
    ActorBuilder &lt;|-- AngelBuilder
    ActorController ..&gt; ActorBuilder : builder</code></pre>
<blockquote>
<p>建造者模式：将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。</p>
</blockquote>
<p>结构</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>抽象建造者</p>
</li>
<li class="lvl-2">
<p>具体建造者</p>
</li>
<li class="lvl-2">
<p>产品</p>
</li>
<li class="lvl-2">
<p>指挥者</p>
</li>
</ul>
<h3 id="Hook方法">Hook方法</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>Hook方法：在抽象建造者中定义一个或多个方法，让子类实现。</p>
</li>
</ul>
<h2 id="原型模式">原型模式</h2>
<pre><code class="highlight mermaid">classDiagram
    class Cloneable &#123;
        &lt;&lt;interface&gt;&gt;
    &#125;
    class Object &#123;
        +clone() Object
    &#125;
    class ConcretePrototype &#123;
        +clone() Object
    &#125;
    class Client &#123;
        +operation(Prototype prototype) void
    &#125;

    Object &lt;|-- ConcretePrototype
    Cloneable &lt;|.. ConcretePrototype
    Client &lt;--o ConcretePrototype : prototype</code></pre>
<blockquote>
<p>原型模式：用原型实例指定创建对象的种类，并通过拷贝这些原型创建新的对象。</p>
</blockquote>
<p>结构</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>抽象原型</p>
</li>
<li class="lvl-2">
<p>具体原型</p>
</li>
<li class="lvl-2">
<p>客户端</p>
</li>
</ul>
<h3 id="序列化与反序列化">序列化与反序列化</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>序列化：将对象转换为字节序列。</p>
</li>
<li class="lvl-2">
<p>反序列化：将字节序列转换为对象。</p>
</li>
</ul>
]]></content>
      <categories>
        <category>SoftwareEngineering</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>NextJS-01</title>
    <url>/2024/10/08/1/</url>
    <content><![CDATA[<h2 id="介绍">介绍</h2>
<p>Next.js 是一个基于 React 的前端框架，用于构建 React 应用程序。</p>
<p>Next.js 是一个轻量级的 React 框架，它提供了很多有用的功能，如代码分割、预渲染、静态导出等。</p>
<h2 id="Step-First-app">Step First app</h2>
<p>创建一个新的 Next.js 应用程序</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npx create-next-app@latest</span><br><span class="line"></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>awesome page</p>
</li>
</ul>
<p>在 app 目录下创建一个新的文件 <code>awesome/page.js</code>，并添加以下代码：</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">AwesomePage</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">main</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Awesome Page<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>回到浏览器，打开 <span class="exturl" data-url="aHR0cDovL2xvY2FsaG9zdDozMDAwL2F3ZXNvbWU=">http://localhost:3000/awesome<i class="fa fa-external-link-alt"></i></span> ，你将看到一个新的页面。</p>
<h2 id="review-React">review React</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm create vite</span><br><span class="line"></span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<p>打开 <code>src/App.jsx</code> 文件，添加以下代码：</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, World!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>破解富士通平板电脑的UEFI密码</title>
    <url>/2024/09/22/1/</url>
    <content><![CDATA[<p>这台设备是 Fujitsu Tablet Stylistic V727 的用于日本医疗行业的定制版本 V727/V</p>
<p>采用 Intel 公司的 m3y30 处理器，8G LPDDR3 内存，128G SSD，1920x1280 分辨率的屏幕，支持触控和笔触，内置 4G LTE 模块，支持 Feli-Ca，支持 USB Type-C，支持 802.11ac Wi-Fi，支持蓝牙 4.1，支持 GPS，使用 Windows 10 Pro 操作系统。</p>
<p><img src="./screen.jpg" alt></p>
<p>以往我都会把密码存储在密码管理器中，这次想要重装系统，但是忘记了UEFI密码。</p>
<p>尝试了许多可能的密码，但是都没有成功。最后我找到了一个方法，可以重置UEFI密码。</p>
<h2 id="重置UEFI密码">重置UEFI密码</h2>
<p>解密工作需要输入密码时请直接回车3次，一般会出现多位溢出码部分不出溢出码的机器请按照以下方法操作。提示密码时输入下列：</p>
<p>第一次输入3hqgo3按确定报错之后第二次输入jqw534报错之后输入0qww294e按确定之后出一串字符码。第一个密码33是数字  第二个534是数字 第三个0294是数字。其它都是小写字母</p>
<p>把溢出的代码 在这个网站输入</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9iaW9zLXB3Lm9yZy8=">BIOS Master Password Generator for Laptops<i class="fa fa-external-link-alt"></i></span></p>
<p>然后会得到一个解锁密码，输入即可解锁。</p>
<p>然后进入UEFI设置，重置密码即可。</p>
<h2 id="参考">参考</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY2hpbmFmaXguY29tL3RocmVhZC0xMDcwOTU3LTEtMS5odG1s">【维修经验】我自己总结的几种笔记本BIOS密码超级密码不拆机解密方法<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2JhY2hlcjA5L3B3Z2VuLWZvci1iaW9z">Password generator for BIOS<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h2 id="烂电池">烂电池</h2>
<p>去年的冬天（24年末），那天晚上使用完，放在桌子上，第二天早，无法开机，电池没电了，插上电源，开机，显示电池电量为0%，过了一段时间，充满了电，我没有太在意，继续使用，但是发现电池很快就没电了，使用软件查看电池健康状态，发现电池健康状态为损耗97%，耗电如流水。</p>
<p><img src="./battery.PNG" alt></p>
<p>故去购物网查看电池价格，发现电池价格为 300 元，然而这台设备二手价才 500~600 元，所以我决定不换电池，继续使用。</p>
<p>我想到了三个解决方案：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>这台设备支持 USB Type-C，我可以使用移动电源继续使用（PD 12V）。</p>
</li>
<li class="lvl-2">
<p>电源插口是 DC 19V的，可以制作一个UPS供电。</p>
</li>
<li class="lvl-2">
<p>维修电池。</p>
</li>
</ul>
<p>第一个方案最简单，但是我放弃了，因为这与第二个方案相似，而且由于技术原因，Type-C 电源供电是先充电池，再从电池供电，那为何不直接用第二个方案呢？</p>
<p>第二个方案挺好的，我可以使用 18650 电池制作一个 UPS，这样可以保证设备不会因为断电而关机，但是这个方案需要我购买一些电子元件，而且我需要设计一个电路板，这个方案需要时间。</p>
<p>第三个方案需要拆开电池，更换其中的电芯，但是我不知道这样是否会锁定电池，但是这样最省钱，而且美观。我拆开发现，它的主控芯片是 fm30xy 844s7b，电芯是索尼 383396 3.7V 聚合物锂电池，容量 1510mAh，3串2并，总共6个，11.1V。关于这个保护芯片，在网上没有任何资料，我只能自己研究。</p>
]]></content>
      <categories>
        <category>PC</category>
      </categories>
      <tags>
        <tag>分享</tag>
        <tag>玩机</tag>
      </tags>
  </entry>
  <entry>
    <title>React-01</title>
    <url>/2024/09/18/1/</url>
    <content><![CDATA[<h2 id="介绍">介绍</h2>
<p>React 是一个用于构建用户界面的 JavaScript 库。</p>
<p>使用 React 可以创建复杂的 UI，同时使代码易于理解。</p>
<p>React:UI = render(data) 单向数据流</p>
<p>vue:ref 能够直接操作dom，并非是 view model<br>
react:单向数据流，不能通过双向绑定，实现响应式</p>
<h2 id="JSX">JSX</h2>
<p>JSX: JavaScript XML，将 UI 与逻辑层耦合在一起，提高代码的可读性和可维护性，在组件中使用JSX语法，可以直接在 JS 代码中编写 HTML 结构，而不需要用 JS 字符串拼接。</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;&quot;</span> table-index&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;&quot;</span> <span class="attr">tableIndex</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>支持使用表达式</p>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 变量</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">const</span> element = <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">formatName</span>(<span class="params">user</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> user.<span class="property">firstName</span> + <span class="string">&#x27; &#x27;</span> + user.<span class="property">lastName</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">  <span class="attr">firstName</span>: <span class="string">&#x27;Harper&#x27;</span>,</span><br><span class="line">  <span class="attr">lastName</span>: <span class="string">&#x27;Perez&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> element = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    Hello, &#123;formatName(user)&#125;!</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 作为函数的返回</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getGreeting</span>(<span class="params">user</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (user) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;formatName(user)&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, Stranger.<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> element2 = <span class="title function_">getGreeting</span>(user)</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>支持指定属性</p>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> element = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">tabIndex</span>=<span class="string">&quot;0&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="keyword">const</span> element = <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;user.avatarUrl&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">img</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>React 式预防 XSS 攻击，会对所有的输入进行转义，所以不会导致 XSS 攻击。</p>
<blockquote>
<p>XSS 攻击：跨站脚本攻击，是一种代码注入攻击，攻击者在网页中注入恶意脚本，当用户浏览网页时，脚本会被执行，从而达到攻击目的。</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>反射 XSS 攻击</p>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="attr">https</span>:<span class="comment">//www.baidu.com?name=&lt;script&gt;alert(XSS)&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>存储 XSS 攻击</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">textarea</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;error.png&quot;</span> <span class="attr">onError</span>=<span class="string">&quot;alert(&#x27;XSS&#x27;)&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>其实就是使用转义字符，将特殊字符转义为HTML实体，React中使用<code>&#123;&#125;</code>来转义。</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 存储XSS攻击</span></span><br><span class="line"><span class="comment">// 评论区</span></span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; comments.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    comments[i] = <span class="string">&#x27;&lt;li&gt;&#x27;</span> + comments[i] + <span class="string">&#x27;&lt;/li&gt;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;comments&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">  )</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>JSX 支持对象</p>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> element = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">className</span>=<span class="string">&quot;greet&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    Hello, world!</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> element = <span class="comment">/*__PURE__*/</span><span class="title class_">React</span>.<span class="title function_">createElement</span>(</span><br><span class="line">  <span class="string">&#x27;h1&#x27;</span>,</span><br><span class="line">  &#123;<span class="attr">className</span>: <span class="string">&#x27;greet&#x27;</span>&#125;,</span><br><span class="line">  <span class="string">&#x27;Hello, world!&#x27;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>JSX 渲染成 DOM</p>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> element = <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, world<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(element, container)</span><br></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;root&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, world<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// render 只能够标识当前时刻状态</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">tick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> element = (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>It is &#123;new Date().toLocaleTimeString()&#125;.<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">  <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(element, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">setInterval</span>(tick, <span class="number">1000</span>)  <span class="comment">// 每秒更新一次</span></span><br></pre></td></tr></table></figure>
<h2 id="props-和-state">props 和 state</h2>
<h3 id="组件">组件</h3>
<p>组件是 React 应用的基本构建块，通过组件可以将 UI 拆分成独立的、可复用的部分。</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 函数组件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Welcome</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类组件</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="组件组合以及拆分">组件组合以及拆分</h3>
<p>组件可以在其输出中引用其他组件，这使得我们可以使用相同组件抽象出任意层次的细节。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">&quot;Sara&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">&quot;Cahal&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">&quot;Edite&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 函数组件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Welcome</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类组件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">&quot;Sara&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">&quot;Cahal&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">&quot;Edite&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>,</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这段代码会渲染出一个包含三个 Welcome 组件的 App 组件。通过这个例子，我们可以看到组件在输出中可以引用其他组件，这让我们可以用同一组件来抽象出任意层次的细节。按钮、表单、对话框、整个屏幕的内容：在 React 应用中，所有这些通常都会以组件的形式表示。</p>
</blockquote>
<p>拆分组件是 React 应用中最常见的模式。这里有一个关于 App 组件如何拆分成更小的组件的示例：</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">formatDate</span>(<span class="params">date</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> date.<span class="title function_">toLocaleDateString</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Comment</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;Comment&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;UserInfo&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">className</span>=<span class="string">&quot;Avatar&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">src</span>=<span class="string">&#123;props.author.avatarUrl&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">alt</span>=<span class="string">&#123;props.author.name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;UserInfo-name&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;props.author.name&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;Comment-text&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;props.text&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;Comment-date&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;formatDate(props.date)&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> comment = &#123;</span><br><span class="line">  <span class="attr">date</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(),</span><br><span class="line">  <span class="attr">text</span>: <span class="string">&#x27;I hope you enjoy learning React!&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> author = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Hello Kitty&#x27;</span>,</span><br><span class="line">  <span class="attr">avatarUrl</span>: <span class="string">&#x27;https://google.com/favicon.ico&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Comment</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">date</span>=<span class="string">&#123;comment.date&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">text</span>=<span class="string">&#123;comment.text&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">author</span>=<span class="string">&#123;author&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  /&gt;</span></span>,</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这个示例演示了如何将一个更复杂的组件拆分成更小的组件。Comment 组件描述了一个评论，包括作者的名字、头像和评论内容。这个组件在其结构中使用了 Avatar、UserInfo 和 UserInfoName 组件，将其拆分成更小的组件有助于理清应用的 UI 架构。</p>
</blockquote>
<h3 id="受控组件以及非受控组件">受控组件以及非受控组件</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>受控组件：表单元素的值由 React 控制，表单元素的值由 state 控制，通过 onChange 事件来更新 state。</p>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NameForm</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;<span class="attr">value</span>: <span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">handleChange</span> = <span class="variable language_">this</span>.<span class="property">handleChange</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">handleSubmit</span> = <span class="variable language_">this</span>.<span class="property">handleSubmit</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">handleChange</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">value</span>: event.<span class="property">target</span>.<span class="property">value</span>&#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">handleSubmit</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;A name was submitted: &#x27;</span> + <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">value</span>)</span><br><span class="line">    event.<span class="title function_">preventDefault</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;this.handleSubmit&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          Name:</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.value&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Submit&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">NameForm</span> /&gt;</span></span>,</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这个示例展示了一个受控组件，输入框的值由 React 控制。每次按键时，handleChange 事件处理程序都会被调用，更新 React 的 state，因此输入框的值始终与 state 中的值保持一致。</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>非受控组件：表单元素的值由 DOM 控制，通过 ref 来获取表单元素的值。</p>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NameForm</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">handleSubmit</span> = <span class="variable language_">this</span>.<span class="property">handleSubmit</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">input</span> = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">handleSubmit</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;A name was submitted: &#x27;</span> + <span class="variable language_">this</span>.<span class="property">input</span>.<span class="property">current</span>.<span class="property">value</span>)</span><br><span class="line">    event.<span class="title function_">preventDefault</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;this.handleSubmit&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          Name:</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;this.input&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Submit&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">NameForm</span> /&gt;</span></span>,</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这个示例展示了一个非受控组件，输入框的值由 DOM 控制。每次按键时，handleSubmit 事件处理程序都会被调用，从输入框中获取值。</p>
</blockquote>
<h3 id="props-和-state-的区别">props 和 state 的区别</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>props：是父组件传递给子组件的数据，子组件不能修改 props，props 是只读的。</p>
</li>
<li class="lvl-2">
<p>state：是组件内部维护的数据，组件内部可以修改 state，当 state 发生变化时，组件会重新渲染。</p>
</li>
</ul>
<h3 id="props-和-state-的使用场景">props 和 state 的使用场景</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>props：用于父子组件通信，父组件通过 props 将数据传递给子组件。</p>
</li>
<li class="lvl-2">
<p>state：用于组件内部管理数据，当组件内部数据发生变化时，组件会重新渲染。</p>
</li>
</ul>
<h3 id="props-和-state-示例">props 和 state 示例</h3>
<p>props 示例：</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">&quot;Sara&quot;</span> /&gt;</span></span>,</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>state 示例：</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Clock</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;<span class="attr">date</span>: <span class="keyword">new</span> <span class="title class_">Date</span>()&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>It is &#123;this.state.date.toLocaleTimeString()&#125;.<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Clock</span> /&gt;</span></span>,</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这两个示例展示了 props 和 state 的使用场景。Welcome 组件通过 props 接收父组件传递的数据，Clock 组件通过 state 维护内部数据。区别在于：props 是父组件传递给子组件的数据，子组件不能修改 props；state 是组件内部维护的数据，组件内部可以修改 state。</p>
</blockquote>
<h2 id="生命周期">生命周期</h2>
<p>React 组件有三个生命周期阶段：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>Mounting：组件被创建并插入到 DOM 中。</p>
</li>
<li class="lvl-2">
<p>Updating：组件被重新渲染。</p>
</li>
<li class="lvl-2">
<p>Unmounting：组件被移除 DOM。</p>
</li>
</ul>
<p>1.<code>render</code></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>class 组件中必须有 render 方法，render 方法是 class 组件中唯一必须的方法。</p>
</li>
<li class="lvl-2">
<p>获取最新的 state 和 props，返回一个 React 元素。</p>
</li>
<li class="lvl-2">
<p>在不想修改 state 或 props 的情况下，不要修改 render 方法中的数据。</p>
</li>
</ul>
<p>2.<code>constructor</code></p>
<p>构造函数，用于初始化 state 和绑定事件处理方法。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>声明 state，初始化 state。</p>
</li>
<li class="lvl-2">
<p>绑定事件处理方法。</p>
</li>
</ul>
<p>避免将 props 复制到 state 中，因为 props 是只读的，state 可以修改。</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="variable language_">super</span>(props)</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">state</span> = &#123;<span class="attr">count</span>: <span class="number">0</span>&#125;;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">handleClick</span> = <span class="variable language_">this</span>.<span class="property">handleClick</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不要用 setState 方法来修改 state，因为 setState 方法是异步的，可能会导致 state 不是最新的。</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">state</span> = &#123; <span class="attr">color</span>: props.<span class="property">color</span> &#125;</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">color</span>: props.<span class="property">color</span> &#125;)</span><br></pre></td></tr></table></figure>
<p>3.<code>componentDidMount</code></p>
<p>组件挂载后调用，只调用一次。</p>
<p>setState 方法会触发重新渲染<br>
addEventListener 添加事件监听</p>
<p>4.<code>componentDidUpdate</code></p>
<p>组件更新后调用，除了首次渲染，其他渲染都会调用。</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">componentDidUpdate</span>(prevProps, prevState, snapshot) </span><br><span class="line"></span><br><span class="line"><span class="title function_">componentDidUpdate</span>(<span class="params">prevProps</span>) &#123;</span><br><span class="line">  <span class="comment">// 典型用法（不要忘记比较 props）：</span></span><br><span class="line">  <span class="comment">// 加条件判断，避免无限循环</span></span><br><span class="line">  <span class="keyword">if</span> (prevProps.<span class="property">color</span> !== <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">color</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">color</span>: <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">color</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 如果组件实现了 getSnapshotBeforeUpdate 生命周期，那么它的返回值将作为 componentDidUpdate 的第三个参数 snapshot 传递。</span></span><br></pre></td></tr></table></figure>
<p>5.<code>componentWillUnmount</code></p>
<p>组件卸载前调用，用于清理工作。</p>
<p>6.<code>shouldComponentUpdate</code></p>
<p>这个方法用于判断是否需要重新渲染组件，默认返回 true。并不是很常用，因为 React 会自动判断是否需要重新渲染组件。</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">shouldComponentUpdate</span>(<span class="params">nextProps, nextState</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">color</span> !== nextProps.<span class="property">color</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">count</span> !== nextState.<span class="property">count</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>7.<code>getDerivedStateFromProps</code></p>
<p>用于取代 componentWillReceiveProps，每次组件接收新的 props 时都会调用。</p>
<p>但是不推荐使用，因为会导致组件状态不可预测。</p>
<p>根据新的 props 更新 state，返回一个对象，或者返回 null 表示不更新 state。</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="title function_">getDerivedStateFromProps</span>(<span class="params">props, state</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (props.<span class="property">color</span> !== state.<span class="property">color</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">color</span>: props.<span class="property">color</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>8.<code>getSnapshotBeforeUpdate</code></p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">getSnapshotBeforeUpdate</span>(prevProps, prevState)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ScrollingList</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  listRef = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getSnapshotBeforeUpdate</span>(<span class="params">prevProps, prevState</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (prevProps.<span class="property">list</span>.<span class="property">length</span> &lt; <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">list</span>.<span class="property">length</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> list = <span class="variable language_">this</span>.<span class="property">listRef</span>.<span class="property">current</span></span><br><span class="line">      <span class="keyword">return</span> list.<span class="property">scrollHeight</span> - list.<span class="property">scrollTop</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">componentDidUpdate</span>(<span class="params">prevProps, prevState, snapshot</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (snapshot !== <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> list = <span class="variable language_">this</span>.<span class="property">listRef</span>.<span class="property">current</span></span><br><span class="line">      list.<span class="property">scrollTop</span> = list.<span class="property">scrollHeight</span> - snapshot</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&#123;this.listRef&#125;</span>&gt;</span>&#123;/* ...contents... */&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>9.<code>static getDerivedStateFromError</code></p>
<p>错误边界 error boundary，用于捕获子组件的错误，只能捕获子组件的错误，无法捕获自身的错误。</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="title function_">getDerivedStateFromError</span>(<span class="params">error</span>) &#123;</span><br><span class="line">  <span class="comment">// 更新 state 使下一次渲染能够显示降级 UI</span></span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">hasError</span>: <span class="literal">true</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>10.<code>componentDidCatch</code></p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">componentDidCatch</span>(<span class="params">error, info</span>) &#123;</span><br><span class="line">  <span class="comment">// 你同样可以将错误日志上报给服务器</span></span><br><span class="line">  <span class="title function_">logErrorToMyService</span>(error, info)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>React</category>
      </categories>
  </entry>
  <entry>
    <title>华硕ROG魔霸6P超频探索</title>
    <url>/2024/09/07/1/</url>
    <content><![CDATA[<h2 id="基本配置介绍">基本配置介绍</h2>
<p>魔霸6P，其国际版是 Strix G17 2022，内部型号 G713R</p>
<p>其中 RM 是采用 RTX 3060 Laptop GPU 的版本,RW 是采用 RTX 3070 Ti Laptop GPU 的版本</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>CPU：<span class="exturl" data-url="aHR0cHM6Ly93d3cuYW1kLmNvbS9lbi9zdXBwb3J0L2Rvd25sb2Fkcy9kcml2ZXJzLmh0bWwvcHJvY2Vzc29ycy9yeXplbi9yeXplbi02MDAwLXNlcmllcy9hbWQtcnl6ZW4tOS02OTAwaHguaHRtbA==">AMD Ryzen 9 6900HX<i class="fa fa-external-link-alt"></i></span> @3.3GHz</p>
</li>
<li class="lvl-2">
<p>GPU：<span class="exturl" data-url="aHR0cHM6Ly93d3cubnZpZGlhLmNvbS9lbi11cy9nZWZvcmNlL2xhcHRvcHMvMzAtc2VyaWVzLw==">NVIDIA GeForce RTX 30 series Laptop GPU<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p>RAM：32GB <span class="exturl" data-url="aHR0cHM6Ly9zZW1pY29uZHVjdG9yLnNhbXN1bmcuY29tL2RyYW0vbW9kdWxlL3NvZGltbS9tNDI1cjJnYTNiYjAtY3FrLw==">Samsung DDR5 BDie 4800MHz<i class="fa fa-external-link-alt"></i></span>(16GB x2, China Edition using 16GB x1)</p>
</li>
<li class="lvl-2">
<p>SSD：1TB <span class="exturl" data-url="aHR0cHM6Ly93d3cubWljcm9uLmNvbS9wcm9kdWN0cy9zdG9yYWdlL3NzZC9jbGllbnQtc3NkLzM0MDAtc3Nk">Micron 3400<i class="fa fa-external-link-alt"></i></span> PCIe4.0 NVMe SSD</p>
</li>
<li class="lvl-2">
<p>WiFi：<span class="exturl" data-url="aHR0cHM6Ly93d3cubWVkaWF0ZWsuY29tL3Byb2R1Y3RzL2Jyb2FkYmFuZC13aWZpL21lZGlhdGVrLWZpbG9naWMtMzMw">Mediatek RZ616 MT7922 802.11ax WiFi 6E(Built-in Bluetooth 5.0)<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p>OS：Windows 11 Pro 21H2(China Edition using Family Pack)</p>
</li>
<li class="lvl-2">
<p>LAN：<span class="exturl" data-url="aHR0cHM6Ly93d3cucmVhbHRlay5jb20vUHJvZHVjdC9JbmRleD9pZD0zOTYy">Realtek RTL8125<i class="fa fa-external-link-alt"></i></span> 2.5GbE</p>
</li>
<li class="lvl-2">
<p>Sound：Realtek ALC294</p>
</li>
</ul>
<p><img src="./internals0.png" alt></p>
<p><img src="./internals1.png" alt></p>
<blockquote>
<p>供电部分的散热介质一定要使用导热凝胶，而芯片的散热介质可以使用液金、导热垫，或者是导热硅脂。</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9sYXB0b3BtZWRpYS5jb20vcmV2aWV3L2FzdXMtcm9nLXN0cml4LWcxNy1nNzEzci0yMDIyLw==">ASUS ROG Strix G17 G713R (2022) review<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9yb2cuYXN1cy5jb20vbGFwdG9wcy9yb2ctc3RyaXgvcm9nLXN0cml4LWcxNy0yMDIyLXNlcmllcy9zcGVjLw==">ROG Strix G17 (2022) G713<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<p>找不到声卡的详细信息，根据命名应该是个双声道中高端声卡，反正也就听个响而已，但是插上耳机也还可以，马马虎虎。</p>
<p>内存上的白色贴片不是用于散热的，是一种EMI滤波材料，用来滤波的。</p>
<p>并且 左侧那块空白 PCB 原先应该是用于 NFC 的，这在 Strix Scar 2022 上是有的，但是在魔霸6P上没有，所以就空着了。可能有一定固定的作用，但有固定的作用不太可能，所以你可以丢了省点重量和空间。</p>
<p>如果你会画 PCB 的话，你其实可以制作一个网卡延长板，利用那块没有利用的空白 PCB 的位置，改变网卡位置，以便于散热，提高网卡性能以及稳定性。（或者是延长硬盘M.2的位置，但是这种高速设备并不太好处理）</p>
<p>可以看到电池左侧其实是有大片空间的，但是并没有利用上，可能是为了符合某些标准，也可能是通用配件节省成本的原因。</p>
<p>这块 PCB 其实和国内的魔霸新锐是一样的，不过本机设计17寸的，新锐设计15寸的，其实到具体操作上就是把壳延长，散热器也延长了，15寸的取消了小键盘，其他的都没有变化。</p>
<p>另外电源适配器也有差别，3060的版本是 240W，3070Ti 的版本是 280W，3060 的版本是 20V 12A，3070Ti 的版本是 20V 14A。</p>
<p>屏幕采用 BOE <span class="exturl" data-url="aHR0cHM6Ly93d3cucGFuZWxvb2suY29tL05FMTczUUhNLU5aMl9CT0VfMTcuM19MQ01fb3ZlcnZpZXdfNTQ2MzIuaHRtbA==">NE173QHM-NZ2<i class="fa fa-external-link-alt"></i></span> 240Hz的屏幕，分辨率是2560x1440，外版还有一个版本是360Hz的屏幕，分辨率是1080p。</p>
<p>硬盘的话建议换一个位置，原先的位置网卡叠叠乐，又是美光3400这块硬盘，美国自研主控，性能一般，发热也大，加上一个铜片散热，原先位置最好上无缓存的硬盘，然后在系统里把 ASPM 打开，有效控制硬盘温度。最好的方法是直接卖了，然后上两块三星990系列（推荐EVO或EVO PLUS）的硬盘。</p>
<p><img src="./wirelessLanCard.jpg" alt></p>
<blockquote>
<p>很多人说这个网卡是个垃圾，其实很不错，是因为散热不好，导致性能不稳定，发热过高，实际如果放在台式机上，个人感觉和英特尔的 AX210 差不多，甚至更好一些。以及说硬盘要用扎带绑起来，不能用皮筋什么的，这完全是杞人忧天了，我敢说，这个皮筋的质量能用5年都没问题</p>
</blockquote>
<p>关于系统，在国内的版本是 Windows 11 家庭版，国际版是 Windows 11 专业版，硬盘里有一个隐藏分区，里面是系统的恢复分区，存在一个swm的恢复文件，这个备份起来（以及自带的EFI分区 ），其他的都可以删掉（直接删除所有分区），官方自带的系统魔改过，不可靠，建议直接安装23H2以上的系统（微软官网下载即可），等待系统更新自动安装好相关驱动，如果奥创的驱动安装不上，使用 DISM++ 提取原版系统的驱动，安装 Ghelper 进行设备管理。注意，使用 GHelper 后，无法使用 IntelliGo 音频降噪。</p>
<p>关于屏幕校色，在原版系统中，存在一个 <code>G713RM_10DE_E5090A69_CMDEF.icm</code> 以及 <code>PQConfig.dv</code>文件，这个是屏幕的校色文件，重新安装系统后，这些是没有的，注意备份后重新导入，不然杜比视界以及相关校色将失效。直接备份整个文件夹就可以了 <code>C:\Windows\System32\spool\drivers\color</code>。</p>
<h2 id="玩家国度-魔霸6p-超频探索">玩家国度-魔霸6p-超频探索</h2>
<p>之前就使用将内存简单调到了5000MT/s，但是并没有进行进一步的调整</p>
<p>这次遇到奇怪的问题，重置了BIOS之后，所以重新进行一次配置</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>工具 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0RhdmlkUzk1L1Ntb2tlbGVzc19VTUFGL3RyZWUvbWFpbg==">UniversalAMDFormBrowser<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p>前置准备-关闭安全启动</p>
</li>
</ul>
<p><img src="./dissecureboot.jpg" alt></p>
<blockquote>
<p>Github上有个Ventoy版本的UMAF，无需关闭安全启动，直接使用即可</p>
</blockquote>
<div class="note warning"><ul class="lvl-0">
<li class="lvl-2">
<p>不开机了怎么办</p>
</li>
</ul>
</div>
<blockquote>
<p>正确解决方法应该是长按电源间关机，然后长按Ctrl+home+电源键，一直按不松手，直到所有指示灯全灭，然后松开所有按键，之后键盘灯会亮，然后键盘灯连闪三次就会开机了。</p>
</blockquote>
<h2 id="PBO">PBO</h2>
<p><img src="./pbo.jpg" alt></p>
<p>这个页面下有 Curve Optimizer，可以调整核心的电压，我调整到了 -10，其实可以更低，但是我没有测试</p>
<p>另外降压可以通过软件进行，比如 Ghelper，这样更安全</p>
<h2 id="DDR-Timing">DDR Timing</h2>
<p><img src="./ddrtime.jpg" alt></p>
<p>这个是适合双内存 5000MT/s 的设置</p>
<p>注意这使用的是 16进制，所以 38(10)=26(16)以此类推</p>
<p><img src="./zentimings.png" alt></p>
<p>此外，在另一个页面(infinity fabric frequency and dividers)，还有一个设置</p>
<p>用于调试 infinity fabric 频率，这个频率是与 FCLK 一致的</p>
<p>原本的 auto 默认是 1800 MHz，但是我调整到了 2000 MHz，这个是可以通过 tm5 进行测试的（绝大多数应该都能达到该频率）</p>
<p>有关内存，还可以关闭 power down mode，这个是在另一个页面(AMD CBS)的，可以减少延迟</p>
<p>但是因为我有时需要使用电池，所以并没有关闭</p>
<p>今天又重新压了一下参数 5000MT/s@c38-38-38-82，FCLK 2000MHz，UCLK=MCLK 此时延迟 77.8 ns。</p>
<blockquote>
<p>对于这处理器，延迟主要看 FCLK 频率，内存条的参数更为次要，毕竟不能加电压，1.1v 的电压下均衡频率与延迟是很困难的。</p>
</blockquote>
<h2 id="电压">电压</h2>
<p>电压只有少数几个可以调整的选项</p>
<p>主要是 VDD_MEM VDD_IO VDD_DIMM</p>
<p>这几个有关内存的电压，我没有调整，因为我是三星的内存(4800MT/s@c40)，并没有超频潜力，我尝试过了，三星的极限是 5400MT/s，此时延迟颇高，且不可过 tm5（或许要更高的时序，但是我不想试了），效能不如 5000MT/s@c38(此时仍然是1.1v电压)</p>
<p>对了，这个三星内存的编号还有说法</p>
<blockquote>
<p>DDR5 后缀2位：0L和0D 是代表PMIC（电源管理IC）不同，0L是三星自己S2FPC01，0D是IDT（瑞萨收购）P8911， 三星PMIC相对稳定，P8911超频性能会好，国际大厂都有在用，hynix ddr5 也用这颗P8911</p>
</blockquote>
<p>如果是海力士 a/m die，可以尝试调整电压，据说可以达到 6000MT/s@c30</p>
<h2 id="iGPU">iGPU</h2>
<p>这个在 PBO 里面，可以调整 iGPU 的频率，最高可以 boost 200MHz，另外在 AMD CBS -&gt; NBIO -&gt; GFX 里面，还有一个选项可以调整 iGPU 的显存，最高可以调整到 16GB</p>
<p>一些网友反应，很多 AMD 笔记本使用 EDGE 看视频会卡顿，这个是因为 iGPU 的显存不足（很多厂商设定是 AUTO，或者是512MB），可以尝试调整到 2GB 以上，或者在 AMD Radeon Software 里面调整 性能 -&gt; 调整 -&gt; 系统 -&gt; 内存优化器 -&gt; 游戏，但是很多机器并不会生效，所以还是在 BIOS 里面调整比较好</p>
<p>当然，也可能是超频把驱动超坏了，可以尝试重装驱动。</p>
<h2 id="USB4">USB4</h2>
<p>6800H 以上的处理器，都支持 USB4，但是很多厂商并没有开启，先安装芯片组驱动中的 <code>USB4 CM</code> 驱动，然后可以在 BIOS 里面开启，这个是在 AMD CBS -&gt; FCH -&gt; USB4</p>
<p>下面的选项全部改成 auto，然后保存重启，就可以使用 USB4 了。</p>
<p><img src="./usb4.png" alt></p>
<blockquote>
<p>AMD PBS 里面的 USB4 选项，其中有个 USB4 ACPI _EDP SUPPORT，这个选项描述应该在系统安装前或是 AMD USB4 CM 驱动，安装前保持关闭，安装后将会自动开启，但是似乎不起作用，无论是 <code>Disable</code> 还是 <code>Enable</code>，都没什么变化。</p>
</blockquote>
<p>据说是有 bug，部分设备导致卡死死机，但是仍然有厂商开启了（并且没有出现 BUG），比如联想和戴尔，华硕对22款设备只有少数几款推出了测试版固件，然而时至今日，仍然没有正式版固件，这个是很遗憾的，也反映了华硕对于用户的态度。</p>
<h2 id="参考">参考</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly90aWViYS5iYWlkdS5jb20vcC83ODIwMTU0MTAw">三星ddr5内存后缀参数的真正区别？<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1p5dDIwNDgvYXJ0aWNsZS9kZXRhaWxzLzEyNjEzODE3OA==">天选三超频实战<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly90aWViYS5iYWlkdS5jb20vcC83ODYzNDI0MDYxP3NlZV9sej0xIzE0NDMyNDgwOTIyM2w=">AMD 移动平台修改 BIOS 隐藏选项实现内存超频等<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93aW5yYWlkLmxldmVsMXRlY2hzLmNvbS90L3Rvb2wtdW5pdmVyc2FsYW1kZm9ybWJyb3dzZXIvNDAzNTM=">TOOL UniversalAMDFormBrowser<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9wb3N0LnNtemRtLmNvbS94aWxpZS85NDM5NC8=">系列：龙之怒<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NlZXJnZS9nLWhlbHBlcg==">Ghelper<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h2 id="踩坑">踩坑</h2>
<p>一些奇怪的问题可以看看 <a href="./How-to-fix-my-laptop.md">How-to-fix-my-laptop</a></p>
<p>莫名重置bios后，想要再次调整内存频率，发现无法调整，直接黑屏，无法开机，这个时候可以尝试长按电源键，然后长按Ctrl+home+电源键，一直按不松手，直到所有指示灯全灭，然后松开所有按键，之后键盘灯会亮，然后键盘灯连闪三次就会开机了。</p>
<p>但是想要恢复原先的设置，却无论如何都无法调整，直接不启动，可以发现，尽管你已经调整了设置，但并不生效</p>
<p>我推测应该是第一次设置时会写入完整的配置，但是之后的调整只会写入调整的部分，但 bios 逻辑中并没有对缺失的部分进行处理，导致无法启动</p>
<p>这个时候，该怎么办呢？</p>
<ol>
<li class="lvl-3">
<p>关闭 BitLocker，这个是导致无法调整的原因之一（因为安全原因，我一般都会开启 BitLocker，但是多次测试，发现 bitlocker 会影响 bios，可能是它会对boot进行校验的原因）</p>
</li>
<li class="lvl-3">
<p>清除你在 bios 里面设置的密码，以及留下的资产信息和联系方式，经过测试，这个是导致无法调整的原因之一（推测是因为这个信息会被写入bios，因为即便降级再升级 bios 这个信息仍然保留，可能与配置文件的二进制地址相冲突，因为可以发现，它对字数有严格要求，而我超频的方法并非是官方支持的，在我另一台Fujitsu的设备，这些信息是不做限制的）</p>
</li>
<li class="lvl-3">
<p>重置 ec 以及 bios 信息，即长按电源键，然后长按Ctrl+home+电源键，一直按不松手，直到所有指示灯全灭，然后松开所有按键，之后键盘灯会亮，然后键盘灯连闪三次就会开机了。</p>
</li>
<li class="lvl-3">
<p>降级 bios，目前该设备由华硕提供的bios有两个版本，一个是 325，一个是 327。先降级到 325，然后再升级到 327</p>
</li>
<li class="lvl-3">
<p>关闭快速启动，以及安全启动，然后保存重启</p>
</li>
<li class="lvl-3">
<p>重新进行超频设置</p>
<ul class="lvl-2">
<li class="lvl-6">优先进入 AMD Overclocking,设置PBO</li>
<li class="lvl-6">一次只调整一个参数，然后保存重启，如果无法启动，就长按电源键，然后长按Ctrl+home+电源键，一直按不松手，直到所有指示灯全灭，然后松开所有按键，之后键盘灯会亮，然后键盘灯连闪三次就会开机了。</li>
<li class="lvl-6">再调整内存频率</li>
<li class="lvl-6">然后是FCLK频率</li>
<li class="lvl-6">之后再调整 MCLK = UCLK</li>
<li class="lvl-6">最后才是 iGPU 缓存区大小</li>
</ul>
</li>
<li class="lvl-3">
<p>之后依次开启快速启动，安全启动</p>
</li>
</ol>
<p>此番设置，我成功将内存频率调整到了 5000MT/s@c40，上文提到超到c38，这次又不稳定了，三星内存太拉跨了，所以只能调整到c40，延迟也是很高的，但是效能还是比 4800MT/s@c40 要高，因为 infinity fabric 频率提高了，所以效能也提高了</p>
<hr>
<p>对了，这电脑在暑期的时候，关机的时候换位置断开了 AC 电源，然后开机的时候，电源指示灯无论如何只能亮红灯了（即使充满了电），直到今日也是没有什么头绪。</p>
<p>对这个问题做过的尝试：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>重置 CMOS</p>
</li>
<li class="lvl-2">
<p>降级 bios</p>
</li>
<li class="lvl-2">
<p>升级 bios</p>
</li>
<li class="lvl-2">
<p>卸载 Asus System Control Interface V3 以及 Armoury Crate</p>
</li>
<li class="lvl-2">
<p>重装奥创以及 MyAsus</p>
</li>
</ul>
<p>对于重装系统，我并没有尝试，因为对于核心驱动我都删除干净再重装，在 Bios 里也无法改变，所以我认为这个问题或许是硬件问题，或许涉及更底层的东西</p>
<p>以及另一个事情，就是无法打开系统内有线网卡设备中的电源管理，允许该设备唤醒，我已经在 BIOS 里面打开了 PME 功能，并按照华硕的说明进行设置。</p>
<p>如果有人知道解决方案，请告诉我，邮件联系，谢谢！</p>
]]></content>
      <categories>
        <category>PC</category>
      </categories>
      <tags>
        <tag>分享</tag>
        <tag>玩机</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机网络杂记-11</title>
    <url>/2024/09/04/1/</url>
    <content><![CDATA[<h2 id="参考资料">参考资料</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="cmVsaWFiaWxpdHlodHRwczovL2hvdWJiLmdpdGh1Yi5pby8yMDE5LzA0LzA1L3Byb3RvY29sLXRjcC1pcC0wNS10Y3AtcmVsaWFiaWxpdHkjOn46dGV4dD1UQ1AlMjAlRTglQTYlODElRTYlQjElODIlRTQlQjglOEQlRTglQUUlQkE=">TCP/IP 协议-05-TCP 如何保证传输的可靠性<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cubGl4dWVkdWFuLmNvbS9wb3N0cy9uZXR3b3JrLzAzLXRjcC1yZWxpYWJpbGl0eS8=">计算机网络(三)–TCP如何保证传输可靠性<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9ob3ViYi5naXRodWIuaW8vMjAyMy8wMi8yMi9uZXQtMDYtbmV0LXRjcC0xMi10aW1lX3dhaXRfcmVjdl9zeW4=">NET 网络专题汇总-06-12-在 TIME_WAIT 状态的 TCP 连接，收到 SYN 后会发生什么？<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h2 id="TCP-可靠传输的实现">TCP 可靠传输的实现</h2>
<p>TCP 基于<strong>以字节为单位的滑动窗口</strong>机制实现可靠传输，TCP 的滑动窗口机制是 TCP 实现可靠传输的核心机制。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>发送方的发送窗口是根据接收方的接收窗口大小和网络拥塞程度动态调整的，但在同一时刻，发送方的发送窗口并不总是和接收方的接收窗口大小相等的</p>
<ul class="lvl-2">
<li class="lvl-4">网络传送窗口值需要经历一定时间滞后，并且这个时间不是固定的，而是动态变化的</li>
<li class="lvl-4">发送方还可能根据网络拥塞程度调整发送窗口的大小，发送方的发送窗口大小并不总是和接收方的接收窗口大小相等的</li>
</ul>
</li>
<li class="lvl-2">
<p>对于不按序到达的数据的处理,并无明确的说明</p>
<ul class="lvl-2">
<li class="lvl-4">接收方把不按序到达的数据丢弃，那么发送方会重传这些数据，虽然接受窗口的管理比较简单，但是这种方式会导致网络资源的浪费</li>
<li class="lvl-4">通常将不按序到达的数据缓存起来，等待缺失的数据到达后再交付给应用层，这种方式会增加接收方的复杂度，但是可以减少网络资源的浪费</li>
</ul>
</li>
<li class="lvl-2">
<p>TCP 要求接收方必须有累计确认和捎带确认两种确认方式</p>
<ul class="lvl-2">
<li class="lvl-4">这样可以减少传输开销，接收方可以在合适的时候发送确认，也可以在自己有数据要发送时把确认信息捎带上去</li>
<li class="lvl-4">但接收方不应该过分延迟确认，否则会导致发送方重传数据，浪费网络资源</li>
<li class="lvl-4">捎带不常用，因为大多数应用程序很少同时在两个方向上传输数据</li>
</ul>
</li>
<li class="lvl-2">
<p>TCP 是全双工通信的，发送方和接收方都有自己的发送窗口和接收窗口</p>
<ul class="lvl-2">
<li class="lvl-4">发送方的发送窗口是根据接收方的接收窗口大小和网络拥塞程度动态调整的</li>
<li class="lvl-4">接收方的接收窗口是根据发送方的发送窗口大小和接收方的处理能力动态调整的</li>
</ul>
</li>
</ul>
<h2 id="TCP-运输连接管理">TCP 运输连接管理</h2>
<h3 id="TCP-连接的建立">TCP 连接的建立</h3>
<p>TCP 连接的建立是三次握手的过程，三次握手的过程是为了确保双方都能够发送和接收数据。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>第一次握手：客户端发送一个 SYN 报文段给服务器端，请求建立连接</p>
</li>
<li class="lvl-2">
<p>第二次握手：服务器端接收到客户端发送的 SYN 报文段后，发送一个 SYN 报文段和一个 ACK 报文段给客户端，确认客户端的请求</p>
</li>
<li class="lvl-2">
<p>第三次握手：客户端接收到服务器端发送的 SYN 报文段和 ACK 报文段后，发送一个 ACK 报文段给服务器端，确认服务器端的请求</p>
</li>
</ul>
<h3 id="TCP-连接的释放">TCP 连接的释放</h3>
<p>TCP 连接的释放是四次挥手的过程，四次挥手的过程是为了确保双方都能够正确关闭连接。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>第一次挥手：客户端发送一个 FIN 报文段给服务器端，请求关闭连接</p>
</li>
<li class="lvl-2">
<p>第二次挥手：服务器端接收到客户端发送的 FIN 报文段后，发送一个 ACK 报文段给客户端，确认客户端的请求</p>
</li>
<li class="lvl-2">
<p>第三次挥手：服务器端发送一个 FIN 报文段给客户端，请求关闭连接</p>
</li>
<li class="lvl-2">
<p>第四次挥手：客户端接收到服务器端发送的 FIN 报文段后，发送一个 ACK 报文段给服务器端，确认服务器端的请求</p>
</li>
</ul>
<h2 id="TCP-报文段的首部格式">TCP 报文段的首部格式</h2>
<p>TCP 报文段的首部格式如下：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>源端口号：16 位，标识发送方的端口号</p>
</li>
<li class="lvl-2">
<p>目的端口号：16 位，标识接收方的端口号</p>
</li>
<li class="lvl-2">
<p>序列号：32 位，标识数据的顺序</p>
</li>
<li class="lvl-2">
<p>确认号：32 位，标识数据的确认</p>
</li>
<li class="lvl-2">
<p>首部长度：4 位，标识首部的长度</p>
</li>
<li class="lvl-2">
<p>URG：1 位，标识紧急指针是否有效</p>
</li>
<li class="lvl-2">
<p>ACK：1 位，标识确认号是否有效</p>
</li>
<li class="lvl-2">
<p>PSH：1 位，标识接收方是否应该立即交付数据</p>
</li>
<li class="lvl-2">
<p>RST：1 位，标识连接是否重置</p>
</li>
<li class="lvl-2">
<p>SYN：1 位，标识连接是否建立</p>
</li>
<li class="lvl-2">
<p>FIN：1 位，标识连接是否释放</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Network</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Yuzhii的Springboot3笔记【3】</title>
    <url>/2024/05/08/1/</url>
    <content><![CDATA[<h2 id="条件注解">条件注解</h2>
<p>衔接上文，在<code>org.yuzhii.boot</code>模块中，我新建了一个<code>org.yuzhii.boot.config.AppConfig2</code>类，如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.yuzhii.boot.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.FastsqlException;</span><br><span class="line"><span class="comment">// 这里导入的是druid的异常类</span></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnClass;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.yuzhii.boot.bean.Cat;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ConditionalOnClass(FastsqlException.class)</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Cat <span class="title function_">cat01</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后，在<code>org.yuzhii.boot</code>模块中，我新建了一个<code>org.yuzhii.boot.bean.Dog</code>类，然后在程序入口进行测试：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (String s : ioc.getBeanNamesForType(Cat.class)) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Cat:&quot;</span> + s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (String s : ioc.getBeanNamesForType(Dog.class)) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Dog:&quot;</span> + s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>输入 <code>ioc.getBeanNamesForType(Dog.class).for</code> 时，IDEA会自动提示 <code>forEach</code> 方法，按下 <code>Tab</code> 键，可以自动补全。</p>
</blockquote>
<p>因为此时没有 Dog 类的实例，所以只会输出 Cat 类的实例。</p>
<p>复制之前 Cat 类的代码，然后将类名改为 Dog，并且加上 <code>@Component</code>，再次运行程序，此时会输出 Cat 和 Dog 类的实例。</p>
<p>回到 <code>AppConfig2</code> 类，添加</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ConditionalOnBean(value = Dog.class)</span> <span class="comment">// 这个注解的意思是：当容器中有Dog这个bean的时候，才会创建这个bean</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">zhangsan</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(value = Dog.class)</span> <span class="comment">// 这个注解的意思是：当容器中没有Dog这个bean的时候，才会创建这个bean</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">lisi</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>回到程序入口，再次运行程序，此时会输出 Cat 和 Dog 类的实例，以及 zhangsan 和 lisi 的实例。</p>
]]></content>
      <categories>
        <category>Springboot</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Yuzhii的Springboot3笔记【2】</title>
    <url>/2024/04/18/1/</url>
    <content><![CDATA[<p>Java注解是附加在代码中的一些元信息，用于一些工具在编译、运行时进行解析和使用，起到说明、配置的功能。注解不会也不应该影响代码的实际逻辑，仅仅起到辅助性的作用。包含在 java.lang.annotation 包中。</p>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS93M2Nub3RlL2phdmEtYW5ub3RhdGlvbi5odG1s">Java 注解<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="组件注册">组件注册</h2>
<p>紧接上回，我新建了一个模块，然后，在该模块中新建 <code>org.yuzhii.boot.bean.Cat</code> 类，如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.yuzhii.boot.bean;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Yuzhii</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2024-04-18 下午8:29</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">long</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>tips: 当写完 <code>private</code> 属性后，可以使用 <code>Alt + Insert</code> 快捷键，选择 <code>Getter and Setter</code> 自动生成 <code>getter</code> 和 <code>setter</code> 方法。</p>
</blockquote>
<p>然后，再新建一个 <code>org.yuzhii.boot.User</code> 类，同样只有 <code>id</code> 和 <code>name</code> 两个属性</p>
<p>如果要将 <code>Cat</code> 和 <code>User</code> 进行配置，传统的做法是在新建一个xml文件，然后在xml文件中进行配置，比如在 <code>resources</code> 目录下新建一个 <code>ioc.xml</code> 文件，然后在该文件中进行配置：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.yuzhii.boot.bean.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;张三&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.yuzhii.boot.bean.Cat&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;小猫&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>但是，SpringBoot 为我们提供了一种新的方式，即使用 <code>@Configuration</code> 和 <code>@Bean</code> 注解进行配置。</p>
<p>在 <code>org.yuzhii.boot</code> 包下新建一个 <code>config.AppConfig</code> 类，如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.yuzhii.boot.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.yuzhii.boot.bean.User;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Yuzhii</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2024-04-18 下午8:36</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">// 这是一个配置类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(&quot;userHaha&quot;)</span> <span class="comment">//替代xml中的&lt;bean&gt;标签</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">user</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">var</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setId(<span class="number">1</span>);</span><br><span class="line">        user.setName(<span class="string">&quot;yuzhii&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后在 Application 类中进行测试：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot302DemoApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">var</span> <span class="variable">ioc</span> <span class="operator">=</span> SpringApplication.run(Springboot302DemoApplication.class, args);</span><br><span class="line"></span><br><span class="line">        String[] forType = ioc.getBeanNamesForType(User.class);</span><br><span class="line">        <span class="keyword">for</span> (String s : forType) &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">Object</span> <span class="variable">userHaha1</span> <span class="operator">=</span> ioc.getBean(<span class="string">&quot;userHaha&quot;</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">userHaha2</span> <span class="operator">=</span> ioc.getBean(<span class="string">&quot;userHaha&quot;</span>);</span><br><span class="line">        System.out.println(userHaha2 == userHaha1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行后，可以看到控制台输出：</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">userHaha</span><br><span class="line">true</span><br></pre></td></tr></table></figure>
<p>如果给之前的 @Bean 注解添加一个 @Scope 注解，可以改变作用域：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Scope(&quot;prototype&quot;)</span> <span class="comment">// 多实例</span></span><br><span class="line"><span class="meta">@Bean(&quot;userHaha&quot;)</span> <span class="comment">//替代xml中的&lt;bean&gt;标签</span></span><br></pre></td></tr></table></figure>
<p>再次运行，可以看到控制台输出：</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">userHaha</span><br><span class="line">false</span><br></pre></td></tr></table></figure>
<p>这是因为，<code>@Scope(&quot;prototype&quot;)</code> 注解表示多实例，每次获取的都是一个新的实例。</p>
]]></content>
      <categories>
        <category>Springboot</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Yuzhii的Springboot3笔记【1】</title>
    <url>/2024/04/11/1/</url>
    <content><![CDATA[<h2 id="Spring-Boot-特性">Spring Boot 特性</h2>
<p>Spring Boot 是 Spring 的一个子项目，它是 Spring 的简化版，目的是简化 Spring 应用的初始搭建以及开发过程。Spring Boot 通过约定大于配置的方式，简化了 Spring 应用的开发。</p>
<p>具体的介绍和特性可以参考</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9zcHJpbmcuaW8vcHJvamVjdHMvc3ByaW5nLWJvb3Q=">Spring Boot 官网<i class="fa fa-external-link-alt"></i></span></p>
<p>截至24年4月，Spring Boot 的最新版本是 3.2.4.</p>
<p>开发环境：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>openjdk 21.0.2 2024-01-16 LTS</p>
</li>
<li class="lvl-2">
<p>IntelliJ IDEA 2024.1.1</p>
</li>
<li class="lvl-2">
<p>Spring Boot 3.2.4</p>
</li>
<li class="lvl-2">
<p>Windows 11 Pro 23H2</p>
</li>
</ul>
<h2 id="Hello-World">Hello World</h2>
<ol>
<li class="lvl-3">
<p>创建一个使用 maven 的空项目</p>
</li>
<li class="lvl-3">
<p>创建一个模块 <code>springboot3-01-demo</code></p>
</li>
<li class="lvl-3">
<p>编辑 <code>pom.xml</code> 文件，添加 Spring Boot 的依赖</p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 所有Spring Boot的依赖都是从这里继承的 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Web开发的依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li class="lvl-3">
<p>在模块中创建一个 <code>org.example.boot.MainApplication</code> 类</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.yuzhii.boot;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuzhii</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2024/4/11/21:14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: 项目启动类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span> <span class="comment">// 标注这是一个SpringBoot应用</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MainApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>@SpringBootApplication</code> 注解是一个组合注解，包含了 <code>@SpringBootConfiguration</code>、<code>@EnableAutoConfiguration</code> 和 <code>@ComponentScan</code> 注解。</p>
</blockquote>
<ol start="5">
<li class="lvl-3">
<p>运行，访问 <code>http://localhost:8080</code>，可以看到 <code>Whitelabel Error Page</code> 页面， 状态为404，说明项目启动成功。</p>
</li>
<li class="lvl-3">
<p>在 boot 下新建类 <code>controller.HelloController</code></p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.yuzhii.boot.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Yuzhii</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2024-04-11 下午9:31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello,Spring Boot 3!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>@RestController</code> 注解是 <code>@Controller</code> 和 <code>@ResponseBody</code> 注解的组合，表示这是一个控制器，并且返回的数据直接写给浏览器，如果是对象转为 json 数据。</p>
</blockquote>
<ol start="7">
<li class="lvl-3">
<p>访问 <code>http://localhost:8080/hello</code>，可以看到 <code>Hello,Spring Boot 3!</code>，说明项目启动成功。</p>
</li>
<li class="lvl-3">
<p>打包，pom.xml 中添加插件</p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mvn clean package #把项目打成可执行的jar包</span><br><span class="line">java -jar demo.jar #启动项目</span><br></pre></td></tr></table></figure>
<blockquote>
<p>可以在IDEA中直接使用 Maven 插件运行 <code>spring-boot:run</code>，也可以直接运行 <code>MainApplication</code> 类。打包也可以直接使用 Maven 插件 <code>package</code>（一般要先 <code>claen</code>）。<s>注意：如果是在IDEA中运行，需要在 <code>Edit Configurations</code> 中添加 <code>Main Class</code> 为 <code>org.yuzhii.boot.MainApplication</code>。</s></p>
</blockquote>
<h3 id="application-properties">application.properties</h3>
<p>我们可以直接在生成的jar包的同级目录下创建一个 <code>application.properties</code> 文件，来配置一些属性。</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8081</span></span><br></pre></td></tr></table></figure>
<p>这样我们就可以通过 <code>http://localhost:8081/hello</code> 来访问我们的接口了。</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLnNwcmluZy5pby9zcHJpbmctYm9vdC9kb2NzL2N1cnJlbnQvcmVmZXJlbmNlL2h0bWwvYXBwbGljYXRpb24tcHJvcGVydGllcy5odG1sI2FwcGVuZGl4LmFwcGxpY2F0aW9uLXByb3BlcnRpZXM=">Spring Boot Common Application Properties<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="Spring-Initializr">Spring Initializr</h2>
<p>Spring Initializr 是一个 Web 项目，可以帮助我们快速创建 Spring Boot 项目。</p>
<p>在 IDEA 中现在已经更名为 <code>Spring Boot</code>(IntelliJ IDEA 2024.1.1)，可以直接在 IDEA 中创建 Spring Boot 项目。</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9zdGFydC5zcHJpbmcuaW8v">Spring Initializr<i class="fa fa-external-link-alt"></i></span></p>
<ol>
<li class="lvl-3">
<p>创建一个模块</p>
</li>
<li class="lvl-3">
<p>选择 <code>Spring Boot</code>，点击 <code>Next</code></p>
</li>
<li class="lvl-3">
<p>添加 <code>Spring Web</code> 依赖，点击 <code>Create</code> 创建项目。(可以根据需要选择其他依赖)</p>
</li>
</ol>
<p>可以看到生成的项目结构和我们手动创建的项目结构是一样的。</p>
<p>其中 resources 目录下有一个 <code>application.properties</code> 文件，可以用来配置一些属性。<br>
<code>static</code> 目录下可以放一些静态资源，比如 html、css、js 等。<br>
<code>templates</code> 目录下可以放一些模板文件，比如 thymeleaf 模板。</p>
<h2 id="参考">参考</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9zcHJpbmcuaW8vcHJvamVjdHMvc3ByaW5nLWJvb3Q=">Spring Boot 官网<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL2xlaWZlbmd5YW5nL3NwcmluZ2Jvb3QzL3Z6bm1kZWI0a2duOTB2cng=">SpringBoot3全栈指南<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRlZS5jb20vbGVpZmVuZ3lhbmcvc3ByaW5nLWJvb3QtMw==">gitee 案例 “leifengyang / spring-boot-3”<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMUVzNHkxcTdCZj9wPTImdmRfc291cmNlPWU1YWNmOGQ1MjQzYzIzNTU3MGJhZjRiNjA1MGVkNjJk">bilibili 教程 “尚硅谷SpringBoot零基础教程，面试&amp;加薪必会springboot3”<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
]]></content>
      <categories>
        <category>Springboot</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>⟪天使な小生意気⟫ 专题现已推出！</title>
    <url>/2024/03/26/1/</url>
    <content><![CDATA[<h2 id="专题现已推出">专题现已推出</h2>
<p>这部让我感触颇深的作品，我为此专门开设了一个专题！</p>
<div class="note default"><p><a href="/html/application/a-cheeky-angel/">点击这里查看专题</a></p>
</div>
<p><img src="./Tenshinakonamaiki.webp" alt></p>
<hr>
<h2 id="更新">更新</h2>
<p>3.15 更新</p>
<p>基本路由和页面的搭建资源页面的搭建</p>
<p>3.18 更新</p>
<p>Markdown 查看实现</p>
<p>3.22 更新</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>概要</p>
</li>
<li class="lvl-2">
<p>问题</p>
</li>
</ul>
<p>3.23 更新</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>关于</p>
</li>
<li class="lvl-2">
<p>评论01</p>
</li>
<li class="lvl-2">
<p>评论03</p>
</li>
</ul>
<p>更新 Markdown 的查看</p>
<p>3.26 更新</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>评论02</p>
</li>
<li class="lvl-2">
<p>名场面以及伏笔01</p>
</li>
</ul>
<p>恢复暗色模式下 Markdown 的查看不正常的问题</p>
<p>3.31 更新</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>名场面以及伏笔02</p>
</li>
</ul>
<p>更新 MarkdownView 的实现</p>
<p>6.23 更新</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>名场面以及伏笔05</p>
</li>
</ul>
<p>6.24 更新</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>名场面以及伏笔06</p>
</li>
</ul>
<p>11.6 更新</p>
<p>上个月去看的时候，发现这个专题的页面有问题，banner 图片加载不出来，因为这个是从日本一个同人社区直接取的图片，然而那个社区已经关闭了，所以这个图片也就加载不出来了。今天写博客记起这件事，就说明一下。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>ほんとにごめんなさい！🥲</p>
</li>
</ul>
<p>24年 终了</p>
<p>25年</p>
<p>1.1 更新</p>
<p>今天想去再翻译几篇文章，结果发现原作者的网站炸了，好在有互联网档案馆，可以找到一些文章的备份</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>名场面以及伏笔07</p>
</li>
<li class="lvl-2">
<p>名场面以及伏笔08</p>
</li>
<li class="lvl-2">
<p>名场面以及伏笔09</p>
</li>
</ul>
<p>25.4.19</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>名场面以及伏笔11</p>
</li>
<li class="lvl-2">
<p>名场面以及伏笔12</p>
</li>
<li class="lvl-2">
<p>名场面以及伏笔13</p>
</li>
</ul>
]]></content>
      <tags>
        <tag>分享</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机网络杂记-10</title>
    <url>/2024/03/24/1/</url>
    <content><![CDATA[<h2 id="运输层">运输层</h2>
<p>运输层的主要任务是为应用层提供端到端的通信服务，运输层的协议有 TCP 和 UDP，TCP 提供面向连接的可靠的数据传输服务，UDP 提供无连接的不可靠的数据传输服务。</p>
<p>UDP (User Datagram Protocol) 是无连接的，不可靠的数据传输服务，UDP 不提供可靠的数据传输服务，UDP 不提供拥塞控制，UDP 不提供流量控制，UDP 不提供差错恢复。</p>
<p>TCP (Transmission Control Protocol) 是面向连接的，可靠的数据传输服务，TCP 提供可靠的数据传输服务，TCP 提供拥塞控制，TCP 提供流量控制，TCP 提供差错恢复。</p>
<p>物理层、数据链路层、网络层共同完成了主机之间的通信，但实际上主机之间的通信是进程之间的通信，运输层的主要任务就是为进程之间的通信提供端到端的通信服务。</p>
<p>运输层向高层用户屏蔽了下层通信的细节，运输层向高层用户提供的是<strong>逻辑通信</strong>，而不是物理通信，运输层的逻辑通信是端到端的逻辑通信，而不是主机到主机的逻辑通信。</p>
<h2 id="端口号、复用与分用">端口号、复用与分用</h2>
<p>端口号是一个 16 位的无符号整数，端口号的范围是 0~65535，端口号的范围是 0~1023 的端口号是保留端口号，1024~49151 的端口号是注册端口号，49152~65535 的端口号是动态端口号。</p>
<p>端口号只具有本地意义，端口号只在本地主机中具有唯一性，不同主机中的端口号可以相同，在因特网中，不同计算机中的端口号是没有联系的。</p>
<hr>
<p>复用是指多个应用层进程可以使用同一个运输层协议，分用是指运输层协议可以将收到的分组交付到正确的应用层进程。</p>
<p>在发送方中：</p>
<p>使用 UDP 协议封装的数据报是 UDP 复用，协议号为 17，使用 TCP 协议封装的数据报是 TCP 复用，协议号为 6。</p>
<p>IP 复用是指多个应用层进程可以使用同一个 IP 地址，IP 分用是指 IP 协议可以将收到的数据报交付到正确的主机。</p>
<p>在接接收方中：</p>
<p>使用 UDP 协议封装的数据报是 UDP 分用，使用 TCP 协议封装的数据报是 TCP 分用。</p>
<h3 id="常用的端口号">常用的端口号</h3>
<p>UDP 协议使用的端口号：</p>
<table>
<thead>
<tr>
<th style="text-align:center">端口号</th>
<th style="text-align:left">服务</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">520</td>
<td style="text-align:left">RIP (路由信息协议)</td>
</tr>
<tr>
<td style="text-align:center">161</td>
<td style="text-align:left">SNMP (简单网络管理协议)</td>
</tr>
<tr>
<td style="text-align:center">69</td>
<td style="text-align:left">TFTP (简单文件传输协议)</td>
</tr>
<tr>
<td style="text-align:center">53</td>
<td style="text-align:left">DNS (域名系统)</td>
</tr>
<tr>
<td style="text-align:center">67/68</td>
<td style="text-align:left">DHCP (动态主机配置协议)</td>
</tr>
</tbody>
</table>
<p>TCP 协议使用的端口号：</p>
<table>
<thead>
<tr>
<th style="text-align:center">端口号</th>
<th style="text-align:left">服务</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">80</td>
<td style="text-align:left">HTTP (超文本传输协议)</td>
</tr>
<tr>
<td style="text-align:center">25</td>
<td style="text-align:left">SMTP (简单邮件传输协议)</td>
</tr>
<tr>
<td style="text-align:center">21/20</td>
<td style="text-align:left">FTP (文件传输协议)</td>
</tr>
<tr>
<td style="text-align:center">179</td>
<td style="text-align:left">BGP (边界网关协议)</td>
</tr>
<tr>
<td style="text-align:center">443</td>
<td style="text-align:left">HTTPS (安全超文本传输协议)</td>
</tr>
</tbody>
</table>
<h2 id="UDP-与-TCP-的对比">UDP 与 TCP 的对比</h2>
<table>
<thead>
<tr>
<th style="text-align:center">UDP</th>
<th style="text-align:left">TCP</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">无连接</td>
<td style="text-align:left">面向连接</td>
</tr>
<tr>
<td style="text-align:center">不可靠</td>
<td style="text-align:left">可靠</td>
</tr>
<tr>
<td style="text-align:center">不提供拥塞控制</td>
<td style="text-align:left">提供拥塞控制</td>
</tr>
<tr>
<td style="text-align:center">不提供流量控制</td>
<td style="text-align:left">提供流量控制</td>
</tr>
<tr>
<td style="text-align:center">不提供差错恢复</td>
<td style="text-align:left">提供差错恢复</td>
</tr>
<tr>
<td style="text-align:center">适用于实时应用</td>
<td style="text-align:left">适用于可靠传输的应用</td>
</tr>
<tr>
<td style="text-align:center">支持一对一、一对多、多对一、多对多的通信</td>
<td style="text-align:left">只支持一对一的通信</td>
</tr>
<tr>
<td style="text-align:center">首部开销小</td>
<td style="text-align:left">首部开销大</td>
</tr>
</tbody>
</table>
<h2 id="TCP-流量控制">TCP 流量控制</h2>
<p>一般，我们希望数据传输的速度尽可能的快，但是如果发送方的发送速度过快，接收方的接收速度跟不上，那么接收方的缓冲区就会溢出，这就是流量控制的问题。</p>
<p>TCP 通过滑动窗口机制来解决流量控制的问题，滑动窗口是接收方告诉发送方自己的缓冲区还有多少空间，发送方根据接收方的滑动窗口大小来发送数据。</p>
<h2 id="TCP-拥塞控制">TCP 拥塞控制</h2>
<p>拥塞控制是指当网络中的数据包过多时，网络的性能就会下降，这就是拥塞控制的问题。</p>
<p>TCP 通过拥塞窗口来解决拥塞控制的问题，拥塞窗口是发送方告诉接收方网络的拥塞程度，接收方根据发送方的拥塞窗口大小来接收数据。</p>
<p>有4种算法可以用来解决拥塞控制的问题：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>慢开始算法</p>
</li>
<li class="lvl-2">
<p>拥塞避免算法</p>
</li>
<li class="lvl-2">
<p>快重传算法</p>
</li>
<li class="lvl-2">
<p>快恢复算法</p>
</li>
</ul>
<p>一般，第一种算法与第二种算法结合使用，第三种算法与第四种算法结合使用。</p>
<p>我们创造一个理想环境</p>
<ol>
<li class="lvl-3">
<p>数据单向传输，另一方只传送确认</p>
</li>
<li class="lvl-3">
<p>接收方有足够大的缓冲区，而发送方发送窗口大小由网络拥塞程度决定</p>
</li>
<li class="lvl-3">
<p>以 TCP 最大报文段长度 MSS 个数为单位计算</p>
</li>
</ol>
<h3 id="慢开始算法">慢开始算法</h3>
<p>慢开始算法是指发送方在开始发送数据时，先将拥塞窗口的大小设置为 1，然后每经过一个往返时间 RTT 就将拥塞窗口的大小加倍，直到拥塞窗口的大小达到一个阈值，然后进入拥塞避免算法。</p>
<h3 id="拥塞避免算法">拥塞避免算法</h3>
<p>拥塞避免算法是指发送方在拥塞窗口的大小达到一个阈值之后，每经过一个往返时间 RTT 就将拥塞窗口的大小加 1，直到拥塞窗口的大小达到一个阈值，然后进入快重传算法。</p>
<h3 id="快重传算法">快重传算法</h3>
<p>快重传算法是指接收方在接收到一个失序的数据包时，就立即发送一个重复确认，发送方在接收到 3 个重复确认时就立即重传丢失的数据包。</p>
<h3 id="快恢复算法">快恢复算法</h3>
<p>快恢复算法是指发送方在接收到 3 个重复确认时，就将拥塞窗口的大小减半，然后进入拥塞避免算法。</p>
<h2 id="TCP-超时重传的时间选择">TCP 超时重传的时间选择</h2>
<p>超时重传是TCP协议中的一个重要机制，当发送方发送数据后，如果在一个往返时间 RTT 内没有收到接收方的确认，那么发送方就会重传数据。</p>
<p>RFC 6298 中提出了一个计算超时重传时间的算法：</p>
<p><code>RTO = RTT + 4 * RTTVar</code></p>
<p>RTT 是一个往返时间，RTTVar 是一个往返时间的方差，RTO 是一个超时重传时间。</p>
<p>RTT 的计算公式如下：</p>
<p><code>RTT = (1 - α) * RTT + α * SampleRTT</code></p>
<p>RTTVar 的计算公式如下：</p>
<p><code>RTTVar = (1 - β) * RTTVar + β * |SampleRTT - RTT|</code></p>
<p>α 和 β 是两个参数，一般取值为 0.125。</p>
<hr>
<p>出现超时重传时无法准确计算 RTT 的问题，Karn 算法是解决这个问题的一个方法，在计算加权平均 RTT 时，只要报文段重传了，就不计算这个报文段的 RTT。也就是说，出现重传时，不计算 RTT。而超时重传时间RTO也不会被更新。</p>
<p>但是这样引发了新的问题：如果报文段的时延突然增大了许多，并且长时间不变，那么这个时延就会被忽略，在原来的重传时间内，不会收到确认，导致重传。重传时间无法更新，导致报文段反复重传。</p>
<p>所以要对 Karn 算法进行改进，当报文段重传时，把超时重传时间RTO增大一些，经典的做法是将 RTO 增大一倍。</p>
]]></content>
      <categories>
        <category>Network</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>中兴 ZTE E8820S 路由器经验分享</title>
    <url>/2024/03/10/1/</url>
    <content><![CDATA[<h2 id="1-介绍">1. 介绍</h2>
<ul class="lvl-0">
<li class="lvl-2">外观：白色机身，双天线，三个指示灯位于下方，天线不可拆卸，</li>
<li class="lvl-2">接口：全在天线侧，包括电源、WAN、LAN1、LAN2、LAN3、LAN4、RESET、WPS、开关。WAN口和LAN口都是千兆口。</li>
<li class="lvl-2">规格：双核CPU，256MB内存，128MB存储，支持2.4G和5G双频，支持IPv6*，支持USB2.0*。</li>
<li class="lvl-2">价格：二手网约 40 元左右。（24年3月）</li>
</ul>
<p>*：官方固件未开启，需要刷机。</p>
<p>*：看着是蓝色的接口，实际是 USB 2.0 的接口。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>硬件参数：</p>
<ul class="lvl-2">
<li class="lvl-4">CPU：ramips MT7621@880MHz</li>
<li class="lvl-4">2.4G RF：MT7603</li>
<li class="lvl-4">5G RF：MT7612</li>
<li class="lvl-4">NAND：NAND FLASH（128M）</li>
<li class="lvl-4">DDR: 256M DDR3@1200MHz</li>
</ul>
</li>
</ul>
<blockquote>
<p>NAND 貌似存在多个型号混用，其他频率信息 Flash:125MHZ,BUS:220MHZ,Ref:40MHZ</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>GPIO引脚：</p>
<ul class="lvl-2">
<li class="lvl-4">POWER_LED:  GPIO#16 LOW</li>
<li class="lvl-4">SYS_LED:  GPIO#3 LOW</li>
<li class="lvl-4">RESET:  GPIO#18 HIGH</li>
<li class="lvl-4">WPS:     GPIO#8 LOW</li>
<li class="lvl-4">WIFI:    GPIO#10 LOW</li>
</ul>
</li>
</ul>
<p><img src="./8820S.png" alt></p>
<blockquote>
<p>TTL 接法：GND接地，RX接TX，TX接RX，VCC不接</p>
</blockquote>
<p>纸面参数看起来不错，但是实际使用中，有一些问题：</p>
<p>且没有屏蔽罩，容易干扰，并且天线阉割，2.4G 信号很差；倒装主板，散热不行，容易发热。</p>
<h3 id="魔改-2-4G-天线">魔改 2.4G 天线</h3>
<p>主板上存在天线的线路，但是相关的电容、电阻、IC没装。当然你可以想办法魔改。</p>
<p><img src="./2.4G-RF.png" alt></p>
<p>紫色圆圈是天线ipx座的焊盘位置，金色圆圈是功放的焊盘位置，橙色线路是功放到天线底座的线路，需要补全电阻电容，粉色线路是 RF 芯片直出的天线线路，红色方框是焊接天线 RF 的焊盘。</p>
<p>具体的方法可以是补全功放线路和然后安装天线，也可以直接在直出的 RF 上焊接天线（推荐使用 PCB 天线），GND 直接焊接到主板的任意一个 GND 上（我直接焊在了旁边没使用的屏蔽罩焊盘上）。</p>
<h2 id="2-breed-不死-BootLoader-安装">2. breed 不死 BootLoader 安装</h2>
<p><strong>在开始之前，确保你知道自己在做什么，刷机有风险，刷机有风险，刷机有风险。</strong></p>
<p><mark>如果机器背面的信息贴纸是完整的，那么就可以开始了。如果贴纸被撕掉了，那么你先要进入管理界面，保存 MAC 地址以及 SN 码。这台路由器的管理界面进入专家模式就可以看到所有信息，建议截图保存。</mark></p>
<p>这台设备没有自带不死 BootLoader，所以需要先安装一个。</p>
<p>网上流行了一个老版本的 breed，这个版本是移植自<code>极路由4 HC5962/B70</code>的，功能有限，且 部分 GPIO 无法使用，无法备份 EEPROM。</p>
<p>所以使用新版本的 breed，新增 ZTE E8820S 专用版，支持极路由4 HC5962/B70 固件；支持 MTK SDK 分区的固件；支持启动原厂固件以及升级原厂编程器固件。</p>
<p>资源：<span class="exturl" data-url="aHR0cHM6Ly9icmVlZC5oYWNrcGFzY2FsLm5ldC8=">breed<i class="fa fa-external-link-alt"></i></span></p>
<p>参考：<span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC0xNjE5MDYtMS0xLmh0bWw=">【2022-07-26】AR/QCA/MTK Breed，功能强大的多线程 Bootloader-OPENWRT专版-恩山无线论坛<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="通过-ttl-线刷入-breed">通过 ttl 线刷入 breed</h3>
<p>没什么好说的，路由器拆开，找到串口，接上 ttl 线，然后通过串口刷入 breed。</p>
<p>参考：<span class="exturl" data-url="aHR0cHM6Ly93d3cubXlkaWdpdC5jbi90aHJlYWQtMjAwMDc2LTEtMS5odG1s">最详细的中兴E8820S的TTL刷机教程，附最完美的Padavan固件 - WiFi/路由器 数码之家<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="免拆路由器刷入-breed">免拆路由器刷入 breed</h3>
<p>中兴其实留有一个固件升级的接口，可以通过这个接口刷入 breed。</p>
<ol>
<li class="lvl-3">
<p>断开路由器电源，拔掉 Wan 口的网线</p>
</li>
<li class="lvl-3">
<p>电脑打开控制面板-网络和共享中心-更改适配器设置-找到本地连接-属性-IPv4-设置为</p>
<ol>
<li class="lvl-7">IP 地址：192.168.1.2</li>
<li class="lvl-7">子网掩码：255.255.255.0</li>
<li class="lvl-7">默认网关：192.168.1.254</li>
</ol>
</li>
<li class="lvl-3">
<p>打开<code>tftpd64.exe</code>软件，选择设置好的网卡，breed 放在同一目录下，并重命名为<code>ZTE_img.bin</code></p>
</li>
<li class="lvl-3">
<p>路由器断电，按住 reset 键，插上电源，等待指示灯闪烁时松开 reset 键（也可以观察<code>tftpd64.exe</code>软件的提示）</p>
</li>
<li class="lvl-3">
<p>等待路由器重启，还原网卡设置</p>
</li>
<li class="lvl-3">
<p>打开浏览器，输入<code>192.168.1.1</code>，进入 breed 界面</p>
</li>
</ol>
<p>资源：<span class="exturl" data-url="aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3NoYXJlL2luaXQ/c3VybD1UZHBpNFlwb3VpS0pOSjUtcTJpcGN3JnB3ZD16NzFk">tftpd64.exe<i class="fa fa-external-link-alt"></i></span></p>
<p>参考：<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMUxwNHkxRjdXdS8/c3BtX2lkX2Zyb209MzMzLjc4OC5yZWNvbW1lbmRfbW9yZV92aWRlby40JnZkX3NvdXJjZT1lNWFjZjhkNTI0M2MyMzU1NzBiYWY0YjYwNTBlZDYyZA==">38.8元的中兴E8820S免拆刷机教程 值得一冲_哔哩哔哩_bilibili<i class="fa fa-external-link-alt"></i></span></p>
<p>需要注意的是，<strong>这个参考中关于 eeprom 的操作是错误的</strong>。</p>
<h2 id="3-EEPROM-备份与选择">3. EEPROM 备份与选择</h2>
<p>备份是一个好习惯，我们需要进入 breed 界面，然后备份 EEPROM 以及固件（编程器固件），选择原厂格式。</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9jamQ2NTY4MzU4LmdpdGh1Yi5pby9yb3V0ZXIvenRlL2VlcHJvbS9lODgyMHM=">从原厂备份中提取 EEPROM by cjd6568358<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="EEPROM-选择">EEPROM 选择</h3>
<p>你可以选择备份原厂的 EEPROM，也可以使用别人的 EEPROM。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>原厂 EEPROM</p>
</li>
<li class="lvl-2">
<p>8820s_eeprom_b70gs_yh_nomac.bin</p>
</li>
<li class="lvl-2">
<p>8820s_eeprom_yuan-gai.bin</p>
</li>
</ul>
<p>资源</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMURYNDVPTWREeEVxQVJNV19QenY2UWcmcHdkPTZybW4=">8820s_eeprom_b70gs_yh_nomac.bin<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cubGFuem91eC5jb20vaVVsa1JoZGh5NGY=">8820s_eeprom_yuan-gai.bin<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h3 id="EEPROM-修改">EEPROM 修改</h3>
<p>对于这台路由器，EEPROM 是十分重要的，影响了信号质量以及 5G 信号的稳定性。</p>
<p>下载 WinHex，打开 EEPROM，修改 MAC 地址（包括 2.4G/5G/Lan/Wan 的 MAC 地址）</p>
<blockquote>
<p>WinHex 默认是 Insert 模式，所以不用担心覆盖问题。</p>
</blockquote>
<p>其中 2.4G 和 Lan 和 Wan 的 MAC 地址也是一样的，5G 的 MAC 地址是 2.4G 的 MAC 地址 + 1（16进制加法）。</p>
<p>偏移量</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>2.4G MAC 地址：4</p>
</li>
<li class="lvl-2">
<p>5G MAC 地址：8004</p>
</li>
<li class="lvl-2">
<p>Lan MAC 地址：E000</p>
</li>
<li class="lvl-2">
<p>Wan MAC 地址：E006</p>
</li>
</ul>
<p>参考：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04Mjc1NjA2LTEtMS5odG1s">路由器修改mac的方法-新手入门及其它(硬件)-恩山无线论坛<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04Mjc1NjA2LTEtMS5odG1s">路由器修改mac的方法<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<p>从原厂备份 eeprom 中修改：<span class="exturl" data-url="aHR0cHM6Ly9jamQ2NTY4MzU4LmdpdGh1Yi5pby9yb3V0ZXIvenRlL2VlcHJvbS9lODgyMHM=">全自动生成 EEPROM<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NqZDY1NjgzNTgvcm91dGVy">cjd6568358/router/路由器工具<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="4-固件">4. 固件</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>官方固件：不推荐，功能太少。</p>
</li>
<li class="lvl-2">
<p>OpenWrt 固件：这个很常见，并且有很多基于此改版的固件。</p>
<ul class="lvl-2">
<li class="lvl-4">Offical 固件</li>
<li class="lvl-4">Lean 固件</li>
<li class="lvl-4">immortalwrt 固件</li>
</ul>
</li>
<li class="lvl-2">
<p>Padavan 固件：中兴路由器上也有</p>
</li>
<li class="lvl-2">
<p>Asuswrt 固件：华硕改版的固件</p>
</li>
</ul>
<p>基于 OpenWrt 的固件有很多，但是都是开源驱动居多，无线很差，5G 开源驱动基本只有200M到300M的速度，闭源驱动才有 500M 的速度。而 Padavan 固件是闭源驱动，速度很快，大约有800M的速度，稳定性也很好，但是可玩性不是很强。</p>
<p>当前 MT7621 的性能已经有些跟不上了，如今很多便宜路由器采用 MT7981，MT7986，IPQ系列的芯片，性能更强，价格也能捡到便宜的。</p>
<h3 id="汇总">汇总</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04MjM0MjQ5LTEtMS5odG1s">中兴E8820S OpenWrt-v21.02.3 可随便装插件-OPENWRT专版-恩山无线论坛 - 手机版 - Powered by Discuz!<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04Mjg5NjYxLTEtMS5odG1sI2dvb2dsZV92aWduZXR0ZQ==">中兴 ZTE E8820S 折腾记录，附编译好的 OpenWrt 固件，也包含新3-OPENWRT专版-恩山无线论坛 - 手机版 - Powered by Discuz!<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04MjcwNDEzLTEtMS5odG1s">中兴E8820S OpenWrt-v21.02.3 带USB驱动 可插随身wifi、手机通过USB共享网络-OPENWRT专版-恩山无线论坛<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04MjkzMzE3LTEtMS5odG1s">中兴E8820S-R23.6.6-OPENWRT 闭源驱动-OPENWRT专版-恩山无线论坛<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL0ZPUlVNL3RocmVhZC00MDU0NzExLTEtMS5odG1s">21.2.20更新，重新配置中兴E8820S编译LEDE固件，汉化闭源驱动无线设置-OPENWRT专版-恩山无线论坛<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC01MjAzNzU0LTEtMS5odG1s">中兴E8820S路由器拆机及OpenWrt固件(含源代码)-OPENWRT专版-恩山无线论坛 - 手机版 - Powered by Discuz!<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL2ZvcnVtLnBocD9tb2Q9dmlld3RocmVhZCZ0aWQ9ODM1NDUzMA==">【固件】ZTE-8820S老毛子纯净固件，基于hanwckf大源码更新部分软件包<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2JhdXcyMDA4L2U4ODIwcy00LjQtcGFkYXZhbg==">e8820s-4.4-padavan<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2JhdXcyMDA4L2U4ODIwcy00LjQtcGFkYXZhbi0x">e8820s-4.4-padavan-1<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL0ZPUlVNL2ZvcnVtLnBocD9tb2Q9dmlld3RocmVhZCZ0aWQ9NDA5NDk4OQ==">【含软件中心】中兴E8820S华硕改版固件<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3N0a3Vyb25la28vYXN1c3dydC1tdDc2MjFhdA==">asuswrt-mt7621at<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3N0a3Vyb25la28vYXN1c3dydC1tb2R4">asuswrt-modx<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<hr>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRlZS5jb20vc2l3aW5kL29wZW53cnQtZmlybXdhcmUtZm9yLW1lZGlhdGVrLW10NzYyMQ==">Openwrt firmware for mediatek mt7621<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9kbC5vcGVud3J0LmFpL2Zpcm13YXJlL3JhbWlwcy1tdDc2MjEvenRlX2U4ODIwcy8=">OpenWrt Downloads<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9vcHQuY24ycXEuY29tL3BhZGF2YW4v">padavan<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<p>以上顺序不分先后，可以根据自己的需求选择。</p>
<h2 id="如何适配-OpenWrt">如何适配 OpenWrt</h2>
<p>参考该 Commit</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3BhZGF2YW5vbmx5L2ltbW9ydGFsd3J0L2NvbW1pdC84NzZhYTQ0NjU2OTdiNjA4ZDY1YTI5OTRhYjU1OGZhNjU4MWQ4NGE1">Commit 876aa44<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="关于-LEDE-的适配">关于 LEDE 的适配</h3>
<p>LEDE 支持该机型，但是截至 25 年 7 月，存在一些问题。</p>
<p>如果直接使用默认的代码与配置，编译出来的固件将没有 wifi。</p>
<p>需要修改以下代码：</p>
<p><code>lede/target/linux/ramips/dts/mt7621_zte_e8820s.dts</code></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">&amp;pcie0 &#123;</span><br><span class="line"> mt76@<span class="number">0</span>,<span class="number">0</span> &#123;</span><br><span class="line">  reg = &lt;<span class="number">0x0000</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>&gt;;</span><br><span class="line">  mediatek,mtd-eeprom = &lt;&amp;factory <span class="number">0x0000</span>&gt;;</span><br><span class="line">  ieee80211-freq-limit = &lt;<span class="number">2400000</span> <span class="number">2500000</span>&gt;;</span><br><span class="line"></span><br><span class="line">  led &#123;</span><br><span class="line">   led-active-low;</span><br><span class="line">  &#125;;</span><br><span class="line"> &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;pcie1 &#123;</span><br><span class="line"> mt76@<span class="number">0</span>,<span class="number">0</span> &#123;</span><br><span class="line">  reg = &lt;<span class="number">0x0000</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>&gt;;</span><br><span class="line">  mediatek,mtd-eeprom = &lt;&amp;factory <span class="number">0x8000</span>&gt;;</span><br><span class="line">  ieee80211-freq-limit = &lt;<span class="number">5000000</span> <span class="number">6000000</span>&gt;;</span><br><span class="line"></span><br><span class="line">  led &#123;</span><br><span class="line">   led-sources = &lt;<span class="number">2</span>&gt;;</span><br><span class="line">   led-active-low;</span><br><span class="line">  &#125;;</span><br><span class="line"> &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><code>lede/target/linux/ramips/image/mt7621.mk</code></p>
<p>找到该机型，然后修改：</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"> DEVICE_PACKAGES := kmod-mt7603 kmod-mt76x2 kmod-usb3 \</span><br><span class="line">kmod-usb-ledtrig-usbport</span><br></pre></td></tr></table></figure>
<p>之后编译即可。</p>
<h3 id="在线固件编译">在线固件编译</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cDovL29wZW53cnQuYWk=">openwrt.ai<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<p>打开这个网址，选择 8820s，可以定制固件，选择自己需要的插件，然后下载。注意非捐赠用户每日只能定制一个固件。</p>
<p>也可以到Github上下载源码，自己编译。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>fw.wrt.moe</p>
</li>
</ul>
<p>这个也是一个定制固件的网站，选择 8820s，可以定制固件。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9maXJtd2FyZS1zZWxlY3Rvci5pbW1vcnRhbHdydC5vcmcv">https://firmware-selector.immortalwrt.org/<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<p>immortalwrt，没什么好说的，直接选择 8820s，编译好的固件。</p>
<h3 id="刷入固件">刷入固件</h3>
<p>在刷入固件前，需要先刷入修改好的 EEPROM。并确定 MAC 地址已经修改。</p>
<p>然后通过 breed 界面刷入固件。</p>
<h2 id="恢复原厂固件">恢复原厂固件</h2>
<p>折腾这么久，总觉得不称心如意？累了？还是回归原厂吧。</p>
<p><strong>以下操作建议认真阅读参考后再进行。</strong></p>
<ol>
<li class="lvl-3">
<p>断电，拔掉 Wan 口的网线，按住 reset 键，插上电源，等待指示灯闪烁时松开 reset 键</p>
</li>
<li class="lvl-3">
<p>电脑打开 <code>192.168.1.1</code></p>
</li>
<li class="lvl-3">
<p>telnet 登录 <code>telnet 192.168.1.1</code></p>
</li>
<li class="lvl-3">
<p>HFS 文件服务器上传原厂固件</p>
</li>
<li class="lvl-3">
<p><code>wget http://192.168.1.2/full.bin</code> 这个地址和文件是根据你自己的情况来的记录下 Saving to address 后面的内存地址和 Length: 后面 0x 开头的数据大小读入备份文件的内存起始地址是 0x80001000，数据大小是 0x7f80000</p>
</li>
<li class="lvl-3">
<p>擦除 Flash：flash是breed的内部命令，用于NAND的读取写入擦除等操作执行命令<br>
flash erase 0x0  0x7f80000<br>
清除flash 从地址0x0   长度0x7f80000  127M，对应上面一步读入的备份文件长度<mark>这时候NAND flash 已经全部清空，千万别重启别断电！！！</mark></p>
</li>
<li class="lvl-3">
<p>写入数据：执行命令<br>
flash write 0x0 0x80001000  0x7f80000<br>
把内存起始地址0x80001000 长度为0x7f80000的数据从0x0开始写入闪存，</p>
</li>
</ol>
<p>显示 Succeeded  原厂编程器固件写入完成，重启就行了</p>
<p>以上操作是breed从内存中进行的，<strong>如果失败，路由器必砖</strong>，所以一定要小心，别出差错，真变砖了，相对简单的方法只有换spi闪存了</p>
<p><em><strong>最后，在 breed 界面恢复原厂的 BootLoader。</strong></em></p>
<p>参考：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL2F2NzE5MTU5NDMx">E8820s无线路由器轻松刷回原厂固件<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC00MTEwMjA3LTEtMS5odG1s">中兴E8820S刷回原厂固件经验分享<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h2 id="UBOOT">UBOOT</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmlnaHQuY29tLmNuL2ZvcnVtL3RocmVhZC04MjU2NzEwLTEtMS5odG1s">一种在线定制 MT7621 u-boot 的方法<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1l1emhpaTA3MTgvdWJvb3QtbXQ3NjIx">uboot-mt7621<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h2 id="OpenWrt-使用经验">OpenWrt 使用经验</h2>
<h3 id="OpenWrt-使用-IPv6-进行远程访问-LAN-下设备">OpenWrt 使用 IPv6 进行远程访问 LAN 下设备</h3>
<p>由于我有远程桌面的需求，然，受困于没有 IPv4 公网 IP，所以只能使用 IPv6 进行远程访问。</p>
<p>防火墙设置 区域</p>
<p>lan &gt; wan 入站接受，出站接受，转发拒绝<br>
wan &gt; reject 入站接受，出站接受，转发拒绝</p>
<p>通信规则添加一条</p>
<p>名称随意协议：TCP/UDP<br>
源区域：任意区域（转发）目标区域 LAN<br>
源端口：3389</p>
<p>其余默认即可</p>
<h3 id="OpenWrt-访问光猫">OpenWrt 访问光猫</h3>
<p>接口新建 modem</p>
<p>协议：静态设备：wan<br>
开机启动：勾选<br>
ipv4地址：192.168.1.254（你光猫的网段，地址随意，只要没有设备链接即可）<br>
prefix：24</p>
<p>强制链路：勾选</p>
<p>使用网关跃点：100</p>
<p>委托IPv6前缀：勾选</p>
<p>防火墙放在和 wan 一样的区域</p>
<p>其余默认即可</p>
<h3 id="软件包问题-24年12月10日更新">软件包问题 24年12月10日更新</h3>
<p>我使用了 <span class="exturl" data-url="aHR0cDovL09QRU5XUlQuQUk=">OPENWRT.AI<i class="fa fa-external-link-alt"></i></span> 的自助构建固件，然最近作者更新了主线，默认的 opkg 仓库直接炸了，导致无法安装插件</p>
<p>故此修改了 opkg 仓库地址，可以正常安装插件了。</p>
<p>我的固件应是最新主线 24.10.0-rc2 之前最后一个版本 23.05.0</p>
<p>内核版本 5.15.167</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">src/gz openwrt_core https://downloads.openwrt.org/releases/23.05.0/targets/ramips/mt7621</span><br><span class="line">src/gz openwrt_base https://downloads.openwrt.org/releases/23.05.0/packages/mipsel_24kc/base</span><br><span class="line">src/gz openwrt_luci https://downloads.openwrt.org/releases/23.05.0/packages/mipsel_24kc/luci</span><br><span class="line">src/gz openwrt_packages https://downloads.openwrt.org/releases/23.05.0/packages/mipsel_24kc/packages</span><br><span class="line">src/gz openwrt_routing https://downloads.openwrt.org/releases/23.05.0/packages/mipsel_24kc/routing</span><br><span class="line">src/gz openwrt_telephony https://downloads.openwrt.org/releases/23.05.0/packages/mipsel_24kc/telephony</span><br></pre></td></tr></table></figure>
<p>直接在软件包管理中添加源，然后更新软件包列表，就可以正常安装插件了。</p>
<h3 id="其他建议">其他建议</h3>
<p>建议使用 4.4 内核或 3.4 内核的固件，开源驱动性能较差，如果要使用开源固件，内核最好不要超过 5.4。</p>
<p>另外有一些固件没有 MediaTek HWNat，注意分辨。</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>分享</tag>
        <tag>玩机</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue-issue-and-typescript</title>
    <url>/2024/03/09/1/</url>
    <content><![CDATA[<h2 id="Vue-路由的坑和-SSR-的坑">Vue 路由的坑和 SSR 的坑</h2>
<p>因为我没有自己的服务器，所以我只能使用 github 提供的 pages 服务。</p>
<p>但是这个服务是静态的，所以我需要使用 vue SSG 渲染 SSR 的页面，使其成为静态页面。</p>
<p>但是这个过程中遇到了很多问题，唯独 router 和 SSR 的问题最为棘手。</p>
<h3 id="踩坑">踩坑</h3>
<p>在正常的 vue 项目中，我们可以使用 vue-router 来进行路由的管理。</p>
<p>这时我们使用官方的方法构造 main.ts 文件：</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;./views/Home.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;./views/About.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>, <span class="attr">component</span>: <span class="title class_">About</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>这样很好，路由也可以正常工作。</p>
<p>但是我们在使用 SSR 的时候，我们需要使用 SSG 的方法构造 main.ts 文件：</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ViteSSG</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vite-ssg&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> routes <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span> <span class="comment">// 确保你已经创建了 router 文件</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable constant_">ID_INJECTION_KEY</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// `export const createApp` is required instead of the original `createApp(App).mount(&#x27;#app&#x27;)`</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> createApp = <span class="title class_">ViteSSG</span>(</span><br><span class="line">    <span class="comment">// the root component</span></span><br><span class="line">    <span class="title class_">App</span>,</span><br><span class="line">    <span class="comment">// vue-router options</span></span><br><span class="line">    &#123; routes &#125;,</span><br><span class="line">    <span class="comment">// function to have custom setups</span></span><br><span class="line">    <span class="function">(<span class="params">&#123; app, router, routes, isClient, initialState &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// install plugins etc.</span></span><br><span class="line">        app.<span class="title function_">provide</span>(<span class="variable constant_">ID_INJECTION_KEY</span>, &#123;</span><br><span class="line">            <span class="attr">prefix</span>: <span class="number">100</span>,</span><br><span class="line">            <span class="attr">current</span>: <span class="number">0</span>,</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这个文件中，我使用了 <code>ID_INJECTION_KEY</code> 这个变量，这个变量是<code>element-plus</code>的一个插件，我在这里只是举例说明。</p>
</blockquote>
<p>并且，我们需要在 router 文件中不能使用 <code>createRouter</code> 方法</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// const router = createRouter(&#123;</span></span><br><span class="line"><span class="comment">//     history: createWebHistory(process.env.VUE_APP_BASE_URL),</span></span><br><span class="line"><span class="comment">//     routes</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// const isServer = typeof window === &#x27;undefined&#x27;;</span></span><br><span class="line"><span class="comment">// const history = isServer</span></span><br><span class="line"><span class="comment">//     ? createMemoryHistory(import.meta.env.BASE_URL)</span></span><br><span class="line"><span class="comment">//     : createWebHistory(import.meta.env.BASE_URL);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// const routerOptions = &#123;</span></span><br><span class="line"><span class="comment">//     history: history,</span></span><br><span class="line"><span class="comment">//     routes,</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// const router = createRouter(routerOptions);</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> routes</span><br></pre></td></tr></table></figure>
<p>可以看到，直接 <code>export default routes</code></p>
<p>然后运行 <code>vue-ssg</code> 的命令 <code>vite-ssg build</code>，然后我们会发现，运行直接报错。</p>
<p>我们需要在 <code>vite.config.ts</code> 文件中添加一些配置：</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;~/&#x27;</span>: <span class="string">`<span class="subst">$&#123;pathSrc&#125;</span>/`</span>,</span><br><span class="line">        <span class="comment">// 需要使用 ssg 编译时，要把 vue 的别名注释掉</span></span><br><span class="line">        <span class="string">&#x27;vue&#x27;</span>: <span class="string">&#x27;vue/dist/vue.esm-bundler.js&#x27;</span>,</span><br><span class="line">        <span class="string">&quot;@&quot;</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;src&#x27;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>这样就可以解决这个问题。</p>
<h2 id="TypeScript">TypeScript</h2>
<p>很久之前，我就开始使用 TypeScript 了，现在开了一个新的项目，使用了 Vue3 和 TypeScript。</p>
<p>故复习一遍，做一些记录。</p>
<hr>
<p>TypeScript 是 JavaScript 的超集，它可以编译成纯 JavaScript。TypeScript 是一种由微软开发的自由和开源的编程语言。</p>
<blockquote>
<p>TypeScript is a strongly typed programming language that builds on JavaScript, giving you better tooling at any scale.</p>
</blockquote>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cudHlwZXNjcmlwdGxhbmcub3JnL2RvY3MvaGFuZGJvb2svaW50cm8uaHRtbA==">TypeScript 官方文档<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="使用">使用</h3>
<p>在 Vue3 中，我们可以直接使用 TypeScript，不需要额外的配置。</p>
<hr>
<p>本地安装 TypeScript：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install -g typescript</span><br></pre></td></tr></table></figure>
<h3 id="类型推断">类型推断</h3>
<p>TypeScript 会根据你的代码，自动推断出类型。</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line">a = <span class="string">&#x27;1&#x27;</span>; <span class="comment">// Error: Type &#x27;string&#x27; is not assignable to type &#x27;number&#x27;.</span></span><br></pre></td></tr></table></figure>
<h3 id="类型注解">类型注解</h3>
<p>我们可以使用类型注解，来明确的告诉 TypeScript 变量的类型。</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">number</span> = <span class="number">1</span>;</span><br><span class="line">a = <span class="string">&#x27;1&#x27;</span>; <span class="comment">// Error: Type &#x27;string&#x27; is not assignable to type &#x27;number&#x27;.</span></span><br></pre></td></tr></table></figure>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="built_in">number</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> result = <span class="built_in">number</span>.<span class="title function_">find</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item &gt; <span class="number">2</span>);</span><br><span class="line">result * <span class="number">2</span>; <span class="comment">// Error: Object is possibly &#x27;undefined&#x27;.</span></span><br></pre></td></tr></table></figure>
<p>如果把第2行改成：</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> result = <span class="built_in">number</span>.<span class="title function_">find</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item &gt; <span class="number">2</span>) <span class="keyword">as</span> <span class="built_in">number</span>;</span><br></pre></td></tr></table></figure>
<p>这样就不会报错了。</p>
<h3 id="基础类型以及联合类型">基础类型以及联合类型</h3>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">v1</span>: <span class="built_in">string</span> = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">v2</span>: <span class="built_in">number</span> = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">v3</span>: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">v4</span>: <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">v5</span>: <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">v6</span>: <span class="built_in">symbol</span> = <span class="title class_">Symbol</span>(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="attr">v7</span>: <span class="built_in">bigint</span> = <span class="number">100n</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">v8</span>: <span class="built_in">string</span> | <span class="built_in">number</span> = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line">v8 = <span class="number">123</span>;</span><br></pre></td></tr></table></figure>
<h3 id="数组">数组</h3>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">arr1</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr2</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br></pre></td></tr></table></figure>
<h4 id="元组">元组</h4>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">tuple</span>: [<span class="built_in">string</span>, <span class="built_in">number</span>] = [<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>];</span><br></pre></td></tr></table></figure>
<h3 id="枚举">枚举</h3>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Color</span> &#123;</span><br><span class="line">    <span class="title class_">Red</span>,</span><br><span class="line">    <span class="title class_">Green</span>,</span><br><span class="line">    <span class="title class_">Blue</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">c</span>: <span class="title class_">Color</span> = <span class="title class_">Color</span>.<span class="property">Green</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Color</span>[<span class="number">1</span>]); <span class="comment">// Green</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Color</span>[<span class="string">&#x27;Green&#x27;</span>]); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<h4 id="void">void</h4>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">log</span>(<span class="params"><span class="attr">message</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span></span><br></pre></td></tr></table></figure>
<p>void 表示没有任何类型，通常用于函数没有返回值。</p>
<h3 id="函数">函数</h3>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"><span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span></span>): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="接口">接口</h3>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">person</span>: <span class="title class_">Person</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Tom&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printPerson</span>(<span class="params"><span class="attr">person</span>: <span class="title class_">Person</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>, person.<span class="property">age</span>);</span><br><span class="line">&#125;<span class="comment">// Tom 18</span></span><br></pre></td></tr></table></figure>
<h3 id="Type">Type</h3>
<p>type 是 TypeScript 的一个关键字，用来定义类型别名。</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">UserName</span> = <span class="built_in">string</span> | <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">name</span>: <span class="title class_">UserName</span> = <span class="string">&#x27;Tom&#x27;</span>;</span><br><span class="line">name = <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure>
<h3 id="泛型">泛型</h3>
<p>泛型是 TypeScript 的一个重要特性，它可以让我们在定义函数、接口、类的时候，可以使用任意类型。</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> myFn &lt;T&gt;(<span class="attr">arg</span>: T): T &#123;</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = myFn&lt;<span class="built_in">string</span>&gt;(<span class="string">&#x27;Hello&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// Hello</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>这里的 T 是一个占位符，可以是任意类型。这个例子中，我们使用了泛型来定义一个函数，这个函数接受一个参数，返回这个参数。</p>
</blockquote>
]]></content>
      <categories>
        <category>AdvancedWeb</category>
      </categories>
  </entry>
  <entry>
    <title>让 Github Page 使用 eu.org 域名</title>
    <url>/2024/02/16/1/</url>
    <content><![CDATA[<h2 id="让-Github-Page-使用-eu-org-域名">让 Github Page 使用 <span class="exturl" data-url="aHR0cDovL2V1Lm9yZw==">eu.org<i class="fa fa-external-link-alt"></i></span> 域名</h2>
<p>目前，由于受到 DNS 污染以及 SNI 阻断，大陆地区的用户访问 Github Page 会遇到很多问题。</p>
<p>这让我不得不寻找一种替代方案，让我能够让我的网站能够被大陆地区的用户访问。</p>
<h2 id="注册-eu-org-域名">注册 <span class="exturl" data-url="aHR0cDovL2V1Lm9yZw==">eu.org<i class="fa fa-external-link-alt"></i></span> 域名</h2>
<p>访问 <span class="exturl" data-url="aHR0cHM6Ly9ldS5vcmc=">eu.org<i class="fa fa-external-link-alt"></i></span> 注册一个域名，这网上教程很多，这里不再赘述。</p>
<p>注意的是大陆地区的用户可能要花费很长时间才能收到注册成功的邮件。根据网上网友的反馈，大约是 2个月到1年不等。</p>
<p>我的是 3 个月左右收到的邮件。</p>
<h2 id="配置-DNS">配置 DNS</h2>
<p>在 <span class="exturl" data-url="aHR0cDovL2V1Lm9yZw==">eu.org<i class="fa fa-external-link-alt"></i></span> 网站上，找到你注册的域名，然后配置 DNS。</p>
<h3 id="HOSTRY">HOSTRY</h3>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuaG9zdHJ5LmNvbS8=">HOSTRY<i class="fa fa-external-link-alt"></i></span> 是一个免费的 DNS 服务商，注册一个账号，然后添加域名。</p>
<p>但是，这只是用于初步测试的</p>
<p>在 <span class="exturl" data-url="aHR0cDovL2V1Lm9yZw==">eu.org<i class="fa fa-external-link-alt"></i></span> 网站上，找到你注册的域名，然后配置 DNS。</p>
<h3 id="Github-Page">Github Page</h3>
<p>在你的 Github Page 仓库中，找到 <code>Settings</code> -&gt; <code>Pages</code> -&gt; <code>Custom domain</code>，然后输入你的域名。</p>
<p><mark>这个域名需要有前缀 <code>www</code>，例如 <code>www.example.eu.org</code>。</mark></p>
<h3 id="CLOUDFLARE">CLOUDFLARE</h3>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY2xvdWRmbGFyZS5jb20v">Cloudflare<i class="fa fa-external-link-alt"></i></span> 是一个免费的 DNS 服务商，注册一个账号，然后添加域名。</p>
<p>这个的作用是，你的域名需要有一个 DNS 服务器，这个服务器会解析你的域名，然后指向你的 Github Page。</p>
<p>在这里，你需要添加 A 记录、AAAA 记录、CNAME 记录。</p>
<h4 id="1-添加-A-记录">1. 添加 A 记录</h4>
<p>在 Cloudflare 上，添加 A 记录，指向 Github Page 的 IP 地址。</p>
<h4 id="2-添加-AAAA-记录">2. 添加 AAAA 记录</h4>
<p>在 Cloudflare 上，添加 AAAA 记录，指向 Github Page 的 IP 地址。</p>
<h4 id="3-添加-CNAME-记录">3. 添加 CNAME 记录</h4>
<p>在 Cloudflare 上，添加 CNAME 记录，指向你的 Github Page。</p>
<h3 id="eg">eg</h3>
<p><img src="./clouldflare-record.png" alt></p>
<blockquote>
<p>这些 ipv4 和 ipv6 地址是 Github Page 的地址，你可以在 Github Page 的文档中找到。</p>
</blockquote>
<h3 id="等待">等待</h3>
<p>等待一段时间，然后访问你的域名，如果能访问你的 Github Page，那么就成功了。</p>
<h2 id="安全性">安全性</h2>
<p>这里需要注意的是，你的域名需要使用 HTTPS，这样才能保证你的网站的安全性。</p>
<p>所以我们需要在 Cloudflare 上配置一些东西。</p>
<h3 id="DNS">DNS</h3>
<p>这里，我们让 Cloudflare 代理我们的域名，这样我们的域名就能使用 HTTPS。</p>
<h3 id="SSL-TLS">SSL/TLS</h3>
<p>在 Cloudflare 上，找到 <code>SSL/TLS</code>，然后配置 <code>Full</code>。</p>
<p>边缘证书需要配置 <code>始终使用 HTTPS</code>、<code>随机加密</code>、<code>LTS 1.3</code>、<code>自动 HTTPS 重写</code>。</p>
<p>源服务器证书需要配置 <code>经过身份验证的源服务器拉取</code>。</p>
<h2 id="问题">问题</h2>
<p>我在这里遇到了一个问题，就是 Github Page 无法强制使用 HTTPS。</p>
<p>这个问题我还没有解决，如果有人知道，希望能够告诉我。</p>
<p><img src="./githubpage-settings.png" alt></p>
<p>此外，出于某些原因，例如 CORS 策略问题，我不得不将 Cloudflare 的安全性设置为 <code>低</code>，并且关闭<code>浏览器完整性检查</code>。</p>
<h3 id="24年3月25日更新">24年3月25日更新</h3>
<p>需要把 Cloudflare DNS 的代理模式设置为 DNS only，这样 Github Page 才能强制使用 HTTPS。</p>
<p>但是其实无所谓了，使用 Cloudflare 的代理模式，也能够使用 HTTPS。</p>
<p>因为是基于 Github Page 的，所以也没办法在服务器上安装证书，Cloudflare 也只能使用 完全 SSL/TLS。</p>
<h3 id="24年5月9日更新">24年5月9日更新</h3>
<p>大约在4月中旬的时候，我发现我的域名无法访问了，然后利用网路上的gfw检测工具，发现我的域名被墙了。</p>
<p>然后神奇的是，这个好像只是地区性的，有的地区可以访问，有的地区无法访问。但是并没有被污染。</p>
<p>并在在5月初的时候，我发现我的域名可以访问了。</p>
<p>这个防火墙，把我气笑了。</p>
<h2 id="参考">参考</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cubW9kYi5wcm8vZGIvNTE0MDQy">免费注册申请永久的eu.org顶级域名创建属于自己的域名,再也不用给博客域名续费了!<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmdpdGh1Yi5jb20vemgvcGFnZXMvY29uZmlndXJpbmctYS1jdXN0b20tZG9tYWluLWZvci15b3VyLWdpdGh1Yi1wYWdlcy1zaXRlL21hbmFnaW5nLWEtY3VzdG9tLWRvbWFpbi1mb3IteW91ci1naXRodWItcGFnZXMtc2l0ZQ==">管理 GitHub Pages 站点的自定义域<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h2 id="24年12月9日更新">24年12月9日更新</h2>
<h3 id="Cloudflare访问速率限制">Cloudflare访问速率限制</h3>
<p>进入域名，找到 防火墙 &gt; WAF &gt; 访问速率限制，然后配置。</p>
<p><img src="./rate-limit.png" alt></p>
<h3 id="CloudFlare-解决-CORS-跨域问题">CloudFlare 解决 CORS 跨域问题</h3>
<p>规则 &gt; 转换规则 &gt; 修改相应头</p>
<p><img src="./responseheader.png" alt></p>
<p>参考 <span class="exturl" data-url="aHR0cHM6Ly9ibG9nLjE3bGFpLnNpdGUvcG9zdHMvNTMxMWI2MTkvI2Nsb3VkZmxhcmUtUGFnZXMtJUU5JTgzJUE4JUU3JUJEJUIy">基于Hexo的matery主题搭建博客增强部署篇4<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <tags>
        <tag>分享</tag>
      </tags>
  </entry>
  <entry>
    <title>软件工程-测试</title>
    <url>/2024/02/11/1/</url>
    <content><![CDATA[<h2 id="软件测试">软件测试</h2>
<p>为什么要测试？因为软件可能有缺陷，而缺陷可能导致软件无法正常工作。软件测试的目的是发现缺陷，以便修复缺陷。</p>
<p>测试的完整的定义是：测试是一个过程，这个过程中，我们发现了软件的缺陷。</p>
<p>所以，软件测试是发现缺陷的过程。</p>
<p>软件测试应该贯穿整个软件开发的周期。</p>
<h2 id="软件测试的原则">软件测试的原则</h2>
<ol>
<li class="lvl-3">
<p>完全测试是不可能的。</p>
</li>
<li class="lvl-3">
<p>测试存在风险，没有十全十美的测试方法</p>
</li>
<li class="lvl-3">
<p>软件测试只能表明缺陷的存在，不能表明缺陷的不存在</p>
</li>
<li class="lvl-3">
<p>软件产品中潜在的错误数与已发现的错误数成正比（集群现象）</p>
</li>
<li class="lvl-3">
<p>让不同的人进行测试（杀虫剂效应）</p>
</li>
<li class="lvl-3">
<p>开发与测试应该分离</p>
</li>
<li class="lvl-3">
<p>尽早不断地测试，应使测试贯穿整个软件开发周期</p>
</li>
<li class="lvl-3">
<p>设计测试用例时，应该考虑边界条件，特殊输入和错误输入（健壮性测试）</p>
</li>
<li class="lvl-3">
<p>集中测试容易出错或者错误较多的模块（80/20原则）</p>
</li>
<li class="lvl-4">
<p>长期保留测试用例</p>
</li>
</ol>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vc2FzYW4vcC82ODg4MDM4Lmh0bWw=">软件测试中的80/20原则<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9uYW9kZW5nLmNvbS5jbi96aC9wb3N0cy9vdGhlcnMvODAtMjAtcnVsZS8=">软件研发质量中的二八法则<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h2 id="软件测试模型">软件测试模型</h2>
<p>一个模型应该阐述6个方面：</p>
<ol>
<li class="lvl-3">
<p>测试时间</p>
</li>
<li class="lvl-3">
<p>测试步骤</p>
</li>
<li class="lvl-3">
<p>计划测试</p>
</li>
<li class="lvl-3">
<p>不同阶段中应该关注的测试对象</p>
</li>
<li class="lvl-3">
<p>测试过程中应该考虑哪些问题</p>
</li>
<li class="lvl-3">
<p>测试的目标</p>
</li>
</ol>
<p>常用的有 V 模型、W 模型、敏捷模型、螺旋模型、瀑布模型。</p>
<h2 id="测试用例">测试用例</h2>
<p>测试用例是一组输入、执行条件和预期结果的集合。测试用例是一个测试计划的基本单元。</p>
<p>测试用例 = 测试数据 + 测试环境 + 预期结果</p>
<p>测试结果 = 测试数据 + 实际结果 + 预期结果</p>
<p><strong>一个好的测试用例能够发现缺陷，而且能够重现缺陷。</strong></p>
<h2 id="软件测试方法">软件测试方法</h2>
<h3 id="静态分析方法（人工测试）">静态分析方法（人工测试）</h3>
<p>静态分析方法是指在程序运行之前对程序进行检查的方法。</p>
<ol>
<li class="lvl-3">
<p>桌前测试（自检）指的是程序员自己检查自己的代码。</p>
</li>
<li class="lvl-3">
<p>代码会审代码会审是一种由多个人参与的代码检查方法。</p>
</li>
<li class="lvl-3">
<p>代码走查是一种非正式的代码检查方法，由多名测试人员模拟程序的执行过程，发现程序中的缺陷。</p>
</li>
</ol>
<h3 id="动态测试方法（自动测试）">动态测试方法（自动测试）</h3>
<p>选择适当的测试用例，运行程序，观察程序的行为，以发现程序中的缺陷。</p>
<ol>
<li class="lvl-3">
<p>黑盒测试（功能测试）黑盒测试是一种测试方法，它只关心程序的输入和输出，而不关心程序的内部结构。</p>
</li>
<li class="lvl-3">
<p>白盒测试白盒测试是一种测试方法，它关心程序的内部结构，以发现程序中的缺陷。</p>
</li>
</ol>
<h2 id="黑盒测试">黑盒测试</h2>
<h3 id="等价类划分">等价类划分</h3>
<p>等价类划分是一种黑盒测试方法，它将输入数据划分为若干个等价类，然后从每个等价类中选择一个测试用例。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>有效等价类：有效等价类是指输入数据的一个子集，这个子集包含了程序的一个有效输入。</p>
</li>
<li class="lvl-2">
<p>无效等价类：无效等价类是指输入数据的一个子集，这个子集包含了程序的一个无效输入。</p>
</li>
</ul>
<p>等价类划分的步骤：</p>
<ol>
<li class="lvl-3">
<p>确定输入数据的等价类。</p>
</li>
<li class="lvl-3">
<p>选择测试用例。</p>
</li>
</ol>
<h4 id="等价划分法分类的启发式规则">等价划分法分类的启发式规则</h4>
<ol>
<li class="lvl-3">
<p>如果输入数据是一个范围，那么等价类划分法的启发式规则是：选择范围的边界值。</p>
</li>
<li class="lvl-3">
<p>如果输入数据是一个集合，那么等价类划分法的启发式规则是：选择集合的最小值和最大值。</p>
</li>
<li class="lvl-3">
<p>如果输入数据是一个布尔值，那么等价类划分法的启发式规则是：选择真和假。</p>
</li>
<li class="lvl-3">
<p>如果输入数据是一个字符串，那么等价类划分法的启发式规则是：选择字符串的最小长度和最大长度。</p>
</li>
</ol>
<p>etc…</p>
<h3 id="边界值分析">边界值分析</h3>
<p>边界值分析是一种黑盒测试方法，它将输入数据的边界值作为测试用例。</p>
<p>取值范围的边界值是指取值范围的最小值、最大值和最小值与最大值之间的值。</p>
<p>应当遵循的原则：</p>
<ol>
<li class="lvl-3">
<p>如果输入数据的取值范围是有限的，那么边界值分析的测试用例应该包括取值范围的边界值。</p>
</li>
<li class="lvl-3">
<p>如果输入数据的取值范围是无限的，那么边界值分析的测试用例应该包括取值范围的边界值和取值范围的边界值附近的值。</p>
</li>
</ol>
<p>边界值分析的步骤：</p>
<ol>
<li class="lvl-3">
<p>确定输入数据的边界值。</p>
</li>
<li class="lvl-3">
<p>选择测试用例。</p>
</li>
</ol>
<h3 id="因果图">因果图</h3>
<p>因果图是一种黑盒测试方法，它将程序的输入和输出之间的因果关系表示为一个图。</p>
<p>因果图有 4 个符号：恒等符号、逻辑与符号、逻辑或符号、逻辑非符号。</p>
<p>从输入、输出考虑，有 以下约束条件：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>E（互斥）</p>
</li>
<li class="lvl-2">
<p>I（包含）</p>
</li>
<li class="lvl-2">
<p>O（唯一）</p>
</li>
<li class="lvl-2">
<p>R（要求）</p>
</li>
<li class="lvl-2">
<p>M （强制/屏蔽）</p>
</li>
</ul>
<h3 id="决策表">决策表</h3>
<p>决策表是一种黑盒测试方法，它将程序的输入和输出之间的因果关系表示为一个表。</p>
<p>决策表的组成部分：</p>
<ol>
<li class="lvl-3">
<p>条件</p>
</li>
<li class="lvl-3">
<p>动作</p>
</li>
<li class="lvl-3">
<p>条件的取值</p>
</li>
<li class="lvl-3">
<p>动作的取值</p>
</li>
</ol>
<p>决策表的步骤：</p>
<ol>
<li class="lvl-3">
<p>确定条件和动作。</p>
</li>
<li class="lvl-3">
<p>确定条件的取值。</p>
</li>
<li class="lvl-3">
<p>确定动作的取值。</p>
</li>
<li class="lvl-3">
<p>选择测试用例。</p>
</li>
</ol>
<h3 id="场景法">场景法</h3>
<p>场景法是一种黑盒测试方法，它将程序的输入和输出之间的因果关系表示为一个场景。</p>
<p>基本流：是指程序的正常执行流程。最简单路径，表示程序的正常执行流程。</p>
<p>备选流：是指程序的异常执行流程。程序的异常执行流程有多条，每条异常执行流程都是一个备选流。</p>
<h2 id="白盒测试">白盒测试</h2>
<p>白盒测试，也叫玻璃盒测试，它关注的是程序内部的逻辑结构，是基于程序内部结构的测试。白盒测试的目的是检查程序的内部结构，以验证程序是否按照设计要求正确执行。白盒测试的主要任务是设计测试用例，以检查程序的内部逻辑结构是否正确。</p>
<h3 id="逻辑覆盖">逻辑覆盖</h3>
<p>逻辑覆盖是白盒测试的一种测试方法，以程序内在的逻辑结构为依据，设计测试用例，以检查程序的内部逻辑结构是否正确。逻辑覆盖主要有以下几种：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>语句覆盖：要求每个语句至少被执行一次。</p>
</li>
<li class="lvl-2">
<p>判定覆盖：要求每个判定的每个分支至少被执行一次。</p>
</li>
<li class="lvl-2">
<p>条件覆盖：要求每个判定的每个条件的每个取值至少被执行一次。</p>
</li>
<li class="lvl-2">
<p>判定/条件覆盖：要求每个判定的每个条件的每个取值至少被执行一次，且每个判定的每个分支至少被执行一次。</p>
</li>
<li class="lvl-2">
<p>条件组合覆盖：要求每个判定的每个条件的每个取值至少被执行一次，且每个判定的每个条件的每个组合至少被执行一次。</p>
</li>
<li class="lvl-2">
<p>路径覆盖：要求每个可能的路径至少被执行一次。</p>
</li>
</ul>
<h3 id="基本路径测试">基本路径测试</h3>
<p>基本路径测试是白盒测试的一种测试方法，它是一种结构化测试方法，是基于程序的内部结构的测试。基本路径测试的目的是检查程序的内部逻辑结构是否正确。基本路径测试的主要任务是设计测试用例，以检查程序的内部逻辑结构是否正确。</p>
<h3 id="控制流图">控制流图</h3>
<p>控制流图是一种图形化的表示程序的内部逻辑结构的方法，它是一种结构化的表示程序的内部逻辑结构的方法。控制流图的节点表示程序的基本块，边表示程序的控制流。控制流图的目的是帮助程序员理解程序的内部逻辑结构，以便设计测试用例。</p>
<h3 id="调试">调试</h3>
<p>调试是一种发现程序错误的方法，它是一种发现程序错误的方法。调试的目的是发现程序的错误，以便修正程序的错误。调试的主要任务是发现程序的错误，以便修正程序的错误。</p>
<h4 id="调试工具">调试工具</h4>
<p>调试工具是一种帮助程序员发现程序错误的工具，它是一种帮助程序员发现程序错误的工具。调试工具的目的是帮助程序员发现程序的错误，以便修正程序的错误。调试工具的主要任务是帮助程序员发现程序的错误，以便修正程序的错误。</p>
]]></content>
      <categories>
        <category>SoftwareEngineering</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Csharp-04</title>
    <url>/2024/02/07/1/</url>
    <content><![CDATA[<h2 id="DLL">DLL</h2>
<p>DLL（Dynamic Link Library）是动态链接库的缩写。它是一种包含可供程序调用的函数和数据的文件。DLL 文件可以包含多个函数，这些函数可以被多个程序调用。DLL 文件的扩展名是 .dll。</p>
<h3 id="创建-DLL">创建 DLL</h3>
<ol>
<li class="lvl-3">
<p>新建一个类库项目。</p>
</li>
<li class="lvl-3">
<p>在类库项目中添加类。</p>
</li>
<li class="lvl-3">
<p>在类库项目中编写类的代码。</p>
</li>
<li class="lvl-3">
<p>在类库项目中编译代码。</p>
</li>
<li class="lvl-3">
<p>在类库项目的输出目录中找到编译后的 DLL 文件。</p>
</li>
</ol>
<h3 id="使用-DLL">使用 DLL</h3>
<ol>
<li class="lvl-3">
<p>在项目中添加引用。</p>
</li>
<li class="lvl-3">
<p>在项目中使用引用的类。</p>
</li>
</ol>
<p>比如，我需要引用一个 <code>example.dll</code> 文件，我可以在项目中添加引用，然后使用引用的类。</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> Example;</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="文件操作">文件操作</h2>
<h3 id="文件读取">文件读取</h3>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> path = <span class="string">&quot;example.txt&quot;</span>;</span><br><span class="line">        <span class="built_in">string</span> content = File.ReadAllText(path);</span><br><span class="line">        Console.WriteLine(content);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="文件写入">文件写入</h3>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> path = <span class="string">&quot;example.txt&quot;</span>;</span><br><span class="line">        <span class="built_in">string</span> content = <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">        File.WriteAllText(path, content);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="文件追加">文件追加</h3>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> path = <span class="string">&quot;example.txt&quot;</span>;</span><br><span class="line">        <span class="built_in">string</span> content = <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">        File.AppendAllText(path, content);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="文件删除">文件删除</h3>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> path = <span class="string">&quot;example.txt&quot;</span>;</span><br><span class="line">        File.Delete(path);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="e-g">e.g</h3>
<p>编写一个程序，读取一个文件，然后将文件内容倒序写入另一个文件，比如 <code>example.txt</code> 内容为 <code>Hello, World!</code>，则 <code>example-reverse.txt</code> 内容为 <code>!dlroW ,olleH</code>。</p>
<ol>
<li class="lvl-3">
<p>创建 example.txt 文件。</p>
</li>
<li class="lvl-3">
<p>给 example.txt 写入内容为 `Hello, World!</p>
</li>
<li class="lvl-3">
<p>读取 example.txt 文件。</p>
</li>
<li class="lvl-3">
<p>将读取的内容打印到控制台。</p>
</li>
<li class="lvl-3">
<p>将读取的内容倒序写入 example-reverse.txt 文件。</p>
</li>
<li class="lvl-3">
<p>查看 example-reverse.txt 文件。</p>
</li>
<li class="lvl-3">
<p>删除 example.txt 和 example-reverse.txt 文件。</p>
</li>
</ol>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> path = <span class="string">&quot;example.txt&quot;</span>;</span><br><span class="line">        <span class="built_in">string</span> content = <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">        File.WriteAllText(path, content);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">string</span> readContent = File.ReadAllText(path);</span><br><span class="line">        Console.WriteLine(readContent);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">string</span> reverseContent = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = readContent.Length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            reverseContent += readContent[i];</span><br><span class="line">        &#125;</span><br><span class="line">        File.WriteAllText(<span class="string">&quot;example-reverse.txt&quot;</span>, reverseContent);</span><br><span class="line"></span><br><span class="line">        File.Delete(path);</span><br><span class="line">        File.Delete(<span class="string">&quot;example-reverse.txt&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="其他文件操作">其他文件操作</h3>
<blockquote>
<p>文件操作类 <code>File</code>。</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>File.Copy</code> 复制文件。</p>
</li>
<li class="lvl-2">
<p><code>File.Move</code> 移动文件。</p>
</li>
<li class="lvl-2">
<p><code>File.Exists</code> 判断文件是否存在。</p>
</li>
<li class="lvl-2">
<p><code>File.GetCreationTime</code> 获取文件创建时间。</p>
</li>
<li class="lvl-2">
<p><code>File.GetLastAccessTime</code> 获取文件最后访问时间。</p>
</li>
<li class="lvl-2">
<p><code>File.GetLastWriteTime</code> 获取文件最后写入时间。</p>
</li>
</ul>
<blockquote>
<p>获取文件夹内容可以使用 <code>Directory</code> 类。</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>Directory.GetFiles</code> 获取文件夹中的文件。</p>
</li>
<li class="lvl-2">
<p><code>Directory.GetDirectories</code> 获取文件夹中的文件夹。</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Csharp</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Csharp-03</title>
    <url>/2024/01/31/1/</url>
    <content><![CDATA[<h2 id="错误处理">错误处理</h2>
<p>如果程序中出现了错误，就会抛出异常。如果没有处理异常，程序就会终止。</p>
<h3 id="try-catch">try-catch</h3>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 可能会出现异常的代码</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (Exception ex)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 出现异常时执行的代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="finally">finally</h3>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 可能会出现异常的代码</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (Exception ex)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 出现异常时执行的代码</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">finally</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 不管是否出现异常都会执行的代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="throw">throw</h3>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 可能会出现异常的代码</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">&quot;自定义异常&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (Exception ex)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 出现异常时执行的代码</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">finally</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 不管是否出现异常都会执行的代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="自定义异常">自定义异常</h3>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MyException</span> : <span class="title">Exception</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyException</span>(<span class="params"><span class="built_in">string</span> message</span>) : <span class="title">base</span>(<span class="params">message</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="e-g-除数为-0-时会抛出异常">e.g.  除数为 0 时会抛出异常</h3>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">int</span> b = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">int</span> c = a / b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (Exception ex)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(ex.Message);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">finally</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;finally&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="OOP">OOP</h2>
<p>在面向对象编程中，类是一种模板，用于创建对象。对象是类的实例。</p>
<p>面向对象是一种思想，它将对象作为程序的基本单元，将程序和数据封装在对象中。</p>
<p>我学习了很多门语言了，故我对面向对象编程有了一定的了解。</p>
<p>不再赘述。</p>
<h2 id="类">类</h2>
<h3 id="定义类">定义类</h3>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> name;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> age;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SayHello</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="创建对象">创建对象</h3>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">Person p = <span class="keyword">new</span> Person();</span><br><span class="line">p.name = <span class="string">&quot;Tom&quot;</span>;</span><br><span class="line">p.age = <span class="number">20</span>;</span><br><span class="line">p.SayHello();</span><br></pre></td></tr></table></figure>
<h3 id="构造函数">构造函数</h3>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> name;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> age;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>(<span class="params"><span class="built_in">string</span> name, <span class="built_in">int</span> age</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SayHello</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Static">Static</h2>
<p>静态成员属于类，而不属于类的实例。静态成员在类加载时就会被初始化。</p>
<h3 id="静态字段">静态字段</h3>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> count;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>e.g.</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">Person p1 = <span class="keyword">new</span> Person();</span><br><span class="line">Person p2 = <span class="keyword">new</span> Person();</span><br><span class="line">Console.WriteLine(Person.count);</span><br></pre></td></tr></table></figure>
<h3 id="静态方法">静态方法</h3>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SayHello</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>e.g.</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">Person.SayHello();</span><br></pre></td></tr></table></figure>
<h2 id="代码抽离">代码抽离</h2>
<h3 id="命名空间">命名空间</h3>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">MyNamespace</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">MyClass</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="引用命名空间">引用命名空间</h3>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> MyNamespace;</span><br></pre></td></tr></table></figure>
<h3 id="e-g">e.g.</h3>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">MyNamespace</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">MyClass</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SayHello</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        MyClass mc = <span class="keyword">new</span> MyClass();</span><br><span class="line">        mc.SayHello();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Csharp</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Csharp-02</title>
    <url>/2024/01/29/1/</url>
    <content><![CDATA[<h2 id="方法">方法</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>方法的声明</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 无返回值无参数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Method1</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;Method1&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 无返回值有参数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Method2</span>(<span class="params"><span class="built_in">int</span> a</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 有返回值无参数</span></span><br><span class="line"><span class="function"><span class="built_in">int</span> <span class="title">Method3</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 有返回值有参数</span></span><br><span class="line"><span class="function"><span class="built_in">int</span> <span class="title">Method4</span>(<span class="params"><span class="built_in">int</span> a</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>方法的调用</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 无返回值无参数</span></span><br><span class="line">Method1();</span><br><span class="line"><span class="comment">// 无返回值有参数</span></span><br><span class="line">Method2(<span class="number">1</span>);</span><br><span class="line"><span class="comment">// 有返回值无参数</span></span><br><span class="line"><span class="built_in">int</span> a = Method3();</span><br><span class="line"><span class="comment">// 有返回值有参数</span></span><br><span class="line"><span class="built_in">int</span> b = Method4(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>方法的重载</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 无返回值无参数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Method1</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;Method1&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 无返回值有参数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Method1</span>(<span class="params"><span class="built_in">int</span> a</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 有返回值无参数</span></span><br><span class="line"><span class="function"><span class="built_in">int</span> <span class="title">Method1</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 有返回值有参数</span></span><br><span class="line"><span class="function"><span class="built_in">int</span> <span class="title">Method1</span>(<span class="params"><span class="built_in">int</span> a</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>方法的参数</p>
<ul class="lvl-2">
<li class="lvl-4">
<p>值参数</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Method1</span>(<span class="params"><span class="built_in">int</span> a</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-4">
<p>引用参数</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Method1</span>(<span class="params"><span class="keyword">ref</span> <span class="built_in">int</span> a</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-4">
<p>输出参数</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Method1</span>(<span class="params"><span class="keyword">out</span> <span class="built_in">int</span> a</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    a = <span class="number">1</span>;</span><br><span class="line">    Console.WriteLine(a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-4">
<p>可选参数</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Method1</span>(<span class="params"><span class="built_in">int</span> a = <span class="number">1</span></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-4">
<p>参数数组</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Method1</span>(<span class="params"><span class="keyword">params</span> <span class="built_in">int</span>[] a</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="built_in">int</span> i <span class="keyword">in</span> a)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li class="lvl-2">
<p>方法的修饰符</p>
<ul class="lvl-2">
<li class="lvl-4">public：公开的</li>
<li class="lvl-4">private：私有的</li>
<li class="lvl-4">internal：内部的</li>
<li class="lvl-4">protected：受保护的</li>
<li class="lvl-4">static：静态的</li>
<li class="lvl-4">virtual：虚方法</li>
<li class="lvl-4">override：重写方法</li>
<li class="lvl-4">abstract：抽象方法</li>
<li class="lvl-4">sealed：密封方法</li>
<li class="lvl-4">extern：外部方法</li>
</ul>
</li>
</ul>
<h2 id="类">类</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>类的声明</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> name;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> age;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Say</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;name: &quot;</span> + name + <span class="string">&quot;, age: &quot;</span> + age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>类的实例化</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">Person p = <span class="keyword">new</span> Person();</span><br><span class="line">p.name = <span class="string">&quot;张三&quot;</span>;</span><br><span class="line">p.age = <span class="number">18</span>;</span><br><span class="line">p.Say();</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>类的访问修饰符</p>
<ul class="lvl-2">
<li class="lvl-4">public：公开的</li>
<li class="lvl-4">private：私有的</li>
<li class="lvl-4">internal：内部的</li>
<li class="lvl-4">protected：受保护的</li>
</ul>
</li>
<li class="lvl-2">
<p>类的成员修饰符</p>
<ul class="lvl-2">
<li class="lvl-4">static：静态的</li>
<li class="lvl-4">virtual：虚方法</li>
<li class="lvl-4">override：重写方法</li>
<li class="lvl-4">abstract：抽象方法</li>
<li class="lvl-4">sealed：密封方法</li>
<li class="lvl-4">extern：外部方法</li>
</ul>
</li>
<li class="lvl-2">
<p>类的构造函数</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> name;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> age;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Person&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>(<span class="params"><span class="built_in">string</span> name</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Person: &quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>(<span class="params"><span class="built_in">string</span> name, <span class="built_in">int</span> age</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Person: &quot;</span> + name + <span class="string">&quot;, &quot;</span> + age);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Say</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;name: &quot;</span> + name + <span class="string">&quot;, age: &quot;</span> + age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>类的析构函数</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> name;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> age;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Person&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>(<span class="params"><span class="built_in">string</span> name</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Person: &quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>(<span class="params"><span class="built_in">string</span> name, <span class="built_in">int</span> age</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Person: &quot;</span> + name + <span class="string">&quot;, &quot;</span> + age);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Say</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;name: &quot;</span> + name + <span class="string">&quot;, age: &quot;</span> + age);</span><br><span class="line">    &#125;</span><br><span class="line">    ~Person()</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;析构 Person&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="结构体">结构体</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>结构体的声明</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> Person</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> name;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> age;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Say</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;name: &quot;</span> + name + <span class="string">&quot;, age: &quot;</span> + age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>结构体的实例化</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">Person p = <span class="keyword">new</span> Person();</span><br><span class="line">p.name = <span class="string">&quot;张三&quot;</span>;</span><br><span class="line">p.age = <span class="number">18</span>;</span><br><span class="line">p.Say();</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>结构体的访问修饰符</p>
<ul class="lvl-2">
<li class="lvl-4">public：公开的</li>
<li class="lvl-4">private：私有的</li>
<li class="lvl-4">internal：内部的</li>
<li class="lvl-4">protected：受保护的</li>
</ul>
</li>
<li class="lvl-2">
<p>结构体的成员修饰符</p>
<ul class="lvl-2">
<li class="lvl-4">static：静态的</li>
<li class="lvl-4">virtual：虚方法</li>
<li class="lvl-4">override：重写方法</li>
<li class="lvl-4">abstract：抽象方法</li>
<li class="lvl-4">sealed：密封方法</li>
<li class="lvl-4">extern：外部方法</li>
</ul>
</li>
<li class="lvl-2">
<p>结构体的构造函数</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> Person</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> name;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> age;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>(<span class="params"><span class="built_in">string</span> name</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Person: &quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>(<span class="params"><span class="built_in">string</span> name, <span class="built_in">int</span> age</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Person: &quot;</span> + name + <span class="string">&quot;, &quot;</span> + age);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Say</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;name: &quot;</span> + name + <span class="string">&quot;, age: &quot;</span> + age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>结构体的析构函数</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> Person</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> name;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> age;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>(<span class="params"><span class="built_in">string</span> name</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Person: &quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>(<span class="params"><span class="built_in">string</span> name, <span class="built_in">int</span> age</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Person: &quot;</span> + name + <span class="string">&quot;, &quot;</span> + age);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Say</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;name: &quot;</span> + name + <span class="string">&quot;, age: &quot;</span> + age);</span><br><span class="line">    &#125;</span><br><span class="line">    ~Person()</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;析构 Person&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
]]></content>
      <categories>
        <category>Csharp</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Csharp-01</title>
    <url>/2024/01/25/1/</url>
    <content><![CDATA[<h2 id="开发环境以及-IDE-的使用">开发环境以及 IDE 的使用</h2>
<p>IDE：Visual Studio 2022</p>
<p>选择工作负荷：.NET 桌面开发</p>
<h3 id="创建一个控制台应用程序">创建一个控制台应用程序</h3>
<ol>
<li class="lvl-3">
<p>打开 Visual Studio 2022</p>
</li>
<li class="lvl-3">
<p>选择“创建新项目”</p>
</li>
<li class="lvl-3">
<p>选择“控制台应用程序 (.NET Framework)”</p>
</li>
<li class="lvl-3">
<p>填写项目名称</p>
</li>
<li class="lvl-3">
<p>点击“创建”</p>
</li>
</ol>
<blockquote>
<p>项目名称与解决方案的关系项目名称：项目的名称解决方案：项目的容器，一个解决方案可以包含多个项目</p>
</blockquote>
<h3 id="项目结构">项目结构</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>Properties：项目属性</p>
</li>
<li class="lvl-2">
<p>References：引用</p>
</li>
<li class="lvl-2">
<p>Program.cs：程序入口</p>
</li>
<li class="lvl-2">
<p>App.config：配置文件</p>
</li>
<li class="lvl-2">
<p>Packages.config：NuGet 包管理</p>
</li>
<li class="lvl-2">
<p>.vs：Visual Studio 配置文件</p>
</li>
<li class="lvl-2">
<p>bin：编译后的文件</p>
</li>
<li class="lvl-2">
<p>obj：编译过程中的文件</p>
</li>
</ul>
<h2 id="Hello-World">Hello World</h2>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"><span class="keyword">using</span> System.Text;</span><br><span class="line"><span class="keyword">using</span> System.Threading.Tasks;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 命名空间</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">HelloWorldCS</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 类型</span></span><br><span class="line">    <span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;   </span><br><span class="line">        <span class="comment">// 函数、方法</span></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">            Console.ReadKey();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="基础结构">基础结构</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>命名空间：namespace</p>
</li>
<li class="lvl-2">
<p>类型：class、struct、interface、enum</p>
</li>
<li class="lvl-2">
<p>函数、方法：static void Main(string[] args)</p>
</li>
<li class="lvl-2">
<p>语句块：{}</p>
</li>
<li class="lvl-2">
<p>语句：;</p>
</li>
<li class="lvl-2">
<p>注释：//、/* */</p>
</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 最小结构</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;   </span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="基础语法">基础语法</h2>
<h3 id="注释">注释</h3>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 单行注释</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">多行注释</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="标识符">标识符</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>由字母、数字、下划线组成</p>
</li>
<li class="lvl-2">
<p>不能以数字开头</p>
</li>
<li class="lvl-2">
<p>不能是关键字</p>
</li>
</ul>
<h3 id="关键字">关键字</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>保留的关键字，不能用作标识符</p>
</li>
<li class="lvl-2">
<p>保留的关键字</p>
<blockquote>
<p>abstract as base bool break byte case catch char checked class const continue decimal default delegate do double else enum event explicit extern false finally fixed float for foreach goto if implicit in int interface internal is lock long namespace new null object operator out override params private protected public readonly ref return sbyte sealed short sizeof stackalloc static string struct switch this throw true try typeof uint ulong unchecked unsafe ushort using virtual void volatile while</p>
</blockquote>
</li>
</ul>
<h2 id="变量">变量</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>变量的声明</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 声明变量</span></span><br><span class="line"><span class="built_in">int</span> a;</span><br><span class="line"><span class="comment">// 声明变量并赋值</span></span><br><span class="line"><span class="built_in">int</span> b = <span class="number">1</span>;</span><br><span class="line"><span class="comment">// 声明多个变量</span></span><br><span class="line"><span class="built_in">int</span> c, d, e;</span><br><span class="line"><span class="comment">// 声明多个变量并赋值</span></span><br><span class="line"><span class="built_in">int</span> f = <span class="number">1</span>, g = <span class="number">2</span>, h = <span class="number">3</span>;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>变量的命名规范</p>
<ul class="lvl-2">
<li class="lvl-4">
<p>驼峰命名法</p>
</li>
<li class="lvl-4">
<p>大驼峰：每个单词首字母大写</p>
</li>
<li class="lvl-4">
<p>小驼峰：第一个单词首字母小写，其他单词首字母大写</p>
</li>
<li class="lvl-4">
<p>命名规范</p>
</li>
<li class="lvl-4">
<p>变量名要有意义</p>
</li>
<li class="lvl-4">
<p>变量名不能是关键字</p>
</li>
<li class="lvl-4">
<p>变量名不能以数字开头</p>
</li>
<li class="lvl-4">
<p>变量名不能包含空格</p>
</li>
<li class="lvl-4">
<p>变量名不能包含特殊字符</p>
</li>
<li class="lvl-4">
<p>变量名不能包含中文</p>
</li>
<li class="lvl-4">
<p>变量名不能包含下划线</p>
</li>
</ul>
</li>
<li class="lvl-2">
<p>变量的作用域</p>
<ul class="lvl-2">
<li class="lvl-4">局部变量：在方法中声明的变量</li>
<li class="lvl-4">成员变量：在类中声明的变量</li>
</ul>
</li>
<li class="lvl-2">
<p>变量的类型</p>
<ul class="lvl-2">
<li class="lvl-4">值类型：存储在栈中，直接存储数据</li>
<li class="lvl-4">整型：byte、short、int、long</li>
<li class="lvl-4">浮点型：float、double</li>
<li class="lvl-4">字符型：char</li>
<li class="lvl-4">布尔型：bool</li>
<li class="lvl-4">引用类型：存储在堆中，存储数据的地址</li>
<li class="lvl-4">字符串：string</li>
<li class="lvl-4">数组：int[]</li>
</ul>
</li>
<li class="lvl-2">
<p>变量的转换</p>
<ul class="lvl-2">
<li class="lvl-4">
<p>隐式转换：小类型转换为大类型</p>
</li>
<li class="lvl-4">
<p>显式转换：大类型转换为小类型</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 隐式转换</span></span><br><span class="line"><span class="built_in">int</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">double</span> b = a;</span><br><span class="line"><span class="comment">// 显式转换</span></span><br><span class="line"><span class="built_in">double</span> c = <span class="number">1.1</span>;</span><br><span class="line"><span class="built_in">int</span> d = (<span class="built_in">int</span>)c;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-4">
<p>变量的默认值</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td>byte</td>
<td>0</td>
</tr>
<tr>
<td>short</td>
<td>0</td>
</tr>
<tr>
<td>int</td>
<td>0</td>
</tr>
<tr>
<td>long</td>
<td>0</td>
</tr>
<tr>
<td>float</td>
<td>0</td>
</tr>
<tr>
<td>double</td>
<td>0</td>
</tr>
<tr>
<td>char</td>
<td>\0</td>
</tr>
<tr>
<td>bool</td>
<td>false</td>
</tr>
<tr>
<td>string</td>
<td>null</td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>
</ul>
<h2 id="常量">常量</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>常量的声明</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 声明常量</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">int</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="comment">// 声明多个常量</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">int</span> b = <span class="number">1</span>, c = <span class="number">2</span>, d = <span class="number">3</span>;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>常量的命名规范</p>
<ul class="lvl-2">
<li class="lvl-4">常量名要有意义</li>
<li class="lvl-4">常量名不能是关键字</li>
<li class="lvl-4">常量名不能以数字开头</li>
<li class="lvl-4">常量名不能包含空格</li>
<li class="lvl-4">常量名不能包含特殊字符</li>
<li class="lvl-4">常量名不能包含中文</li>
<li class="lvl-4">常量名不能包含下划线</li>
</ul>
</li>
<li class="lvl-2">
<p>常量的作用域</p>
<ul class="lvl-2">
<li class="lvl-4">局部常量：在方法中声明的常量</li>
<li class="lvl-4">成员常量：在类中声明的常量</li>
</ul>
</li>
</ul>
<h2 id="运算符">运算符</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>算术运算符</p>
<ul class="lvl-2">
<li class="lvl-4">加法：+</li>
<li class="lvl-4">减法：-</li>
<li class="lvl-4">乘法：*</li>
<li class="lvl-4">除法：/</li>
<li class="lvl-4">取余：%</li>
<li class="lvl-4">自增：++</li>
<li class="lvl-4">自减：–</li>
</ul>
</li>
<li class="lvl-2">
<p>赋值运算符</p>
<ul class="lvl-2">
<li class="lvl-4">赋值：=</li>
<li class="lvl-4">加法赋值：+=</li>
<li class="lvl-4">减法赋值：-=</li>
<li class="lvl-4">乘法赋值：*=</li>
<li class="lvl-4">除法赋值：/=</li>
<li class="lvl-4">取余赋值：%=</li>
</ul>
</li>
<li class="lvl-2">
<p>比较运算符</p>
<ul class="lvl-2">
<li class="lvl-4">等于：==</li>
<li class="lvl-4">不等于：!=</li>
<li class="lvl-4">大于：&gt;</li>
<li class="lvl-4">小于：&lt;</li>
<li class="lvl-4">大于等于：&gt;=</li>
<li class="lvl-4">小于等于：&lt;=</li>
</ul>
</li>
<li class="lvl-2">
<p>逻辑运算符</p>
<ul class="lvl-2">
<li class="lvl-4">与：&amp;&amp;</li>
<li class="lvl-4">或：||</li>
<li class="lvl-4">非：!</li>
</ul>
</li>
<li class="lvl-2">
<p>位运算符</p>
<ul class="lvl-2">
<li class="lvl-4">与：&amp;</li>
<li class="lvl-4">或：|</li>
<li class="lvl-4">非：~</li>
<li class="lvl-4">异或：^</li>
<li class="lvl-4">左移：&lt;&lt;</li>
<li class="lvl-4">右移：&gt;&gt;</li>
</ul>
</li>
<li class="lvl-2">
<p>条件运算符</p>
<ul class="lvl-2">
<li class="lvl-4">
<p>三元运算符：?:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">int</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">int</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">int</span> c = a &gt; b ? a : b;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li class="lvl-2">
<p>其他运算符</p>
<ul class="lvl-2">
<li class="lvl-4">is：判断类型</li>
<li class="lvl-4">as：类型转换</li>
<li class="lvl-4">sizeof：获取类型的大小</li>
<li class="lvl-4">typeof：获取类型</li>
<li class="lvl-4">default：获取类型的默认值</li>
<li class="lvl-4">checked：检查溢出</li>
<li class="lvl-4">unchecked：不检查溢出</li>
</ul>
</li>
</ul>
<h2 id="流程控制">流程控制</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>if 语句</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">int</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">int</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span> (a &gt; b)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;a &gt; b&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (a &lt; b)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;a &lt; b&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;a = b&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>switch 语句</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">int</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">switch</span> (a)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;a = 1&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;a = 2&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="literal">default</span>:</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;a = 3&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>while 语句</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">int</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> (a &lt; <span class="number">10</span>)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(a);</span><br><span class="line">    a++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>do while 语句</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">int</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(a);</span><br><span class="line">    a++;</span><br><span class="line">&#125; <span class="keyword">while</span> (a &lt; <span class="number">10</span>);</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>for 语句</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>foreach 语句</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">int</span>[] arr = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">int</span> i <span class="keyword">in</span> arr)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>break 语句</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (i == <span class="number">5</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Console.WriteLine(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>continue 语句</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (i == <span class="number">5</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Console.WriteLine(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>goto 语句</p>
  <figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (i == <span class="number">5</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">goto</span> label;</span><br><span class="line">    &#125;   </span><br><span class="line">    Console.WriteLine(i);</span><br><span class="line">&#125;</span><br><span class="line">label:</span><br><span class="line">Console.WriteLine(<span class="string">&quot;goto&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
]]></content>
      <categories>
        <category>Csharp</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机网络杂记-09</title>
    <url>/2023/12/21/1/</url>
    <content><![CDATA[<h2 id="IPv4-数据报的首部格式">IPv4 数据报的首部格式</h2>
<p><img src="./IPv4-DataGram-Header-Format.png" alt></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>版本：4 位，指明 IP 协议的版本，IPv4 的版本号为 4</p>
</li>
<li class="lvl-2">
<p>首部长度：4 位，指明首部的长度，单位为 4 字节，最大值为 15，即最大长度为 60 字节</p>
</li>
<li class="lvl-2">
<p>区分服务：8 位，用于指明数据报的优先级，最高 3 位为优先级，最低 3 位为服务类型，中间 2 位保留</p>
</li>
<li class="lvl-2">
<p>总长度：16 位，指明整个数据报的长度，单位为字节，最大值为 65535 字节</p>
</li>
<li class="lvl-2">
<p>可选项：可选项的长度为 0 或 4 的倍数，最大长度为 40 字节，可选项的长度由首部长度字段指明</p>
</li>
<li class="lvl-2">
<p>填充：填充字段的长度为 0 或 4 的倍数，最大长度为 40 字节，填充字段的长度由首部长度字段指明</p>
</li>
<li class="lvl-2">
<p>标识：16 位，用于唯一标识主机发送的每一个数据报，当数据报被分片时，每个分片的标识字段相同</p>
</li>
<li class="lvl-2">
<p>标志：3 位，用于指明数据报是否被分片，最高位为保留位，中间位为 DF，最低位为 MF(DF: Don’t Fragment, MF: More Fragment)</p>
</li>
<li class="lvl-2">
<p>片偏移：13 位，用于指明分片的偏移量，单位为 8 字节，最大值为 8191，即最大偏移量为 65528 字节</p>
</li>
</ul>
<blockquote>
<p>这三个字段共同指明了分片的偏移量，当数据报被分片时，每个分片的标识字段相同，标志字段的 MF 位为 1，最后一个分片的 MF 位为 0，每个分片的片偏移字段指明了分片的偏移量，单位为 8 字节，最大值为 8191，即最大偏移量为 65528 字节</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>生存时间：8 位，用于指明数据报在网络中的存活时间，单位为秒，最大值为 255，即最大存活时间为 255 秒(TTL: Time To Live)</p>
</li>
<li class="lvl-2">
<p>协议：8 位，用于指明数据报的上层协议，如 TCP、UDP、ICMP、IGMP 等</p>
</li>
<li class="lvl-2">
<p>首部校验和：16 位，用于校验首部的正确性，不校验数据部分，校验和的计算方法为：将首部中的所有 16 位字相加，然后取反得到校验和，如果计算结果中有进位，则将进位加到最低位中</p>
</li>
<li class="lvl-2">
<p>源地址：32 位，指明发送数据报的主机的 IP 地址</p>
</li>
<li class="lvl-2">
<p>目的地址：32 位，指明接收数据报的主机的 IP 地址</p>
</li>
</ul>
<h2 id="网际控制报文协议-ICMP">网际控制报文协议 ICMP</h2>
<p>ICMP (Internet Control Message Protocol) 是一个网络层协议，它用于在主机和路由器之间传递控制消息，它是 IP 协议的一个子协议，ICMP 报文被封装在 IP 数据报中，ICMP 报文的首部长度为 8 字节</p>
<h3 id="IMCP-差错报文种类">IMCP 差错报文种类</h3>
<ol>
<li class="lvl-3">
<p>目的不可达差错报文目的不可达差错报文用于指明主机或路由器无法将数据报交付给目的主机，目的不可达差错报文的类型字段为 3</p>
</li>
<li class="lvl-3">
<p>源抑制差错报文源抑制差错报文用于指明主机或路由器因为拥塞而丢弃数据报，源抑制差错报文的类型字段为 4</p>
</li>
<li class="lvl-3">
<p>时间超过差错报文时间超过差错报文用于指明数据报在网络中的存活时间超过了生存时间，时间超过差错报文的类型字段为 11</p>
</li>
<li class="lvl-3">
<p>参数问题差错报文参数问题差错报文用于指明主机或路由器收到的数据报中有一些字段的值不正确，参数问题差错报文的类型字段为 12</p>
</li>
<li class="lvl-3">
<p>改变路由差错报文改变路由差错报文用于指明主机或路由器收到的数据报的路由发生了改变，改变路由差错报文的类型字段为 5</p>
</li>
<li class="lvl-3">
<p>重定向差错报文(在某些资料中，重定向差错报文不属于 ICMP 差错报文)<br>
重定向差错报文用于指明主机或路由器收到的数据报的路由发生了改变，重定向差错报文的类型字段为 5</p>
</li>
</ol>
<h3 id="不发送差错报文的情况">不发送差错报文的情况</h3>
<ol>
<li class="lvl-3">
<p>如果数据报的首部校验和不正确，则丢弃数据报，不发送差错报文</p>
</li>
<li class="lvl-3">
<p>如果数据报的生存时间为 0，则丢弃数据报，不发送差错报文</p>
</li>
<li class="lvl-3">
<p>如果数据报的首部长度字段的值小于 5，则丢弃数据报，不发送差错报文</p>
</li>
<li class="lvl-3">
<p>如果数据报的目的地址是广播地址或多播地址，则丢弃数据报，不发送差错报文</p>
</li>
<li class="lvl-3">
<p>如果数据报的目的地址是本机地址，则丢弃数据报，不发送差错报文</p>
</li>
<li class="lvl-3">
<p>如果数据报的目的地址是回环地址，则丢弃数据报，不发送差错报文</p>
</li>
<li class="lvl-3">
<p>如果数据报的目的地址是</p>
<ul class="lvl-2">
<li class="lvl-6">127.0.0.0</li>
<li class="lvl-6">0.0.0.0</li>
</ul>
</li>
</ol>
<h3 id="常用的-ICMP-询问报文">常用的 ICMP 询问报文</h3>
<ol>
<li class="lvl-3">
<p>回送请求报文回送请求报文用于询问目的主机是否可达，回送请求报文的类型字段为 8</p>
</li>
<li class="lvl-3">
<p>回送应答报文回送应答报文用于回答回送请求报文，回送应答报文的类型字段为 0</p>
</li>
<li class="lvl-3">
<p>时间戳请求报文时间戳请求报文用于询问目的主机的时间，时间戳请求报文的类型字段为 13</p>
</li>
<li class="lvl-3">
<p>时间戳应答报文时间戳应答报文用于回答时间戳请求报文，时间戳应答报文的类型字段为 14</p>
</li>
<li class="lvl-3">
<p>网络掩码请求报文网络掩码请求报文用于询问目的主机的子网掩码，网络掩码请求报文的类型字段为 17</p>
</li>
<li class="lvl-3">
<p>网络掩码应答报文网络掩码应答报文用于回答网络掩码请求报文，网络掩码应答报文的类型字段为 18</p>
</li>
</ol>
<p>其中，第 1、2 种报文是必须的，第 3、4 种报文是可选的，第 5、6 种报文是必须的</p>
<h3 id="典型应用">典型应用</h3>
<ol>
<li class="lvl-3">
<p>ping<br>
ping 是一个常用的网络工具，它用于测试目的主机是否可达，它的原理是向目的主机发送回送请求报文，如果目的主机可达，则目的主机会回答回送应答报文，如果目的主机不可达，则目的主机不会回答回送应答报文简言之：</p>
<ul class="lvl-2">
<li class="lvl-6">ping 用来测试目的主机是否可达</li>
<li class="lvl-6">应用层向网络层发送回送请求报文</li>
<li class="lvl-6">网络层向应用层发送回送应答报文</li>
</ul>
</li>
<li class="lvl-3">
<p>traceroute<br>
traceroute 是一个常用的网络工具，它用于测试数据报从源主机到目的主机经过的路由，它的原理是向目的主机发送回送请求报文，如果目的主机可达，则目的主机会回答回送应答报文，如果目的主机不可达，则目的主机不会回答回送应答报文，traceroute 会向目的主机发送多个回送请求报文，每个回送请求报文的生存时间不同，当数据报的生存时间为 1 时，数据报只能到达第一个路由器，当数据报的生存时间为 2 时，数据报只能到达第二个路由器，以此类推，当数据报的生存时间为 n 时，数据报只能到达第 n 个路由器，当数据报的生存时间为 n+1 时，数据报到达目的主机，traceroute 通过这种方式来确定数据报经过的路由简言之：</p>
<ul class="lvl-2">
<li class="lvl-6">traceroute 用来测试数据报从源主机到目的主机经过的路由</li>
<li class="lvl-6">应用层向网络层发送回送请求报文</li>
<li class="lvl-6">网络层向应用层发送回送应答报文</li>
<li class="lvl-6">每个回送请求报文的生存时间不同</li>
<li class="lvl-6">通过生存时间来确定数据报经过的路由</li>
</ul>
</li>
</ol>
<blockquote>
<p>在 Windows 系统中，ping 和 traceroute (tracert) 都是使用 ICMP 协议，但是在 Linux 系统中，ping 使用 ICMP 协议，traceroute 使用 UDP 协议</p>
</blockquote>
<h2 id="虚拟专用网-VPN-Virtual-Private-Network-以及-网络地址转换-NAT-Network-Address-Translation">虚拟专用网 VPN (Virtual Private Network) 以及 网络地址转换 NAT (Network Address Translation)</h2>
<h3 id="虚拟专用网-VPN">虚拟专用网 VPN</h3>
<p>虚拟专用网 VPN 是一种通过公用网络来搭建专用网络的技术，它的原理是通过加密技术将数据报加密，然后将加密后的数据报封装在 IP 数据报中，再将 IP 数据报封装在 IP 数据报中，最后将 IP 数据报发送到目的主机，目的主机收到 IP 数据报后，将 IP 数据报解封装，然后将解封装后的 IP 数据报发送到目的主机，目的主机收到 IP 数据报后，将 IP 数据报解封装，然后将解封装后的数据报发送到目的主机，这样，源主机和目的主机之间就建立了一条专用的加密通道，这条专用的加密通道就是虚拟专用网 VPN。</p>
<p>虚拟专用网中的各主机所分配到的地址应该是本机构可自由分配的专用地址，而无需申请</p>
<p>在因特网数字分配机构 IANA (Internet Assigned Numbers Authority) 中，有三个地址段是专门用于虚拟专用网的，它们是：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>10.0.0.0/8</p>
</li>
<li class="lvl-2">
<p>172.16.0.0/12</p>
</li>
<li class="lvl-2">
<p>192.168.0.0/16</p>
</li>
</ul>
<p>参考：<span class="exturl" data-url="aHR0cHM6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvaXB2NC1hZGRyZXNzLXNwYWNlL2lwdjQtYWRkcmVzcy1zcGFjZS54aHRtbA==">IANA IPv4 Address Space Registry<i class="fa fa-external-link-alt"></i></span></p>
<p>外联网 VPN 的访问需要使用 IP 隧道技术，这里不做介绍。</p>
<h3 id="网络地址转换-NAT">网络地址转换 NAT</h3>
<p>网络地址转换 NAT 是一种通过公用网络来搭建专用网络的技术，它的原理是通过路由器将内部网络的 IP 地址转换为外部网络的 IP 地址，然后再将外部网络的 IP 地址转换为内部网络的 IP 地址，这样，内部网络的主机就可以通过路由器访问外部网络，外部网络的主机也可以通过路由器访问内部网络，这样，内部网络和外部网络之间就建立了一条专用的通道，这条专用的通道就是网络地址转换 NAT。</p>
<p>NAT 的发明是为了解决 IPv4 地址不足的问题，NAT 有三种类型，它们分别是：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>静态 NAT</p>
</li>
<li class="lvl-2">
<p>动态 NAT</p>
</li>
<li class="lvl-2">
<p>PAT (Port Address Translation)</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Network</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机网络杂记-08</title>
    <url>/2023/12/08/1/</url>
    <content><![CDATA[<h2 id="网络层">网络层</h2>
<p>网络层的主要功能是将分组从源端传送到目的端，网络层的两个主要问题是路由和拥塞控制。</p>
<p>实现网络层需要解决的问题：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>向运输层提供的服务：尽最大努力交付、带宽保证、时延保证、安全性</p>
</li>
<li class="lvl-2">
<p>网络层寻址问题：IP地址</p>
</li>
<li class="lvl-2">
<p>路由选择问题：路由选择算法</p>
</li>
</ul>
<p>网络层在 TCP/IP 协议族中叫网际层，主要包括 IP 协议、ICMP 协议、ARP 协议和 RARP 协议。</p>
<h3 id="网络层的两种主要服务模式">网络层的两种主要服务模式</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>面向连接的虚电路服务</p>
</li>
<li class="lvl-2">
<p>无连接的数据报服务</p>
</li>
</ul>
<h4 id="虚电路">虚电路</h4>
<p>虚电路是一种面向连接的服务，虚电路的建立需要消耗网络资源，虚电路的拆除也需要消耗网络资源。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>可靠通信由网络层保证，网络层使用确认、超时重传、序号、流量控制等机制保证可靠通信</p>
</li>
<li class="lvl-2">
<p>必须建立网络层连接–虚电路 Virtual Circuit，虚电路由三部分组成：虚电路标识符、源和目的地址、沿途经过的路由器序列</p>
</li>
<li class="lvl-2">
<p>目的主机的地址仅在建立连接时使用，之后沿途的路由器使用虚电路标识符来识别虚电路</p>
</li>
<li class="lvl-2">
<p>通信结束后，必须拆除网络层连接，释放网络资源</p>
</li>
</ul>
<h4 id="数据报">数据报</h4>
<p>数据报是一种无连接的服务，数据报不需要建立连接，也不需要拆除连接，因此不需要消耗网络资源。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>不可靠通信，网络层不保证数据报能够成功到达目的地</p>
</li>
<li class="lvl-2">
<p>不需要建立网络层连接，不需要消耗网络资源</p>
</li>
<li class="lvl-2">
<p>每个分组都携带完整的目的地址，因此每个分组都可以独立发送，沿途的路由器也可以独立转发</p>
</li>
<li class="lvl-2">
<p>每个分组的转发路由可以不同，因此分组可能不按序到达</p>
</li>
<li class="lvl-2">
<p>网络本身不提供端到端的可靠传输服务，使得路由器的设计和实现变得简单</p>
</li>
<li class="lvl-2">
<p>将复杂的网络处理功能放在端系统中，使得网络层的设计和实现变得简单</p>
</li>
</ul>
<h2 id="IP-协议">IP 协议</h2>
<p>有关 IP 协议中：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>分类编址 IPv4 地址</p>
</li>
<li class="lvl-2">
<p>划分子网</p>
</li>
<li class="lvl-2">
<p>无分类编址 CIDR</p>
</li>
<li class="lvl-2">
<p>IPv4 地址应用规划</p>
</li>
</ul>
<p>详见 <span class="exturl" data-url="aHR0cHM6Ly95dXpoaWkwNzE4LmdpdGh1Yi5pby8yMDIzLzA2LzA0LzIv">计算机网络（IPv4部分）<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="IP-数据报的发送和转发">IP 数据报的发送和转发</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>主机发送 IP 数据报</p>
</li>
<li class="lvl-2">
<p>路由器转发 IP 数据报</p>
</li>
</ul>
<p>略…</p>
<h2 id="路由">路由</h2>
<p>路由是指从源到目的地的路径，路由选择是指在多个路由中选择一条路由的过程。</p>
<h3 id="静态路由配置以及可能产生的问题">静态路由配置以及可能产生的问题</h3>
<p>静态路由配置是指在路由器中手动配置路由表，静态路由配置的优点是简单、可靠，缺点是不适合大型网络。</p>
<p>静态路由配置的问题：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>静态路由配置不适合大型网络</p>
</li>
<li class="lvl-2">
<p>静态路由配置不适合网络拓扑变化频繁的网络</p>
</li>
<li class="lvl-2">
<p>静态路由配置不适合网络中的路由器故障频繁的网络</p>
</li>
</ul>
<p>静态路由的过程：</p>
<ol>
<li class="lvl-3">
<p>路由器收到数据报，检查目的地址，如果目的地址在路由表中，则转发数据报，否则执行下一步</p>
</li>
<li class="lvl-3">
<p>路由器将数据报转发给默认路由器，如果默认路由器不在，则丢弃数据报</p>
</li>
</ol>
<p>默认路由器是指当路由表中没有目的地址的路由时，路由器将数据报转发给默认路由器。</p>
<p>特定主机路由过程：</p>
<ol>
<li class="lvl-3">
<p>路由器收到数据报，检查目的地址，如果目的地址在路由表中，则转发数据报，否则执行下一步</p>
</li>
<li class="lvl-3">
<p>路由器将数据报转发给默认路由器，如果默认路由器不在，则丢弃数据报</p>
</li>
</ol>
<p>特定主机路由网络前缀是 32 位，默认路由网络前缀是 0 位。</p>
<p>所以，特定主机路由网络前缀最长，路由最具体；默认路由网络前缀最短，路由最笼统。</p>
<p>为了<strong>防止 IP 数据报在路由环路中永久循环</strong>，IP 协议规定每个 IP 数据报的<strong>生存时间字段 TTL</strong>，每经过一个路由器，TTL 减 1，当 TTL 为 0 时，路由器丢弃该数据报。</p>
<p>聚合了不存在的网络前缀的路由称为黑洞路由，黑洞路由的作用是丢弃数据报，不向源主机发送任何 ICMP 消息。</p>
<p>黑洞路由的下一跳地址是 null0，null0 是一个虚拟接口，它不属于任何网络，它的作用是丢弃数据报。</p>
<h2 id="路由选择协议">路由选择协议</h2>
<table>
<thead>
<tr>
<th style="text-align:center">静态路由</th>
<th style="text-align:center">动态路由</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">人工配置</td>
<td style="text-align:center">自动配置</td>
</tr>
<tr>
<td style="text-align:center">适合小型网络</td>
<td style="text-align:center">适合大型网络</td>
</tr>
<tr>
<td style="text-align:center">不适合网络拓扑变化频繁的网络</td>
<td style="text-align:center">适合网络拓扑变化频繁的网络</td>
</tr>
<tr>
<td style="text-align:center">不适合网络中的路由器故障频繁的网络</td>
<td style="text-align:center">适合网络中的路由器故障频繁的网络</td>
</tr>
</tbody>
</table>
<p>因特网所采用的路由选择协议的特点：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>自适应：动态路由选择，能较好的适应网络拓扑变化</p>
</li>
<li class="lvl-2">
<p>分布式：路由器之间交换路由信息</p>
</li>
<li class="lvl-2">
<p>分层次：整个因特网划分为多个自治系统(Autonomous System)，每个自治系统内部使用某种路由选择协议，自治系统之间使用某种路由选择协议</p>
</li>
</ul>
<blockquote>
<p>自治系统内部使用 <code>IGP</code>（Interior Gateway Protocol）协议，自治系统之间使用 <code>EGP</code>（Exterior Gateway Protocol）协议；<code>IGP</code> 协议有 <strong>RIP、OSPF</strong>、IS-IS、IGRP、EIGRP 等；<code>EGP</code> 协议有 <strong>BGP</strong> 等。</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>RIP 协议：路由信息协议；基于<strong>距离向量</strong></p>
<ul class="lvl-2">
<li class="lvl-4">在因特网最早使用</li>
</ul>
</li>
<li class="lvl-2">
<p>IGRP 协议：内部网关路由选择协议；基于<strong>距离向量</strong></p>
<ul class="lvl-2">
<li class="lvl-4">用于 Cisco 路由器</li>
<li class="lvl-4">但是 IGRP 协议是私有协议，不是开放协议，现在已被 EIGRP 协议取代</li>
</ul>
</li>
<li class="lvl-2">
<p>OSPF 协议：开放最短路径优先协议；基于<strong>链路状态</strong></p>
<ul class="lvl-2">
<li class="lvl-4">用于大型网络，在因特网中使用较多</li>
</ul>
</li>
<li class="lvl-2">
<p>IS-IS 协议：中间系统到中间系统协议；基于<strong>链路状态</strong></p>
<ul class="lvl-2">
<li class="lvl-4">集成化 IS-IS 协议是 ISP 网络中使用的一种 IGP 协议</li>
</ul>
</li>
</ul>
<hr>
<p>路由器的基本结构：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>输入端口</p>
</li>
<li class="lvl-2">
<p>交换结构</p>
</li>
<li class="lvl-2">
<p>输出端口</p>
</li>
</ul>
<blockquote>
<ol>
<li class="lvl-3">
<p>路由表一般包含两个部分：目的地址和下一跳地址</p>
</li>
<li class="lvl-3">
<p>路由表需要对网络拓扑变化做出响应，因此路由表需要动态更新</p>
</li>
<li class="lvl-3">
<p>转发表是路由表的一部分</p>
</li>
<li class="lvl-3">
<p>转发表的结构应当使查找过程尽可能快速</p>
</li>
</ol>
</blockquote>
<h2 id="RIP-协议-距离向量路由选择协议">RIP 协议 - 距离向量路由选择协议</h2>
<p>路由信息协议 RIP（Routing Information Protocol）是一种距离向量路由选择协议，RIP 协议使用距离作为路由选择的度量，距离的度量单位是跳数。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>RIP 协议是内部网关协议 IGP 中最先得到广泛应用的一种协议，相关文档是 RFC 1058</p>
</li>
<li class="lvl-2">
<p>该协议要求 AS 内的所有路由器都运行 RIP 协议，维护从它到其他所有目的网络的距离向量(距离向量 D-V Distance Vector)</p>
</li>
<li class="lvl-2">
<p>使用跳数(Hop Count)作为距离的度量单位</p>
<ul class="lvl-2">
<li class="lvl-4">最大跳数为 15，超过 15 跳的网络被认为是不可达的</li>
<li class="lvl-4">路由器到直连网络的距离为 1</li>
<li class="lvl-4">路由器到其他网络的距离为 1 加上到达该路由器的距离</li>
</ul>
</li>
<li class="lvl-2">
<p>RIP 协议使用 UDP 端口号 520</p>
</li>
</ul>
<blockquote>
<p>RIP 认为，跳数越少，路径越短，因此跳数越少的路径越好。当到达同一目的网络的两条路径的跳数相同时，RIP 协议可以进行等价<strong>负载均衡</strong>。</p>
</blockquote>
<p>RIP 包含 3 个要点：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>和邻居交换路由信息(和谁)</p>
</li>
<li class="lvl-2">
<p>路由信息的更新(什么)</p>
</li>
<li class="lvl-2">
<p>周期性交换信息(何时)</p>
</li>
</ul>
<hr>
<h3 id="RIP-协议的基本工作过程">RIP 协议的基本工作过程</h3>
<ol>
<li class="lvl-3">
<p>路由器收到 RIP 报文，检查报文类型，如果是请求报文，则执行下一步，否则丢弃该报文</p>
</li>
<li class="lvl-3">
<p>路由器检查请求报文中的目的地址，如果目的地址是本路由器，则执行下一步，否则丢弃该报文</p>
</li>
<li class="lvl-3">
<p>路由器将本路由器的路由表中的所有路由信息封装在响应报文中，发送给请求报文的源路由器</p>
</li>
</ol>
<blockquote>
<ol>
<li class="lvl-3">
<p>路由器刚开始工作时，只知道自己到直连网络的距离为 1，其他网络的距离为 16</p>
</li>
<li class="lvl-3">
<p>路由器仅和直接相连的路由器交换路由信息</p>
</li>
<li class="lvl-3">
<p>若干次交换后，路由器就可以获得到达其他网络的距离，称之为收敛</p>
</li>
</ol>
</blockquote>
<hr>
<p>RIP 协议的缺点：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>RIP 协议的最大跳数为 15，因此 RIP 协议只适合小型网络</p>
</li>
<li class="lvl-2">
<p>RIP 协议的收敛速度慢，因为 RIP 协议的更新时间间隔为 30 秒，因此 RIP 协议的收敛时间为 90 秒</p>
</li>
<li class="lvl-2">
<p>RIP 协议的路由选择不是最优的，因为 RIP 协议的路由选择是基于距离的，而不是基于带宽的</p>
</li>
</ul>
<h2 id="OSPF-协议-开放最短路径优先协议">OSPF 协议 - 开放最短路径优先协议</h2>
<p>开放最短路径优先协议 OSPF（Open Shortest Path First）是一种链路状态路由选择协议，OSPF 协议使用最短路径作为路由选择的度量，最短路径的度量单位是代价。最短路径优先算法是 Dijkstra 提出的 SPF 算法。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>OSPF 协议是内部网关协议 IGP 中最先得到广泛应用的一种协议，相关文档是 RFC 2328</p>
</li>
<li class="lvl-2">
<p>该协议要求 AS 内的所有路由器都运行 OSPF 协议，维护从它到其他所有目的网络的链路状态(链路状态 L-S Link State)</p>
</li>
<li class="lvl-2">
<p>使用代价(Cost)作为距离的度量单位</p>
<ul class="lvl-2">
<li class="lvl-4">代价越小，路径越短，因此代价越小的路径越好</li>
<li class="lvl-4">代价的计算公式：代价 = 100Mbps / 带宽</li>
</ul>
</li>
<li class="lvl-2">
<p>OSPF 协议使用 IP 协议号 89</p>
</li>
</ul>
<hr>
<p>该协议相邻路由器之间通过交互问候(Hello)报文来建立邻居关系，通过交互链路状态(LS)报文来交换链路状态信息。</p>
<p>OSPF 有五种分组：</p>
<ol>
<li class="lvl-3">
<p>问候(Hello)分组：用于建立邻居关系</p>
</li>
<li class="lvl-3">
<p>数据库描述(Database Description)分组：用于交换链路状态数据库</p>
</li>
<li class="lvl-3">
<p>链路状态请求(Link State Request)分组：用于请求链路状态信息</p>
</li>
<li class="lvl-3">
<p>链路状态更新(Link State Update)分组：用于发送链路状态信息</p>
</li>
<li class="lvl-3">
<p>链路状态确认(Link State Acknowledgement)分组：用于确认链路状态信息</p>
</li>
</ol>
<h2 id="BGP-协议-边界网关协议">BGP 协议 - 边界网关协议</h2>
<p>边界网关协议 BGP（Border Gateway Protocol）是一种路径矢量路由选择协议，BGP 协议使用路径作为路由选择的度量，路径的度量单位是 AS。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>在不同的自治系统内，度量路由的代价是不同的，因此代价不适合作为路由选择的度量单位。</p>
</li>
<li class="lvl-2">
<p>自治系统间的路由选择需要考虑自治系统间的策略，比如政治、经济、安全等因素。</p>
</li>
<li class="lvl-2">
<p>BGP 协议是外部网关协议 EGP 中最先得到广泛应用的一种协议，相关文档是 RFC 4271</p>
</li>
</ul>
<h3 id="BGP-协议的基本工作过程">BGP 协议的基本工作过程</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>管理员在配置 BGP 协议时，需要配置至少一个路由器作为该自治系统的 <code>BGP 发言人</code>，该路由器负责和其他自治系统的 <code>BGP 发言人</code> 交换路由信息</p>
</li>
<li class="lvl-2">
<p>不同自治系统的 <code>BGP 发言人</code> 之间交换信息，必须建立 TCP 连接，使用 TCP 端口号 179</p>
</li>
<li class="lvl-2">
<p>使用TCP 连接交换路由信息的两个 <code>BGP 发言人</code> 之间称为 <code>BGP 对等体</code>/<code>邻站</code>/<code>对等点</code>/<code>对等路由器</code></p>
</li>
<li class="lvl-2">
<p><code>BGP 发言人</code> 除了运行 BGP 协议，还需要运行 IGP 协议，IGP 协议用于在自治系统内部交换路由信息，BGP 协议用于在自治系统之间交换路由信息</p>
</li>
</ul>
<hr>
<p>BGP-4 的四种分组：</p>
<ol>
<li class="lvl-3">
<p>打开(Open)分组：用于建立 TCP 连接</p>
</li>
<li class="lvl-3">
<p>更新(Update)分组：用于交换路由信息</p>
</li>
<li class="lvl-3">
<p>通知(Notification)分组：用于通知错误信息</p>
</li>
<li class="lvl-3">
<p>空闲(Keepalive)分组：用于保持 TCP 连接</p>
</li>
</ol>
]]></content>
      <categories>
        <category>Network</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机网络杂记-07</title>
    <url>/2023/12/02/1/</url>
    <content><![CDATA[<h2 id="集线器与交换机">集线器与交换机</h2>
<blockquote>
<p>使用双绞线和集线器 HUB 的星形以太网</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>使用集线器的以太网在<strong>逻辑上仍然是一个总线网</strong>，各站共享总线资源，使用的是 CSMA/CD 协议。</p>
</li>
<li class="lvl-2">
<p>集线器<strong>工作在物理层</strong>，只是将收到的信号放大后再转发，不具备任何的逻辑功能。</p>
</li>
<li class="lvl-2">
<p>集线器一般拥有少量容错能力以及故障管理能力，但是这些功能都是<strong>基于物理层</strong>的，而不是基于数据链路层的。</p>
</li>
</ul>
<p>使用集线器 HUB 在物理层扩展以太网。但是，存在以下问题：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>以太网的带宽是共享的，当网络中的主机数量增多时，带宽会越来越小。</p>
</li>
<li class="lvl-2">
<p>以太网的冲突域是共享的，当网络中的主机数量增多时，冲突域会越来越大，冲突会越来越多，网络的性能会越来越差。</p>
</li>
</ul>
<blockquote>
<p>使用交换机 SWITCH 的以太网</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>以太网交换机通常有 24 个或 48 个端口，每个端口都是一个独立的冲突域，因此，以太网交换机可以将一个以太网划分成多个冲突域，从而提高网络的性能。</p>
</li>
<li class="lvl-2">
<p>一般工作在<strong>全双工模式</strong>，因此，可以同时发送和接收数据，不会发生冲突。</p>
</li>
<li class="lvl-2">
<p>一般工作在<strong>数据链路层</strong>，具有数据链路层的逻辑功能，可以<strong>识别以太网帧的 MAC 地址</strong>，从而可以根据 MAC 地址转发数据帧。</p>
</li>
<li class="lvl-2">
<p>具有<strong>并行性</strong>，能同时连通多个端口，因此，可以同时转发多个数据帧。</p>
</li>
<li class="lvl-2">
<p>交换机是一种即插即用的设备，其内部帧交换表是<strong>自学习</strong>的，不需要管理员配置。</p>
</li>
<li class="lvl-2">
<p>使用两种交换方式：<strong>存储转发</strong>和<strong>直通转发</strong></p>
</li>
</ul>
<p><img src="./hubVSswitch.png" alt></p>
<p>现在，以太网交换机已经成为以太网的主流设备，集线器已经被淘汰。</p>
<h2 id="交换机自学习与转发">交换机自学习与转发</h2>
<p>交换机是一种即插即用的设备，刚刚启动时，交换机的帧交换表是空的，交换机不知道哪个端口连接哪个主机，也不知道哪个 MAC 地址在哪个端口，因此，交换机需要学习。</p>
<p>流程：</p>
<ol>
<li class="lvl-3">
<p>当交换机收到一个数据帧时，交换机会提取数据帧中的源 MAC 地址，然后将源 MAC 地址和接收到该数据帧的端口号记录在交换机的帧交换表中。</p>
</li>
<li class="lvl-3">
<p>当交换机收到一个数据帧时，交换机会提取数据帧中的目的 MAC 地址，然后在交换机的帧交换表中查找该目的 MAC 地址对应的端口号。</p>
</li>
<li class="lvl-3">
<p>如果找到了，交换机就将该数据帧转发到该端口，否则，交换机就将该数据帧转发到所有的端口（广播）。</p>
</li>
</ol>
<p>然而，交换机的帧交换表是会自动删除的，这是因为，当主机断开连接时，交换机就无法再收到该主机发送的数据帧，因此，交换机就无法再学习该主机的 MAC 地址，因此，交换机需要定期删除帧交换表中的记录。</p>
<h2 id="交换机生成树协议-STP">交换机生成树协议 STP</h2>
<p>交换机生成树协议 Spanning Tree Protocol，简称 STP，是一种<strong>链路层</strong>的<strong>网络协议</strong>，用于在<strong>有环路</strong>的<strong>以太网</strong>中防止<strong>广播风暴</strong>。</p>
<p>添加冗余链路，提高网络的可靠性。但是，添加冗余链路会导致环路，导致以下问题</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>广播风暴</strong>：大量消耗网络资源，导致网络瘫痪。</p>
</li>
<li class="lvl-2">
<p>主机收到<strong>重复的广播帧</strong>，导致网络性能下降。</p>
</li>
<li class="lvl-2">
<p>交换机的<strong>帧交换震荡</strong>：交换机的帧交换表中的记录不断变化，导致网络性能下降。</p>
</li>
</ul>
<p>所以，需要一种协议来解决这些问题，这就是 STP。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>不论网络中有多少个交换机，STP 都能够自动计算出一棵<strong>无环路</strong>的<strong>生成树</strong>，从而防止广播风暴。</p>
</li>
</ul>
<blockquote>
<p>最终生成的树型拓扑结构要<strong>连通整个网络</strong>；首次连接交换机或网络物理拓扑结构发生变化时，STP 会<strong>重新计算生成树</strong>。</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>STP 通过<strong>端口状态</strong>来防止<strong>帧交换震荡</strong>，从而提高网络性能。</p>
</li>
</ul>
<h2 id="虚拟局域网-VLAN">虚拟局域网 VLAN</h2>
<p>虚拟局域网 Virtual Local Area Network，简称 VLAN，是一种<strong>链路层</strong>的<strong>网络协议</strong>，用于在<strong>物理上</strong>将<strong>一个局域网</strong>分割成<strong>多个虚拟局域网</strong>，从而实现<strong>逻辑上的隔离</strong>。</p>
<h3 id="巨大的广播域">巨大的广播域</h3>
<p>以太网交换机可以将一个以太网划分成多个冲突域，从而提高网络的性能。但是，以太网交换机不能将一个以太网划分成多个广播域，因此，以太网交换机不能实现逻辑上的隔离。巨大的广播域会导致以下问题：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>安全性差：网络中的主机可以通过 ARP 欺骗攻击等方式攻击其他主机。</p>
</li>
<li class="lvl-2">
<p>网络性能差：网络中的主机可以通过大量的广播帧来消耗网络资源，导致网络瘫痪。</p>
</li>
<li class="lvl-2">
<p>网络管理困难：网络管理员无法对网络中的主机进行有效的管理。</p>
</li>
</ul>
<h3 id="网络中会频繁出现广播信息">网络中会频繁出现广播信息</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>TCP/IP</strong></p>
<ul class="lvl-2">
<li class="lvl-4">ARP 已知 IP 地址获取 MAC 地址</li>
<li class="lvl-4">DHCP 动态主机配置协议</li>
<li class="lvl-4">ICMP 互联网控制报文协议</li>
<li class="lvl-4">RIP 路由信息协议</li>
</ul>
</li>
<li class="lvl-2">
<p>NetBIOS</p>
<ul class="lvl-2">
<li class="lvl-4">NetBIOS Name Service</li>
<li class="lvl-4">NetBIOS Datagram Service</li>
<li class="lvl-4">NetBIOS Session Service</li>
</ul>
</li>
<li class="lvl-2">
<p><strong>NetBEUI</strong></p>
<ul class="lvl-2">
<li class="lvl-4">NetBEUI Name Service</li>
<li class="lvl-4">NetBEUI Datagram Service</li>
<li class="lvl-4">NetBEUI Session Service</li>
</ul>
</li>
<li class="lvl-2">
<p><strong>IPX/SPX</strong></p>
<ul class="lvl-2">
<li class="lvl-4">SAP 服务广播协议</li>
<li class="lvl-4">RIPX 路由信息协议</li>
<li class="lvl-4">NCP NetWare 核心协议</li>
<li class="lvl-4">SPX NetWare 传输协议</li>
</ul>
</li>
<li class="lvl-2">
<p>AppleTalk 苹果公司的网络协议</p>
</li>
</ul>
<h3 id="虚拟局域网-VLAN-技术">虚拟局域网 VLAN 技术</h3>
<p>分割广播域的方法，可以使用路由器隔离广播域，但是路由器成本高，性能差，不适合在局域网中使用。</p>
<p>VLAN 可以将一个以太网划分成多个广播域，从而实现逻辑上的隔离。</p>
<h2 id="VLAN-的实现方法">VLAN 的实现方法</h2>
<p>这需要交换机支持 VLAN 功能，交换机需要支持以下两种功能：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>IEEE 802.1Q 协议</p>
</li>
<li class="lvl-2">
<p>交换机端口类型</p>
</li>
</ul>
<p><img src="./802Q.png" alt></p>
<h3 id="端口类型">端口类型</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>Access 端口：连接主机的端口，只能属于一个 VLAN。</p>
</li>
<li class="lvl-2">
<p>Trunk 端口：连接交换机的端口，可以属于多个 VLAN。</p>
</li>
<li class="lvl-2">
<p>Hybrid 端口：连接主机的端口，可以属于多个 VLAN。但是思科交换机不支持该端口类型。</p>
</li>
</ul>
<p>交换机各端口的省缺 VLAN ID</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>思科交换机：Native VLAN，即本征 VLAN</p>
</li>
<li class="lvl-2">
<p>华为交换机：Port VLAN ID，即端口 VLAN ID, PVID</p>
</li>
</ul>
<h4 id="Access-端口">Access 端口</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>Access 端口只能属于一个 VLAN，因此，Access 端口只能接收属于该 VLAN 的数据帧。</p>
</li>
<li class="lvl-2">
<p>Access 端口可以连接主机，也可以连接路由器。</p>
</li>
<li class="lvl-2">
<p>Access 端口可以连接另一个交换机，但是，另一个交换机的端口必须是 Trunk 端口。</p>
</li>
</ul>
<p><img src="./access.png" alt></p>
<h4 id="Trunk-端口">Trunk 端口</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>Trunk 端口可以属于多个 VLAN，因此，Trunk 端口可以接收多个 VLAN 的数据帧。</p>
</li>
<li class="lvl-2">
<p>Trunk 端口只能连接交换机，不能连接主机。</p>
</li>
<li class="lvl-2">
<p>Trunk 端口可以连接另一个交换机，但是，另一个交换机的端口必须是 Trunk 端口。</p>
</li>
</ul>
<p>Trunk 端口发送处理方法：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>对于等于本征 VLAN ID 的数据帧，交换机会将其发送到本征 VLAN 中。</p>
</li>
<li class="lvl-2">
<p>对于不等于本征 VLAN ID 的数据帧，交换机会将其发送到所有的 VLAN 中。</p>
</li>
</ul>
<p>Trunk 端口接收处理方法：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>对于等于本征 VLAN ID 的数据帧，交换机会将其发送到本征 VLAN 中。</p>
</li>
<li class="lvl-2">
<p>对于不等于本征 VLAN ID 的数据帧，交换机会将其丢弃。</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Network</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机网络杂记-06</title>
    <url>/2023/12/01/1/</url>
    <content><![CDATA[<h2 id="MAC-地址">MAC 地址</h2>
<p>MAC 地址是指网卡的物理地址，它是一个 48 位的二进制数，通常用 12 位的十六进制数表示。属于数据链路层的地址。</p>
<h3 id="MAC-地址的作用">MAC 地址的作用</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>当多个主机连接在同一个以太网中时，每个主机都必须有一个唯一的标识，即一个数据链路层地址。</p>
</li>
<li class="lvl-2">
<p>在每个主机发送的帧中，都必须包含目的主机的数据链路层地址。由于这类地址是用于媒体接入控制的，因此又称为 Media Access Control Address，简称 MAC 地址。</p>
<ul class="lvl-2">
<li class="lvl-4">MAC 地址一般由网卡的制造商来分配，被固化在 EEPROM 中，每个网卡都有一个唯一的 MAC 地址，这称之为<strong>硬件地址</strong>。但是，近年来，一些设备提供了随机生成 MAC 地址的功能，这样就可以保护用户的隐私。</li>
<li class="lvl-4">有时也被称为<strong>物理地址</strong>，但是这种说法不准确，因为 MAC 地址并不是物理上的地址，<strong>而是逻辑上的地址</strong>。</li>
</ul>
</li>
<li class="lvl-2">
<p>一般，用户有两个网络适配器，一个是有线网卡，一个是无线网卡，每个网卡都有一个唯一的 MAC 地址。<strong>这是对接口的唯一标识，而不是对设备的唯一标识</strong>。</p>
</li>
</ul>
<h3 id="IEEE-802-MAC-地址">IEEE 802 MAC 地址</h3>
<p>IEEE 802 MAC 地址是指在 IEEE 802 标准中定义的 MAC 地址，它是一个 48 位的二进制数，通常用 12 位的十六进制数表示。也是扩展的唯一标识符 EUI-48。</p>
<p>通过 MAC 地址，我们可以知道这个网卡是由哪个厂商生产的，这个网卡是什么型号，这个网卡是什么时候生产的。</p>
<p>IEEE 802 MAC 地址的前 24 位称为组织唯一标识符 OUI，由 IEEE 的注册管理机构分配给组织，用于标识组织。这 24位分成3个字段，每个字段包含 8 位，称为 OUI 的第一、第二、第三字节。</p>
<p>IEEE 802 MAC 地址的后 24 位称为扩展标识符 EI，由组织自行分配，用于标识组织内的设备。这 24 位分成 3 个字段，每个字段包含 8 位，称为 EI 的第一、第二、第三字节。也叫第四、第五、第六字节。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>标准表示法: XX-XX-XX-XX-XX-XX<br>
例如: 00-0C-29-3F-2C-1A<br>
这在 Windows 系统中使用的是最常见的表示法。</p>
</li>
<li class="lvl-2">
<p>以太网表示法: XX:XX:XX:XX:XX:XX<br>
例如: 00:0C:29:3F:2C:1A<br>
这在 Linux 系统中使用的是最常见的表示法。IOS、Mac OS X、Android 也使用这种表示法。</p>
</li>
<li class="lvl-2">
<p>无分隔符表示法: XXXXXXXXXXXX<br>
例如: 000C293F2C1A<br>
这种表示法在 Cisco IOS 中使用。</p>
</li>
<li class="lvl-2">
<p>其他表示法 1: XX.XX.XX.XX.XX.XX<br>
例如: 00.0C.29.3F.2C.1A</p>
</li>
<li class="lvl-2">
<p>其他表示法 2: XXXX-XXXX-XXXX<br>
例如: 000C-293F-2C1A</p>
</li>
<li class="lvl-2">
<p>其他表示法 3: XXXX.XXXX.XXXX<br>
例如: 000C.293F.2C1A</p>
</li>
</ul>
<p><img src="./IEEE-MAC.png" alt></p>
<blockquote>
<p>第一字节</p>
</blockquote>
<table>
<thead>
<tr>
<th>位</th>
<th>取值</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>b0</td>
<td>0</td>
<td>单播地址</td>
</tr>
<tr>
<td>b0</td>
<td>1</td>
<td>组播地址</td>
</tr>
<tr>
<td>b1</td>
<td>0</td>
<td>全球管理</td>
</tr>
<tr>
<td>b1</td>
<td>1</td>
<td>本地管理</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>b0=0</th>
<th>b0=1</th>
<th>b1=0</th>
<th>b1=1</th>
<th>MAC 地址类型</th>
<th>地址占比</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>√</td>
<td></td>
<td>√</td>
<td></td>
<td>全球管理单播地址</td>
<td>25%</td>
<td>厂商生产网络设备时固化</td>
</tr>
<tr>
<td>√</td>
<td></td>
<td></td>
<td>√</td>
<td>本地管理单播地址</td>
<td>25%</td>
<td>由网络管理员分配</td>
</tr>
<tr>
<td></td>
<td>√</td>
<td>√</td>
<td></td>
<td>全球管理组播地址</td>
<td>25%</td>
<td></td>
</tr>
<tr>
<td></td>
<td>√</td>
<td></td>
<td>√</td>
<td>本地管理组播地址</td>
<td>25%</td>
<td>用户对主机进行配置时使用，如果剩余46位全为1，则表示广播地址 FF-FF-FF-FF-FF-FF</td>
</tr>
</tbody>
</table>
<p>所以可以计算总地址数量为 $2^{48} = 281,474,976,710,656$ 个。</p>
<h2 id="IP-地址">IP 地址</h2>
<p>IP 地址是指互联网协议地址，它是一个 32 位的二进制数，通常用 4 个 8 位的十进制数表示。属于网络层的地址。</p>
<h3 id="IP-地址的作用">IP 地址的作用</h3>
<p>IP 地址是因特网上主机和路由器的标识符，用于标识两部分信息：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>网络号：用于标识主机所在的网络</p>
</li>
<li class="lvl-2">
<p>主机号：用于标识主机</p>
</li>
</ul>
<p>所以，MAC 地址不具备区分网络的能力，而 IP 地址具备区分网络的能力。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>如果是单独网络，不接入因特网，那么只需要使用 MAC 地址就可以了。</p>
</li>
<li class="lvl-2">
<p>如果是接入因特网，那么就需要 IP 地址与 MAC 地址配合使用。</p>
</li>
</ul>
<h2 id="ARP-协议">ARP 协议</h2>
<p>ARP 协议是指地址解析协议，它是一种将 IP 地址解析为 MAC 地址的协议，属于网络层的协议。</p>
<p><img src="./conclude.png" alt></p>
]]></content>
      <categories>
        <category>Network</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机网络杂记-05</title>
    <url>/2023/11/14/1/</url>
    <content><![CDATA[<h2 id="随机接入-CSMA-CD-协议">随机接入 CSMA/CD 协议</h2>
<p>Carrier Sense Multiple Access with Collision Detection 载波监听多路访问/碰撞检测</p>
<p>在早期的以太网中，采用的是随机接入的方式，即任何一个站点都可以在任何时刻发送数据帧，但是由于多个站点同时发送数据帧会造成碰撞，因此需要进行碰撞检测，如果检测到碰撞，就立即停止发送数据帧，然后等待一段随机的时间后再次发送。</p>
<p><strong>MA 多址接入</strong>，即多个站点共享同一个信道，每个站点都有机会发送数据帧。</p>
<p><strong>CS 载波监听</strong>，即在发送数据帧之前，先监听信道，如果信道空闲，就发送数据帧，否则等待一段时间后再次监听。（先听后说）</p>
<p><strong>CD 碰撞检测</strong>，即在发送数据帧的过程中，如果检测到碰撞，就立即停止发送数据帧，然后等待一段随机的时间后再次发送。（边说边听）</p>
<blockquote>
<p>争用期</p>
</blockquote>
<p>争用期是指在发送数据帧之前，先监听信道，如果信道空闲，就发送数据帧，否则等待一段时间后再次监听。</p>
<blockquote>
<p>最小帧长</p>
</blockquote>
<p>最小帧长是指发送数据帧的最小长度，如果发送的数据帧长度小于最小帧长，就会出现碰撞检测失效的情况。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>以太网的最小帧长是 64 字节，如果发送的数据帧长度小于 64 字节，就会出现碰撞检测失效的情况。</p>
</li>
<li class="lvl-2">
<p>最小帧长的目的是为了保证在发送数据帧的过程中，能够检测到碰撞。</p>
</li>
<li class="lvl-2">
<p>在争用期内，没有检测到碰撞，就可以认为发送的数据帧没有发生碰撞。如果检测到碰撞，就立即停止发送数据帧，然后等待一段随机的时间后再次发送。所以但凡长度小于 64 字节的数据帧都是由于碰撞而异常终止的无效帧。</p>
</li>
</ul>
<blockquote>
<p>最大帧长</p>
</blockquote>
<p>最大帧长是指发送数据帧的最大长度，如果发送的数据帧长度大于最大帧长，就会出现碰撞检测失效的情况。最大帧长为 1518 字节。</p>
<blockquote>
<p>二进制指数退避算法</p>
</blockquote>
<p>二进制指数退避算法是指在发送数据帧的过程中，如果检测到碰撞，就立即停止发送数据帧，然后等待一段随机的时间后再次发送。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>若连续发生 k 次碰撞，就等待一个 0 到 2^k-1 之间的随机数，然后再次发送数据帧。</p>
</li>
<li class="lvl-2">
<p>若连续发生 16 次碰撞，就等待一个 0 到 2^16-1 之间的随机数，然后再次发送数据帧。 2^16-1 = 65535，即最大等待时间为 65535 微秒，即 65.535 毫秒。16 次仍不成功，就放弃发送数据帧，并向上层报告发送失败。</p>
</li>
</ul>
<blockquote>
<p>信道利用率</p>
</blockquote>
<p>信道利用率是指在发送数据帧的过程中，信道被利用的时间与总时间的比值。</p>
<p>应考虑以下这种理想情况</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>各个主机发送帧不发生碰撞</p>
</li>
<li class="lvl-2">
<p>总线一旦空闲，就立即有主机发送帧</p>
</li>
<li class="lvl-2">
<p>发送一帧的时间为 t + T0，其中 t 为传播时延，T0 为帧长</p>
</li>
</ul>
<p>S(max) = 1 / (1 + a)</p>
<p>a = t / T0</p>
<h2 id="随机接入-CSMA-CA-协议">随机接入 CSMA/CA 协议</h2>
<p>在无线局域网中，仍然可以使用随机接入的方式，但是由于无线信道的特殊性，无法进行碰撞检测，因此需要采用其他的方式来避免碰撞。</p>
<blockquote>
<p>为何无线网路不能使用 碰撞检测</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>对硬件要求高，需要在发送数据帧的过程中，能够检测到碰撞。</p>
</li>
<li class="lvl-2">
<p>存在隐藏终端问题，即 A 与 B 之间存在 C，A 与 C 之间存在 B，A 与 B 之间无法检测到碰撞，但是 A 与 C 之间存在碰撞。</p>
</li>
</ul>
<blockquote>
<p>Carrier Sense Multiple Access with Collision Avoidance 载波监听多路访问/碰撞避免</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>802.11 无线局域网采用的是随机接入的方式，但是由于无线信道的特殊性，无法进行碰撞检测，因此需要采用其他的方式来<strong>避免碰撞</strong>。</p>
</li>
<li class="lvl-2">
<p>由于不可能避免所有碰撞，并且无线信道误码率较高，802.11 标准使用了<strong>数据链路层的 ARQ 机制</strong>来保证可靠传输。</p>
</li>
<li class="lvl-2">
<p>802.11 的 MAC 层定义了两种基本的协议，即 DCF 分布式协调函数和 PCF 点对点协调函数。</p>
<ul class="lvl-2">
<li class="lvl-4">Distributed Coordination Function 分布式协调函数: 采用的是随机接入的方式，即任何一个站点都可以在任何时刻发送数据帧。</li>
<li class="lvl-4">Point Coordination Function 点对点协调函数: 采用的是集中控制的方式，即只有一个站点可以在任何时刻发送数据帧。</li>
</ul>
</li>
</ul>
<blockquote>
<p>InterFrame Space 帧间间隔</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>IFS 是指在发送数据帧的过程中，需要等待的时间。</p>
</li>
<li class="lvl-2">
<p>IFS 的长度与发送的数据帧的类型有关，即发送的数据帧的类型不同，IFS 的长度也不同。</p>
</li>
<li class="lvl-2">
<p>IFS 的长度越长，优先级越高，即发送的数据帧的类型越重要。</p>
</li>
<li class="lvl-2">
<p>常用的 IFS 有以下几种类型</p>
<ul class="lvl-2">
<li class="lvl-4"><strong>SIFS</strong> Short InterFrame Space 短帧间间隔；GitHub Copilot: SIFS是Short InterFrame Space的缩写，是一种短帧间间隔。在802.11协议中，SIFS是指在发送数据帧的过程中，需要等待的最短时间。SIFS的长度比PIFS和DIFS都要短，通常为16微秒。SIFS的作用是在发送数据帧的过程中，保证高优先级的数据帧能够优先传输。在802.11协议中，SIFS主要用于ACK帧和CTS帧的发送。</li>
<li class="lvl-4">PIFS PCF InterFrame Space PCF 帧间间隔</li>
<li class="lvl-4"><strong>DIFS</strong> DCF InterFrame Space DCF 帧间间隔；GitHub Copilot: DIFS是DCF InterFrame Space的缩写，是一种DCF帧间间隔。在802.11协议中，DIFS是指在发送数据帧的过程中，需要等待的时间。DIFS的长度比SIFS长，比PIFS短，通常为34微秒。DIFS的作用是在发送数据帧的过程中，保证低优先级的数据帧能够等待一段时间，以便高优先级的数据帧能够优先传输。在802.11协议中，DIFS主要用于发送数据帧和ACK帧之间的间隔。</li>
<li class="lvl-4">EIFS Extended InterFrame Space 扩展帧间间隔</li>
</ul>
</li>
</ul>
<blockquote>
<p>协议的工作原理</p>
</blockquote>
<p><img src="./principal.png" alt></p>
<blockquote>
<p>协议的退避算法</p>
</blockquote>
<p><img src="./algorithm1.png" alt><br>
<img src="./algorithm2.png" alt></p>
<blockquote>
<p>信道预约与虚拟载波监听</p>
</blockquote>
<p>为了提高信道利用率，802.11 无线局域网采用了信道预约的方式，即在发送数据帧之前，先发送 RTS 帧，然后接收 CTS 帧，最后发送数据帧。</p>
<p><img src="./channelappointandvirtuallisten.png" alt><br>
<img src="./cavlpic.png" alt></p>
]]></content>
      <categories>
        <category>Network</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机网络杂记-04</title>
    <url>/2023/11/07/1/</url>
    <content><![CDATA[<h2 id="点对点协议PPP-Point-to-Point-Protocol">点对点协议PPP Point-to-Point Protocol</h2>
<p>PPP是一种数据链路层协议，它规定了点对点通信的协议标准。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>PPP 为在点对点通信链路上传输网络层数据报提供了一种标准方法。</p>
<ul class="lvl-2">
<li class="lvl-4">PPP 为多种网络层协议提供了一种通用的封装方法。（封装成帧）</li>
<li class="lvl-4">PPP 为在两数据链路层提供了<code>链路控制协议LCP</code>，用于建立、配置和测试数据链路连接。</li>
<li class="lvl-4">PPP 为在两数据链路层提供了<code>网络控制协议NCP</code>，用于在两个节点之间传输网络层协议的数据包。</li>
</ul>
</li>
</ul>
<blockquote>
<p>帧格式</p>
</blockquote>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">帧的首部                            |     数据     | 帧的尾部</span><br><span class="line">|   F   |   A    |   C    |   P    |    DATA     |   FSC  |   F    |</span><br><span class="line">| 1 byte| 1 byte | 1 byte | 2 byte | 0~1500 byte | 2 byte | 1 byte |</span><br></pre></td></tr></table></figure>
<p>标志 Flag 字段 F：标志字段是一个字节，它的值为 0x7E，表示帧的开始和结束。地址 Address 字段 A：地址字段是一个字节，它的值为 0xFF，表示广播地址。预留，但目前没有使用。控制 Control 字段 C：控制字段是一个字节，它的值为 0x03，表示无控制信息。预留，但目前没有使用。协议 Protocol 字段 P：协议字段是两个字节，指明上层协议类型。如 0x0021 表示 IP 协议、0xC021 表示 LCP 协议、0x8021 表示 IPX 协议、0x8023 表示 IPX 协议。数据 Data 字段：数据字段是 0~1500 个字节，表示上层协议的数据。帧检验序列 FCS 字段：帧检验序列字段是两个字节，用于差错检测。</p>
<blockquote>
<p>透明传输</p>
</blockquote>
<p>如果在帧的数据部分出现了和帧首部相同的字符，数据链路层就会误认为帧结束，因此，数据链路层必须对数据进行处理，以免出现这种情况。</p>
<p>数据链路层对数据进行处理的方法是：在数据中出现特定字符时，数据链路层自动在该字符前面插入一个转义字符，以免与帧的定界符混淆。</p>
<p>发送方的处理：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>出现的每一个 0x7E 字符，都用 0x7D 0x5E 代替。</p>
</li>
<li class="lvl-2">
<p>出现的每一个 0x7D 字符，都用 0x7D 0x5D 代替。</p>
</li>
<li class="lvl-2">
<p>出现每一个 ASCII 码小于 0x20 的字符，都用 0x7D 加上该字符的 ASCII 码的值加上 0x20 代替。</p>
</li>
</ul>
<p>接收方的处理：只需要将 0x7D 0x5E 转换为 0x7E，将 0x7D 0x5D 转换为 0x7D，将 0x7D 加上 0x20 的值转换为原来的字符即可。</p>
<blockquote>
<p>面向比特的同步链路采用插入比特0的比特填充方法</p>
</blockquote>
<p>对发送方的处理:</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>在数据中出现 5 个连续的 1 时，就在后面插入一个 0。</p>
</li>
</ul>
<p>对接收方的处理:</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>在接收到 5 个连续的 1 时，就删除后面的 0。</p>
</li>
</ul>
<blockquote>
<p>差错侦测</p>
</blockquote>
<p>在FCS字段中使用CRC-CCITT差错检测码。</p>
<p>CRC-CCITT生成多项式为：$x<sup>{16}+x</sup>{12}+x^5+1$</p>
<p>参考：<span class="exturl" data-url="aHR0cHM6Ly9kYXRhdHJhY2tlci5pZXRmLm9yZy9kb2MvaHRtbC9yZmMxNjYyI2FwcGVuZGl4LUMuMg==">RFC 1662<i class="fa fa-external-link-alt"></i></span></p>
<p>接收方在接收到帧后，对帧进行差错检测，如果发现差错，则丢弃该帧。</p>
<blockquote>
<p>PPP 的工作状态</p>
</blockquote>
<p><img src="./ppp_status.png" alt></p>
<h2 id="媒体接入控制">媒体接入控制</h2>
<p>由于多路访问信道是由多个节点共享的，因此，必须对多路访问信道进行管理，以便在多个节点同时发送数据时，不会发生冲突。</p>
<p>这时，就需要使用媒体接入控制（MAC Media Access Control）子层。</p>
<p>媒体接入控制分为两种类型：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>静态媒体接入控制</p>
<ul class="lvl-2">
<li class="lvl-4">频分多址</li>
<li class="lvl-4">时分多址</li>
<li class="lvl-4">码分多址</li>
</ul>
</li>
<li class="lvl-2">
<p>动态媒体接入控制</p>
<ul class="lvl-2">
<li class="lvl-4">受控接入
<ul class="lvl-4">
<li class="lvl-6">集中控制</li>
<li class="lvl-6">分布控制</li>
</ul>
</li>
</ul>
</li>
<li class="lvl-2">
<p>随机接入</p>
</li>
</ul>
<p>预先固定分配好信道的使用权，这类方法非常不灵活，对于突发性的数据传输，效率很低。通常在无线网络物理层使用。</p>
<p>在动态接入控制中的集中控制，有一个主站以循环的方式向各个节点询问是否有数据要发送，如果有，则允许发送，否则，就询问下一个节点。缺点是主站成为了系统的瓶颈，如果主站出现故障，整个系统就无法工作。</p>
<p>而分布控制则是将主站的功能分散到各个节点，各个节点之间通过协商的方式来决定谁有权利发送数据。这种方法的缺点是，如果各个节点之间的协商出现问题，就会导致系统无法工作。</p>
<p>以上两种方式现在竞争中被淘汰了。</p>
<p>随机接入是一种分布式的媒体接入控制方法，它不需要主站，各个节点之间也不需要协商，而是通过一定的算法来决定谁有权利发送数据。</p>
<h3 id="静态划分信道">静态划分信道</h3>
<blockquote>
<p>信道复用</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>复用 Multiplexing：将多个信号合成一个信号的过程。</p>
</li>
<li class="lvl-2">
<p>分用 Demultiplexing：将复用后的信号分解成多个信号的过程。</p>
</li>
<li class="lvl-2">
<p>当网络传输媒体的带宽有限时，就需要对带宽进行复用，以便多个用户共享带宽。</p>
</li>
</ul>
<blockquote>
<p>常见复用技术</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>频分复用 FDM Frequency Division Multiplexing</p>
</li>
<li class="lvl-2">
<p>时分复用 TDM Time Division Multiplexing</p>
</li>
<li class="lvl-2">
<p>波分复用 WDM Wave Division Multiplexing</p>
</li>
<li class="lvl-2">
<p>码分复用 CDM Code Division Multiplexing</p>
</li>
</ul>
<p>码片 Chip：在 CDMA 中，每一个比特时间被分为多个小的时间间隔，每一个小的时间间隔称为一个码片，每一个码片都有一个唯一的码片序列，每一个用户都有一个唯一的码片序列，用户的数据就是通过这个码片序列来进行传输的。</p>
<p>使用 CDMA 时，每一个用户都有一个唯一的码片序列，这样，即使多个用户同时发送数据，也不会发生冲突。这个叫 m bit 的码片序列（Chip Sequence）。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>一个站如果发送比特1，则发送它自己的 m 个码片序列。</p>
</li>
<li class="lvl-2">
<p>一个站如果发送比特0，则发送它自己的 m 个码片序列的二进制反码。</p>
</li>
</ul>
<p>上面这种通讯方式叫做直接序列扩频通讯（DS-CDMA Direct Sequence Code Division Multiple Access）。</p>
<p>码片的挑选规则：</p>
<ol>
<li class="lvl-3">
<p>分配给每个用户的码片序列必须是正交的。（规格化内积为0）</p>
</li>
<li class="lvl-3">
<p>分配给每个用户的码片序列必须各不相同。</p>
</li>
</ol>
]]></content>
      <categories>
        <category>Network</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机网络杂记-03</title>
    <url>/2023/11/02/1/</url>
    <content><![CDATA[<h2 id="数据链路层">数据链路层</h2>
<p>数据链路层的作用是：将网络层传下来的IP数据报组装成帧，然后在通信的两个结点之间传送帧。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>帧：数据链路层的数据单位。</p>
</li>
<li class="lvl-2">
<p>数据链路：两个相邻结点之间的传输介质。</p>
</li>
</ul>
<blockquote>
<p>数据链路层的三个基本问题</p>
</blockquote>
<ol>
<li class="lvl-3">
<p>封装成帧</p>
</li>
<li class="lvl-3">
<p>可靠传输</p>
</li>
<li class="lvl-3">
<p>差错检测</p>
</li>
</ol>
<h3 id="封装成帧">封装成帧</h3>
<p>封装成帧是指在数据报前后添加首部和尾部，组成帧。</p>
<blockquote>
<p>帧的结构</p>
</blockquote>
<p>以太网V2的MAC帧格式如下：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>帧头：7个字段，共14个字节</p>
<ul class="lvl-2">
<li class="lvl-4">目的MAC地址：6个字节</li>
<li class="lvl-4">源地址：6个字节</li>
<li class="lvl-4">类型：2个字节，表示上层协议类型</li>
</ul>
</li>
<li class="lvl-2">
<p>数据：46~1500个字节</p>
</li>
<li class="lvl-2">
<p>帧尾：4个字节，表示帧的结束</p>
</li>
</ul>
<p>每个结构的作用</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>帧头和帧尾中包含了帧的定界符，用于标识帧的开始和结束；以及重要的控制信息。</p>
</li>
<li class="lvl-2">
<p>透明传输是指数据链路对上层交付的数据不加以解释和修改，即不对数据进行任何处理。</p>
</li>
<li class="lvl-2">
<p>为了提高帧的传输效率，应当使帧的数据部分的长度尽可能大些；数据链路层采用了帧的填充技术。</p>
</li>
<li class="lvl-2">
<p>帧的填充技术是指在数据中出现特定字符时，数据链路层自动在该字符前面插入一个转义字符，以免与帧的定界符混淆。</p>
</li>
<li class="lvl-2">
<p>考虑到差错控制等多种因素，每一种数据链路层协议都规定了帧的最大长度，即最大传送单元MTU（Maximum Transmission Unit）。</p>
</li>
</ul>
<h3 id="差错检测">差错检测</h3>
<p>实际的通信链路都是不可靠的，比特在传输过程中可能会出错：1变为0，0变为1，这种错误称为比特差错。</p>
<p>在一段时间内，传输错误的比特的个数称为比特差错率。</p>
<p>使用差错检测码可以检测出数据在传输过程中是否出错。</p>
<h4 id="奇偶校验码">奇偶校验码</h4>
<p>奇偶校验码是一种最简单的差错检测码，它的原理是：在每一帧的数据后面添加一个附加位，使得每一帧的数据加上附加位中1的个数为奇数或者偶数。</p>
<p>在奇校验中，如果传输过程产生 1 位差错，那么接收方检测到的附加位中1的个数就是奇数，就知道数据出错了。但是如果传输过程产生 2 位差错，那么接收方检测到的附加位中1的个数就是偶数，就无法检测出数据出错了。</p>
<p>偶校验与奇校验相反。</p>
<h4 id="循环冗余检测码-CRC（Cyclic-Redundancy-Check）">循环冗余检测码 CRC（Cyclic Redundancy Check）</h4>
<p>CRC码是一种最常用的差错检测码，它的原理是：将数据看成是二进制数，用一个除数去除这个二进制数，得到的余数作为附加位。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>收发双方事先约定好除数，这个除数称为生成多项式 G(x)。</p>
</li>
<li class="lvl-2">
<p>发送方将数据看成是二进制数，用生成多项式 G(x) 去除这个二进制数，得到的余数作为附加位。</p>
</li>
<li class="lvl-2">
<p>接收方将接收到的数据看成是二进制数，用生成多项式 G(x) 去除这个二进制数，得到的余数如果为0，说明数据没有出错；如果不为0，说明数据出错了。</p>
</li>
</ul>
<p>e.g. 生成多项式 G(x) = x^4 + x^2 + x + 1，求生成多项式各项系数构成的比特串。</p>
<p>G(x) = <strong>1</strong> x^4 + <strong>0</strong> x^3 + <strong>1</strong> x^2 + <strong>1</strong> x + <strong>1</strong> x^0 = 10111</p>
<p>e.g. 生成多项式 G(x) = x^3 + x^2 + 1，数据 101001，计算过程如下：</p>
<p>1、构造被除数；待发送信息后面添加生成式最高次数个0，即 101001<strong>000</strong>。<br>
2、构造除数；生成式各项系数构成的比特串，1101。<br>
3、进行除法运算；将被除数与除数进行异或运算，得到的结果再与除数进行异或运算，直到被除数的位数小于除数的位数为止。</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">sign      110101</span><br><span class="line">      ————————————</span><br><span class="line">1101 / 101001000</span><br><span class="line">     ⊕ 1101</span><br><span class="line">    ——————</span><br><span class="line">       01110</span><br><span class="line">      ⊕ 1101</span><br><span class="line">      ——————</span><br><span class="line">        001110</span><br><span class="line">        ⊕ 1101</span><br><span class="line">        ——————</span><br><span class="line">          001100</span><br><span class="line">          ⊕ 1101</span><br><span class="line">          ——————</span><br><span class="line">            0001</span><br></pre></td></tr></table></figure>
<p>其中，sign 表示此时是否够除，如果够除，sign 为 1，否则为 0。sign的作用是：当被除数的位数小于除数的位数时，将被除数的最高位补 0，使得被除数的位数大于除数的位数，这样才能进行异或运算。</p>
<p>4、得到的余数即为 CRC 码。余数的位数与生成式的最高次数相同，即 3 位，如果不够 3 位，前面补 0。<br>
5、将余数添加到待发送信息后面，得到的结果即为发送的信息。即 101001<strong>000</strong> + 001 = 101001<strong>001</strong>。</p>
<blockquote>
<p>说明</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>检错码只能检测出数据在传输过程中是否出错，不能纠正数据出错。</p>
</li>
<li class="lvl-2">
<p>CRC 码的检错能力与生成多项式的次数有关，生成多项式的次数越高，检错能力越强。</p>
</li>
<li class="lvl-2">
<p>想要纠正数据出错，需要使用纠错码。但是纠错码的计算量很大，一般不用于数据链路层。</p>
</li>
</ul>
<h2 id="可靠传输">可靠传输</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>利用差错检测技术，可以检测出数据在传输过程中是否出错，但是无法纠正数据出错。</p>
</li>
<li class="lvl-2">
<p>数据链路层向上层提供的服务类型</p>
<ul class="lvl-2">
<li class="lvl-4">不可靠服务：数据链路层不对数据进行检错和重发，只是简单地将数据从一端传送到另一端。仅仅丢弃出错的帧，不进行重发。</li>
<li class="lvl-4">可靠服务：数据链路层对数据进行检错和重发，确保数据从一端传送到另一端的正确性。</li>
</ul>
</li>
<li class="lvl-2">
<p>有线链路误码率一般在 10^-9 ~ 10^-12 之间，无线链路误码率一般在 10^-3 ~ 10^-6 之间。所以，有线链路一般不需要可靠传输，而无线链路一般需要可靠传输。</p>
</li>
<li class="lvl-2">
<p>比特差错只是数据链路层可能出现的差错之一，还有很多其他的差错，如：丢帧、重复帧、帧失序等。</p>
</li>
<li class="lvl-2">
<p>从整个网络体系结构来看，传输差错还包括：分组丢失、分组失序、分组重复等。</p>
</li>
<li class="lvl-2">
<p>可靠传输服务并不局限于数据链路层，网络层也可以提供可靠传输服务。</p>
</li>
</ul>
<p>下面，我们将记录一些可靠传输协议。这些协议并不局限于数据链路层，也可以应用于网络层。</p>
<h3 id="停止等待协议-SW（Stop-and-Wait）">停止等待协议 SW（Stop-and-Wait）</h3>
<p>停止等待协议是一种最简单的可靠传输协议，它的原理是：发送方发送一帧后，停止发送，等待接收方的确认帧；接收方收到帧后，发送确认帧，然后等待发送方的下一帧。</p>
<p>确认与否定</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">      互联网</span><br><span class="line">发送方--------接收方</span><br><span class="line">  |   DATA     |</span><br><span class="line">  |  -------&gt;  |</span><br><span class="line">  |            |</span><br><span class="line">  |   ACK      |</span><br><span class="line">  |  &lt;-------  |</span><br><span class="line">  |            |</span><br><span class="line">  |  DATA(误码) |</span><br><span class="line">  |  -------&gt;  | 丢</span><br><span class="line">  |            |</span><br><span class="line">  |   NCK      |</span><br><span class="line">重|  &lt;-------  | 弃</span><br><span class="line">  |            |</span><br><span class="line">  |   DATA     |</span><br><span class="line">传|  -------&gt;  |</span><br><span class="line">  |            |</span><br><span class="line">  ↓            ↓</span><br></pre></td></tr></table></figure>
<p>ACK：肯定确认帧，表示接收方正确收到了帧。<br>
NCK：否定确认帧，表示接收方没有正确收到帧。</p>
<blockquote>
<p>说明</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>发送方发送一帧后，停止发送，等待接收方的确认帧；接收方收到帧后，发送确认帧，然后等待发送方的下一帧。</p>
</li>
<li class="lvl-2">
<p>如果发送方在规定的时间内没有收到接收方的确认帧，就认为帧出错，需要重发。</p>
</li>
<li class="lvl-2">
<p>如果接收方在规定的时间内没有收到发送方的帧，就发送 NCK，要求发送方重发。</p>
</li>
<li class="lvl-2">
<p>如果发送方在规定的时间内没有收到接收方的 NCK，就认为帧没有出错，不需要重发。</p>
</li>
<li class="lvl-2">
<p>如果接收方在规定的时间内没有收到发送方的帧，就认为帧出错，需要重发。</p>
</li>
</ul>
<p>超时重传：发送方在规定的时间内没有收到接收方的确认帧，就认为帧出错，需要重发。</p>
<blockquote>
<p>为什么需要超时重传？</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>如果发送方在规定的时间内没有收到接收方的确认帧，就认为帧出错，需要重发。</p>
</li>
<li class="lvl-2">
<p>如果接收方在规定的时间内没有收到发送方的帧，就发送 NCK，要求发送方重发。</p>
</li>
</ul>
<p>超时重传</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">      互联网</span><br><span class="line">发送方--------接收方</span><br><span class="line">  |   DATA     |</span><br><span class="line">——|  -----丢失  |</span><br><span class="line">等|            |</span><br><span class="line">待|   DATA     |</span><br><span class="line">——|  -------&gt;  |</span><br><span class="line">重|            |</span><br><span class="line">传|   ACK      |</span><br><span class="line">  |  &lt;-------  |</span><br><span class="line">  |            |</span><br><span class="line">  |   DATA     |</span><br><span class="line">  |  -------&gt;  |</span><br><span class="line">  |            |</span><br><span class="line">  |   ACK      |</span><br><span class="line">  |  &lt;-------  |</span><br><span class="line">  |            |</span><br><span class="line">  ↓            ↓</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>如果发送方在规定的时间内没有收到接收方的确认帧，就认为帧出错，需要重发。</p>
</li>
<li class="lvl-2">
<p>如果接收方在规定的时间内没有收到发送方的帧，就发送 NCK，要求发送方重发。</p>
</li>
</ul>
<p>确认丢失</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">      互联网</span><br><span class="line">发送方--------接收方</span><br><span class="line">——|   DATA     |</span><br><span class="line">等|  -------&gt;  |</span><br><span class="line">  |            |</span><br><span class="line">待|   ACK      |</span><br><span class="line">——|  丢失-----  |</span><br><span class="line">重|            |</span><br><span class="line">传|   DATA     |</span><br><span class="line">  |  -------&gt;  |</span><br><span class="line">  |            |</span><br><span class="line">  |   ACK      |</span><br><span class="line">  |  &lt;-------  |</span><br><span class="line">  |            |</span><br><span class="line">  ↓            ↓</span><br></pre></td></tr></table></figure>
<p>上面的情况，ACK 丢失，发送方会重发，接收方会丢弃重复的帧。为了避免这种情况，需要在 ACK 中添加序号，这样接收方就可以检测出重复的帧。用1个比特来编号，就可以表示 0 和 1 两种状态，这种编号方式称为<strong>停止等待协议的可靠传输</strong>。</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">      互联网</span><br><span class="line">发送方--------接收方</span><br><span class="line">——|   DATA0    |</span><br><span class="line">等|  -------&gt;  |</span><br><span class="line">  |            |</span><br><span class="line">待|   ACK      |</span><br><span class="line">——|  丢失-----  |</span><br><span class="line">重|            |</span><br><span class="line">传|   DATA0    |</span><br><span class="line">  |  -------&gt;  |</span><br><span class="line">  |            |</span><br><span class="line">  |   ACK      |</span><br><span class="line">  |  &lt;-------  |</span><br><span class="line">  |            |</span><br><span class="line">  |   DATA1    |</span><br><span class="line">  |  -------&gt;  |</span><br><span class="line">  |            |</span><br><span class="line">  |   ACK      |</span><br><span class="line">  |  &lt;-------  |</span><br><span class="line">  |            |</span><br><span class="line">  ↓            ↓</span><br></pre></td></tr></table></figure>
<p>如果因为某些原因，接收方收到了重复的帧，就丢弃重复的帧，不发送 ACK。</p>
<p>确认迟到</p>
<p>ACK 因为某些原因，没有及时发送，而是延迟发送，这种情况称为<strong>确认迟到</strong>。</p>
<p>这时，我们在 ACK 中添加序号，这样发送方就可以检测出重复的帧。</p>
<p>在数据链路层中，通常不用给ACK编号，因为数据链路层的传输速率很高，一般不会出现确认迟到的情况。</p>
<blockquote>
<p>SW 协议的信道利用率</p>
</blockquote>
<p>信道利用率是指信道中有用的时间与总时间的比值。</p>
<p>U = TD / (TD + RTT + TA)</p>
<p>U 是信道利用率，TD 是数据传输时间，RTT 是往返时间，TA 是确认时间。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>数据传输时间 TD = L / R，L 是帧的长度，R 是信道的传输速率。</p>
</li>
<li class="lvl-2">
<p>往返时间 RTT = 2 * d / v，d 是信道的长度，v 是信号的传播速率。</p>
</li>
<li class="lvl-2">
<p>确认时间 TA = L / R，L 是帧的长度，R 是信道的传输速率。</p>
</li>
</ul>
<p>U = L / (L + 2 * d / v + L / R)</p>
<blockquote>
<p>说明</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>信道利用率是指信道中有用的时间与总时间的比值。</p>
</li>
<li class="lvl-2">
<p>数据传输时间 TD = L / R，L 是帧的长度，R 是信道的传输速率。</p>
</li>
<li class="lvl-2">
<p>往返时间 RTT = 2 * d / v，d 是信道的长度，v 是信号的传播速率。</p>
</li>
<li class="lvl-2">
<p>确认时间 TA = L / R，L 是帧的长度，R 是信道的传输速率。</p>
</li>
</ul>
<p>通过上面的公式可以看出，信道利用率与帧的长度有关，帧的长度越大，信道利用率越高。所以，这暴露了 SW 协议的一个缺点：帧的长度不能太小，否则信道利用率会很低。所以，因为 SW 协议的信道利用率低，所以 SW 协议一般不用于数据链路层，而是用于网络层。</p>
<h3 id="回退-N-帧协议-ARQ（Automatic-Repeat-Request）">回退 N 帧协议 ARQ（Automatic Repeat Request）</h3>
<p>SW 协议的信道利用率低，而且只能发送一帧，所以，我们可以将 SW 协议扩展成回退 N 帧协议 ARQ。</p>
<p>该协议也叫 Go-Back-N 协议，它的原理是：发送方连续发送 N 帧，而不需要等待接收方的确认帧；接收方收到帧后，发送确认帧，然后等待发送方的下一帧。</p>
<p>该协议采用流水线技术，发送方可以连续发送多帧，而不需要等待接收方的确认帧。</p>
<p>参考：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLnlmeGllLmNvbS9jb21wYXJpc29uLW9mLW5ldHdvcmstZ2JuLXNyLWFuZC10Y3Av">計算機網路概論 GBN、SR、TCP 比較<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvR28tQmFjay1OX0FSUQ==">Go-Back-N ARQ – Wikipedia<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<blockquote>
<p>发送方</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>发送窗口尺寸 WT 取值范围为 1 &lt; WT &lt;= 2^n - 1，其中 n 为比特数。</p>
<ul class="lvl-2">
<li class="lvl-4">WT = 1 时，退化为 SW 协议。</li>
<li class="lvl-4">WT = 2^n - 1 时，退化为 SR 协议。</li>
</ul>
</li>
<li class="lvl-2">
<p>发送方可在未收到确认帧的情况下，将序号为 SN ~ SN + WT - 1 的帧连续发送出去。</p>
</li>
<li class="lvl-2">
<p>发送方收到确认帧后，将窗口向前滑动，即 SN = SN + 1，然后发送 SN + WT - 1 帧。</p>
</li>
<li class="lvl-2">
<p>发送方在规定的时间内没有收到接收方的确认帧，就认为帧出错，需要重发。</p>
</li>
<li class="lvl-2">
<p>发送方在规定的时间内没有收到接收方的 NCK，就认为帧没有出错，不需要重发。</p>
</li>
</ul>
<blockquote>
<p>接收方</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>接收窗口尺寸 WR 取值范围为 WR = 1。因此，接收方只能接收序号为 RN 的帧。</p>
</li>
<li class="lvl-2">
<p>接收方收到序号为 RN 的帧后，发送确认帧，然后接收下一帧。</p>
</li>
<li class="lvl-2">
<p>接收方在规定的时间内没有收到发送方的帧，就发送 NCK，要求发送方重发。</p>
</li>
</ul>
<h3 id="选择重传协议-SR（Selective-Repeat）">选择重传协议 SR（Selective Repeat）</h3>
<p>SR 协议也是一种流水线协议，它的原理是：发送方连续发送 N 帧，而不需要等待接收方的确认帧；接收方收到帧后，发送确认帧，然后等待发送方的下一帧。</p>
<blockquote>
<p>发送方</p>
</blockquote>
<p>发送方的发送窗口尺寸 WT 取值范围为 1 &lt; WT &lt;= 2^(n-1)，其中 n 为比特数。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>WT = 1 时，退化为 SW 协议。</p>
</li>
<li class="lvl-2">
<p>WT &gt; 2^(n-1) 时，发送方的发送窗口尺寸超过了接收方的接收窗口尺寸，这种情况下，接收方无法接收所有的帧，所以，这种情况下，发送方的发送窗口尺寸应该等于接收方的接收窗口尺寸。</p>
</li>
</ul>
<blockquote>
<p>接收方</p>
</blockquote>
<p>接收方的接收窗口尺寸 WR 取值范围为 1 &lt; WR &lt;= WT = 2^(n-1)，其中 n 为比特数。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>WR = 1 时，退化为 SW 协议。</p>
</li>
<li class="lvl-2">
<p>WR &gt; 2^(n-1) 时，无意义。</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Network</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机网络杂记-02</title>
    <url>/2023/10/30/1/</url>
    <content><![CDATA[<h2 id="网络体系中的物理层">网络体系中的物理层</h2>
<p>物理层的作用是：通过物理媒体传输比特流。</p>
<p>物理层协议的主要任务</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>机械特性：规定了物理连接器的形状、引脚数目、引脚的用途、固定器件的位置等。</p>
</li>
<li class="lvl-2">
<p>电气特性：规定了电压的高低、电平的定义、接口的电流等。</p>
</li>
<li class="lvl-2">
<p>功能特性：规定了接口的功能，如何检测和控制数据的流动，如何检测和控制数据的流动，如何检测和控制错误，如何同步等。</p>
</li>
<li class="lvl-2">
<p>过程特性：规定了通信的建立和拆除的步骤，如何管理通信线路等。</p>
</li>
</ul>
<h3 id="传输媒体">传输媒体</h3>
<p>传输媒体分为两大类：导引型传输媒体和非导引型传输媒体。</p>
<blockquote>
<p>导引型传输媒体</p>
</blockquote>
<p>又称为有线传输媒体，是指能够传输电磁波的传输媒体。如双绞线、同轴电缆、光纤等。</p>
<ol>
<li class="lvl-3">
<p>双绞线双绞线是一种双股绝缘导线，两股导线以一定的规则绞合在一起，用来传输信号。</p>
</li>
<li class="lvl-3">
<p>同轴电缆同轴电缆是一种中心导线被绝缘层包围，绝缘层外面又有一层金属网的传输媒体。</p>
</li>
<li class="lvl-3">
<p>光纤光纤是一种以光的形式传输信号的传输媒体。</p>
</li>
</ol>
<blockquote>
<p>非导引型传输媒体</p>
</blockquote>
<p>又称为无线传输媒体，是指能够传输电磁波的传输媒体。如无线电波、微波、红外线等。</p>
<h3 id="传输方式">传输方式</h3>
<p>传输方式分为两大类：串行传输和并行传输。</p>
<blockquote>
<p>串行传输</p>
</blockquote>
<p>串行传输是指在传输数据时，每次只传输一位数据。串行传输的优点是：传输距离远，传输速率高，传输线路简单。</p>
<blockquote>
<p>并行传输</p>
</blockquote>
<p>并行传输是指在传输数据时，每次传输多位数据。并行传输的优点是：传输速率高，传输效率高。</p>
<p>此外，还有同步传输和异步传输。</p>
<blockquote>
<p>同步传输</p>
</blockquote>
<p>同步传输是指在传输数据时，发送方和接收方的时钟信号是同步的。</p>
<blockquote>
<p>异步传输</p>
</blockquote>
<p>异步传输是指在传输数据时，发送方和接收方的时钟信号是异步的。</p>
<p>单工传输、半双工传输和全双工传输。</p>
<p>这些传输方式的区别在于：传输方向、传输速率、传输效率、传输距离、传输线路复杂程度。</p>
<p>单工传输是指在传输数据时，数据只能单向传输。如广播电台。</p>
<p>半双工传输是指在传输数据时，数据可以双向传输，但是不能同时双向传输。如对讲机。</p>
<p>全双工传输是指在传输数据时，数据可以双向传输，而且可以同时双向传输。如电话机。</p>
<h3 id="编码与调制">编码与调制</h3>
<p>编码是指将数字信号转换为模拟信号的过程。</p>
<p>调制是指将数字信号转换为模拟信号的过程。</p>
<p>我们使用一个树状图来表示编码和调制的过程。</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">消息</span><br><span class="line">↓ 运送消息的实体</span><br><span class="line">数据</span><br><span class="line">↓ 数据的电磁形式</span><br><span class="line">信号</span><br><span class="line">↓ 信源发出的原始电信号</span><br><span class="line">基带信号</span><br><span class="line">|-------------------|</span><br><span class="line">↓                   ↓</span><br><span class="line">数字信号            模拟信号</span><br><span class="line">|-----|            |-----|</span><br><span class="line">↓     ↓            ↓     ↓</span><br><span class="line">编码  调制          编码  调制</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>码元：是指数字信号中的一个离散值。</p>
</li>
</ul>
<p>传输媒体与信道不能直接划等号，信道是指传输媒体的一部分。</p>
<blockquote>
<p>常用编码</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>非归零编码非归零编码是指在传输数据时，每个码元的电平都有一个基准电平，码元的电平要么是高于基准电平，要么是低于基准电平。</p>
</li>
<li class="lvl-2">
<p>归零编码归零编码是指在传输数据时，每个码元的电平都有一个基准电平，码元的电平要么是高于基准电平，要么是低于基准电平，但是每个码元的电平都会回到基准电平。</p>
</li>
<li class="lvl-2">
<p>曼彻斯特编码曼彻斯特编码是指在传输数据时，每个码元的电平都有一个基准电平，码元的电平要么是高于基准电平，要么是低于基准电平，但是每个码元的电平都会回到基准电平，而且每个码元的中间都会有一个电平跳变。</p>
</li>
<li class="lvl-2">
<p>差分曼彻斯特编码差分曼彻斯特编码是指在传输数据时，每个码元的电平都有一个基准电平，码元的电平要么是高于基准电平，要么是低于基准电平，但是每个码元的电平都会回到基准电平，而且每个码元的中间都会有一个电平跳变，而且每个码元的中间都会有一个电平跳变，而且每个码元的中间都会有一个电平跳变，而且每个码元的中间都会有一个电平跳变。</p>
</li>
</ul>
<blockquote>
<p>基本调制方法</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>调幅 AM<br>
调幅是指在传输数据时，通过改变信号的幅度来传输数据。</p>
</li>
<li class="lvl-2">
<p>调频 FM<br>
调频是指在传输数据时，通过改变信号的频率来传输数据。</p>
</li>
<li class="lvl-2">
<p>调相 PM<br>
调相是指在传输数据时，通过改变信号的相位来传输数据。</p>
</li>
<li class="lvl-2">
<p>数字基带调制数字基带调制是指在传输数据时，通过改变信号的幅度、频率、相位来传输数据。</p>
</li>
</ul>
<blockquote>
<p>混合调制</p>
</blockquote>
<p>混合调制是指在传输数据时，通过改变信号的幅度、频率、相位来传输数据。</p>
<p>通常情况下，相位和振幅可以结合在一起，称为正交相幅调制 QAM。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>QAM-16</p>
<ul class="lvl-2">
<li class="lvl-4">12种相位</li>
<li class="lvl-4">每种相位有 1/2 种振幅</li>
<li class="lvl-4">可以调出 16 种码元，每种码元可以表示 4 个比特</li>
<li class="lvl-4">码元与 4 个比特的对应关系采用格雷码</li>
<li class="lvl-4">任意两个相邻码元只有一个比特不同</li>
</ul>
</li>
</ul>
<h3 id="信道的极限容量">信道的极限容量</h3>
<p>信道的极限容量是指在单位时间内，信道所能传输的最大数据量。</p>
<p>码间串扰是指在传输数据时，由于信号的干扰，导致接收方无法正确识别发送方发送的信号。</p>
<p>失真的因素</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>码元传输速率</p>
</li>
<li class="lvl-2">
<p>信号传输距离</p>
</li>
<li class="lvl-2">
<p>噪声干扰</p>
</li>
<li class="lvl-2">
<p>传输媒体质量</p>
</li>
</ul>
<blockquote>
<p>奈氏准则</p>
</blockquote>
<p>奈氏准则是指在传输数据时，信道的极限容量与信道的带宽和信噪比有关。</p>
<p>理想低通信道的最高码元传输速率 = <code>2 * 带宽 * log2V</code><br>
理想带通信道的最高码元传输速率 = <code>带宽 * log2V</code></p>
<blockquote>
<p>香农定理</p>
</blockquote>
<p>香农定理是指在传输数据时，信道的极限容量与信道的带宽和信噪比有关。</p>
<p><code>c = W * log2(1 + S/N)</code>单位：比特/秒</p>
<p>其中，c 是信道的极限容量，W 是信道的带宽，S 是信道的信号功率，N 是信道的噪声功率。</p>
]]></content>
      <categories>
        <category>Network</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Torch 基础</title>
    <url>/2023/10/28/1/</url>
    <content><![CDATA[<h2 id="Troch-输入输出">Troch 输入输出</h2>
<p>创建一个 <code>tensor</code> 变量</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = torch.tensor([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br></pre></td></tr></table></figure>
<p>转换类型</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = x.<span class="built_in">float</span>()</span><br></pre></td></tr></table></figure>
<p>并使用 <code>cuda()</code> 函数将变量转移到 GPU 上。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = x.cuda()</span><br></pre></td></tr></table></figure>
<p>同样，我们可以使用 <code>cpu()</code> 函数将变量转移到 CPU 上。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = x.cpu()</span><br></pre></td></tr></table></figure>
<p>完整的代码如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">x = torch.tensor([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line">y = torch.tensor([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Before cuda&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;x: <span class="subst">&#123;x&#125;</span>, <span class="subst">&#123;x.<span class="built_in">type</span>()&#125;</span>, <span class="subst">&#123;x.size()&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;y: <span class="subst">&#123;y&#125;</span>, <span class="subst">&#123;y.<span class="built_in">type</span>()&#125;</span>, <span class="subst">&#123;y.size()&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;#######################################################&quot;</span>)</span><br><span class="line"></span><br><span class="line">x = x.<span class="built_in">float</span>()</span><br><span class="line">y = y.<span class="built_in">float</span>()</span><br><span class="line"></span><br><span class="line">x = x.cuda()</span><br><span class="line">y = y.cuda()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;After cuda&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;x: <span class="subst">&#123;x&#125;</span>, <span class="subst">&#123;x.<span class="built_in">type</span>()&#125;</span>, <span class="subst">&#123;x.size()&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;y: <span class="subst">&#123;y&#125;</span>, <span class="subst">&#123;y.<span class="built_in">type</span>()&#125;</span>, <span class="subst">&#123;y.size()&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>输出结果如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Before cuda</span><br><span class="line">x: tensor([1, 2, 3, 4]), torch.LongTensor, torch.Size([4])</span><br><span class="line">y: tensor([[1, 2],</span><br><span class="line">        [3, 4]]), torch.LongTensor, torch.Size([2, 2])</span><br><span class="line"><span class="comment">#######################################################</span></span><br><span class="line">After cuda</span><br><span class="line">x: tensor([1., 2., 3., 4.], device=<span class="string">&#x27;cuda:0&#x27;</span>), torch.cuda.FloatTensor, torch.Size([4])</span><br><span class="line">y: tensor([[1., 2.],</span><br><span class="line">        [3., 4.]], device=<span class="string">&#x27;cuda:0&#x27;</span>), torch.cuda.FloatTensor, torch.Size([2, 2])</span><br></pre></td></tr></table></figure>
<h2 id="构建网络结构">构建网络结构</h2>
<p>使用 <code>torch.nn</code> 构建网络结构。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line">myNet = nn.Sequential(</span><br><span class="line">    nn.Linear(<span class="number">2</span>, <span class="number">3</span>),</span><br><span class="line">    nn.ReLU(),</span><br><span class="line">    nn.Linear(<span class="number">3</span>, <span class="number">1</span>),</span><br><span class="line">    nn.Sigmoid()</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>使用类的形式构建网络结构。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">myNet</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(myNet, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.fc1 = nn.Linear(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">        <span class="variable language_">self</span>.fc2 = nn.Linear(<span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu = nn.ReLU()</span><br><span class="line">        <span class="variable language_">self</span>.sigmoid = nn.Sigmoid()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = <span class="variable language_">self</span>.fc1(x)</span><br><span class="line">        x = <span class="variable language_">self</span>.relu(x)</span><br><span class="line">        x = <span class="variable language_">self</span>.fc2(x)</span><br><span class="line">        x = <span class="variable language_">self</span>.sigmoid(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<p>上面两种方式都可以，但是第二种方式更加灵活，可以自定义网络结构。但是，它们都使用 CPU 计算，如果需要使用 GPU 计算，需要在构建网络结构的时候加上 <code>.cuda()</code>。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">myNet</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(myNet, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.fc1 = nn.Linear(<span class="number">2</span>, <span class="number">3</span>).cuda()</span><br><span class="line">        <span class="variable language_">self</span>.fc2 = nn.Linear(<span class="number">3</span>, <span class="number">1</span>).cuda()</span><br><span class="line">        <span class="variable language_">self</span>.relu = nn.ReLU().cuda()</span><br><span class="line">        <span class="variable language_">self</span>.sigmoid = nn.Sigmoid().cuda()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = <span class="variable language_">self</span>.fc1(x)</span><br><span class="line">        x = <span class="variable language_">self</span>.relu(x)</span><br><span class="line">        x = <span class="variable language_">self</span>.fc2(x)</span><br><span class="line">        x = <span class="variable language_">self</span>.sigmoid(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<h2 id="优化器与损失函数">优化器与损失函数</h2>
<p>使用 <code>torch.optim</code> 构建优化器。</p>
<p>这里使用了随机梯度下降法（SGD）。还有其他的优化器，如 Adam、RMSProp 等。参考：<span class="exturl" data-url="aHR0cHM6Ly9weXRvcmNoLm9yZy9kb2NzL3N0YWJsZS9vcHRpbS5odG1s">torch.optim<i class="fa fa-external-link-alt"></i></span></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch.optim <span class="keyword">as</span> optim</span><br><span class="line"></span><br><span class="line">optimizer = optim.SGD(myNet.parameters(), lr=<span class="number">0.01</span>)</span><br></pre></td></tr></table></figure>
<p>使用 <code>torch.nn</code> 构建损失函数。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line">criterion = nn.MSELoss()</span><br></pre></td></tr></table></figure>
<h2 id="保存与加载模型">保存与加载模型</h2>
<p>保存模型</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 这种方式只保存模型的参数</span></span><br><span class="line">torch.save(myNet.state_dict(), <span class="string">&#x27;myNet.pth&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># or</span></span><br><span class="line"><span class="comment"># 这种方式保存整个模型</span></span><br><span class="line">torch.save(myNet, <span class="string">&#x27;myNet.pth&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>加载模型</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">myNet.load_state_dict(torch.load(<span class="string">&#x27;myNet.pth&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h2 id="训练一个简单的网络学习-XOR">训练一个简单的网络学习 XOR</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyNet</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(MyNet, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.net = nn.Sequential(</span><br><span class="line">            nn.Linear(<span class="number">2</span>, <span class="number">20</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(<span class="number">20</span>, <span class="number">1</span>),</span><br><span class="line">            nn.Sigmoid()</span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.optimizer = torch.optim.SGD(<span class="variable language_">self</span>.net.parameters(), lr=<span class="number">0.05</span>)</span><br><span class="line">        <span class="variable language_">self</span>.loss_func = nn.MSELoss()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.net(x)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">train_xor</span>(<span class="params">self, x, y, epochs=<span class="number">5000</span></span>):</span><br><span class="line">        <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(epochs):</span><br><span class="line">            out = <span class="variable language_">self</span>.forward(x)</span><br><span class="line">            loss = <span class="variable language_">self</span>.loss_func(out, y)</span><br><span class="line"></span><br><span class="line">            <span class="variable language_">self</span>.optimizer.zero_grad()</span><br><span class="line">            loss.backward()</span><br><span class="line">            <span class="variable language_">self</span>.optimizer.step()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> epoch % <span class="number">1000</span> == <span class="number">0</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&#x27;epoch: <span class="subst">&#123;epoch&#125;</span>, loss: <span class="subst">&#123;loss&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        out = <span class="variable language_">self</span>.forward(x)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;out: <span class="subst">&#123;out.data&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        torch.save(<span class="variable language_">self</span>.net, <span class="string">&#x27;net_EOR_CPU.pkl&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    x = [[<span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">1</span>]]</span><br><span class="line">    y = [[<span class="number">0</span>], [<span class="number">1</span>], [<span class="number">1</span>], [<span class="number">0</span>]]</span><br><span class="line">    x_tensor = torch.tensor(x).<span class="built_in">float</span>()</span><br><span class="line">    y_tensor = torch.tensor(y).<span class="built_in">float</span>()</span><br><span class="line"></span><br><span class="line">    net = MyNet()</span><br><span class="line">    <span class="built_in">print</span>(net)</span><br><span class="line"></span><br><span class="line">    net.train_xor(x_tensor, y_tensor)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>测试模型</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyNet</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, model_path</span>):</span><br><span class="line">        <span class="variable language_">self</span>.net = torch.load(model_path, map_location=<span class="string">&#x27;cpu&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">predict</span>(<span class="params">self, x</span>):</span><br><span class="line">        out = <span class="variable language_">self</span>.net(x)</span><br><span class="line">        outfinal = out.data</span><br><span class="line">        <span class="keyword">return</span> outfinal</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    x = [[<span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">1</span>]]</span><br><span class="line">    x_tensor = torch.tensor(x).<span class="built_in">float</span>()</span><br><span class="line"></span><br><span class="line">    net = MyNet(<span class="string">&#x27;net_EOR_CPU.pkl&#x27;</span>)</span><br><span class="line">    outfinal = net.predict(x_tensor)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;out: <span class="subst">&#123;outfinal&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">        <span class="keyword">if</span> outfinal[i] &lt; <span class="number">0.5</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&#x27;out: <span class="subst">&#123;outfinal[i]&#125;</span>, 0&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&#x27;out: <span class="subst">&#123;outfinal[i]&#125;</span>, 1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>这个例子中，我们使用了 <code>torch.nn</code> 构建了一个网络结构，使用了 <code>torch.optim</code> 构建了一个优化器，使用了 <code>torch.nn</code> 构建了一个损失函数，使用了 <code>torch.save</code> 保存了模型，使用了 <code>torch.load</code> 加载了模型。</p>
<p>并且使用的是 CPU 计算，如果需要使用 GPU 计算，需要在构建网络结构的时候加上 <code>.cuda()</code>。</p>
<p>最后 <code>print</code> 时，将结果cpu化，即 <code>print(net(x).cpu())</code>。这样才能在 CPU 上打印出结果。</p>
<h2 id="参考">参考</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9weXRvcmNoLm9yZy9kb2NzL3N0YWJsZS9pbmRleC5odG1s">PyTorch官方文档<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9weXRvcmNoLWNuLnJlYWR0aGVkb2NzLmlvL3poL2xhdGVzdC8=">PyTorch中文文档<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p>⟪Python 神经网络入门与实战⟫ ———— 王凯编著，北京大学出版社，2020年11月第1版</p>
</li>
</ul>
]]></content>
      <categories>
        <category>ANNs</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机网络杂记-01</title>
    <url>/2023/10/26/1/</url>
    <content><![CDATA[<h2 id="三种交换方式">三种交换方式</h2>
<ol>
<li class="lvl-3">电路交换</li>
<li class="lvl-3">报文交换</li>
<li class="lvl-3">分组交换</li>
</ol>
<h3 id="电路交换">电路交换</h3>
<p>电路交换是在通信双方通信之前，先建立一条物理通路，然后通信双方就可以通过这条物理通路进行通信。通信结束后，再释放这条物理通路。</p>
<p>电路交换的优点是通信质量高，缺点是通信双方独占物理通路，通信效率低。</p>
<h3 id="报文交换">报文交换</h3>
<p>报文交换是在通信双方通信之前，先建立一条逻辑通路，然后通信双方就可以通过这条逻辑通路进行通信。通信结束后，再释放这条逻辑通路。</p>
<p>报文交换的优点是通信效率高，缺点是通信质量低。</p>
<h3 id="分组交换">分组交换</h3>
<p>分组交换是在通信双方通信之前，先建立一条逻辑通路，然后通信双方就可以通过这条逻辑通路进行通信。通信结束后，再释放这条逻辑通路。</p>
<p>分组交换的优点是通信效率高，缺点是通信质量低。</p>
<h3 id="电路交换与报文交换的区别">电路交换与报文交换的区别</h3>
<p>电路交换与报文交换的区别在于，电路交换是在通信双方通信之前，先建立一条物理通路，然后通信双方就可以通过这条物理通路进行通信。通信结束后，再释放这条物理通路。而报文交换是在通信双方通信之前，先建立一条逻辑通路，然后通信双方就可以通过这条逻辑通路进行通信。通信结束后，再释放这条逻辑通路。</p>
<h2 id="计算机网络的定义">计算机网络的定义</h2>
<p>首先，计算机网络的定义并未统一。计算机网络的最简单的定义是：计算机网络是互连的、自治的计算机集合。这个定义的缺点是：计算机网络的定义过于简单，没有体现计算机网络的特点。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>互联：计算机网络是由若干计算机互联而成的。</p>
</li>
<li class="lvl-2">
<p>自治：计算机网络中的每台计算机都是自治的，即每台计算机都有自己的操作系统、软件、硬件等。</p>
</li>
<li class="lvl-2">
<p>集合：计算机网络中的每台计算机都是相互联系的，没有一台计算机是孤立的。</p>
</li>
</ul>
<p>还有一种较好的定义是：计算机网络主要是由一些<strong>通用的、可编程的硬件互连</strong>而成的，而这些硬件并非专门为某个特定的目的而设计的。这些可编程的硬件能够用来传送多种不同类型的数据，并且能够<strong>支持广泛的和不断变化的应用</strong>。</p>
<h2 id="计算机网络的分类">计算机网络的分类</h2>
<p>按交换技术分类：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>电路交换</p>
</li>
<li class="lvl-2">
<p>报文交换</p>
</li>
<li class="lvl-2">
<p>分组交换</p>
</li>
</ul>
<p>按使用者分类：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>公用网</p>
</li>
<li class="lvl-2">
<p>专用网</p>
</li>
</ul>
<p>按传输介质分类：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>有线网络</p>
</li>
<li class="lvl-2">
<p>无线网络</p>
</li>
</ul>
<p>按网络的作用范围分类：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>广域网 WAN</p>
</li>
<li class="lvl-2">
<p>城域网 MAN</p>
</li>
<li class="lvl-2">
<p>局域网 LAN</p>
</li>
<li class="lvl-2">
<p>个域网 PAN</p>
</li>
</ul>
<p>按拓扑结构分类：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>总线型</p>
</li>
<li class="lvl-2">
<p>星型</p>
</li>
<li class="lvl-2">
<p>环型</p>
</li>
<li class="lvl-2">
<p>网状型</p>
</li>
</ul>
<h2 id="计算机网络性能指标">计算机网络性能指标</h2>
<table>
<thead>
<tr>
<th style="text-align:center">指标</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">速率</td>
<td style="text-align:left">传输数据的速率</td>
</tr>
<tr>
<td style="text-align:center">带宽</td>
<td style="text-align:left">传输数据的最高速率</td>
</tr>
<tr>
<td style="text-align:center">吞吐量</td>
<td style="text-align:left">单位时间内通过某个网络的数据量</td>
</tr>
<tr>
<td style="text-align:center">时延</td>
<td style="text-align:left">数据从网络的一端传送到另一端所需的时间</td>
</tr>
<tr>
<td style="text-align:center">时延带宽积</td>
<td style="text-align:left">传输数据的长度与带宽的乘积</td>
</tr>
<tr>
<td style="text-align:center">往返时间 RTT</td>
<td style="text-align:left">从发送方发送数据开始，到发送方收到来自接收方的确认总共经历的时间</td>
</tr>
<tr>
<td style="text-align:center">利用率</td>
<td style="text-align:left">信道有百分之多少时间是被利用的</td>
</tr>
<tr>
<td style="text-align:center">误码率</td>
<td style="text-align:left">传输错误的比特数与传输总比特数的比值</td>
</tr>
<tr>
<td style="text-align:center">丢包率</td>
<td style="text-align:left">传输丢失的数据包的比率</td>
</tr>
</tbody>
</table>
<blockquote>
<p>有关<strong>比特</strong>的相关知识</p>
</blockquote>
<p>8 bit = 1 Byte<br>
KB = 2^10 Byte<br>
MB = K<em>KB = 2^20 Byte<br>
GB = K</em>MB = 2^30 Byte<br>
TB = K<em>GB = 2^40 Byte<br>
PB = K</em>TB = 2^50 Byte</p>
<blockquote>
<p>有关<strong>速率</strong>的相关知识</p>
</blockquote>
<p>bit/s = bps<br>
kb/s = Kbps = 10^3 bps<br>
Mb/s = Mbps = 10^6 bps<br>
Gb/s = Gbps = 10^9 bps<br>
Tb/s = Tbps = 10^12 bps</p>
<p>注意，<code>b</code> 与 <code>B</code> 的区别，<code>b</code> 表示比特，<code>B</code> 表示字节。</p>
<blockquote>
<p>有关<strong>带宽</strong>的相关知识</p>
</blockquote>
<p>在模拟信号中，带宽是指信号的频带宽度，即信号的最高频率与最低频率之差。在数字信号中，带宽是指数字信号的速率，即单位时间内传送的比特数。(一般单位是Hz)</p>
<p>在计算机网络中，带宽是指网络中某一信道所能传送的<em>最高数据率</em>。带宽的单位是 bps。</p>
<p>上面的两种说法其实也存在密切联系。一条通信线路的带宽越大，它所能传送的信号频带宽度就越大，从而它所能传送的数字信号的速率也就越大。</p>
<blockquote>
<p>有关<strong>吞吐量</strong>的相关知识</p>
</blockquote>
<p>吞吐量常用于对网络的性能进行描述，它是指单位时间内通过某个网络的数据量。吞吐量的单位是 bps。</p>
<p>吞吐量受到网络带宽的限制，但是吞吐量与带宽并不相等。吞吐量是指单位时间内通过某个网络的数据量，而带宽是指网络中某一信道所能传送的最高数据率。</p>
<blockquote>
<p>有关<strong>时延</strong>的相关知识</p>
</blockquote>
<p>时延是指数据从网络的一端传送到另一端所需的时间。时延的单位是 s。</p>
<p>时延可以分为以下几种：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>发送时延：指从分组的第一个比特开始进入链路的传输所需的时间。</p>
</li>
<li class="lvl-2">
<p>传播时延：指从分组的第一个比特开始进入链路到该比特全部到达接收端所需的时间。</p>
</li>
<li class="lvl-2">
<p>处理时延：指分组在路由器或者主机中进行处理所需的时间。</p>
</li>
<li class="lvl-2">
<p>排队时延：指分组在经过路由器进行排队等待处理所需的时间。</p>
</li>
</ul>
<p>其中，发送时延、传播时延和处理时延是固定的，而排队时延是不固定的。</p>
<p>比如，数据块长度为 100 MB，信道宽度为 1 Mb/s，传送距离为 1000 km，计算出发送时延和传播时延。</p>
<p>发送时延：100 <em>2^20 b / 10^6 bps = 838.86 s<br>
传播时延：1000</em> 10^3 m / 2 * 10^8 m/s = 5 s</p>
<p>另一个例子，数据快长度为 1 B，信道宽度为 1 Mb/s，传送距离为 1000 km，计算出发送时延和传播时延。</p>
<p>发送时延：1 <em>8 b / 10^6 bps = 8</em> 10^-6 s<br>
传播时延：1000 <em>10^3 m / 2</em> 10^8 m/s = 0.005 s</p>
<p>所以，可以得出：发送时延 = 分组长度（bit）/ 信道带宽（bps）；传播时延 = 传输距离（m）/ 传播速率（m/s）。</p>
<blockquote>
<p>有关<strong>时延带宽积</strong>的相关知识</p>
</blockquote>
<p>时延带宽积是指传输数据的长度与带宽的乘积。时延带宽积的单位是 b。</p>
<p>链路的时延带宽积又称为<strong>以比特为单位的链路长度</strong>。</p>
<blockquote>
<p>有关往返时间<strong>RTT</strong>的相关知识</p>
</blockquote>
<p>RTT 是 Round Trip Time 的缩写，<br>
RTT 是指从发送方发送数据开始，到发送方收到来自接收方的确认总共经历的时间。RTT 的单位是 s。</p>
<p>在卫星链路中，RTT 通常是几百毫秒，而在光纤链路中，RTT 通常是几十毫秒。</p>
<blockquote>
<p>有关<strong>利用率</strong>的相关知识</p>
</blockquote>
<p>利用率是指信道有百分之多少时间是被利用的。利用率的单位是 %。</p>
<p>利用率分为两种：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>信道利用率：指信道有百分之多少时间是被利用的。</p>
</li>
<li class="lvl-2">
<p>网络利用率：指网络有百分之多少时间是被利用的。</p>
</li>
</ul>
<p>某信道的利用率增大，意味着该信道的吞吐量增大，该信道引起的时延也就增大。所以，信道利用率并非越大越好。</p>
<p>用 D0 表示网络空闲时的时延，D 表示网络当前的时延，利用率 U 的计算公式为：</p>
<p>D = D0 / (1 - U)<br>
U = D0 / (D0 + D)</p>
<p>所以，当网络利用率 U 为 50% 时，D = 2 <em>D0。之后，当网络利用率 U 为 90% 时，D = 10</em> D0。所以不能让网络利用率过高。应该让网络利用率在合理的范围内。</p>
<blockquote>
<p>有关<strong>丢包率</strong>的相关知识</p>
</blockquote>
<p>丢包率是指传输丢失的数据包的比率。丢包率的单位是 %。</p>
<p>分组交换网络中，分组在传输过程中可能会丢失。丢包率是指传输丢失的数据包的比率。通常存在两种丢包的原因：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>信道出错：信道出错是指信道中的比特发生了错误，这种错误是由于信道噪声引起的。</p>
</li>
<li class="lvl-2">
<p>缓存溢出：缓存溢出是指路由器的缓存队列已满，而又有新的分组到达，这时就会发生缓存溢出。</p>
</li>
</ul>
<p>丢包率反映了网络的拥塞程度。丢包率越大，说明网络的拥塞程度越大。无拥塞时，丢包率为 0%；轻度拥塞可能在 1% ~ 4%；中度拥塞可能在 10% ~ 20%；重度拥塞可能在 50% ~ 100%。</p>
<h2 id="计算机网络的体系结构">计算机网络的体系结构</h2>
<h3 id="常见的体系结构">常见的体系结构</h3>
<p>为了使得不同体系结构的网络都能够互联，国际标准化组织 ISO 制定了一个通用的体系结构，即 OSI 体系结构。</p>
<h4 id="OSI-体系结构">OSI 体系结构</h4>
<p>包括了 7 层，分别是：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>应用层</p>
</li>
<li class="lvl-2">
<p>表示层</p>
</li>
<li class="lvl-2">
<p>会话层</p>
</li>
<li class="lvl-2">
<p>传输层</p>
</li>
<li class="lvl-2">
<p>网络层</p>
</li>
<li class="lvl-2">
<p>数据链路层</p>
</li>
<li class="lvl-2">
<p>物理层</p>
</li>
</ul>
<h4 id="TCP-IP-体系结构">TCP/IP 体系结构</h4>
<p>包括了 4 层，分别是：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>应用层</p>
</li>
<li class="lvl-2">
<p>传输层</p>
</li>
<li class="lvl-2">
<p>网络层（也称为网际层）</p>
</li>
<li class="lvl-2">
<p>网络接口层</p>
</li>
</ul>
<p>TCP/IP 是一个四层的体系结构，而 OSI 是一个七层的体系结构。TCP/IP 体系结构中的网络接口层相当于 OSI 体系结构中的数据链路层和物理层。</p>
<h4 id="原理体系结构">原理体系结构</h4>
<p>通常，为了方便学习，我们将 TCP/IP 体系结构中的网络接口层拆分为两层，分别是数据链路层和物理层。这样，TCP/IP 体系结构就变成了一个五层的体系结构，分别是：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>应用层</p>
</li>
<li class="lvl-2">
<p>传输层</p>
</li>
<li class="lvl-2">
<p>网络层</p>
</li>
<li class="lvl-2">
<p>数据链路层</p>
</li>
<li class="lvl-2">
<p>物理层</p>
</li>
</ul>
<p>这是适用于教学的体系结构。</p>
<h3 id="分层的必要性">分层的必要性</h3>
<p><strong>分层</strong>可以将庞大而复杂的问题分解为若干个较小的问题，从而简化问题的解决过程。</p>
<p>我们面对的问题:</p>
<ol>
<li class="lvl-3">
<p>物理层：解决使用何种信号来传输比特的问题</p>
<ul class="lvl-2">
<li class="lvl-6">采用什么样的传输介质？</li>
<li class="lvl-6">采用什么样的编码方式？</li>
<li class="lvl-6">采用什么样的物理接口？</li>
</ul>
</li>
<li class="lvl-3">
<p>数据链路层：解决分组在一条链路上的传输问题</p>
<ul class="lvl-2">
<li class="lvl-6">如何标识网络上的主机？</li>
<li class="lvl-6">如何将数据组织成帧？</li>
<li class="lvl-6">如何协调各主机争用信道的使用？</li>
</ul>
</li>
<li class="lvl-3">
<p>网络层：解决分组在多个网络上的传输问题</p>
<ul class="lvl-2">
<li class="lvl-6">如何标识各网络以及主机？</li>
<li class="lvl-6">路由器如何转发分组？</li>
</ul>
</li>
<li class="lvl-3">
<p>传输层：解决进程之间的通信问题</p>
<ul class="lvl-2">
<li class="lvl-6">如何保证端到端的可靠传输？</li>
<li class="lvl-6">如何保证端到端的流量控制？</li>
</ul>
</li>
<li class="lvl-3">
<p>应用层：解决应用进程之间的通信问题</p>
<ul class="lvl-2">
<li class="lvl-6">如何标识应用进程？</li>
<li class="lvl-6">如何实现不同主机上的应用进程之间的通信？</li>
</ul>
</li>
</ol>
<h3 id="专用术语解释">专用术语解释</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>实体：一个实体是指一个功能上相对独立的部分，它可以是一个硬件设备，也可以是一个软件模块。</p>
</li>
<li class="lvl-2">
<p>对等实体：两个相互通信的实体在同一层，它们之间的通信是水平的，也就是说，它们在通信时所起的作用是完全相同的。</p>
</li>
<li class="lvl-2">
<p>协议：协议是指通信双方就通信中要采取的步骤达成的一种约定。协议是对等实体间通信的规则的集合。</p>
</li>
<li class="lvl-2">
<p>协议三要素：语法、语义、协议</p>
<ul class="lvl-2">
<li class="lvl-4">语法：语法是指数据与控制信息的结构或格式。</li>
<li class="lvl-4">语义：语义是指需要发出何种控制信息以及完成何种动作。</li>
<li class="lvl-4">协议：协议是指在何种情况下发出何种控制信息以及完成何种动作。</li>
</ul>
</li>
<li class="lvl-2">
<p>协议是水平的，服务是垂直的。</p>
</li>
<li class="lvl-2">
<p>实体是看得见相邻下层所提供的服务的，看不见相邻上层所提供的服务的。也就是说，下面协议对上面协议是透明的，上面协议对下面协议是不透明的。</p>
</li>
<li class="lvl-2">
<p>服务访问点 SAP：服务访问点是指一个实体向协议栈中的某一层提出的服务请求的接口。</p>
<ul class="lvl-2">
<li class="lvl-4">数据链路层的服务访问点为帧的类型字段。</li>
<li class="lvl-4">网络层的服务访问点为 IP 地址。</li>
<li class="lvl-4">传输层的服务访问点为端口号。</li>
</ul>
</li>
<li class="lvl-2">
<p>协议数据单元 PDU：协议数据单元是指在协议的某一层中，信息的组成单位。</p>
<ul class="lvl-2">
<li class="lvl-4">数据链路层的协议数据单元为帧。</li>
<li class="lvl-4">网络层的协议数据单元为数据报。</li>
<li class="lvl-4">传输层的协议数据单元为报文段。</li>
</ul>
</li>
<li class="lvl-2">
<p>服务：服务是指一个实体向协议栈中的某一层提供的服务的接口。</p>
</li>
<li class="lvl-2">
<p>服务原语：服务原语是指一个实体向协议栈中的某一层提供的服务的接口。</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Network</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>准备工作- TensorFlow 和其他工具软件包</title>
    <url>/2023/10/25/1/</url>
    <content><![CDATA[<h2 id="TensorFlow">TensorFlow</h2>
<p>TensorFlow是一个开源软件库，用于各种感知和语言理解任务的机器学习。目前被50个团队用于研究和生产许多Google商业产品，如语音识别、Gmail、Google 相册和搜索，其中许多产品曾使用过其前任软件DistBelief。 TensorFlow最初由谷歌大脑团队开发，用于Google的研究和生产，于2015年11月9日在Apache 2.0开源许可证下发布。</p>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cudGVuc29yZmxvdy5vcmcv">Official Website<i class="fa fa-external-link-alt"></i></span> | <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RlbnNvcmZsb3cvdGVuc29yZmxvdw==">GitHub<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="Setup">Setup</h2>
<p>跟随以下步骤，在2023年10月25日，Windows11 系统下安装TensorFlow 2.6.0版本。</p>
<blockquote>
<p>我的电脑配置:</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>CPU: AMD Ryzen 9 6900HX with Readon Graphic @3.3GHz</p>
</li>
<li class="lvl-2">
<p>GPU0: NVIDIA GeForce RTX 3060 Laptop</p>
</li>
<li class="lvl-2">
<p>GPU1: AMD Radeon Graphic 680M</p>
</li>
<li class="lvl-2">
<p>RAM: 32GB Samsung DDR5 BDie 5000Mit/s</p>
</li>
<li class="lvl-2">
<p>SSD: 1TB Micron 3400 PCIe4.0 NVMe SSD</p>
</li>
<li class="lvl-2">
<p>WLan: Intel AX210 802.11ax WiFi 6E</p>
</li>
<li class="lvl-2">
<p>Lan: RealTek Semiconductor RTL8125 Gaming 2.5GbE Family Ethernet Controller</p>
</li>
</ul>
<blockquote>
<p>说明</p>
</blockquote>
<p><mark>很多教程都喜欢在实体环境下安装，这样是不好的，官方的文档也不推荐这样做。🤣</mark></p>
<p>所以我们使用 conda 创建一个虚拟环境，然后在虚拟环境中安装 TensorFlow。“Wink😉”</p>
<blockquote>
<p>使用 Miniconda 就可以了， CUDA Toolkit 和 cuDNN 也可以在虚拟环境中安装，实体环境中可以忽略。</p>
</blockquote>
<summary>展开查看</summary>
<details>
<blockquote>
<p>需要提前下载的文件：</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuYW5hY29uZGEuY29tL3Byb2R1Y3RzL2luZGl2aWR1YWw=">Anaconda<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubnZpZGlhLmNvbS9jdWRhLXRvb2xraXQtYXJjaGl2ZQ==">CUDA Toolkit<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubnZpZGlhLmNvbS9yZHAvY3Vkbm4tYXJjaGl2ZQ==">cuDNN<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h3 id="CUDA-Toolkit">CUDA Toolkit</h3>
<p>在官网下载最新版本的 CUDA Toolkit(cuda_12.3.0_545.84_windows)。</p>
<p>不必担心兼容性问题，CUDA 是向下兼容的，即新版本的 CUDA 可以运行旧版本的 cuDNN。</p>
<p>安装 CUDA Toolkit，选择安装路径，点击“Install”按钮。</p>
<p>等待安装完成，点击“Finish”按钮。</p>
<h3 id="cuDNN">cuDNN</h3>
<p>把下载好的 cuDNN(cudnn-windows-x86_64-8.9.4.25_cuda12-archive) 压缩包解压到 CUDA Toolkit 的安装路径下。</p>
<h3 id="Python-Environment-Anaconda">Python Environment: Anaconda</h3>
<p>打开 Anaconda 官网，下载最新版本的 Anaconda(Anaconda3-2023.09-0-Windows-x86_64)。</p>
<p>安装 Anaconda，选择安装路径，勾选“Add Anaconda to my PATH environment variable”，点击“Install”按钮。</p>
<p>等待安装完成，点击“Next”按钮。</p>
</details>
<h4 id="Create-a-new-environment">Create a new environment</h4>
<p>打开 Anaconda Prompt，创建一个新的环境。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda create -n tf-gpu python=3.9</span><br></pre></td></tr></table></figure>
<p>激活新环境。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda <span class="built_in">env</span> list <span class="comment"># 查看所有环境</span></span><br><span class="line">conda activate tf-gpu <span class="comment"># 激活新环境</span></span><br></pre></td></tr></table></figure>
<h3 id="Install-cuda-toolkit-and-cudnn">Install cuda toolkit and cudnn</h3>
<ol>
<li class="lvl-3">
<p>先寻找 <code>cuda toolkit</code> 和 <code>cudnn</code></p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda search cudatoolkit</span><br><span class="line">conda search cudnn</span><br></pre></td></tr></table></figure>
<p>这里我们选择安装 <code>cudatoolkit==11.3.1</code> 和 <code>cudnn==8.2.1</code></p>
<div class="note warning"><h5 id="注意版本号">注意版本号</h5>
<p>注意：<code>cudatoolkit</code> 和 <code>cudnn</code> 的版本要对应，且与 <code>tensorflow-gpu</code> 的版本对应，否则会报错。</p>
<p>参考：<span class="exturl" data-url="aHR0cHM6Ly90ZW5zb3JmbG93Lmdvb2dsZS5jbi9pbnN0YWxsL3NvdXJjZV93aW5kb3dzP2hsPWVuI2dwdQ==">Tested build configurations<i class="fa fa-external-link-alt"></i></span></p>
<blockquote>
<p>并不需要完全一致，但最好是一致的。参考下图，<code>cudatoolkit==11.3.1</code> 和 <code>cudnn==8.2.1</code>，<code>cudnn==8.2.1</code> 其实对应的是 <code>cudatoolkit==11.3.0</code>，但是也可以运行。</p>
</blockquote>
</div>
<p><img src="./versionIssue.png" alt></p>
<ol start="2">
<li class="lvl-3">
<p>安装 <code>cudatoolkit</code> 和 <code>cudnn</code></p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda install cudatoolkit==11.3.1</span><br><span class="line">conda install cudnn==8.2.1</span><br></pre></td></tr></table></figure>
<p>最好按照上面的顺序安装。（因为我觉得 <code>cudnn</code> 依赖于 <code>cudatoolkit</code>）🫠</p>
<h3 id="Install-tensorflow-gpu">Install tensorflow-gpu</h3>
<ol>
<li class="lvl-3">
<p>安装 <code>tensorflow-gpu</code></p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install tensorflow-gpu==2.6.0</span><br></pre></td></tr></table></figure>
<p><s>2. 测试</s></p>
<p>不用测试了，一定会报错的。😅<br>
因为依赖的 <code>numpy</code> 与 <code>protobuf</code> 的版本不对应。😡</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install numpy==1.19.5   </span><br><span class="line">pip install protobuf==3.20.0</span><br></pre></td></tr></table></figure>
<ol start="2">
<li class="lvl-3">
<p>测试</p>
</li>
</ol>
<div class="note success"><h4 id="Test-code">Test code</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python -c <span class="string">&quot;import tensorflow as tf; print(tf.test.is_built_with_cuda()); print(tf.config.list_physical_devices(&#x27;GPU&#x27;)); print(tf.reduce_sum(tf.random.normal([1000,1000]))); print(tf.compat.v1.Session())&quot;</span></span><br></pre></td></tr></table></figure>
</div>
<p><img src="./test.png" alt></p>
<p>结果提示：<code>True</code>，说明安装成功。❤️<br>
并且识别到了 Nvdia 独立显卡。🎉</p>
<h2 id="10月25日更新">10月25日更新</h2>
<p>后来，我需要安装 <code>pytroch</code>，因为是 <code>conda</code> 环境，所以直接conda安装就好了。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda install pytorch torchvision torchaudio pytorch-cuda=12.1 -c pytorch -c nvidia</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda install pytorch=2.4.1 torchvision=0.19.1 torchaudio=2.4.1 pytorch-cuda=12.1 -c pytorch -c nvidia</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这条命令我没有测试，当时是直接安装的最新版本。现在重新配了环境，现在的最新版与当时不同了，可能会有一些出入，但是基本上是这样的。现在的版本对应下面的表格。</p>
</blockquote>
<table>
<thead>
<tr>
<th>Name</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>pytorch</td>
<td>2.4.1</td>
</tr>
<tr>
<td>torchvision</td>
<td>0.19.1</td>
</tr>
<tr>
<td>torchaudio</td>
<td>2.4.1</td>
</tr>
</tbody>
</table>
<p>但是会有兼容性问题，所以需要安装 <code>numpy==1.20.0</code>。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install numpy==1.22.0</span><br></pre></td></tr></table></figure>
<p>之后，测试一下。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python -c <span class="string">&quot;import torch; print(torch.__version__); print(torch.cuda.is_available()); print(torch.backends.cudnn.m.is_available()); print(torch.rand(5, 3))&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="10月28日更新">10月28日更新</h2>
<p>需要使用到 <code>matplotlib</code>，所以安装一下。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda install matplotlib==3.3.4</span><br></pre></td></tr></table></figure>
<p>这个版本没有出现兼容性问题。</p>
<p>以及 <code>opencv</code>。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda install opencv==4.6.0</span><br></pre></td></tr></table></figure>
<p>如果运行程序提示错误，很可能是 <code>numpy</code> 的版本问题，可以尝试重装 <code>numpy==1.20.0</code>。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip uninstall numpy</span><br><span class="line">pip install numpy==1.22.0</span><br></pre></td></tr></table></figure>
<p><s><code>numpy</code> 这小子真是个麻烦的家伙。😅</s></p>
<p>随后进行测试。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python -c <span class="string">&quot;import matplotlib; print(matplotlib.__version__); import cv2; print(cv2.__version__)&quot;</span></span><br></pre></td></tr></table></figure>
<p>具体功能测试</p>
<blockquote>
<p>matplotlib</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">y = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line"></span><br><span class="line">plt.plot(x, y)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>opencv</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(cv2.__version__)</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&#x27;./src/avatar.png&#x27;</span>)</span><br><span class="line"></span><br><span class="line">cv2.imshow(<span class="string">&#x27;image&#x27;</span>, img)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>然后，我们发现 opencv 报错了。</p>
<p>提示 <code>The function is not implemented. Rebuild the library with……</code></p>
<p>解决方法：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install opencv-contrib-python==4.8.1.78</span><br></pre></td></tr></table></figure>
<h2 id="参考">参考</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly90ZW5zb3JmbG93Lmdvb2dsZS5jbi8=">TensorFlow 官方文档<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmFuYWNvbmRhLmNvbS9mcmVlL2FuYWNvbmRhL2FwcGxpY2F0aW9ucy90ZW5zb3JmbG93Lw==">Anaconda Install TensorFlow<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly90ZW5zb3JmbG93Lmdvb2dsZS5jbi9pbnN0YWxsL3NvdXJjZV93aW5kb3dzP2hsPWVuI2dwdQ==">Tested build configurations<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cudGVuc29yZmxvdy5vcmcvZ3VpZGUvZ3B1P2hsPXpoLWNu">使用 Gpu<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly90ZW5zb3JmbG93Lmdvb2dsZS5jbi9pbnN0YWxsL3BpcD9obD1lbg==">Install TensorFlow with pip<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RvbW15X05pa2UvYXJ0aWNsZS9kZXRhaWxzLzEzMDA3MTgyMw==">十分钟安装TensorFlow-GPU<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h2 id="24-年-10-月-15-日-更新">24 年 10 月 15 日 更新</h2>
<p>如果遇到</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>AttributeError: module ‘numpy.typing’ has no attribute ‘NDArray’</p>
</li>
<li class="lvl-2">
<p>TypeError: ‘numpy._DTypeMeta’ object is not subscriptable</p>
</li>
<li class="lvl-2">
<p>etc.</p>
</li>
</ul>
<p>报错，可以尝试升级 numpy。</p>
<p>这个环境配置中绝大部分问题都是由于 numpy 引起的。</p>
<p>如果遇到 dll 缺失的问题，就在虚拟环境中搜索相关的 dll 文件，然后复制到系统目录 <code>C:\Windows\System</code> 下即可（大概率是 CUDA 问题，懒得去动）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip uninstall numpy</span><br><span class="line">pip install numpy==1.xx</span><br></pre></td></tr></table></figure>
<blockquote>
<p>其中 <code>1.xx</code> 是你想要安装的版本号。要自己尝试那个是可用的，不然会报错。我从 <code>1.17.0</code> 尝试到 <code>1.22.0</code>，就没有报错了。</p>
</blockquote>
<p>测试指令：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>cuda</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nvcc --version</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>tensorflow-gpu</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python -c <span class="string">&quot;import tensorflow as tf; print(tf.test.is_built_with_cuda()); print(tf.config.list_physical_devices(&#x27;GPU&#x27;)); print(tf.reduce_sum(tf.random.normal([1000,1000]))); print(tf.compat.v1.Session())&quot;</span></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>pytorch</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python -c <span class="string">&quot;import torch; print(torch.__version__); print(torch.cuda.is_available()); print(torch.backends.cudnn.m.is_available()); print(torch.rand(5, 3))&quot;</span></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>matplotlib</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python -c <span class="string">&quot;import matplotlib; print(matplotlib.__version__)&quot;</span></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>opencv</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python -c <span class="string">&quot;import cv2; print(cv2.__version__)&quot;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>完成后一看，这环境真大，好多东西。😅 11.2 GB (12,072,464,651 字节)</p>
</blockquote>
<h3 id="当前环境包列表">当前环境包列表</h3>
<p>当前系统环境如下：</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>python</td>
<td>3.9.13</td>
</tr>
<tr>
<td>conda</td>
<td>24.7.1</td>
</tr>
<tr>
<td>Windows</td>
<td>11 Pro 23H2(OS Build 22631.4317)</td>
</tr>
<tr>
<td>NVida Graphic Driver</td>
<td>565.90</td>
</tr>
<tr>
<td>Readon Graphic Driver</td>
<td>22.40.84.06</td>
</tr>
</tbody>
</table>
<div id="downloadcard">
    <div class="card">
        <h2>下载文件</h2>
        <a href="./files/tf-gpu-241015-requirements.txt" download="requirements.txt" class="download-btn" target="_blank" data-pjax-state="load">下载 pip 的包列表文件</a>
        <a href="./files/tf-gpu-241015-requirements.yaml" download="requirements.yaml" class="download-btn" target="_blank" data-pjax-state="load">下载 conda 的包列表文件</a>
    </div>
</div>
<style>
    #downloadcard {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 0;
    }

    .card {
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        text-align: center;
    }

    .card h2 {
        margin-bottom: 20px;
    }

    .download-btn {
        display: block;
        margin: 10px 0;
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        text-decoration: none;
        border-radius: 4px;
        transition: background-color 0.3s;
    }

    .download-btn:hover {
        background-color: #0056b3;
    }
</style>
<h3 id="使用-requirements-txt-以及-requirements-yml">使用 requirements.txt 以及 requirements.yml</h3>
<p>requirements.txt 是 pip 的包管理文件，requirements.yaml 是 conda 的包管理文件。</p>
<p>通过这两个文件，可以快速安装环境。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda <span class="built_in">env</span> create -f requirements.yaml</span><br></pre></td></tr></table></figure>
<h3 id="25年4月13日">25年4月13日</h3>
<p>又安装了 scikit-learn scikit_learn-1.6.1</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install scikit-learn==1.6.1</span><br></pre></td></tr></table></figure>
<p>又要解决该死的 numpy 版本问题了。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install numpy==1.23.0</span><br></pre></td></tr></table></figure>
<h2 id="25年4月25日">25年4月25日</h2>
<p>今天要用 TensorFlow 进行模型训练和测试。结果报错</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ImportError: cannot import name <span class="string">&#x27;dtensor&#x27;</span> from <span class="string">&#x27;tensorflow.compat.v2.experimental&#x27;</span></span><br></pre></td></tr></table></figure>
<p>解决方法：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install keras==2.6</span><br></pre></td></tr></table></figure>
<p>又要用到 <code>seaborn</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install seaborn==0.13.2</span><br></pre></td></tr></table></figure>
<p>以及 tqdm</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install tqdm==4.67.1</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ANNs</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS3 动画专题(下)</title>
    <url>/2023/10/19/2/</url>
    <content><![CDATA[<div class="note warning"><p>如果看不见内嵌网页或者连接错误，请刷新。</p>
</div>
<h2 id="transform3D">transform3D</h2>
<p>参考 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQ1NTL3RyYW5zZm9ybS1mdW5jdGlvbi90cmFuc2xhdGUzZA==">translate3d()<i class="fa fa-external-link-alt"></i></span></p>
<blockquote>
<p>常用函数</p>
</blockquote>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>translate3d(x, y, z)</td>
<td>定义 3D 转换，元素从当前位置移动到 (x,y,z)。</td>
</tr>
<tr>
<td>translateX(x)</td>
<td>定义 3D 转换，元素从当前位置水平移动到 x。</td>
</tr>
<tr>
<td>translateY(y)</td>
<td>定义 3D 转换，元素从当前位置垂直移动到 y。</td>
</tr>
<tr>
<td>translateZ(z)</td>
<td>定义 3D 转换，元素从当前位置移动到 z。</td>
</tr>
<tr>
<td>rotate3d(x, y, z, angle)</td>
<td>定义 3D 转换，元素围绕 (x,y,z) 轴移动到 angle。</td>
</tr>
<tr>
<td>rotateX(angle)</td>
<td>定义 3D 转换，元素围绕 x 轴移动到 angle。</td>
</tr>
<tr>
<td>rotateY(angle)</td>
<td>定义 3D 转换，元素围绕 y 轴移动到 angle。</td>
</tr>
<tr>
<td>rotateZ(angle)</td>
<td>定义 3D 转换，元素围绕 z 轴移动到 angle。</td>
</tr>
<tr>
<td>scale3d(x, y, z)</td>
<td>定义 3D 缩放转换，元素从当前尺寸缩放到 (x,y,z)。</td>
</tr>
<tr>
<td>scaleX(x)</td>
<td>定义 3D 缩放转换，元素从当前尺寸水平缩放到 x。</td>
</tr>
<tr>
<td>scaleY(y)</td>
<td>定义 3D 缩放转换，元素从当前尺寸垂直缩放到 y。</td>
</tr>
<tr>
<td>scaleZ(z)</td>
<td>定义 3D 缩放转换，元素从当前尺寸缩放到 z。</td>
</tr>
<tr>
<td>perspective(n)</td>
<td>为 3D 转换元素定义透视视图。</td>
</tr>
</tbody>
</table>
<p>从上表可以看出，3D 转换的函数和 2D 转换的函数是一样的，只是多了一个 z 轴的参数。<br>
<code>transform3D</code> 主要是 3 个参数：<code>translate3d</code>、<code>rotate3d</code>、<code>scale3d</code>。</p>
<p>e.g. 1</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Transform3D<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.translate</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">100px</span>, <span class="number">100px</span>, <span class="number">100px</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.rotate</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">rotate3d</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">45deg</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.scale</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">scale3d</span>(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;translate&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;rotate&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;scale&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>e.g. 2</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Transform3D<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#box1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: brown solid <span class="number">1px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*在这里添加一个过渡效果*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: all <span class="number">1s</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            &amp;<span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span></span><br><span class="line"><span class="language-css">                <span class="comment">/* 放大 1.5 倍 */</span></span></span><br><span class="line"><span class="language-css">                <span class="comment">/*transform: scale3d(1.5, 1.5, 1.5);*/</span></span></span><br><span class="line"><span class="language-css">                <span class="attribute">transform</span>: <span class="built_in">perspective</span>(<span class="number">100px</span>) <span class="built_in">scale3d</span>(<span class="number">1.5</span>, <span class="number">1.5</span>, <span class="number">1.5</span>);</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#box2</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*在这里添加一个过渡效果*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: all <span class="number">1s</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            &amp;<span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="comment">/*内容旋转 1 周*/</span></span></span><br><span class="line"><span class="language-css">                <span class="comment">/*transform: rotate3d(1, 1, 1, 360deg);*/</span></span></span><br><span class="line"><span class="language-css">                <span class="attribute">transform</span>: <span class="built_in">perspective</span>(<span class="number">100px</span>) <span class="built_in">rotate3d</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">360deg</span>);</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box2&quot;</span>&gt;</span>Soyo sann ❤️ Love!</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<iframe width="300px" height="350px" frameborder="0" scrolling="0" src="./html/transform3d.html"></iframe>
<p style="color: red">warn:<span style="color: white">如果看不见内嵌网页或者连接错误，请刷新。</span></p>
<p>通过上面这个例子，可以看出，3D 转换的函数和 2D 转换的函数是一样的，只是多了一个 z 轴的参数。</p>
<hr>
<h2 id="过渡属性">过渡属性</h2>
<p>过渡是元素从一种样式逐渐改变为另一种样式的效果。</p>
<ol>
<li class="lvl-3">
<p>指定四个要素</p>
<ol>
<li class="lvl-7">过渡属性，如 <code>background</code>、<code>width</code>、<code>height</code>、<code>color</code> 等等</li>
<li class="lvl-7">过渡时间，如 <code>1s</code>、<code>2s</code> 等等</li>
<li class="lvl-7">过渡函数，如 <code>linear</code>、<code>ease</code>、<code>ease-in</code>、<code>ease-out</code>、<code>ease-in-out</code> 等等</li>
<li class="lvl-7">延迟时间，如 <code>1s</code>、<code>2s</code> 等等</li>
</ol>
</li>
<li class="lvl-3">
<p>触发过渡通过用户的行为触发过渡，如 <code>:hover</code>、<code>:active</code>、<code>:focus</code> 等等</p>
</li>
</ol>
<blockquote>
<p>transition-property</p>
</blockquote>
<p><code>transition-property</code> 属性用于设置过渡效果的 CSS 属性的名称。</p>
<p>语法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transition-property</span>: none|all|property;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>none：默认值，没有属性会获得过渡效果</p>
</li>
<li class="lvl-2">
<p>all：所有属性都将获得过渡效果</p>
</li>
<li class="lvl-2">
<p>property：定义应用过渡效果的 CSS 属性的名称列表</p>
</li>
</ul>
<blockquote>
<p>transition-duration</p>
</blockquote>
<p><code>transition-duration</code> 属性用于设置过渡效果的持续时间。</p>
<p>语法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transition-duration</span>: time;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>time：必需，规定完成过渡效果需要花费的时间，以秒或毫秒计</p>
</li>
</ul>
<blockquote>
<p>transition-timing-function</p>
</blockquote>
<p><code>transition-timing-function</code> 属性用于设置过渡效果的速度曲线。</p>
<p>语法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transition-timing-function</span>: linear|ease|ease-in|ease-out|ease-in-out|<span class="built_in">cubic-bezier</span>(n,n,n,n)|step-start|step-end|<span class="built_in">steps</span>(int,start|end)|initial|inherit;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>linear：默认值，规定以相同速度开始至结束的过渡效果（等于 cubic-bezier(0,0,1,1)）</p>
</li>
<li class="lvl-2">
<p>ease：规定慢速开始，然后变快，然后慢速结束的过渡效果（cubic-bezier(0.25,0.1,0.25,1)）</p>
</li>
<li class="lvl-2">
<p>ease-in：规定以慢速开始的过渡效果（等于 cubic-bezier(0.42,0,1,1)）</p>
</li>
<li class="lvl-2">
<p>ease-out：规定以慢速结束的过渡效果（等于 cubic-bezier(0,0,0.58,1)）</p>
</li>
<li class="lvl-2">
<p>ease-in-out：规定以慢速开始和结束的过渡效果（等于 cubic-bezier(0.42,0,0.58,1)）</p>
</li>
<li class="lvl-2">
<p>cubic-bezier(n,n,n,n)：在 cubic-bezier 函数中定义自己的值。可能的值是 0 至 1 之间的数值</p>
</li>
<li class="lvl-2">
<p>step-start：规定在开始时立即过渡到目标值，没有过渡效果（等于 steps(1,start)）</p>
</li>
<li class="lvl-2">
<p>step-end：规定在结束时立即过渡到目标值，没有过渡效果（等于 steps(1,end)）</p>
</li>
<li class="lvl-2">
<p>steps(int,start|end)：规定在指定的百分比处发生指定的过渡效果。可能的值是 0 至 1 之间的数值，以及 start 和 end</p>
</li>
<li class="lvl-2">
<p>initial：设置该属性为它的默认值</p>
</li>
<li class="lvl-2">
<p>inherit：从父元素继承该属性</p>
</li>
</ul>
<blockquote>
<p>transition-delay</p>
</blockquote>
<p><code>transition-delay</code> 属性用于设置过渡效果的延迟时间。</p>
<p>语法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transition-delay</span>: time;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>time：必需，规定过渡效果何时开始，以秒或毫秒计</p>
</li>
</ul>
<hr>
<p>e.g.</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Transition<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#box1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*transition: all 1s;*/</span></span></span><br><span class="line"><span class="language-css">            <span class="comment">/*过渡属性*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition-property</span>: width, height, background-color, font-size, color;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*过渡时间*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition-duration</span>: <span class="number">1s</span>;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*过渡函数*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition-timing-function</span>: ease-in-out;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*过渡延迟*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition-delay</span>: <span class="number">1s</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            &amp;<span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">background-color</span>: royalblue;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Soyo sann ❤️ Love!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<iframe width="100%" height="400px" frameborder="0" scrolling="0" src="./html/transition.html"></iframe>
<p style="color: red">warn:<span style="color: white">如果看不见内嵌网页或者连接错误，请刷新。</span></p>
<hr>
<p>我们还可以使用 <code>transition</code> 属性来简写上面的代码。</p>
<p>比如<code>transition: width 1s ease-in-out 1s, height 1s ease-in-out 1s, background-color 1s ease-in-out 1s, font-size 1s ease-in-out 1s, color 1s ease-in-out 1s;</code>。</p>
<p>如果不需要精准控制，可以使用 <code>all</code> 来简写，比如 <code>transition: all 1s ease-in-out 1s;</code>。</p>
<h2 id="动画-Animation">动画 Animation</h2>
<p>过渡属性只能实现简单的动画效果，如果需要实现复杂的动画效果，就需要使用动画属性了。</p>
<p><code>animation</code> 属性用于设置动画效果。通过<mark>关键帧</mark>控制动画的每一步，通过<mark>动画属性</mark>控制动画的播放方式。</p>
<blockquote>
<p>@keyframes</p>
</blockquote>
<p><code>@keyframes</code> 规则用于创建动画。</p>
<p>语法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> animationname &#123;</span><br><span class="line">    keyframes-selector &#123;</span><br><span class="line">        css-styles;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>e.g.</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> name &#123;</span><br><span class="line">    <span class="selector-tag">from</span>|<span class="number">0%</span> &#123;</span><br><span class="line">        css-styles;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">25%</span> &#123;</span><br><span class="line">        css-styles;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        css-styles;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">75%</span> &#123;</span><br><span class="line">        css-styles;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span>|<span class="number">100%</span> &#123;</span><br><span class="line">        css-styles;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>animation 属性</p>
</blockquote>
<p><code>animation</code> 属性用于设置动画效果。</p>
<p>调用 <code>@keyframes</code> 规则中定义的动画。设置动画的持续时间、速度曲线、延迟等等。</p>
<p>语法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">animation</span>: name duration timing-function delay iteration-count direction;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>name：必需，规定需要绑定到选择器的 keyframe 名称</p>
</li>
<li class="lvl-2">
<p>duration：必需，规定完成动画所花费的时间，以秒或毫秒计</p>
</li>
<li class="lvl-2">
<p>timing-function：可选，规定动画的速度曲线，默认是 <code>ease</code></p>
</li>
<li class="lvl-2">
<p>delay：可选，规定在动画开始之前的延迟，默认是 <code>0</code></p>
</li>
<li class="lvl-2">
<p>iteration-count：可选，规定动画应该播放的次数，默认是 <code>1</code></p>
</li>
<li class="lvl-2">
<p>direction：可选，规定是否应该轮流反向播放动画，默认是 <code>normal</code></p>
</li>
</ul>
<hr>
<p>e.g. banner 轮播图</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Banner<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#banner</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100vh</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#000</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*display: flex;*/</span></span></span><br><span class="line"><span class="language-css">            <span class="comment">/*justify-content: center;*/</span></span></span><br><span class="line"><span class="language-css">            <span class="comment">/*align-items: center;*/</span></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#box</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">animation</span>: move <span class="number">12s</span> linear infinite;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#box</span> <span class="selector-tag">img</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*position: absolute;*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">opacity</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">animation</span>: move <span class="number">12s</span> linear infinite;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#box</span> <span class="selector-tag">img</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>)&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">animation-delay</span>: <span class="number">0s</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#box</span> <span class="selector-tag">img</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>)&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">animation-delay</span>: <span class="number">2s</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#box</span> <span class="selector-tag">img</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>)&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">animation-delay</span>: <span class="number">4s</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#box</span> <span class="selector-tag">img</span><span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>)&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">animation-delay</span>: <span class="number">6s</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#box</span> <span class="selector-tag">img</span><span class="selector-pseudo">:nth-child</span>(<span class="number">5</span>)&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">animation-delay</span>: <span class="number">8s</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="keyword">@keyframes</span> move &#123;</span></span><br><span class="line"><span class="language-css">            <span class="number">0%</span>&#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">opacity</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            <span class="number">20%</span>&#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">opacity</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            <span class="number">80%</span>&#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">opacity</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            <span class="number">100%</span>&#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">opacity</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;banner&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://anime.bang-dream.com/mygo/wordpress/wp-content/themes/mygo_v1/assets/images/common/character/img_tomori.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;tomori&quot;</span> <span class="attr">id</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://anime.bang-dream.com/mygo/wordpress/wp-content/themes/mygo_v1/assets/images/common/character/img_anon.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;anon&quot;</span> <span class="attr">id</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://anime.bang-dream.com/mygo/wordpress/wp-content/themes/mygo_v1/assets/images/common/character/img_rana.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;rana&quot;</span> <span class="attr">id</span>=<span class="string">&quot;3&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://anime.bang-dream.com/mygo/wordpress/wp-content/themes/mygo_v1/assets/images/common/character/img_soyo.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;soyo&quot;</span> <span class="attr">id</span>=<span class="string">&quot;4&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://anime.bang-dream.com/mygo/wordpress/wp-content/themes/mygo_v1/assets/images/common/character/img_taki.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;taki&quot;</span> <span class="attr">id</span>=<span class="string">&quot;5&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a href="./html/animation.html" target="_blank">点击查看效果</a></p>
<p style="color: red">warn:<span style="color: white">如果看不见内嵌网页或者连接错误，请刷新。</span></p>
]]></content>
      <categories>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS3 动画专题(上)</title>
    <url>/2023/10/19/1/</url>
    <content><![CDATA[<div class="note warning"><p>如果看不见内嵌网页或者连接错误，请刷新。</p>
</div>
<h2 id="浏览器私有前缀">浏览器私有前缀</h2>
<p>CSS3 新特性在实现时，由于不同浏览器的实现方式不同，所以会出现兼容性问题。为了解决这个问题，浏览器厂商会在实现新特性时，加上浏览器私有前缀，以示区别。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>-webkit-：谷歌、Safari、iOS、Android</p>
</li>
<li class="lvl-2">
<p>-moz-：Firefox</p>
</li>
<li class="lvl-2">
<p>-ms-：IE</p>
</li>
<li class="lvl-2">
<p>-o-：Opera</p>
</li>
</ul>
<p>要使用一些实验性质的 CSS3 属性，需要加上浏览器私有前缀，比如：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">    -webkit-<span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    -moz-<span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    -ms-<span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    -o-<span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面这个只是为了演示，实际上如今的浏览器都已经支持 <code>border-radius</code> 属性了，所以不需要加上浏览器私有前缀。</p>
<p>为了用户体验与兼容性，有时我们会使用上面这种写法，即先写上浏览器私有前缀，再写上标准写法，这样即使浏览器支持标准写法，也会优先使用标准写法，而不是浏览器私有前缀。</p>
<p>如果需要查询某个属性是否需要加上浏览器私有前缀，可以访问 <span class="exturl" data-url="aHR0cHM6Ly9jYW5pdXNlLmNvbS8=">caniuse<i class="fa fa-external-link-alt"></i></span> 网站。</p>
<p>e.g.</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="language-css">            -webkit-<span class="selector-tag">text</span>-<span class="attribute">stroke</span>: <span class="number">1px</span> pink;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        Soyo sann ❤️ Love!</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<div style="font-size: 25px; -webkit-text-stroke: 1px pink;">Soyo sann ❤️ Love!</div>
<p hidden>使用行内样式是不优雅的，但是这是为了 markdown 方便书写</p>
---
<h2 id="圆角边框">圆角边框</h2>
<p><code>border-radius</code> 属性用于设置元素的圆角边框。</p>
<p>语法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">border-radius</span>: <span class="number">10px</span>; // 设置四个角的圆角半径</span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">10px</span> <span class="number">20px</span>; // 设置左上角和右下角的圆角半径</span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">10px</span> <span class="number">20px</span> <span class="number">30px</span>; // 设置左上角、右上角和右下角的圆角半径</span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">10px</span> <span class="number">20px</span> <span class="number">30px</span> <span class="number">40px</span>; // 设置左上角、右上角、右下角和左下角的圆角半径</span><br></pre></td></tr></table></figure>
<p>规律：顺时针方向，左上角开始，分别设置四个角的圆角半径。</p>
<h2 id="阴影">阴影</h2>
<blockquote>
<p>盒子阴影</p>
</blockquote>
<p><code>box-shadow</code> 属性用于设置元素的阴影。</p>
<p>语法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">box-shadow</span>: h-shadow v-shadow blur spread color inset;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>h-shadow：必需，水平阴影的位置，允许负值</p>
</li>
<li class="lvl-2">
<p>v-shadow：必需，垂直阴影的位置，允许负值</p>
</li>
<li class="lvl-2">
<p>blur：可选，模糊距离</p>
</li>
<li class="lvl-2">
<p>spread：可选，阴影的尺寸</p>
</li>
<li class="lvl-2">
<p>color：可选，阴影的颜色</p>
</li>
<li class="lvl-2">
<p>inset：可选，将外部阴影（outset）改为内部阴影</p>
</li>
</ul>
<p>e.g.</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: pink;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">10px</span> <span class="number">10px</span> <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div style="width: 200px; height: 200px; background-color: pink; box-shadow: 10px 10px 10px 10px #000;"></div>
<hr>
<blockquote>
<p>文本阴影</p>
</blockquote>
<p><code>text-shadow</code> 属性用于设置文本的阴影。</p>
<p>语法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">text-shadow</span>: h-shadow v-shadow blur color;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>h-shadow：必需，水平阴影的位置，允许负值</p>
</li>
<li class="lvl-2">
<p>v-shadow：必需，垂直阴影的位置，允许负值</p>
</li>
<li class="lvl-2">
<p>blur：可选，模糊距离</p>
</li>
<li class="lvl-2">
<p>color：可选，阴影的颜色</p>
</li>
</ul>
<p>e.g.</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">10px</span> brown;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div style="font-size: 25px; text-shadow: 10px 10px 10px brown;">Soyo sann ❤️ Love!</div>
<p>文本阴影可以多次叠加，实现更加丰富的效果。具体使用时使用逗号分隔即可。</p>
<h2 id="渐变-Gradients">渐变 Gradients</h2>
<blockquote>
<p>线性渐变</p>
</blockquote>
<p><code>linear-gradient()</code> 函数用于设置线性渐变。</p>
<p>语法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">linear-gradient(<span class="attribute">direction</span>, <span class="attribute">color</span>-stop1, <span class="attribute">color</span>-stop2, ...);</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>direction：必需，渐变的方向，可以是角度值或者关键字，比如 <code>to left</code>、<code>to right</code>、<code>to top</code>、<code>to bottom</code>、<code>to left top</code>、<code>to right bottom</code> 等等</p>
</li>
<li class="lvl-2">
<p>color-stop：必需，渐变的起始颜色和结束颜色，可以是颜色值或者关键字，比如 <code>red</code>、<code>#000</code>、<code>rgb(0, 0, 0)</code>、<code>transparent</code> 等等</p>
</li>
</ul>
<p>e.g.</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(to right, red, yellow);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div style="width: 200px; height: 200px; background-image: linear-gradient(to right, red, yellow);"></div>
<hr>
<blockquote>
<p>径向渐变</p>
</blockquote>
<p><code>radial-gradient()</code> 函数用于设置径向渐变。</p>
<p>语法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">radial-gradient(shape size at <span class="attribute">position</span>, start-<span class="attribute">color</span>, ..., last-<span class="attribute">color</span>);</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>shape：可选，渐变的形状，可以是 <code>circle</code> 或者 <code>ellipse</code>，默认是 <code>ellipse</code></p>
</li>
<li class="lvl-2">
<p>size：可选，渐变的大小，可以是 <code>closest-side</code>、<code>closest-corner</code>、<code>farthest-side</code>、<code>farthest-corner</code>，默认是 <code>farthest-corner</code></p>
</li>
<li class="lvl-2">
<p>at position：可选，渐变的位置，可以是 <code>center</code>、<code>top</code>、<code>bottom</code>、<code>left</code>、<code>right</code>，也可以是像素值或者百分比值，比如 <code>10px 20px</code>、<code>10% 20%</code> 等等</p>
</li>
<li class="lvl-2">
<p>start-color：必需，渐变的起始颜色</p>
</li>
<li class="lvl-2">
<p>last-color：可选，渐变的结束颜色</p>
</li>
</ul>
<p>e.g.</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(circle, red, yellow);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div style="width: 200px; height: 200px; background-image: radial-gradient(circle, red, yellow);"></div>
<hr>
<p>在 <span class="exturl" data-url="aHR0cHM6Ly93d3cuZ3JhYmllbnQuY29tLw==">Grabient<i class="fa fa-external-link-alt"></i></span> 网站可以在线生成渐变色。</p>
<h2 id="价格选项卡">价格选项卡</h2>
<details>
<summary>点击查看代码</summary>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        *&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.container</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">1000px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.tab</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#000</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.tab</span> <span class="selector-tag">li</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.tab</span> <span class="selector-tag">li</span><span class="selector-class">.active</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#000</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.content</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.content</span><span class="selector-class">.active</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;tab&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span>Tab1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>Tab2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>Tab3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>Tab4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>Tab5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content active&quot;</span>&gt;</span>Content1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span>Content2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span>Content3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span>Content4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span>Content5<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!---&lt;script src=&quot;https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js&quot;&gt;&lt;/script&gt;---&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// $(function()&#123;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//     $(&#x27;.tab li&#x27;).click(function()&#123;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//         $(this).addClass(&#x27;active&#x27;).siblings().removeClass(&#x27;active&#x27;);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//         var index = $(this).index();</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//         $(&#x27;.content&#x27;).eq(index).addClass(&#x27;active&#x27;).siblings().removeClass(&#x27;active&#x27;);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//     &#125;);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// &#125;);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> tabs = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.tab li&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> contents = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.content&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            tabs.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">tab, index</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                tab.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    tabs.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">tab</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        tab.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;active&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    contents.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">content</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        content.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                    contents[index].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;active&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<iframe width="100%" height="300px" frameborder="0" scrolling="0" src="./html/optionalTab.html"></iframe>
</details>
<hr>
<h2 id="transform2D">transform2D</h2>
<blockquote>
<p>位移</p>
</blockquote>
<p><code>translate()</code> 函数用于设置元素的位移。</p>
<p>语法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">translate</span>(<span class="attribute">x</span>, <span class="attribute">y</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>旋转</p>
</blockquote>
<p><code>rotate()</code> 函数用于设置元素的旋转。</p>
<p>语法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">rotate</span>(angle);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>缩放</p>
</blockquote>
<p><code>scale()</code> 函数用于设置元素的缩放。</p>
<p>语法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">scale</span>(<span class="attribute">x</span>, <span class="attribute">y</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>倾斜</p>
</blockquote>
<p><code>skew()</code> 函数用于设置元素的倾斜。</p>
<p>语法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">skew(<span class="attribute">x</span>-angle, <span class="attribute">y</span>-angle);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>矩阵</p>
</blockquote>
<p><code>matrix()</code> 函数用于设置元素的变形。</p>
<p>语法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">matrix(<span class="selector-tag">a</span>, <span class="selector-tag">b</span>, c, d, e, f);</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>a：必需，水平缩放</p>
</li>
<li class="lvl-2">
<p>b：必需，水平倾斜</p>
</li>
<li class="lvl-2">
<p>c：必需，垂直倾斜</p>
</li>
<li class="lvl-2">
<p>d：必需，垂直缩放</p>
</li>
<li class="lvl-2">
<p>e：必需，水平位移</p>
</li>
<li class="lvl-2">
<p>f：必需，垂直位移</p>
</li>
</ul>
<hr>
<p>e.g. 1</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Transform2D<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.translate</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">100px</span>, <span class="number">100px</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.rotate</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.scale</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">2</span>, <span class="number">2</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.skew</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">skew</span>(<span class="number">30deg</span>, <span class="number">30deg</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.matrix</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">matrix</span>(<span class="number">1</span>, <span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">1</span>, <span class="number">100</span>, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;translate&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;rotate&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;scale&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;skew&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;matrix&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>e.g. 2</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Transform2D<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#box1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: brown solid <span class="number">1px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*在这里添加一个过渡效果*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: all <span class="number">1s</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            &amp;<span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span></span><br><span class="line"><span class="language-css">                <span class="comment">/* 放大 1.5 倍 */</span></span></span><br><span class="line"><span class="language-css">                <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.5</span>);</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#box2</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*在这里添加一个过渡效果*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: all <span class="number">1s</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            &amp;<span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="comment">/*内容旋转 1 周*/</span></span></span><br><span class="line"><span class="language-css">                <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box2&quot;</span>&gt;</span>Soyo sann ❤️ Love!</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<iframe width="300px" height="350px" frameborder="0" scrolling="0" src="./html/transform2d.html"></iframe>
<p><code>rotate</code> 和 <code>scale</code> 会覆盖 <code>translate</code>。并且，它们不能在同一个 <code>transform</code> 中，需要分开写。所以上面这个例子中，在第一个 <code>&lt;div id=&quot;box1&quot;&gt;</code> 中，使用了 <code>scale</code>;<br>
在第二个 <code>&lt;div id=&quot;box2&quot;&gt;</code> 中，使用了 <code>rotate</code>。这样就能实现鼠标悬停时，放大 1.5 倍，且旋转 1 周的效果了。</p>
]]></content>
      <categories>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3-10</title>
    <url>/2023/10/13/1/</url>
    <content><![CDATA[<h2 id="组件保持存活">组件保持存活</h2>
<p>使用 <code>&lt;component :is=&quot;xxx&quot;&gt;</code> 动态切换组件时，会导致组件的状态丢失，比如说在组件 A 中输入了一些内容，然后切换到组件 B，再切换回组件 A，此时组件 A 中的内容就会丢失。</p>
<p>为了解决这个问题，Vue3 提供了一个 <code>&lt;keep-alive&gt;</code> 组件，可以用来对组件进行缓存，从而保持组件的状态不丢失。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeMessage&quot;</span>&gt;</span>改变 message<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;componentName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeComponentName&quot;</span>&gt;</span>切换组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ComponentA</span> <span class="keyword">from</span> <span class="string">&#x27;./ComponentA.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ComponentB</span> <span class="keyword">from</span> <span class="string">&#x27;./ComponentB.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ComponentA</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ComponentB</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">message</span>: <span class="string">&#x27;Hello Vue3, I am BeforeCreate&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">componentName</span>: <span class="string">&#x27;ComponentA&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeCreate&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;created&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">beforeMount</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeMount&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mounted&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">beforeUpdate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeUpdate&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">updated</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;updated&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">beforeUnmount</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeUnmount&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">unmounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;unmounted&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">changeMessage</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">message</span> = <span class="string">&#x27;Hello Vue3, I am Updated&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">changeComponentName</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">componentName</span> = <span class="variable language_">this</span>.<span class="property">componentName</span> === <span class="string">&#x27;ComponentA&#x27;</span> ? <span class="string">&#x27;ComponentB&#x27;</span> : <span class="string">&#x27;ComponentA&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>ComponentA.vue</code> &amp; <code>ComponentB.vue</code>是上一篇笔记中的组件(Login &amp; Register)，这里就不再赘述了。</p>
<h2 id="异步组件">异步组件</h2>
<p>大型项目中，可能会有很多组件，如果一次性把所有组件都加载进来，会导致首屏加载时间过长，影响用户体验。</p>
<p>Vue 提供了异步组件的功能，可以让我们把组件按需加载，从而提高首屏加载速度。使用<code>defineAsyncComponent</code>函数来定义异步组件。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeMessage&quot;</span>&gt;</span>改变 message<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;componentName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeComponentName&quot;</span>&gt;</span>切换组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;asyncComponentName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAsyncComponentName&quot;</span>&gt;</span>切换异步组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ComponentA</span> <span class="keyword">from</span> <span class="string">&#x27;./ComponentA.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// import ComponentB from &#x27;./ComponentB.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; defineAsyncComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// const AsyncComponentA = defineAsyncComponent(() =&gt; import(&#x27;./ComponentA.vue&#x27;))</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title class_">AsyncComponentB</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./ComponentB.vue&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ComponentA</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// ComponentB,</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// AsyncComponentA,</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">AsyncComponentB</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">message</span>: <span class="string">&#x27;Hello Vue3, I am BeforeCreate&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">componentName</span>: <span class="string">&#x27;ComponentA&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">asyncComponentName</span>: <span class="string">&#x27;AsyncComponentA&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeCreate&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;created&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">beforeMount</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeMount&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mounted&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">beforeUpdate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeUpdate&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">updated</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;updated&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">beforeUnmount</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeUnmount&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">unmounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;unmounted&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">changeMessage</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">message</span> = <span class="string">&#x27;Hello Vue3, I am Updated&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">changeComponentName</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">componentName</span> = <span class="variable language_">this</span>.<span class="property">componentName</span> === <span class="string">&#x27;ComponentA&#x27;</span> ? <span class="string">&#x27;ComponentB&#x27;</span> : <span class="string">&#x27;ComponentA&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">changeAsyncComponentName</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">asyncComponentName</span> = <span class="variable language_">this</span>.<span class="property">asyncComponentName</span> === <span class="string">&#x27;AsyncComponentA&#x27;</span> ? <span class="string">&#x27;AsyncComponentB&#x27;</span> : <span class="string">&#x27;AsyncComponentA&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在浏览器中打开页面，点击<code>切换异步组件</code>按钮，可以看到开发者工具中的<code>Network</code>面板，会发出一个<code>chunk-vendors.js</code>的请求，这个请求就是异步组件的代码。</p>
<h2 id="依赖注入">依赖注入</h2>
<p>依赖注入是一种设计模式，它的目的是为了提高代码的可复用性。</p>
<p>通常，我们要从父组件向子组件传递数据，需要使用<code>props</code>，但是如果父组件和子组件之间的层级很深，那么就需要一层一层的传递<code>props</code>，这样会导致代码的可维护性变差。</p>
<p>这一问题被称为<code>prop drilling</code>，Vue3 提供了依赖注入的功能，可以解决这一问题。</p>
<p><code>provide</code>和<code>inject</code>是成对使用的，<code>provide</code>用来提供数据，<code>inject</code>用来注入数据。一个父组件相对其所有后代组件，会作为一个<code>provide</code>的来源，而所有的子组件都可以使用<code>inject</code>来注入数据。</p>
<p>新建一个<code>components</code>文件夹，然后在里面新建一个<code>Grandson.vue</code>、<code>Son.vue</code>和<code>Father.vue</code>，代码如下：</p>
<p><code>Grandson.vue</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Grandson<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>message: &#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Grandson&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">inject</span>: [<span class="string">&#x27;message&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>Son.vue</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Son<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>message: &#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Grandson</span>&gt;</span><span class="tag">&lt;/<span class="name">Grandson</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Grandson</span> <span class="keyword">from</span> <span class="string">&#x27;./Grandson.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Son&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">Grandson</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">inject</span>: [<span class="string">&#x27;message&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>Father.vue</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Father<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>message: &#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Son</span>&gt;</span><span class="tag">&lt;/<span class="name">Son</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Son</span> <span class="keyword">from</span> <span class="string">&#x27;./Son.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Father&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">Son</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">provide</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">message</span>: <span class="string">&#x27;Hello Vue3, I am provide&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在<code>Father.vue</code>中，我们使用<code>provide</code>来提供数据，然后在<code>Son.vue</code>和<code>Grandson.vue</code>中使用<code>inject</code>来注入数据。</p>
<p><code>Father</code> 的 <code>message</code> 没有显示出来，控制台提示 <code>[Vue warn]: Property &quot;message&quot; was accessed during render but is not defined on instance.</code>，这是因为<code>provide</code>提供的数据，只能在后代组件中使用，不能在自己组件中使用。</p>
<p>并且，<code>provide</code>提供的数据，只能在后代组件中使用，不能在兄弟组件中使用。也就是从上到下的单向数据流。</p>
<p>如果想要一个全局的数据，可以在<code>main.js</code>中使用<code>app.provide</code>来提供数据，然后在组件中使用<code>inject</code>来注入数据。</p>
<p><code>main.js</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">provide</span>(<span class="string">&#x27;message&#x27;</span>, <span class="string">&#x27;Hello Vue3, I am provide&#x27;</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Vue-应用">Vue 应用</h2>
<p><code>main.js</code>中的代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// app 是一个应用实例</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span><br><span class="line">    <span class="comment">// 应用选项</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 挂载应用实例</span></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>应用实例</p>
</blockquote>
<p>每个 Vue 应用都需要通过 <code>createApp</code> 函数来创建一个应用实例，然后通过 <code>mount</code> 函数来挂载应用实例。</p>
<blockquote>
<p>根组件</p>
</blockquote>
<p>在 Vue 应用中，我们需要定义一个根组件，这个根组件会被挂载到 <code>#app</code> 元素中，这个根组件可以包含其他的子组件。</p>
<blockquote>
<p>挂载点</p>
</blockquote>
<p>在 Vue 应用中，我们需要一个挂载点，这个挂载点是一个 DOM 元素，我们可以通过这个挂载点来把根组件挂载到 DOM 中。</p>
<h2 id="🎉结束这一段学习">🎉结束这一段学习</h2>
<p>Vue3 的学习到此结束。Vue3 的学习笔记就到这里！</p>
]]></content>
      <categories>
        <category>Vue3</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3-09</title>
    <url>/2023/10/12/1/</url>
    <content><![CDATA[<h2 id="组件生命周期">组件生命周期</h2>
<p>在 Vue2 中，我们可以通过在组件中定义一些特定的生命周期函数来实现在组件的不同阶段执行不同的操作，比如说在组件创建的时候执行一些操作，或者是在组件销毁的时候执行一些操作，这些操作都是通过生命周期函数来实现的。</p>
<p><img src="https://cn.vuejs.org/assets/lifecycle.16e4c08e.png" alt></p>
<p>在 Vue3 中，组件的生命周期函数和 Vue2 中的生命周期函数是一样的，但是在 Vue3 中，组件的生命周期函数都是以 <code>on</code> 开头的，比如说在 Vue2 中的 <code>beforeCreate</code> 生命周期函数，在 Vue3 中就变成了 <code>onBeforeCreate</code>，在 Vue2 中的 <code>created</code> 生命周期函数，在 Vue3 中就变成了 <code>onCreated</code>，其他的生命周期函数也是一样的。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9jbi52dWVqcy5vcmcvYXBpL29wdGlvbnMtbGlmZWN5Y2xlLmh0bWw=">选项式 API 生命周期选项<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9jbi52dWVqcy5vcmcvYXBpL2NvbXBvc2l0aW9uLWFwaS1saWZlY3ljbGUuaHRtbA==">组合式 API 生命周期钩子<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h3 id="组件的生命周期函数">组件的生命周期函数</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>创建期间的生命周期函数</p>
<ul class="lvl-2">
<li class="lvl-4"><code>onBeforeCreate</code>：在组件实例创建之前执行，此时组件的数据观测和事件机制都未初始化。</li>
<li class="lvl-4"><code>onCreated</code>：在组件实例创建之后执行，此时组件的数据观测和事件机制都已经初始化完成。</li>
</ul>
</li>
<li class="lvl-2">
<p>挂载期间的生命周期函数</p>
<ul class="lvl-2">
<li class="lvl-4"><code>onBeforeMount</code>：在组件挂载到 DOM 之前执行，此时组件的模板已经编译完成，但是还没有挂载到 DOM 中。</li>
<li class="lvl-4"><code>onMounted</code>：在组件挂载到 DOM 之后执行，此时组件已经挂载到 DOM 中。</li>
</ul>
</li>
<li class="lvl-2">
<p>更新期间的生命周期函数</p>
<ul class="lvl-2">
<li class="lvl-4"><code>onBeforeUpdate</code>：在组件更新之前执行，此时组件的数据已经更新完成，但是还没有更新到 DOM 中。</li>
<li class="lvl-4"><code>onUpdated</code>：在组件更新之后执行，此时组件的数据已经更新完成，DOM 也已经更新完成。</li>
</ul>
</li>
<li class="lvl-2">
<p>卸载期间的生命周期函数</p>
<ul class="lvl-2">
<li class="lvl-4"><code>onBeforeUnmount</code>：在组件卸载之前执行，此时组件还没有卸载，DOM 也还没有卸载。</li>
<li class="lvl-4"><code>onUnmounted</code>：在组件卸载之后执行，此时组件已经卸载，DOM 也已经卸载。</li>
</ul>
</li>
<li class="lvl-2">
<p>销毁期间的生命周期函数</p>
<ul class="lvl-2">
<li class="lvl-4"><code>onBeforeDestroy</code>：在组件销毁之前执行，此时组件还没有销毁，DOM 也还没有销毁。</li>
<li class="lvl-4"><code>onDestroyed</code>：在组件销毁之后执行，此时组件已经销毁，DOM 也已经销毁。</li>
</ul>
</li>
</ul>
<blockquote>
<p>Options API e.g.</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeMessage&quot;</span>&gt;</span>改变 message<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">message</span>: <span class="string">&#x27;Hello Vue3, I am BeforeCreate&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeCreate&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;created&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">beforeMount</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeMount&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mounted&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">beforeUpdate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeUpdate&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">updated</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;updated&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">beforeUnmount</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeUnmount&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">unmounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;unmounted&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeDestroy&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">destroyed</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;destroyed&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">changeMessage</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">message</span> = <span class="string">&#x27;Hello Vue3, I am updated&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Composition API e.g.</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeMessage&quot;</span>&gt;</span>改变 message<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref, onBeforeMount, onMounted, onBeforeUpdate, onUpdated, onBeforeUnmount, onUnmounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> message = <span class="title function_">ref</span>(<span class="string">&#x27;Hello Vue3, I am BeforeCreate&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">onBeforeMount</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeMount&#x27;</span>, message.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mounted&#x27;</span>, message.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">onBeforeUpdate</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeUpdate&#x27;</span>, message.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">onUpdated</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;updated&#x27;</span>, message.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">onBeforeUnmount</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeUnmount&#x27;</span>, message.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">onUnmounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;unmounted&#x27;</span>, message.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> <span class="title function_">changeMessage</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">            message.<span class="property">value</span> = <span class="string">&#x27;Hello Vue3, I am updated&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            message,</span></span><br><span class="line"><span class="language-javascript">            changeMessage,</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>对比可以发现，Options API 和 Composition API 的生命周期函数的使用方式是不一样的，Options API 中的生命周期函数是在组件的 <code>export default</code> 中定义的，而 Composition API 中的生命周期函数是在 <code>setup</code> 函数中定义的。但是不管是 Options API 还是 Composition API，它们的生命周期函数的执行顺序都是一样的。</p>
<h2 id="生命周期的应用">生命周期的应用</h2>
<p>生命周期的应用场景，常见的有：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>在组件创建的时候发送网络请求</p>
</li>
<li class="lvl-2">
<p>在组件销毁的时候清除定时器</p>
</li>
<li class="lvl-2">
<p>在组件更新的时候做一些特殊的处理</p>
</li>
</ul>
<h3 id="ref-获取-DOM-元素"><code>ref</code> 获取 DOM 元素</h3>
<p>在 Vue2 中，我们可以通过给元素添加 <code>ref</code> 属性来获取 DOM 元素，在四个时期中，只有在组件挂载到 DOM 之后，我们才能通过 <code>this.$refs</code> 来获取 DOM 元素，比如下面这个例子：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">ref</span>=<span class="string">&quot;title&quot;</span>&gt;</span>Hello Vue3<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">title</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在 Vue3 中，我们也可以通过给元素添加 <code>ref</code> 属性来获取 DOM 元素，但是在 Vue3 中，我们还可以通过 <code>ref</code> 函数来获取 DOM 元素，比如下面这个例子：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">ref</span>=<span class="string">&quot;title&quot;</span>&gt;</span>Hello Vue3<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref, onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> title = <span class="title function_">ref</span>(<span class="literal">null</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(title.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            title,</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="模拟网络请求">模拟网络请求</h3>
<p>在 Vue2 中，我们可以在 <code>created</code> 生命周期函数中发送网络请求，比如下面这个例子：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; item.title &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; item.content &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">list</span>: [],</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">list</span> = [</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">id</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">title</span>: <span class="string">&#x27;标题1&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">content</span>: <span class="string">&#x27;内容1&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">id</span>: <span class="number">2</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">title</span>: <span class="string">&#x27;标题2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">content</span>: <span class="string">&#x27;内容2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">id</span>: <span class="number">3</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">title</span>: <span class="string">&#x27;标题3&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">content</span>: <span class="string">&#x27;内容3&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">        ]</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>分析代码，可以看到，我们选择了 <code>created</code> 生命周期函数来发送网络请求，因为在 <code>created</code> 生命周期函数中，组件的数据已经初始化完成，但是组件还没有挂载到 DOM 中，所以我们可以在 <code>created</code> 生命周期函数中发送网络请求，然后在网络请求成功之后，将数据保存到组件的数据中，这样就可以在组件挂载到 DOM 之后，直接从组件的数据中获取到数据，然后渲染到页面中。</p>
<p>在 <code>created</code> 阶段，我们拿到了数据，但数据还没有渲染到页面上，所以页面上是看不到数据的，这就会导致一个问题，就是在 <code>created</code> 阶段，我们无法获取到页面上的 DOM 元素，因为 DOM 元素还没有渲染到页面上。</p>
<p>先拿到数据，再渲染到页面上，这样的操作是有问题的，因为在 <code>created</code> 阶段，我们拿到的数据是一个空数组，这样的话，页面上就会出现一个空的列表，然后等到数据渲染到页面上之后，列表才会显示出来，这样的操作是不友好的。</p>
<p>在 Vue3 中，我们可以通过在 <code>setup</code> 函数中发送网络请求，然后将数据保存到 <code>ref</code> 中，这样的话，我们就可以在 <code>setup</code> 函数中直接使用数据，而不需要等到组件挂载到 DOM 之后才能使用数据，比如下面这个例子：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; item.title &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; item.content &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref, onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> list = <span class="title function_">ref</span>([])</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                list.<span class="property">value</span> = [</span></span><br><span class="line"><span class="language-javascript">                    &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">id</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">title</span>: <span class="string">&#x27;标题1&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">content</span>: <span class="string">&#x27;内容1&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">id</span>: <span class="number">2</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">title</span>: <span class="string">&#x27;标题2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">content</span>: <span class="string">&#x27;内容2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">id</span>: <span class="number">3</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">title</span>: <span class="string">&#x27;标题3&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">content</span>: <span class="string">&#x27;内容3&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                ]</span></span><br><span class="line"><span class="language-javascript">            &#125;, <span class="number">1000</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            list,</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="动态组件">动态组件</h2>
<p>动态组件是指在一个组件中动态的切换另一个组件，比如说在一个页面中，我们有一个登录组件和一个注册组件，我们可以通过点击按钮来切换登录组件和注册组件，这样的组件就是动态组件。</p>
<p>先看一个例子：</p>
<p>先创建 <code>Login.vue</code> 组件：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>登录组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Login&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>再创建 <code>Register.vue</code> 组件：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>注册组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>最后创建 <code>App.vue</code> 组件：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;toggleComponent&quot;</span>&gt;</span>切换组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;currentComponent&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Login</span> <span class="keyword">from</span> <span class="string">&#x27;./Login.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Register</span> <span class="keyword">from</span> <span class="string">&#x27;./Register.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">Login</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">Register</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">currentComponent</span>: <span class="string">&#x27;Login&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">toggleComponent</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">currentComponent</span> = <span class="variable language_">this</span>.<span class="property">currentComponent</span> === <span class="string">&#x27;Login&#x27;</span> ? <span class="string">&#x27;Register&#x27;</span> : <span class="string">&#x27;Login&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>点击按钮，可以看到组件的切换效果。</p>
]]></content>
      <categories>
        <category>Vue3</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3-08</title>
    <url>/2023/10/10/1/</url>
    <content><![CDATA[<h2 id="插槽-Slot">插槽 Slot</h2>
<p>组件能够接受任意类型的 JavaScript 片段作为 props，包括基本类型、对象、数组、函数等等。但是在一些场景中要让组件接受的内容更加灵活，比如说我们想要在组件中插入一些 HTML 片段，或者是一些组件，这时候就需要用到插槽。</p>
<h3 id="插槽的基本使用">插槽的基本使用</h3>
<p>在 Vue2 中，我们可以通过在组件中使用 <code>&lt;slot&gt;</code> 标签来实现插槽的功能，比如下面这个例子：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在这个例子中，我们在组件中使用了 <code>&lt;slot&gt;</code> 标签，这个标签就是一个插槽，它的作用是在组件中插入一些内容，这些内容可以是 HTML 片段，也可以是其他的组件，比如下面这个例子：</p>
<blockquote>
<p>ParentComponent.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ChildComponent</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是一个标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是一个段落<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ChildComponent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ChildComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./ChildComponent.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;ParentComponent&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ChildComponent</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ChildComponent.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>参考：<span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC85YTdmOGFiMDdiZjg=">彻底搞懂slot插槽，图文详解<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h3 id="渲染作用域">渲染作用域</h3>
<p>插槽内容可以访问到父组件的数据作用域，这意味着我们可以在父组件中定义一些数据，然后在插槽中使用这些数据。</p>
<p>延用上一个例子的 <code>ChildComponent</code> 组件，我们在父组件中定义一个 <code>title</code> 数据，然后在插槽中使用这个数据，比如下面这个例子：</p>
<blockquote>
<p>ParentComponent.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ChildComponent</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是一个段落<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ChildComponent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ChildComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./ChildComponent.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;ParentComponent&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ChildComponent</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">title</span>: <span class="string">&#x27;这是一个标题&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>&lt;slot&gt;</code> 标签中的内容可以访问到父组件的数据作用域，这意味着我们可以在父组件中定义一些数据，然后在插槽中使用这些数据。</p>
<h3 id="具名插槽">具名插槽</h3>
<p>在 Vue2 中，我们可以通过在 <code>&lt;slot&gt;</code> 标签上添加一个 <code>name</code> 属性来实现插槽的命名，比如下面这个例子：</p>
<blockquote>
<p>ParentComponent.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ChildComponent</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是一个标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:footer</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是一个段落<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ChildComponent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ChildComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./ChildComponent.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;ParentComponent&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ChildComponent</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ChildComponent.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;header&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;footer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="默认内容">默认内容</h3>
<p>在 Vue2 中，我们可以在 <code>&lt;slot&gt;</code> 标签中添加一些默认的内容，这些内容会在父组件中没有提供插槽内容的时候显示出来，比如下面这个例子：</p>
<blockquote>
<p>ChildComponent.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;header&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span>这是一个默认的内容<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="插槽中的数据传递">插槽中的数据传递</h3>
<p>某些场景下插槽内容可能要同时使用父组件中的数据和子组件中的数据，这时可以像对组件传递 props 一样，向插槽的出口添加 attribute 属性，比如下面这个例子：</p>
<blockquote>
<p>ParentComponent.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ChildComponent</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:header</span>=<span class="string">&quot;slotProps&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; slotProps.title &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ChildComponent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ChildComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./ChildComponent.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;ParentComponent&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ChildComponent</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ChildComponent.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;header&quot;</span> <span class="attr">:title</span>=<span class="string">&quot;title&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;ChildComponent&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">title</span>: <span class="string">&#x27;这是一个标题&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>v-slot</code> 指令可以接收一个参数，这个参数是一个对象，这个对象中包含了一些属性，其中 <code>slotProps</code> 属性是一个对象，这个对象中包含了插槽中的数据，我们可以通过这个对象来访问插槽中的数据。</p>
<p>此外，<code>v-slot</code> 指令可以使用缩写—<code>#</code> 来代替。</p>
]]></content>
      <categories>
        <category>Vue3</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>免费获取 Cyberpunk-2077 DLC</title>
    <url>/2023/10/09/1/</url>
    <content><![CDATA[<h2 id="为什么要写这篇文章">为什么要写这篇文章</h2>
<p>因为我不想花钱买 DLC，所以我就写了这篇文章。</p>
<p>至于为什么不想花钱买 DLC，这就有的说了。</p>
<blockquote>
<p>发牢骚</p>
</blockquote>
<p>这款游戏是我中学时期就开始关注的游戏，那时候学业繁重，没有时间，但我仍然关注着这款游戏。</p>
<p>游戏发售后，我购买了游戏，但游戏的质量让我很失望，并且开发商对游戏的态度也让我很失望。</p>
<p>它原先的承诺很多都没有兑现，前期对游戏的宣传很多，让人觉得这款游戏会是一款非常好的游戏，但是实际上并不是这样。</p>
<p>直至今日的 2.01 版本，游戏的质量提高了很多，但仍不是我想要的那款游戏。</p>
<p>我认为这家公司对不起预购/首发玩家，所以我不想花钱买 DLC。</p>
<h2 id="免费获取-Cyberpunk-2077-DLC">免费获取 Cyberpunk-2077 DLC</h2>
<ol>
<li class="lvl-3">
<p>确保你的游戏是 2.01 版本</p>
<p>我在 Steam 上购买的游戏，所以需要先“把游戏切换到 GOG 版本”。当然，如果你是 GOG 版本，省略第 3 步。</p>
</li>
<li class="lvl-3">
<p>下载 ⟪往日之影⟫ DLC</p>
<ul class="lvl-2">
<li class="lvl-6">
<p>通过磁力链接 <span class="exturl" data-url="bWFnbmV0Oj94dD11cm46YnRpaDpiZjg2ZDM1NTkxYzIxNjdhZWM2MzY3NTI5YWU0YjRmYmFiMjBiZGZhJmRuPUN5YmVycHVuay4yMDc3LkdPRy1JbnNhbmVSYW1aZXMmdHI9aHR0cCUzYSUyZiUyZmJ0Mi50LXJ1Lm9yZyUyZmFubiUzZm1hZ25ldCZ0cj11ZHAlM2ElMmYlMmZ0cmFja2VyLm9wZW50cmFja3Iub3JnJTNhMTMzNyUyZmFubm91bmNlJnRyPWh0dHBzJTNhJTJmJTJmdHJhY2tlcjEuNTIwLmpwJTNhNDQzJTJmYW5ub3VuY2UmdHI9aHR0cCUzYSUyZiUyZnRyYWNrZXIub3BlbnRyYWNrci5vcmclM2ExMzM3JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmb3BlbnRyYWNrZXIuaTJwLnJvY2tzJTNhNjk2OSUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZm9wZW4uZGVtb25paS5jb20lM2ExMzM3JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmdHJhY2tlci5vcGVuYml0dG9ycmVudC5jb20lM2E2OTY5JTJmYW5ub3VuY2UmdHI9aHR0cCUzYSUyZiUyZnRyYWNrZXIub3BlbmJpdHRvcnJlbnQuY29tJTNhODAlMmZhbm5vdW5jZSZ0cj11ZHAlM2ElMmYlMmZvcGVuLnN0ZWFsdGguc2klM2E4MCUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZmV4b2R1cy5kZXN5bmMuY29tJTNhNjk2OSUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZnRyYWNrZXIudG9ycmVudC5ldS5vcmclM2E0NTElMmZhbm5vdW5jZSZ0cj11ZHAlM2ElMmYlMmZleHBsb2RpZS5vcmclM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmdHJhY2tlcjEuYnQubW9hY2suY28ua3IlM2E4MCUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZnRyYWNrZXIudGlueS12cHMuY29tJTNhNjk2OSUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZnRyYWNrZXItdWRwLmdiaXR0LmluZm8lM2E4MCUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZnJldHJhY2tlcjAxLW1zay12aXJ0LmNvcmJpbmEubmV0JTNhODAlMmZhbm5vdW5jZSZ0cj11ZHAlM2ElMmYlMmZwNHAuYXJlbmFiZy5jb20lM2ExMzM3JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmbW92aWVzLnpzdy5jYSUzYTY5NjklMmZhbm5vdW5jZSZ0cj1odHRwcyUzYSUyZiUyZnRyYWNrZXIudGFtZXJzdW5pb24ub3JnJTNhNDQzJTJmYW5ub3VuY2UmdHI9aHR0cHMlM2ElMmYlMmZ0cmFja2VyLmdiaXR0LmluZm8lM2E0NDMlMmZhbm5vdW5jZSZ0cj1odHRwcyUzYSUyZiUyZnRyLmJ1cm5hYnloaWdoc3Rhci5jb20lM2E0NDMlMmZhbm5vdW5jZSZ0cj1odHRwJTNhJTJmJTJmdHJhY2tlcjEuYnQubW9hY2suY28ua3IlM2E4MCUyZmFubm91bmNlJnRyPWh0dHAlM2ElMmYlMmZ0cmFja2VyLmdiaXR0LmluZm8lM2E4MCUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZnVwbG9hZHMuZ2FtZWNvYXN0Lm5ldCUzYTY5NjklMmZhbm5vdW5jZSZ0cj11ZHAlM2ElMmYlMmZ0cmFja2VyLnRoZW9rcy5uZXQlM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmdHJhY2tlci5tb2VraW5nLm1lJTNhNjk2OSUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZnRyYWNrZXIuZHVtcC5jbCUzYTY5NjklMmZhbm5vdW5jZSZ0cj11ZHAlM2ElMmYlMmZwcml2YXRlLmFub25zZWVkLmNvbSUzYTY5NjklMmZhbm5vdW5jZSZ0cj11ZHAlM2ElMmYlMmZtb29uYnVycm93LmNsdWIlM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmaHR6My5ub2hvLnN0JTNhNjk2OSUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZmFjeHguZGUlM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmYWFyc2VuLm1lJTNhNjk2OSUyZmFubm91bmNlJnRyPWh0dHBzJTNhJTJmJTJmdHJhY2tlci5sb2xpZ2lybC5jbiUzYTQ0MyUyZmFubm91bmNlJnRyPWh0dHBzJTNhJTJmJTJmdHJhY2tlci5pbWdvaW5ndG8uaWN1JTNhNDQzJTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmdHJhY2tlcjIuZGxlci5vcmclM2E4MCUyZmFubm91bmNlJnRyPWh0dHAlM2ElMmYlMmZvcGVuLmFjZ254dHJhY2tlci5jb20lM2E4MCUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZnlhaG9yLm9mLmJ5JTNhNjk2OSUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZndlcHpvbmUubmV0JTNhNjk2OSUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZnYyLmlwZXJzb24ueHl6JTNhNjk2OSUyZmFubm91bmNlJnRyPWh0dHAlM2ElMmYlMmZ0cmFja2VyMi5kbGVyLm9yZyUzYTgwJTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmdHJhY2tlcjEubXlwb3JuLmNsdWIlM2E5MzM3JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmdHJhY2tlci50aGVyYXJiZy5jb20lM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmdHJhY2tlci5xdS5heCUzYTY5NjklMmZhbm5vdW5jZSZ0cj11ZHAlM2ElMmYlMmZ0cmFja2VyLnB1YmxpY3RyYWNrZXIueHl6JTNhNjk2OSUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZnRyYWNrZXIubmV0bWFwLnRvcCUzYTY5NjklMmZhbm5vdW5jZSZ0cj11ZHAlM2ElMmYlMmZ0cmFja2VyLmxlZWNoLmllJTNhMTMzNyUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZnRyYWNrZXIuZmlsZW1haWwuY29tJTNhNjk2OSUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZnRyYWNrZXIuZmFydGVkLm5ldCUzYTY5NjklMmZhbm5vdW5jZSZ0cj11ZHAlM2ElMmYlMmZ0cmFja2VyLmN1Ym9uZWdyby5sb2wlM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmdHJhY2tlci5jY3Aub3ZoJTNhNjk2OSUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZnRyYWNrZXIuNC5iYWJpY28ubmFtZS50ciUzYTMxMzElMmZhbm5vdW5jZSZ0cj11ZHAlM2ElMmYlMmZ0cmFja2VyLjB4N2MwLmNvbSUzYTY5NjklMmZhbm5vdW5jZSZ0cj11ZHAlM2ElMmYlMmZ0aG91dmVuaW4uY2xvdWQlM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmdGFtYXMzLnluaC5mciUzYTY5NjklMmZhbm5vdW5jZSZ0cj11ZHAlM2ElMmYlMmZzYW5pbmNvZGUuY29tJTNhNjk2OSUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZnJ5amVyLmNvbSUzYTY5NjklMmZhbm5vdW5jZSZ0cj11ZHAlM2ElMmYlMmZydW4ucHVibGljdHJhY2tlci54eXolM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmcnVuLTIucHVibGljdHJhY2tlci54eXolM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmcHVibGljLnRyYWNrZXIudnJhcGhpbS5jb20lM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmb3BlbnRyYWNrZXIuaW8lM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmb3Blbi51LXAucHclM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmb3Blbi5kc3R1ZC5pbyUzYTY5NjklMmZhbm5vdW5jZSZ0cj11ZHAlM2ElMmYlMmZvaC5mdXV1dXVjay5jb20lM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmbmV3LWxpbmUubmV0JTNhNjk2OSUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZm1haWwuc2Vnc28ubmV0JTNhNjk2OSUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZmxsb3JpYS5mciUzYTY5NjklMmZhbm5vdW5jZSZ0cj11ZHAlM2ElMmYlMmZpc2sucmljaGFyZHN3LmNsdWIlM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmZnJlZS5wdWJsaWN0cmFja2VyLnh5eiUzYTY5NjklMmZhbm5vdW5jZSZ0cj11ZHAlM2ElMmYlMmZmZS5kZWFsY2x1Yi5kZSUzYTY5NjklMmZhbm5vdW5jZSZ0cj11ZHAlM2ElMmYlMmZlcGlkZXIubWUlM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmY2Fyci5jb2RlcyUzYTY5NjklMmZhbm5vdW5jZSZ0cj11ZHAlM2ElMmYlMmZidDIuYXJjaGl2ZS5vcmclM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmYnQxLmFyY2hpdmUub3JnJTNhNjk2OSUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZmJ0Lmt0cmFja2Vycy5jb20lM2E2NjY2JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmNi5wb2NrZXRuZXQuYXBwJTNhNjk2OSUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZjFjLnByZW1pZXJ6YWwucnUlM2E2OTY5JTJmYW5ub3VuY2UmdHI9aHR0cHMlM2ElMmYlMmZ3d3cucGVja3NlcnZlcnMuY29tJTNhOTQ0MyUyZmFubm91bmNlJnRyPWh0dHBzJTNhJTJmJTJmdHJhY2tlci5yZW5mZWkubmV0JTNhNDQzJTJmYW5ub3VuY2UmdHI9aHR0cHMlM2ElMmYlMmZ0cmFja2VyLm5ldG1hcC50b3AlM2E4NDQzJTJmYW5ub3VuY2UmdHI9aHR0cHMlM2ElMmYlMmZ0cmFja2VyLmxpbGl0aHJhd3Mub3JnJTNhNDQzJTJmYW5ub3VuY2UmdHI9aHR0cHMlM2ElMmYlMmZ0cmFja2VyLmNsb3VkaXQudG9wJTNhNDQzJTJmYW5ub3VuY2UmdHI9aHR0cHMlM2ElMmYlMmZ0MS5obG9saS5vcmclM2E0NDMlMmZhbm5vdW5jZSZ0cj1odHRwcyUzYSUyZiUyZjEzMzcuYWJjdmcuaW5mbyUzYTQ0MyUyZmFubm91bmNlJnRyPWh0dHAlM2ElMmYlMmZ3d3cucGVja3NlcnZlcnMuY29tJTNhOTAwMCUyZmFubm91bmNlJnRyPWh0dHAlM2ElMmYlMmZ3ZXB6b25lLm5ldCUzYTY5NjklMmZhbm5vdW5jZSZ0cj1odHRwJTNhJTJmJTJmdHJhY2tlci5za3l0cy5uZXQlM2E2OTY5JTJmYW5ub3VuY2UmdHI9aHR0cCUzYSUyZiUyZnRyYWNrZXIucmVuZmVpLm5ldCUzYTgwODAlMmZhbm5vdW5jZSZ0cj1odHRwJTNhJTJmJTJmdHJhY2tlci5xdS5heCUzYTY5NjklMmZhbm5vdW5jZSZ0cj1odHRwJTNhJTJmJTJmdHJhY2tlci5uZXRtYXAudG9wJTNhNjk2OSUyZmFubm91bmNlJnRyPWh0dHAlM2ElMmYlMmZ0cmFja2VyLm15d2FpZnUuYmVzdCUzYTY5NjklMmZhbm5vdW5jZSZ0cj1odHRwJTNhJTJmJTJmdHJhY2tlci5pcHY2dHJhY2tlci5vcmclM2E4MCUyZmFubm91bmNlJnRyPWh0dHAlM2ElMmYlMmZ0cmFja2VyLmZpbGVzLmZtJTNhNjk2OSUyZmFubm91bmNlJnRyPWh0dHAlM2ElMmYlMmZ0cmFja2VyLmVka2ouY2x1YiUzYTY5NjklMmZhbm5vdW5jZSZ0cj1odHRwJTNhJTJmJTJmdHJhY2tlci5idDRnLmNvbSUzYTIwOTUlMmZhbm5vdW5jZSZ0cj1odHRwJTNhJTJmJTJmb3Blbi50cmFja2VyLmluayUzYTY5NjklMmZhbm5vdW5jZSZ0cj1odHRwJTNhJTJmJTJmaW5jaW5lLnJ1JTNhNjk2OSUyZmFubm91bmNlJnRyPWh0dHAlM2ElMmYlMmYxMzM3LmFiY3ZnLmluZm8lM2E4MCUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZnRyYWNrZXIudC1yYi5vcmclM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmdHJhY2tlci5zcnYwMC5jb20lM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmdHJhY2tlci5kbGVyLm9yZyUzYTY5NjklMmZhbm5vdW5jZSZ0cj11ZHAlM2ElMmYlMmZ0cmFja2VyLmFydGl4bGludXgub3JnJTNhNjk2OSUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZnRvcnJlbnRzLmFydGl4bGludXgub3JnJTNhNjk2OSUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZm1haWwuYXJ0aXhsaW51eC5vcmclM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmZmgyLmNtcC1nYW1pbmcuY29tJTNhNjk2OSUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZmNvbmNlbi5vcmclM2E2OTY5JTJmYW5ub3VuY2UmdHI9dWRwJTNhJTJmJTJmYm95c2JpdHRlLmJlJTNhNjk2OSUyZmFubm91bmNlJnRyPXVkcCUzYSUyZiUyZmFlZ2lyLnNleHklM2E2OTY5JTJmYW5ub3VuY2UmdHI9aHR0cHMlM2ElMmYlMmZ0cmFja2VyLmlwZnNzY2FuLmlvJTNhNDQzJTJmYW5ub3VuY2UmdHI9aHR0cHMlM2ElMmYlMmZ0ci5yZWFkeTQuaWN1JTNhNDQzJTJmYW5ub3VuY2UmdHI9aHR0cCUzYSUyZiUyZnRyYWNrZXIxLml0em14LmNvbSUzYTgwODAlMmZhbm5vdW5jZSZ0cj1odHRwJTNhJTJmJTJmdHJhY2tlci5kbGVyLm9yZyUzYTY5NjklMmZhbm5vdW5jZSZ0cj1odHRwJTNhJTJmJTJmdC5hY2cucmlwJTNhNjY5OSUyZmFubm91bmNl">magnet<i class="fa fa-external-link-alt"></i></span> 下载。</p>
</li>
<li class="lvl-6">
<p>下载时选择 <code>DLC</code> 的部分下载，大小约为 35.95GiB</p>
</li>
</ul>
</li>
<li class="lvl-3">
<p>修改注册表，让 DLC 生效安装程序认为你已经购买了游戏/或是认为你的游戏是 GOG 版本</p>
<ul class="lvl-2">
<li class="lvl-6">
<p>创建 <code>Cyberpunk 2077 GOG Register.bat</code> 文件</p>
</li>
<li class="lvl-6">
<p>把 <code>Cyberpunk 2077 GOG Register.bat</code> 文件放到游戏根目录内运行(请以管理员身份运行，有时甚至需要关闭安全软件)</p>
</li>
<li class="lvl-6">
<p>选择 <code>1. 添加</code></p>
</li>
<li class="lvl-6">
<p>选择 <code>3. 退出</code></p>
</li>
</ul>
<blockquote>
<p><code>Cyberpunk 2077 GOG Register.bat</code> 文件内容如下</p>
</blockquote>
 <details>
 <summary style="background-color: #000000; background-image: linear-gradient(60deg, #000000 25%, #ff0004 100%); color: aqua; font-family: cursive; width: 50%; font-style: italic; border: 1px solid red; margin: 5%;"><span style="text-decoration: none;color: yellow;text-shadow: 1px 1px blue;">点击查看</span></summary>
 <figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">color</span> E0</span><br><span class="line"><span class="built_in">title</span> Cyberpunk <span class="number">2077</span> GOG V2.<span class="number">0</span> 版本注册表</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">REM Set vars</span></span><br><span class="line"><span class="built_in">set</span> GAMEPATH=%~dp0</span><br><span class="line"><span class="built_in">set</span> GAMEPATH=<span class="variable">%GAMEPATH:~0,-1%</span></span><br><span class="line"><span class="built_in">set</span> PACKPATH=<span class="variable">%GAMEPATH:~0,-15%</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">REM Check administrator privileges</span></span><br><span class="line"><span class="built_in">net</span> session &gt;<span class="built_in">nul</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line"><span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="variable">%errorlevel%</span>==<span class="number">0</span> <span class="keyword">goto</span> ERRORADM</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">REM Check exe</span></span><br><span class="line"><span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXIST</span> &quot;<span class="variable">%GAMEPATH%</span>\bin\x64\Cyberpunk2077.exe&quot; <span class="keyword">goto</span> ERROREXE</span><br><span class="line"></span><br><span class="line">:<span class="built_in">START</span></span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ※ Cyberpunk <span class="number">2077</span> GOG V2.<span class="number">0</span> 版本注册表</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> 目录: <span class="variable">%GAMEPATH%</span></span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> 请按下对应数字按键继续操作。</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> <span class="number">1</span>. 添加</span><br><span class="line"><span class="built_in">echo</span> <span class="number">2</span>. 删除</span><br><span class="line"><span class="built_in">echo</span> <span class="number">3</span>. 退出</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line">choice /c <span class="number">123</span> /n /m &quot;选择: &quot;</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="keyword">IF</span> <span class="keyword">ERRORLEVEL</span> <span class="number">3</span> <span class="keyword">EXIT</span></span><br><span class="line"><span class="keyword">IF</span> <span class="keyword">ERRORLEVEL</span> <span class="number">2</span> <span class="keyword">goto</span> <span class="built_in">DEL</span></span><br><span class="line"><span class="keyword">IF</span> <span class="keyword">ERRORLEVEL</span> <span class="number">1</span> <span class="keyword">goto</span> ADD</span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line"><span class="keyword">goto</span> <span class="built_in">START</span></span><br><span class="line"></span><br><span class="line">:ADD</span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com&quot; /v &quot;DefaultPackPath&quot; /d &quot;<span class="variable">%PACKPATH%</span>&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com&quot; /v &quot;DesktopIcon&quot; /d &quot;ON&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;buildId&quot; /d &quot;<span class="number">53968439607309789</span>&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;<span class="built_in">ver</span>&quot; /d &quot;Build_3233390Change_4173226&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;lang_code&quot; /d &quot;zh-Hans&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;osbit&quot; /d &quot;<span class="number">64</span>&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;installer_language&quot; /d &quot;chinese&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;gameName&quot; /d &quot;Cyberpunk <span class="number">2077</span>&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;gameID&quot; /d &quot;<span class="number">1423049311</span>&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;productID&quot; /d &quot;<span class="number">1423049311</span>&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;language&quot; /d &quot;chinese (simplified)&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;<span class="built_in">path</span>&quot; /d &quot;<span class="variable">%GAMEPATH%</span>&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;startMenu&quot; /d &quot;Cyberpunk <span class="number">2077</span>&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;uninstallCommand&quot; /d &quot;<span class="variable">%GAMEPATH%</span>\unins000.exe&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;workingDir&quot; /d &quot;<span class="variable">%GAMEPATH%</span>&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;exe&quot; /d &quot;<span class="variable">%GAMEPATH%</span>\bin\x64\Cyberpunk2077.exe&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;exeFile&quot; /d &quot;Cyberpunk2077.exe&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;launchParam&quot; /d &quot;&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;launchCommand&quot; /d &quot;<span class="variable">%GAMEPATH%</span>\bin\x64\Cyberpunk2077.exe&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;startMenuLink&quot; /d &quot;C:\ProgramData\Microsoft\Windows\<span class="built_in">Start</span> Menu\Programs\Cyberpunk <span class="number">2077</span> [GOG.com]\Cyberpunk <span class="number">2077</span>&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;dependsOn&quot; /d &quot;&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;supportLink&quot; /d &quot;&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;INSTALLDATE&quot; /d &quot;<span class="number">2023</span>-<span class="number">10</span>-<span class="number">10</span> <span class="number">08</span>:<span class="number">58</span>:<span class="number">20</span>&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /v &quot;DLC&quot; /d &quot;&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">IF</span> <span class="keyword">ERRORLEVEL</span> <span class="number">1</span> <span class="keyword">goto</span> ERROR</span><br><span class="line"><span class="built_in">echo</span> 添加成功。</span><br><span class="line"><span class="built_in">pause</span></span><br><span class="line"><span class="keyword">exit</span></span><br><span class="line"></span><br><span class="line">:<span class="built_in">DEL</span></span><br><span class="line"><span class="variable">%SYSTEMROOT%</span>\System32\reg.exe delete &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\GOG.com\Games\<span class="number">1423049311</span>&quot; /f&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">IF</span> <span class="keyword">ERRORLEVEL</span> <span class="number">1</span> <span class="keyword">goto</span> ERROR</span><br><span class="line"><span class="built_in">echo</span> 删除成功。</span><br><span class="line"><span class="built_in">pause</span></span><br><span class="line"><span class="keyword">exit</span></span><br><span class="line"></span><br><span class="line">:ERROR</span><br><span class="line"><span class="built_in">echo</span> 操作失败。</span><br><span class="line"><span class="built_in">pause</span></span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line"><span class="keyword">goto</span> <span class="built_in">START</span></span><br><span class="line"></span><br><span class="line">:ERRORADM</span><br><span class="line"><span class="built_in">echo</span> 请使用管理员模式运行。</span><br><span class="line"><span class="built_in">pause</span></span><br><span class="line"><span class="keyword">exit</span></span><br><span class="line"></span><br><span class="line">:ERROREXE</span><br><span class="line"><span class="built_in">echo</span> 请将注册表放至游戏目录内运行。</span><br><span class="line"><span class="built_in">pause</span></span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure>
 </details>
</li>
<li class="lvl-3">
<p>安装 DLC</p>
<ul class="lvl-2">
<li class="lvl-6">选择有 <code>phantom_liberty</code>字样的可执行文件打开、点击安装。</li>
</ul>
<p>安装时有个很迷惑的 banner， 显示下载中，其实那个 banner 是一张图片而已，不用理会。</p>
</li>
<li class="lvl-3">
<p>开始游戏</p>
<p>直接启动 <code>%GAMEPATH%\bin\x64\Cyberpunk2077.exe</code> 即可。(%GAMEPATH% 为游戏根目录)</p>
</li>
</ol>
<p><img src="./Thanks.png" alt></p>
<h2 id="参考">参考</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9ydXRyYWNrZXIub3JnL2ZvcnVtL3ZpZXd0b3BpYy5waHA/dD01OTgxOTcw">Cyberpunk 2077 GOG V2.0 – rutracker.org<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h2 id="23-10-19-更新">23-10-19 更新</h2>
<p>哈哈😅最近玩嗨了，进一周没更新博客了。斯安威斯坦+刀剑真是太有意思了。😺</p>
]]></content>
      <tags>
        <tag>分享</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3-07</title>
    <url>/2023/10/08/1/</url>
    <content><![CDATA[<h2 id="组件事件">组件事件</h2>
<p>在组件模板的表达式中，可以使用 <code>$emit</code> 方法来触发一个自定义事件。</p>
<p>目的是为了让父组件可以监听这个事件，并在事件回调中处理逻辑。</p>
<p>继续使用上一篇文章的 <code>ParentComponent.vue</code> 和 <code>ChildComponent.vue</code> 组件。</p>
<blockquote>
<p>ParentComponent.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>ParentComponent<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ChildComponent</span> @<span class="attr">my-event</span>=<span class="string">&quot;handleMyEvent&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ChildComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./ChildComponent.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ChildComponent</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleMyEvent</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;handleMyEvent&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ChildComponent.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>ChildComponent<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;handleClick&quot;</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;my-event&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在 <code>ParentComponent.vue</code> 组件中，我们监听了 <code>ChildComponent.vue</code> 组件中触发的 <code>my-event</code> 事件，并在事件回调中打印了一句话。</p>
<p>在 <code>ChildComponent.vue</code> 组件中，我们在 <code>handleClick</code> 方法中调用了 <code>$emit</code> 方法，并传递了一个参数，该参数就是我们要触发的事件的名称。</p>
<h3 id="配合-v-model-使用">配合 v-model 使用</h3>
<p>在 Vue3 中，我们可以使用 <code>v-model</code> 指令来实现双向数据绑定。</p>
<p>例如，我们希望在用户输入的时候，实时的将用户输入的内容显示在页面上。</p>
<blockquote>
<p>ParentComponent.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>ParentComponent<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; search &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ChildComponent</span> @<span class="attr">searchEvent</span>=<span class="string">&quot;getSearch&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ChildComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./ChildComponent.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ChildComponent</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">search</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">getSearch</span>(<span class="params">value</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">search</span> = value</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ChildComponent.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>ChildComponent<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;search&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">search</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">search</span>(<span class="params">newValue</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;searchEvent&#x27;</span>, newValue)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在 <code>ParentComponent.vue</code> 组件中，我们监听了 <code>ChildComponent.vue</code> 组件中触发的 <code>searchEvent</code> 事件，并在事件回调中将传递过来的参数赋值给了 <code>search</code> 属性。</p>
<p>在 <code>ChildComponent.vue</code> 组件中，我们在 <code>search</code> 属性上使用了 <code>v-model</code> 指令，这样就可以实现双向数据绑定。</p>
<h3 id="组件数据传递">组件数据传递</h3>
<p>利用 <code>props</code> 可以将数据从父组件传递到子组件。在这一小节主要是传递一个函数。</p>
<blockquote>
<p>ParentComponent.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>ParentComponent<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>父元素 &#123;&#123; massge &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ChildComponent</span> <span class="attr">title</span>=<span class="string">&quot;子组件&quot;</span> <span class="attr">:onEvent</span>=<span class="string">&quot;dataFn&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ChildComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./ChildComponent.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ChildComponent</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">massge</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">dataFn</span>(<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">massge</span> = data</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ChildComponent.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>ChildComponent<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; onEvent(&#x27;数据传递&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">title</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">onEvent</span>: <span class="title class_">Function</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="透传-Attribute">透传 Attribute</h2>
<p>“透传” 是指将一个组件的属性应用在另一个元素上。</p>
<p>透传属性是指那些没有在 <code>props</code> / <code>emits</code> 中声明的属性或是 <code>v-on</code> 事件监听器。常见的透传属性有 <code>class</code>、<code>style</code>、<code>id</code> 等。</p>
<p>当组件的根元素是一个普通的 HTML 元素时，这些属性会被添加到根元素上。</p>
<p>当然，我们也可以通过 <code>inheritAttrs</code> 选项来关闭这个特性。</p>
<blockquote>
<p>ParentComponent.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>ParentComponent<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ChildComponent</span> <span class="attr">class</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ChildComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./ChildComponent.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ChildComponent</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ChildComponent.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>ChildComponent<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">inheritAttrs</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Vue3</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3-06</title>
    <url>/2023/10/05/1/</url>
    <content><![CDATA[<h2 id="组件注册方式">组件注册方式</h2>
<p>一个组件在使用之前，必须先注册，否则会报错。而注册组件的方式有两种，分别是全局注册和局部注册。</p>
<p>在 Vue3 中，我们可以通过 <code>app.component</code> 方法来注册一个全局组件，该方法接收两个参数，第一个参数是组件的名称，第二个参数是组件的选项对象。</p>
<p>而局部注册则是通过 <code>components</code> 选项来实现的，该选项接收一个对象，对象的键是组件的名称，值是组件的选项对象。</p>
<h3 id="全局注册">全局注册</h3>
<p>通过修改 <code>main.js</code> 文件，我们可以在全局注册一个组件。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 全局注册</span></span><br><span class="line">app.<span class="title function_">component</span>(<span class="string">&#x27;my-component&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;my component&lt;/div&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>e.g.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局注册</span></span><br><span class="line"><span class="comment">// 注册的组件要在 `app.mount()` 之前。</span></span><br><span class="line">app.<span class="title function_">component</span>(<span class="string">&#x27;my-component&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;my component&lt;/div&gt;&#x27;</span></span><br><span class="line">&#125;)<span class="comment">// 这里的 my-component 就是组件的名称，可以自定义，但是不能使用驼峰命名法，而是要使用短横线分隔命名法。</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>全局注册的组件可以在任何组件中使用，但是如果组件过多，会导致全局变量过多，不利于维护。并且如果被注册的组件没有被使用，也会被打包到最终的代码中，增加了代码的体积。</p>
<h3 id="局部注册">局部注册</h3>
<p>局部注册的组件只能在当前组件中使用，但是不会污染全局变量。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MyComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./components/MyComponent.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 局部注册</span></span><br><span class="line">app.<span class="title function_">component</span>(<span class="string">&#x27;my-component&#x27;</span>, <span class="title class_">MyComponent</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="组件传递数据">组件传递数据</h2>
<p>组件与组件间并非孤立的，它们之间是可以相互通信的。</p>
<p>在 Vue3 中，组件之间的数据传递方式与 Vue2 中有所不同。</p>
<p>在 Vue2 中，我们可以通过 <code>props</code> 选项来实现父子组件之间的数据传递，而在 Vue3 中，我们同样可以通过 <code>props</code> 选项来实现父子组件之间的数据传递，但是 <code>props</code> 选项的使用方式与 Vue2 中有所不同。</p>
<h3 id="props-使用">props 使用</h3>
<p>我们在 <code>components</code> 文件夹中创建一个 <code>ParentComponent.vue</code> 文件，该文件是父组件。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ChildComponent</span> <span class="attr">:name</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ChildComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./ChildComponent.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ChildComponent</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&#x27;a&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在父组件中，我们通过 <code>data</code> 选项定义了一个 <code>name</code> 属性，并将其绑定到了模板中。</p>
<p>然后我们在 <code>components</code> 文件夹中创建一个 <code>ChildComponent.vue</code> 文件，该文件是子组件。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>子组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: [<span class="string">&#x27;name&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在子组件中，我们通过 <code>props</code> 选项定义了一个 <code>name</code> 属性，该属性的值是一个数组，数组中的元素就是我们要接收的数据的名称。</p>
<h3 id="组件传递多种类型数据">组件传递多种类型数据</h3>
<p>在上一节中，我们通过 <code>props</code> 选项实现了父子组件之间的数据传递，但是我们只传递了一个字符串类型的数据，那么如果我们要传递多种类型的数据，该怎么办呢？</p>
<p>我们在 <code>components</code> 文件夹中创建一个 <code>ParentComponent.vue</code> 文件，该文件是父组件。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; height &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; favorite &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ChildComponent</span> <span class="attr">:name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">:age</span>=<span class="string">&quot;age&quot;</span> <span class="attr">:height</span>=<span class="string">&quot;height&quot;</span> <span class="attr">:favorite</span>=<span class="string">&quot;favorite&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ChildComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./ChildComponent.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ChildComponent</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&#x27;a&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">age</span>: <span class="number">18</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">height</span>: <span class="number">1.88</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">favorite</span>: [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在父组件中，我们通过 <code>data</code> 选项定义了三个属性，并将其绑定到了模板中。</p>
<p>然后我们在 <code>components</code> 文件夹中创建一个 <code>ChildComponent.vue</code> 文件，该文件是子组件。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>子组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; height &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in favorite&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;height&#x27;</span>, <span class="string">&#x27;favorite&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在子组件中，我们通过 <code>props</code> 选项定义了四个属性，该属性的值是一个数组，数组中的元素就是我们要接收的数据的名称。</p>
<p>上面的例子中，我们传递了字符串、数字、浮点数和数组四种类型的数据，但是如果我们要传递对象类型的数据，该怎么办呢？</p>
<p>修改 <code>ParentComponent.vue</code> 文件，如下所示。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; info &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ChildComponent</span> <span class="attr">:info</span>=<span class="string">&quot;info&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ChildComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./ChildComponent.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ChildComponent</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">info</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;b&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">age</span>: <span class="number">19</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">height</span>: <span class="number">1.77</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>修改 <code>ChildComponent.vue</code> 文件，如下所示。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>子组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; info.name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; info.age &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; info.height &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: [<span class="string">&#x27;info&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们还可以通过 <code>type</code> 选项来指定接收的数据的类型。</p>
<p>使用上面例子的 <code>ParentComponent.vue</code> 文件。修改 <code>ChildComponent.vue</code> 文件，如下所示。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>子组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; info.name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; info.age &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; info.height &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">info</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">Object</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>传递的数据类型不是对象，那么就会报错。</p>
<p>我们还可传递 boolean 类型的数据。</p>
<p>修改 <code>ParentComponent.vue</code> 文件，如下所示。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; isShow &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ChildComponent</span> <span class="attr">:isShow</span>=<span class="string">&quot;isShow&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ChildComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./ChildComponent.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ChildComponent</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">isShow</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>修改 <code>ChildComponent.vue</code> 文件，如下所示。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>子组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; isShow &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">isShow</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">Boolean</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//default: false</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">default</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">      &#125;<span class="comment">// 这里的 default 选项可以是一个函数，函数的返回值就是默认值。</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="props-验证">props 验证</h3>
<p>上面我们通过 <code>type</code> 选项来指定接收的数据的类型，其实可以用做简单的验证，但是还有更强大的验证方式。</p>
<p>我们可以通过 <code>required</code> 选项来指定接收的数据是否必须传递。</p>
<p>修改 <code>ParentComponent.vue</code> 文件，如下所示。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ChildComponent</span> <span class="attr">:name</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ChildComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./ChildComponent.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ChildComponent</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&#x27;a&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>修改 <code>ChildComponent.vue</code> 文件，如下所示。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>子组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>添加 <code>required: true</code> 选项后，如果父组件没有传递 <code>name</code> 属性，那么就会报错。</p>
<p><code>props</code> 是只读的，我们不能在子组件中修改 <code>props</code> 中的数据。</p>
<p>此外，我们还可以通过 <code>validator</code> 选项来指定自定义验证函数。</p>
<p>保持 <code>ParentComponent.vue</code> 文件不变。修改 <code>ChildComponent.vue</code> 文件，如下所示。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>子组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">required</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">validator</span>(<span class="params">value</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> value.<span class="property">length</span> &gt; <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Vue3</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3-05</title>
    <url>/2023/10/03/1/</url>
    <content><![CDATA[<h2 id="侦听器">侦听器</h2>
<p>我们可以通过 <code>watch</code> 选项来侦听一个特定的值，当被侦听的值发生变化时，就会执行回调函数。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&quot;a&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">name</span>(<span class="params">newValue, oldValue</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面这个例子实现了一个简单的双向绑定，当输入框的值发生变化时，会触发 <code>watch</code> 中的回调函数。</p>
<h2 id="表单输入绑定">表单输入绑定</h2>
<p>在 Vue3 中，表单的绑定方式与 Vue2 中有所不同。</p>
<p>在 Vue2 中，我们可以通过 <code>v-model</code> 来实现表单的双向绑定，但是在 Vue3 中，<code>v-model</code> 只能用于组件上，不能用于原生的表单元素上。</p>
<p>e.g.</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&quot;a&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在 Vue3 中，我们可以通过 <code>v-model</code> 的另一种写法来实现表单的双向绑定。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">:value</span>=<span class="string">&quot;name&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;name = $event.target.value&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&quot;a&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面这个例子实现了一个简单的双向绑定，当输入框的值发生变化时，会触发 <code>input</code> 事件，然后将输入框的值赋值给 <code>name</code>。</p>
<h2 id="模板引用">模板引用</h2>
<p>在 Vue3 中，我们可以通过 <code>ref</code> 来获取模板中的元素。</p>
<p>也就是说，虽然 Vue 中不推荐直接操作 DOM，但是我们可以通过 <code>ref</code> 来获取 DOM 元素，然后操作 DOM。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&quot;input&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;handleClick&quot;</span>&gt;</span>获取输入框的值<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">input</span>.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>挂载结束后，<code>this.$refs.input</code> 就是一个 DOM 元素，我们可以通过 <code>this.$refs.input.value</code> 来获取输入框的值。</p>
<p>没有特殊情况，我们不推荐直接操作 DOM，但是在某些情况下，我们不得不直接操作 DOM，比如在某些第三方库中，我们需要传入一个 DOM 元素，这时候我们就可以通过 <code>ref</code> 来获取 DOM 元素。</p>
<h2 id="组件组成">组件组成</h2>
<p>组件是 Vue 中最重要的概念之一，组件可以帮助我们将一个复杂的页面拆分成多个简单的组件，然后组合起来，这样就可以提高代码的可维护性。</p>
<p>当使用构建工具时，我们可以将组件拆分成多个文件(一个单独的 <code>.vue</code> 文件，这些被称为 SFC 单文件组件)，每个文件都包含三部分内容：<code>template</code>、<code>script</code> 和 <code>style</code>。</p>
<blockquote>
<p>组件组成结构如下：</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>组件组成<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;ComponentComposition&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>用时候 <code>&lt;style&gt;</code> 标签中的 <code>scoped</code> 属性，可以让样式只作用于当前组件。</p>
<blockquote>
<p>组件引用</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>组件引用<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ComponentComposition</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ComponentComposition</span> <span class="keyword">from</span> <span class="string">&quot;./ComponentComposition.vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;ComponentComposition&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ComponentComposition</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="实例">实例</h3>
<blockquote>
<p>components1.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>组件引用<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;components1&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">message</span>: <span class="string">&quot;Hello Vue!&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>App.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>组件引用<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">components1</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> components1 <span class="keyword">from</span> <span class="string">&quot;.//components/components1.vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;App&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    components1,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="组件嵌套关系">组件嵌套关系</h2>
<p>在 Vue 中，组件可以嵌套，也就是说，一个组件可以作为另一个组件的子组件。</p>
<p>创建 <code>pages</code> 文件夹，在 <code>pages</code> 文件夹中创建 <code>Header.vue</code>、<code>Main.vue</code>、<code>Aside.vue</code>、<code>Aeti.vue</code>、<code>Item.vue</code>五个组件。</p>
<p>通过组件间的嵌套，使得组件之间的关系更加清晰，通常形成的组件树如下：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">App</span><br><span class="line">├── Header</span><br><span class="line">├── Main</span><br><span class="line">│   ├── Article</span><br><span class="line">│   └── Article</span><br><span class="line">└── Aside</span><br><span class="line">    ├── Item</span><br><span class="line">    ├── Item</span><br><span class="line">    └── Item</span><br></pre></td></tr></table></figure>
<details>
<summary>代码-点击展开</summary>
<blockquote>
<p>Header.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Header<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">h3</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">5px</span> solid <span class="number">#999</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Main.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Main<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Article</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Article</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Article</span> <span class="keyword">from</span> <span class="string">&quot;./Article.vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;Main&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Article</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.main</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">70%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="number">#999</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: <span class="number">5px</span> solid <span class="number">#999</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Aside.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;aside&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Aside<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Item</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Item</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Item</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Item</span> <span class="keyword">from</span> <span class="string">&quot;./Item.vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;Aside&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Item</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.aside</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">30%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="number">#999</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: <span class="number">5px</span> solid <span class="number">#999</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Article.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;article&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Article<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.article</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">80%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="number">#999</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: <span class="number">5px</span> solid <span class="number">#999</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Item.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Item<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.item</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">80%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="number">#999</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: <span class="number">5px</span> solid <span class="number">#999</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>App.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Header</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Main</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Aside</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Header</span> <span class="keyword">from</span> <span class="string">&quot;./pages/Header.vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Main</span> <span class="keyword">from</span> <span class="string">&quot;./pages/Main.vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Aside</span> <span class="keyword">from</span> <span class="string">&quot;./pages/Aside.vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;App&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Header</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Main</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Aside</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</details>
]]></content>
      <categories>
        <category>Vue3</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3-04</title>
    <url>/2023/09/19/1/</url>
    <content><![CDATA[<h2 id="数组变化检测">数组变化检测</h2>
<p>在 Vue3 中，Vue 会对数组的变化进行检测，但是并不是所有的变化都能被检测到。</p>
<p>数组的变化检测主要是通过重写数组的原型方法来实现的，所以只有通过这些方法改变数组才能被检测到。</p>
<blockquote>
<p>变更方法</p>
</blockquote>
<p>Vue 能侦听响应式数组的变化，并在被调用时触发视图更新。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>push()</p>
</li>
<li class="lvl-2">
<p>pop()</p>
</li>
<li class="lvl-2">
<p>shift()</p>
</li>
<li class="lvl-2">
<p>unshift()</p>
</li>
<li class="lvl-2">
<p>splice()</p>
</li>
<li class="lvl-2">
<p>sort()</p>
</li>
<li class="lvl-2">
<p>reverse()</p>
</li>
</ul>
<p>e.g.</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>add<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;remove&quot;</span>&gt;</span>remove<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;reverse&quot;</span>&gt;</span>reverse<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sort&quot;</span>&gt;</span>sort<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;splice&quot;</span>&gt;</span>splice<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;push&quot;</span>&gt;</span>push<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;pop&quot;</span>&gt;</span>pop<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;shift&quot;</span>&gt;</span>shift<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;unshift&quot;</span>&gt;</span>unshift<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123; item.name &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">items</span>: [</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;a&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&quot;b&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&quot;c&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">      ],</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">add</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">push</span>(&#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">name</span>: <span class="string">&quot;d&quot;</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">remove</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">splice</span>(<span class="number">0</span>, <span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">reverse</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">reverse</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">sort</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.<span class="property">id</span> - b.<span class="property">id</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">splice</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">splice</span>(<span class="number">0</span>, <span class="number">1</span>, &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">name</span>: <span class="string">&quot;d&quot;</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">push</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">push</span>(&#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">name</span>: <span class="string">&quot;d&quot;</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">pop</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">pop</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">shift</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">shift</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">unshift</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">unshift</span>(&#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">name</span>: <span class="string">&quot;d&quot;</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>替换方法</p>
</blockquote>
<p>替换方法会用新数组替换原数组，vue 会对新数组进行响应式处理。</p>
<p>Vue 不能侦听以下变动的数组：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>当你利用索引直接设置一个项时，例如：vm.items[indexOfItem] = newValue</p>
</li>
<li class="lvl-2">
<p>当你修改数组的长度时，例如：vm.items.length = newLength</p>
</li>
</ul>
<p>e.g.</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;replace&quot;</span>&gt;</span>replace<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;length&quot;</span>&gt;</span>length<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123; item.name &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">items</span>: [</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;a&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&quot;b&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&quot;c&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">      ],</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">replace</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">items</span>[<span class="number">0</span>] = &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">name</span>: <span class="string">&quot;d&quot;</span> &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">length</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">items</span>.<span class="property">length</span> = <span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>解决方法</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>Vue.set()</p>
</li>
<li class="lvl-2">
<p>Array.prototype.splice()</p>
</li>
</ul>
<p>e.g.</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;replace&quot;</span>&gt;</span>replace<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;length&quot;</span>&gt;</span>length<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123; item.name &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">items</span>: [</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;a&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&quot;b&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&quot;c&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">      ],</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">replace</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// this.items[0] = &#123; id: 4, name: &quot;d&quot; &#125;;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$set(<span class="variable language_">this</span>.<span class="property">items</span>, <span class="number">0</span>, &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">name</span>: <span class="string">&quot;d&quot;</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">length</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// this.items.length = 2;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">splice</span>(<span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="计算属性">计算属性</h2>
<p>模板中放入太多的逻辑会让模板过重且难以维护，因此对于任何复杂逻辑，你都应当使用计算属性。</p>
<p>计算属性是基于它们的依赖进行缓存的，只有在相关依赖发生改变时，才会重新求值。</p>
<p>例如，下面的例子将演示一个模板中的逻辑：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123; items.name &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; items.content.length &gt; 0 ? &#x27;Yes&#x27;: &#x27;No&#x27; &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">items</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>:<span class="string">&quot;Yuzhii&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">content</span>:[<span class="string">&quot;Python&quot;</span>,<span class="string">&quot;Vue&quot;</span>,<span class="string">&quot;React&quot;</span>]</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>虽然这个例子很简单，但是模板中的逻辑会变得越来越复杂，这时候就需要使用计算属性。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; content &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">items</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>:<span class="string">&quot;Yuzhii&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">content</span>:[<span class="string">&quot;Python&quot;</span>,<span class="string">&quot;Vue&quot;</span>,<span class="string">&quot;React&quot;</span>]</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">computed</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">name</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">items</span>.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">content</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">items</span>.<span class="property">content</span>.<span class="property">length</span> &gt; <span class="number">0</span> ? <span class="string">&#x27;Yes&#x27;</span>: <span class="string">&#x27;No&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>可以看见，将模板中的逻辑放到了计算属性中，这样模板就变得简洁了。</p>
<blockquote>
<p>虽然 methods 也可以实现同样的效果，但是<strong>计算属性值会给予其响应式依赖被缓存</strong>，只有在相关依赖发生改变时，才会重新求值，而 methods <strong>每次</strong>都会重新计算。</p>
</blockquote>
<h2 id="Class-与-Style-绑定">Class 与 Style 绑定</h2>
<p>在 Vue3 中，可以使用 v-bind 指令绑定 class 和 style。</p>
<h3 id="Class-绑定">Class 绑定</h3>
<p>数据绑定的一个常见需求场景是操作元素的 class 列表和它的内联样式。因为它们都是属性，所以我们可以用 v-bind 处理它们：只需要计算出表达式最终的字符串。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;classObject&quot;</span>&gt;</span>classObject<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;classArray&quot;</span>&gt;</span>classArray<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;classObject2&quot;</span>&gt;</span>classObject2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;classArray2&quot;</span>&gt;</span>classArray2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">isActive</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">error</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">classObject</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">active</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="string">&quot;text-danger&quot;</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">classArray</span>: [<span class="string">&quot;active&quot;</span>, <span class="string">&quot;text-danger&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">classObject2</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">active</span>: <span class="variable language_">this</span>.<span class="property">isActive</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="string">&quot;text-danger&quot;</span>: <span class="variable language_">this</span>.<span class="property">error</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">error</span>.<span class="property">type</span> === <span class="string">&quot;fatal&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">classArray2</span>: [</span></span><br><span class="line"><span class="language-javascript">        &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">active</span>: <span class="variable language_">this</span>.<span class="property">isActive</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&quot;text-danger&quot;</span>: <span class="variable language_">this</span>.<span class="property">error</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">error</span>.<span class="property">type</span> === <span class="string">&quot;fatal&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      ],</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面这个例子中，classObject 和 classArray 的结果都是 active text-danger，但是 classObject2 和 classArray2 的结果是 active。</p>
<p><img src="./active.png" alt></p>
<p>可以增加一个 CSS 样式来验证一下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.active</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>也可以用三元表达式来实现</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;isActive ? &#x27;active&#x27; : &#x27;&#x27;&quot;</span>&gt;</span>isActive<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;error ? &#x27;text-danger&#x27; : &#x27;&#x27;&quot;</span>&gt;</span>error<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">isActive</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">error</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>提醒</p>
</blockquote>
<p>数组与对象嵌套，只能是数组中的对象，不能是对象中的数组</p>
<h3 id="Style-绑定">Style 绑定</h3>
<p>v-bind:style 的对象语法十分直观——看着非常像 CSS，其实它是一个 JavaScript 对象。 CSS 属性名可以用驼峰式（camelCase）或短横分隔命名（kebab-case）：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;styleObject&quot;</span>&gt;</span>styleObject<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;styleObject2&quot;</span>&gt;</span>styleObject2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">styleObject</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">color</span>: <span class="string">&quot;red&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">fontSize</span>: <span class="string">&quot;30px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">styleObject2</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">color</span>: <span class="string">&quot;red&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;font-size&quot;</span>: <span class="string">&quot;50px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>此外，还可以绑定数组语法来动态切换多个样式，但是<strong>数组语法只能用在元素的 style 属性上</strong>：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;[styleObject, styleObject2]&quot;</span>&gt;</span>styleObject<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">styleObject</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">color</span>: <span class="string">&quot;red&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">fontSize</span>: <span class="string">&quot;30px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">styleObject2</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">color</span>: <span class="string">&quot;red&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;font-size&quot;</span>: <span class="string">&quot;50px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>但是通常情况下，应用场景比较少。且一般情况下，我们会使用计算属性来处理。</p>
]]></content>
      <categories>
        <category>Vue3</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3-03</title>
    <url>/2023/09/08/1/</url>
    <content><![CDATA[<h2 id="通过-Key-管理状态">通过 Key 管理状态</h2>
<p>Vue 为了尽可能高效地渲染元素，通常会复用已有元素而不是从头开始渲染。这样可以使 Vue 变得非常快。不过，这也意味着，你应该避免在模板中，通过 v-if 来切换元素的显示状态。</p>
<p>Key 是 Vue 用来追踪节点的一个特殊的属性，它可以用于强制替换元素/组件而不是重复使用它。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;toggle&quot;</span>&gt;</span>Toggle<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;show&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;show&quot;</span>&gt;</span>show<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">show</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">toggle</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">show</span> = !<span class="variable language_">this</span>.<span class="property">show</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>提示<br>
<code>key</code> 在这里是通过 <code>v-bind</code> 动态绑定的，因为静态的 <code>key</code> 会被作为一个属性传递给被渲染的元素，而动态绑定的 <code>key</code> 会基于每次更新的节点进行更新。推荐使用 <code>v-bind</code> 来绑定 <code>key</code>，因为它能提供更好的性能，同时也更符合 Vue 的风格指南。在任何可行的时候为 <code>v-for</code> 设置 <code>key</code>，除非迭代 DOM 内容足够简单，或者是刻意依赖默认行为以获取性能提升。</p>
</blockquote>
<h3 id="Key-的来源">Key 的来源</h3>
<p>Key 的值必须是唯一的，它可以是任何类型的值，但在不同的节点之间应该使用不同的值。</p>
<p>不要用索引作为 key，除非你的列表是静态的，且项目永远不会被重新排序或过滤。使用不唯一的值可能会导致状态错误或渲染错误。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123; item.name &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">items</span>: [</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;foo&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;bar&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;baz&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">      ],</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>可以看到，我们使用了每个 item 的 id 作为 key，这样就可以保证每个 key 都是唯一的。</p>
<h2 id="事件处理">事件处理</h2>
<blockquote>
<p>v-on 简写 @</p>
</blockquote>
<p>Vue 事件处理方法使用 v-on 指令监听 DOM 事件，并在触发时运行一些 JavaScript 代码。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;counter += 1&quot;</span>&gt;</span>增加 1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;say(&#x27;what&#x27;)&quot;</span>&gt;</span>Say what<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>事件处理器可以是一个内联语句，或者是一个方法名。</p>
<blockquote>
<p>内联事件处理器</p>
</blockquote>
<p>通常用于处理非常简单的事件处理器。</p>
<p>在 components/EventDemo.vue 中添加如下代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;counter += 1&quot;</span>&gt;</span>增加 1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;say(&#x27;what&#x27;)&quot;</span>&gt;</span>Say what<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>counter: &#123;&#123; counter &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">counter</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">say</span>(<span class="params">msg</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">alert</span>(msg);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>方法事件处理器</p>
</blockquote>
<p>通常用于处理复杂的事件处理器。</p>
<p>创建 EventDemo2.vue，添加如下代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add(1)&quot;</span>&gt;</span>增加 1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add(2)&quot;</span>&gt;</span>增加 2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>counter: &#123;&#123; counter &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">counter</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">add</span>(<span class="params">num</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">counter</span> += num;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>以上代码中，我们通过<code>methods</code>定义了一个add方法，然后在模板中通过<code>@click=&quot;add(1)&quot;</code>调用该方法。</p>
<h2 id="事件传参">事件传参</h2>
<p>在上面的例子中，我们通过<code>@click=&quot;add(1)&quot;</code>调用add方法，这样就可以实现增加1的功能。但是如果我们想要实现增加2的功能，就需要再定义一个add2方法，这样就会导致代码冗余。</p>
<p>我们可以通过事件传参的方式来解决这个问题。</p>
<p><code>方法事件处理器</code>中的<code>add</code>方法就是一个事件传参的例子。</p>
<p>下面这个例子是一个更加复杂的事件传参的例子：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;addzCount&quot;</span>&gt;</span>增加 1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>counter: &#123;&#123; counter &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">counter</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// event 为事件对象</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">addCount</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 在 vue 中的 event 对象是原生 event 对象的包装</span></span></span><br><span class="line"><span class="language-javascript">      e.<span class="property">target</span>.<span class="property">innerText</span> = <span class="string">&#x27;增加 1&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">counter</span> += <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>另一个事件传参的例子</p>
</blockquote>
<p>这个例子演示了 <code>$event</code> 传参的用法。<br>
<code>$event</code> 是 Vue 提供的一个特殊变量，它是原生 event 对象的包装。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> @<span class="attr">click</span>=<span class="string">&quot;getNameHandler(item, $event)&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in names&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123; item &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">names</span>: [<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>, <span class="string">&#x27;baz&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">getNameHandler</span>(<span class="params">name</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">alert</span>(name);</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="事件修饰符">事件修饰符</h2>
<p>在处理事件时调用 <code>event.preventDefault()</code> 或 <code>event.stopPropagation()</code> 是非常常见的需求。尽管我们可以在方法中轻松实现这点，但更好的方式是：方法只有纯粹的数据逻辑，而不是去处理 DOM 事件细节。</p>
<p>为了解决这个问题，Vue.js 为 <code>v-on</code> 提供了事件修饰符。之前提过，修饰符是由点开头的指令后缀来表示的。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>.stop</code></p>
</li>
<li class="lvl-2">
<p><code>.prevent</code></p>
</li>
<li class="lvl-2">
<p><code>.capture</code></p>
</li>
<li class="lvl-2">
<p><code>.self</code></p>
</li>
<li class="lvl-2">
<p><code>.once</code></p>
</li>
<li class="lvl-2">
<p><code>.passive</code></p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 阻止单击事件继续传播 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> @<span class="attr">click.stop</span>=<span class="string">&quot;doThis&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 提交事件不再重载页面 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> @<span class="attr">submit.prevent</span>=<span class="string">&quot;onSubmit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 修饰符可以串联 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> @<span class="attr">click.stop.prevent</span>=<span class="string">&quot;doThat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 只有修饰符 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> @<span class="attr">submit.prevent</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 添加事件监听器时使用事件捕获模式 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 即内部元素触发的事件先在此处理，然后才交由内部元素进行处理 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click.capture</span>=<span class="string">&quot;doThis&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 只当在 event.target 是当前元素自身时触发处理函数 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 即事件不是从内部元素触发的 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click.self</span>=<span class="string">&quot;doThat&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 点击事件将只会触发一次 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> @<span class="attr">click.once</span>=<span class="string">&quot;doThis&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 滚动事件的默认行为 (即滚动行为) 将会立即触发 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 而不会等待 `onScroll` 完成  --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 这其中包含 `event.preventDefault()` 的情况 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">scroll.passive</span>=<span class="string">&quot;onScroll&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>官方文档：<span class="exturl" data-url="aHR0cHM6Ly9jbi52dWVqcy5vcmcvZ3VpZGUvZXNzZW50aWFscy9ldmVudC1oYW5kbGluZy5odG1sI2V2ZW50LW1vZGlmaWVycw==">事件修饰符<i class="fa fa-external-link-alt"></i></span></p>
<blockquote>
<p>阻止默认行为</p>
</blockquote>
<p>“默认行为”即事件的默认行为，比如点击a标签，会跳转到a标签的href属性指定的链接。</p>
<p>e.g.</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>事件修饰符<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> @<span class="attr">click.prevent</span>=<span class="string">&quot;clickHandle&quot;</span> <span class="attr">href</span>=<span class="string">&quot;yuzhii0718.github.io&quot;</span>&gt;</span>Yuzhii&#x27;s Blog</span><br><span class="line">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">clickHandle</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 阻止默认行为</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// e.preventDefault();</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 将html中的a标签的 @click改为 @click.prevent 可以阻止默认行为</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">alert</span>(<span class="string">&#x27;click&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>阻止事件冒泡</p>
</blockquote>
<p>“冒泡”即事件的传播，当一个元素上的事件被触发后，该事件会向父元素传播，直到根元素。</p>
<p>e.g.</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>事件修饰符<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">&quot;divClick&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.stop</span>=<span class="string">&quot;btnClick&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">&quot;divClick&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btnClick&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">divClick</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">alert</span>(<span class="string">&#x27;div click&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">btnClick</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">alert</span>(<span class="string">&#x27;btn click&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>两个div中的按钮，点击第一个按钮，只会触发第一个div的点击事件，不会触发第二个div的点击事件。</p>
<p>因为第一个按钮的点击事件使用了<code>.stop</code>修饰符，阻止了事件冒泡。</p>
]]></content>
      <categories>
        <category>Vue3</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>怎样修理我的电脑？魔霸6P疑难杂症记录</title>
    <url>/2023/09/07/1/</url>
    <content><![CDATA[<h2 id="我的电脑">我的电脑</h2>
<p>我的电脑是一台 ASUS ROG Strix G17 2022(G713RM)，配置如下：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>CPU：AMD Ryzen 9 6900HX @3.3GHz</p>
</li>
<li class="lvl-2">
<p>GPU：NVIDIA GeForce RTX 3060 Laptop GPU</p>
</li>
<li class="lvl-2">
<p>RAM：32GB Samsung DDR5 BDie 4800MHz</p>
</li>
<li class="lvl-2">
<p>SSD：1TB Micron 3400 PCIe4.0 NVMe SSD</p>
</li>
<li class="lvl-2">
<p>WiFi：Mediatek RZ616 MT7922 802.11ax WiFi 6E</p>
</li>
</ul>
<h2 id="问题">问题</h2>
<p>它最近出现了一些问题，比如：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>特定界面、程序卡顿</p>
</li>
<li class="lvl-2">
<p>无法使用快速启动</p>
</li>
<li class="lvl-2">
<p>S0i3 无法正常工作</p>
</li>
<li class="lvl-2">
<p>掉网卡，掉 WLan</p>
</li>
<li class="lvl-2">
<p>etc.</p>
</li>
</ul>
<h2 id="21H2-时期">21H2 时期</h2>
<h2 id="探索过程">探索过程</h2>
<p>起初我以为是系统的问题，于是我重装了系统，但是问题依旧存在，于是我开始怀疑是硬件的问题，于是我开始了一系列的测试。</p>
<ol>
<li class="lvl-3">
<p>首先我测试了内存。我使用了 MemTest86 进行了内存测试，测试了 4 次，没有发现任何问题。随后，因为如今(2023.Q3)的笔记本 DDR5 内存普遍都是低频的，并且 DDR5 时代的 BDie 并没有延续往日辉煌，我尝试将内存频率降低到 4800MHz，但是问题依旧存在。</p>
</li>
<li class="lvl-3">
<p>随后我测试了 CPU。我使用了 Prime95 进行了 CPU 压力测试，测试了 2 次，没有发现任何问题，后来我觉得可能是 CPU 的功耗与性能的问题，于是我尝试将 CPU 的功耗限制调高，将 CPU 的 PBO 调高，但是问题依旧存在。</p>
</li>
<li class="lvl-3">
<p>随后我测试了 SSD。其 S.M.A.R.T. 数据显示一切正常，但是我还是使用了 CrystalDiskMark 进行了 SSD 测试，测试了 2 次，没有发现任何问题。</p>
</li>
<li class="lvl-3">
<p>随后我测试了 WiFi。其掉网卡的问题是偶发的，因为使用了最新的 WiFi 6E 技术，温度过高才导致了掉网卡，一般重启或者重置 UEFI 即可，所以我使用了 iperf3 进行了 WiFi 测试，测试了 2 次，没有发现任何问题。</p>
</li>
<li class="lvl-3">
<p>随后我测试了 GPU。我使用了 FurMark 进行了 GPU 压力测试，测试了 2 次，没有发现任何问题。因为 R9 6900HX 是一颗 8 核 16 线程的 CPU，并且带有 Radeon RX680M 显卡，所以我尝试超频，以及调高功耗限制，增加可调用的 4G 内存作为显存，但是问题依旧存在。</p>
</li>
<li class="lvl-3">
<p>以及其他一些测试，比如：重装系统、重置 UEFI、更新驱动、更新 BIOS、更新 Windows、更新程序…但是问题依旧存在。</p>
</li>
</ol>
<p>之后，我开始怀疑是 Windows 11 的问题，于是我尝试了 Windows 10，但是问题依旧存在。</p>
<ol>
<li class="lvl-3">
<p>我将 Micron 3400 更换为了 YMTC ZhiTai PC005 PCIe3.0 NVMe SSD.</p>
</li>
<li class="lvl-3">
<p>安装了 Windows 10 21H2 Enterprise LTSC.</p>
</li>
<li class="lvl-3">
<p>安装了 Windows 11 22H2 Pro.</p>
</li>
</ol>
<p>但是问题依旧存在。遂，我开始怀疑是 UEFI 的问题，于是我尝试了：</p>
<p>禁用 USB4 support，AMD-CBS-CBP，DRAM-Power-Downm，尝试降级 UEFI，尝试升级 UEFI，但是问题依旧存在。</p>
<p>因为旧的 S3 传统待机存在安全隐患，随着 Windows 11 的发布，全新的待机模式 S0i3 也被引入，所以我怀疑是 S0i3 的问题，于是我尝试了：</p>
<ol>
<li class="lvl-3">
<p>UEFI 中关闭 S0i3，打开 S3，这样理论上就可以解决问题，但是实际会导致电脑无法正常待机，只能强制关机。</p>
</li>
<li class="lvl-3">
<p>利用 OpenCore 修改引导参数，禁用 S0i3，打开 S3，这样理论上就可以解决问题，确实解决了问题，但是会导致电脑无法正常睡眠，只能休眠，这样会导致电池耗电量过大，而且休眠后无法使用快速启动，只能使用冷启动。只能说<strong>这是一个折中的方案</strong>。</p>
</li>
</ol>
<p>参考<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL01vdG9yQm90dGxlL1MzLVNsZWVwLW9uLVJvZy1YMTMtRzE0LTE1LTIwMjEtMjAyMi11c2luZy1PcGVuQ29yZQ==">S3-Sleep-on-Rog-X13-G14-15-2021-2022-using-OpenCore<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="22H2-时期">22H2 时期</h2>
<h2 id="新发现">新发现</h2>
<p>在我尝试了上述的所有方法后，我决定使用 Linux 进行测试，于是我尝试了：</p>
<ol>
<li class="lvl-3">
<p>Ubuntu 22.04 LTS</p>
</li>
<li class="lvl-3">
<p>Deepin 23 Beta</p>
</li>
</ol>
<p>这两个系统中，所有问题都不存在，这让我感到非常奇怪，于是我开始怀疑是 Windows 的问题</p>
<p>通过对种种迹象的分析，我有了灵感与思路，那就是：Linux 系统使用的 NVidia 驱动与 Windows 系统使用的 NVidia 驱动不同，Linux 系统使用的是开源的 Nouveau 驱动，而 Windows 系统使用的是闭源的 NVidia 驱动。并且，<strong>AMD Linux 驱动与 Linux 内核集成</strong>，其性能与稳定性都非常好，而 Windows 系统使用的是 AMD 官方的驱动，其稳定性不如 Linux。Nouveau 驱动只能提供基本的显卡功能，而 NVidia 驱动可以提供更多的显卡功能，比如：CUDA、DLSS、RTX、TensorFlow、etc.，所以我怀疑是 Windows 的显卡驱动的问题。</p>
<p>我获取了原厂驱动(2022的最初始版本)，所有问题都解决了。</p>
<p>Driver List:</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>AMD_Chipset_DriverOnly_ROG_AMD_J_V1.2.0.119Sub1_29512</p>
</li>
<li class="lvl-2">
<p>AMD_Graphic_DriverOnly_ROG_AMD_J_V30.0.14018.19001_28641</p>
</li>
<li class="lvl-2">
<p>ASUSSystemControlInterfacev3_ASUS_Z_V3.1.17.0_15273</p>
</li>
<li class="lvl-2">
<p>Audio_DriverOnly_Dolby_ROG_Realtek_J_V6.0.9427.1_30931</p>
</li>
<li class="lvl-2">
<p>Bluetooth_ROG_MediaTek_J_V1.932.2.294Sub1_33411</p>
</li>
<li class="lvl-2">
<p>DolbyAtmosdriverforROG_V3.30307.371.1_14380_1</p>
</li>
<li class="lvl-2">
<p>Graphic_DCH_ROG_NVIDIA_J_V30.0.15.1278_28613</p>
</li>
<li class="lvl-2">
<p>LAN_ROG_Realtek_J_V1125.008.0515.2022_28702_1</p>
</li>
<li class="lvl-2">
<p>PrecisionTouchPad_ROG_ASUS_J_V16.0.0.13Sub1_28581_1</p>
</li>
<li class="lvl-2">
<p>WirelessLan_ROG_MediaTek_J_V3.03.02.0771Sub1_33414</p>
</li>
</ul>
<h2 id="插曲">插曲</h2>
<p>我曾经短暂解决了问题，但是又出现了新的问题，我安装使用了 Micron 提供的最新 NVMe 驱动，而不是原厂驱动，这后来也是给我灵感的来源。</p>
<p>我修改了电源计划，因为近几年的华硕笔记本都安装 ARMOURY CRATE 作为电源管理软件，所以我将其卸载，使用 <code>平衡</code> 作为使用的电源计划，关闭硬盘的休眠(因为硬盘休眠也可能因为固件的原因导致无法启动)，利用命令行工具 <code>powercfg</code> 关闭混合休眠…但是问题依旧存在。</p>
<p>后来，我发现了一个非常奇怪的现象，那就是：<strong>利用命令行工具 <code>SFC</code>工具 <code>SFC /Scannow</code> 扫描系统，问题就解决了</strong>，<code>DISM</code> 命令 <code>DISM /Online /Cleanup-image /Restorehealth</code> 修复系统映像。但是，这个问题只是暂时解决了，因为这个问题会在下一次重启再次出现，或者开启特定的程序后导致系统崩溃。</p>
<h2 id="总结">总结</h2>
<p>之所以会出现这些问题，是因为 Windows 11 的显卡驱动的问题，而不是硬件的问题，所以我将这些问题总结为：<strong>Windows 11 的显卡驱动的问题</strong>。</p>
<p>之所以之前利用 命令 可以短暂解决问题，是因为这些命令会重置 Windows 11 的显卡驱动，或者将显卡驱动的某个组件替换，但是这些命令只是暂时解决了问题，因为 Windows 11 会在下一次重启或者开启特定的程序后再次加载显卡驱动，所以问题又出现了。</p>
<p>所以，确认使用 Windows 11 的用户，应该<strong>尽量使用原厂驱动(DCH Driver)，而不是 Windows Update 提供的驱动</strong>。</p>
<p>并且，即使是 OEM 提供的最新驱动，也不一定是最好的，所以，如果你的电脑出现了一些奇怪的问题，你可以<strong>尝试使用原厂驱动，或者是旧版本的驱动</strong>。</p>
<p>至于网卡，我只能说，Laptop Platform MediaTek 之 WiFi6E 还未成熟之前，它的发热量太大，远离它，我已经下单 Intel AX210 802.11ax WiFi 6E。</p>
<p>参考</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9sZWFybi5taWNyb3NvZnQuY29tL3poLXR3L3dpbmRvd3MtaGFyZHdhcmUvZGVzaWduL2RldmljZS1leHBlcmllbmNlcy9tb2Rlcm4tc3RhbmRieS12cy1zMw==">新式待命與 S3<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL01vdG9yQm90dGxlL1MzLVNsZWVwLW9uLVJvZy1YMTMtRzE0LTE1LTIwMjEtMjAyMi11c2luZy1PcGVuQ29yZQ==">S3-Sleep-on-Rog-X13-G14-15-2021-2022-using-OpenCore<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NlZXJnZS9nLWhlbHBlci9ibG9iL21haW4vZG9jcy9SRUFETUUuemgtQ04ubWQ=">G-Helper (GHelper)<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21pby0xOS9Vbml2ZXJzYWxBTURGb3JtQnJvd3Nlci1WZW50b3k=">UniversalAMDFormBrowser<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h2 id="2023-09-10-更新">2023.09.10 更新</h2>
<h3 id="后续">后续</h3>
<p>我已经更换了 Intel AX210 802.11ax WiFi 6E 网卡，之前的问题又复现了，晕。。。所以，我按照之前的流程，一套下来，先用 AMD 提供的显卡驱动卸载工具卸载显卡驱动，DDU 卸载NVidia驱动，然后重装所有原厂驱动，重置 EFI，重做 UEFI 引导，问题解决了。</p>
<p>因为我的路由器是 WiFi5 标准的，所以两张网卡连接 5GHz 信号的速度都是 866 MHz，但是实测 MediaTek 网卡的速度要比 Intel 网卡的速度快(实测 mt7922 能跑 500 Mbps 左右，而 ax210 却只有 300 Mbps)，而且 MediaTek 网卡的信号强度要比 Intel 网卡的信号强度强(mt7922 能稳定 866 Mbps 接收，而 ax210 经常只有 790 Mbps 接收)，但是换都换了，就不想再换了，所以就这样吧。🙄</p>
<blockquote>
<p>题外话</p>
</blockquote>
<p>话说学校的网也挺快的，上传速度竟然也是 1000 Mbps。😙</p>
<p>(这是用 2.5Gbps 网卡 6 类网线测试的)</p>
<p><img src="./speedtest.png" alt></p>
<h3 id="补充">补充</h3>
<p>有时候系统睡眠异常也可能是系统对设备的电源管理异常，你可以尝试打开设备管理器，找到<code>通用串行总线控制器</code>-<code>USB 根集线器</code>-<code>电源管理</code>，取消勾选<code>允许计算机关闭此设备以节约电源</code>，然后重启电脑。</p>
<p>也可能是系统的引导出错，可以尝试重建引导，或者是重置 UEFI。</p>
<p>即使这些都做过了，电脑仍然是异常的，也可能是因为一些系统策略的错误配置，你可以尝试使用<code>组策略编辑器</code>或者<code>注册表编辑器</code>进行修改。我曾经出现过系统无法关机的情况，即一直在关机界面显示转圈圈</p>
<ol>
<li class="lvl-3">
<p>我使用 <code>regedit</code> 打开注册表编辑器</p>
</li>
<li class="lvl-3">
<p><code>HKEY_USERS\.DEFAULT\Control Panel\Desktop</code>，按回车键。</p>
</li>
<li class="lvl-3">
<p>右键点击<code>Desktop</code>，点击新建字符串值。</p>
</li>
<li class="lvl-3">
<p>将其命名为<code>AutoEndTasks</code>,并双击打开。</p>
</li>
<li class="lvl-3">
<p>数值数据改为<code>1</code>，点击确定。</p>
</li>
</ol>
<p>网上说的关闭快速启动的方法，我觉得不太靠谱，因为我关闭了快速启动，但是问题依旧存在。这样做其实是在解决问题的后果，而不是解决问题的原因。是治标不治本，是饮鸩止渴的做法。</p>
<p>参考：<span class="exturl" data-url="aHR0cHM6Ly9iYnMucGNiZXRhLmNvbS92aWV3dGhyZWFkLTE5NzMzMDEtMS0xLmh0bWw=">[求助] 选择关机后，win11卡住，一直“正在关机”转圈圈<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="23H2-时期">23H2 时期</h2>
<h2 id="2024-01-28-更新">2024.01.28 更新</h2>
<p>一切看起来都很正常，但是我发现了一个问题，那就是：<strong>当我的电脑睡眠一段时间后，会无缘无故被唤醒</strong></p>
<p>我打开日志查看器，发现了一些有趣的东西：</p>
<p>那就是电脑报告了一个驱动程序的损坏，而这个驱动是 AX210 的驱动，我尝试了重装驱动，结果变得更坏</p>
<p>电脑无法正常睡眠，只能休眠，而且休眠后无法使用快速启动，只能使用冷启动。也就是说，我又回到了之前的状态。</p>
<p>我尝试使用命令</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">SFC /Scannow</span><br><span class="line">DISM /Online /Cleanup-image /Restorehealth</span><br></pre></td></tr></table></figure>
<p>然而，这个命令并没有解决问题</p>
<p>于是我去查找资料，相关信息报告无法在睡眠与快速启动可能是由于 EFI 引导的问题，而且与 MSR 分区有关</p>
<p>于是我尝试了重建引导</p>
<p>华硕默认给出的 ESP 名为 SYSTEM，而且分区大小为 270 MB，于是我将原先的 ESP 分区删除，新建一个 300 MB 的 ESP 分区</p>
<p>并且，我将 MSR 分区的大小默认是 16 MB，于是我将 MSR 分区的大小调整为 256 MB</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># 删除原先的 MSR 分区</span><br><span class="line">diskpart</span><br><span class="line">list disk</span><br><span class="line">select disk <span class="number">0</span></span><br><span class="line">list partition</span><br><span class="line">select partition <span class="number">1</span></span><br><span class="line">delete partition override</span><br><span class="line"><span class="keyword">exit</span></span><br><span class="line"></span><br><span class="line"># 新建 MSR 分区</span><br><span class="line">diskpart</span><br><span class="line">list disk</span><br><span class="line">select disk <span class="number">0</span></span><br><span class="line">create partition msr size=<span class="number">256</span></span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：电脑是 GPT 分区表，删除操作可以在 DiskGenius 中进行，新建操作可以在 DiskGenius 中进行，但是新建 MSR 分区的大小只能在命令行中进行，因为 DiskGenius 中无法设置 MSR 分区的大小。</p>
</blockquote>
<p>然后，我重建了引导，但是问题依旧存在</p>
<p>之后，我想到很可能与驱动程序相关</p>
<p>于是我尝试了重装驱动，但是问题依旧存在。</p>
<p>然后，在使用 DDU 卸载驱动程序后，我发现了一个有趣的现象，那就是：<strong>使用DDU卸载驱动的设备，系统不会对其进行自动安装驱动</strong></p>
<p>于是我想到，Windows 系统很可能保存了驱动程序的备份，并且在设备出现问题时，即使手动管理驱动，系统仍然受到了错误的驱动程序的影响</p>
<p>于是，我改变思路，重启到了 PE 系统，使用 DISM++ 工具</p>
<p>打开系统映像，找到驱动程序，删除了所有有关的驱动程序(比如：Intel、NVIDIA、Realtek、MediaTek、AMD、ASUS、etc.)</p>
<p>然后，我重启到了 Windows 系统，发现问题解决了，系统可以正常睡眠，而且可以使用快速启动。</p>
<p>于是，我开始重装驱动程序。都是使用原厂驱动，而不是 Windows Update 提供的驱动。</p>
<p>没有出现问题，一切正常。</p>
<p>唯一出现的问题就是：**出现了一个其他设备，硬件 ID 为 ACPI\VEN_ASUS&amp;DEV_9001</p>
<p>这是一个 ACPI 设备，华硕提供的驱动程序是 ASUS System Control Interface v3，但是这个驱动程序并不包含这个设备的驱动程序</p>
<p>于是，我比对华硕在硬盘中恢复分区内保留的镜像文件，发现了这个设备的驱动程序，其实就是 Armoury Crate Control Interface</p>
<p>因为我使用开源工具 GHelper 对设备进行管理，并没有安装 Armoury Crate，所以没有安装这个驱动程序也就不奇怪了，于是我提取镜像中的这个驱动程序，安装了这个驱动程序，问题解决了。</p>
<h3 id="新的结论">新的结论</h3>
<p>导致电脑无法正常睡眠以及快速启动失效的原因有着多种因素</p>
<ol>
<li class="lvl-3">
<p>EFI 引导的问题</p>
</li>
<li class="lvl-3">
<p>MSR 分区的问题</p>
</li>
<li class="lvl-3">
<p>驱动程序的问题</p>
</li>
<li class="lvl-3">
<p>其他未知的问题</p>
</li>
</ol>
<h3 id="新的建议">新的建议</h3>
<ol start="0">
<li class="lvl-3">
<p><strong>优先</strong>尝试使用命令行工具 <code>SFC</code> 与 <code>DISM</code> 修复系统</p>
</li>
<li class="lvl-3">
<p>使用微软官方的 Windows 11 镜像，而不是 OEM 提供的 Windows 11 镜像</p>
</li>
<li class="lvl-3">
<p>删除 OEM 内建的 EFI 引导以及 MSR 分区，重新建立 EFI 引导以及分区，不小于 300 MB</p>
</li>
<li class="lvl-3">
<p>在 PE 系统中，使用 DISM++ 工具，删除所有可能导致问题驱动程序</p>
</li>
<li class="lvl-3">
<p>重装驱动程序，优先使用原厂驱动，而不是 Windows Update 提供的驱动</p>
</li>
<li class="lvl-3">
<p>如果你使用了 GHelper，但是没有安装 Armoury Crate，那么你需要手动安装 Armoury Crate Control Interface 驱动程序</p>
</li>
</ol>
<h3 id="新的发现">新的发现</h3>
<p>我发现了一个有趣的现象，对于本机，那就是：<strong>系统可能存在问题时，开机动画的旋转圆圈是一体的连续的，而系统不存在问题时，开机动画的旋转圆圈是由多个小圆圈组成的</strong></p>
<p>当然，如果系统不存在问题，那么开机动画的旋转圆圈也可能是一体的连续的，但是，如果系统存在问题，那么开机动画的旋转圆圈一定是一体的连续的。</p>
<p>我推测这与系统的引导有关，以及 AMD 核芯显卡与 NVdia 独立显卡的 MUX 技术兼容性有关，但是我并没有找到相关的资料。</p>
<p>24年2月11日更新</p>
<p>我发现这个问题只存在于 Win11 23H2 之前的系统</p>
<h2 id="2024-05-8-更新">2024.05.8 更新</h2>
<p>到目前，使用最新版本的 Windows 11 23H2(OS内部版本22631.3147)，一切正常，基本没有出现任何问题。</p>
<p>可以放心的使用了。</p>
<p>但是需要注意显卡驱动的问题，华硕提供的AMD显卡驱动并不是最新的(华硕在今年的3月25日发布的，但这个其实是AMD在23年11月30日发布的)，但是也提供了一个相对稳定的版本，所以，如果你的电脑出现了一些奇怪的问题，你可以尝试使用华硕提供的驱动程序（我个人是不推荐使用AMD官网上下的，因为我每次使用，总是会出问题）。</p>
<p>nVdia 的显卡驱动可以使用英伟达提供的，但是英伟达在近期的驱动总是会出现一些问题，所以，如果你的电脑出现了一些奇怪的问题，你可以尝试使用旧版本的驱动程序。</p>
<h2 id="24H2-时期">24H2 时期</h2>
<h2 id="2024-10-17-更新">2024.10.17 更新</h2>
<p>每当重新启动过后，想要打开 Win11 的控制中心，然而每次都会卡一下，非常难受，于是，我发现这个故障是由 ai noise cancelling asus utility 这个玩意儿导致的，打开设备管理器，卸载时同样卸载驱动后，问题解决了。</p>
<p>这个东西是华硕的 AI 噪音消除工具，但是我并没有使用（因为使用Ghelper作为管理工具，无法调用），所以卸载了也不会有什么影响。</p>
<h2 id="2024-11-11-更新">2024.11.11 更新</h2>
<p>经过约半年的使用，一切正常，没有出现任何问题，可以放心的使用了。</p>
<p>基本可以确定这是一个 Windows 11 与驱动程序共同导致的问题，而不是硬件的问题。</p>
<p>至此，我可以下一个结论，建议使用 MSDN 提供的 Windows 11 镜像，而不是 OEM 提供的 Windows 11 镜像，使用最新的驱动程序，Windows Update 提供的驱动程序也是一样可以使用的，但是注意版本问题（Window Update 可以识别你的机型，然后自动安装厂家提供的驱动，但不一定是最新的）</p>
<hr>
<p>有网友发现，该机型似乎存在一个通病，需要换CPU解决，即开机到LOGO界面就无法启动了，但如果能够进入系统又可以正常使用</p>
<p>疑似 CPU 虚焊/体质下降导致的问题</p>
<p>根据 AMD 机器以往的案例，据我推测，大概是电压的原因，因为这个型号的ROG没有打黑胶，并且散热做得很好，基本排除虚焊的可能</p>
<p>以前小米的 4800H 机器也是过保一段时间可能出现这种情况（也是个别案例），是AMD给的电压太低了，当时新机可能可以正常使用，但是用久了体质下降，电压不够了，就会出现这种问题</p>
<p>解决方法就是利用 ru 工具修改 BIOS 电压(技术上实现可能有难度)，或者干 CPU 换新的</p>
<p>你也可以向厂商反馈，期待厂商发布测试 BIOS 修复这个问题，但对于过保机器且不是大规模爆发的问题，几乎可不能期待</p>
<h2 id="2025-01-01-更新">2025.01.01 更新</h2>
<p>经过一年的使用，一切正常，大部分问题得到解决，可以放心的使用了。</p>
<p>保持驱动程序最新，和前文一样，不再赘述。</p>
<p>之前的问题，大部分是 Windows 11 本身的问题，而不是硬件的问题，所以，如果你的电脑出现了一些奇怪的问题，你可以尝试使用 MSDN 提供的 Windows 11 镜像，而不是 OEM 提供的 Windows 11 镜像，并且，该机型在 23H2 之前的系统会出现一些问题，所以，建议使用最新的 Windows 11 23H2 系统。（24H2 暂时没有使用，故不讨论）</p>
<p>有关显卡驱动也可以使用 <span class="exturl" data-url="aHR0cHM6Ly9jYXRhbG9nLnVwZGF0ZS5taWNyb3NvZnQuY29tL2hvbWUuYXNweA==">Microsoft®Update Catalog<i class="fa fa-external-link-alt"></i></span> 进行搜索，这是微软官方提供的驱动程序下载站，可以搜索到最新的驱动程序，但是需要注意，这里的驱动程序是 Vendor 提供的 DCH 驱动，不是 OEM 提供的驱动程序，但是显卡驱动可以使用，因为 OEM 提供的驱动版本已经过时，对部分游戏不友好。</p>
<p>前文提到的控制中心仪表盘卡顿问题（只有每次开机后第一次使用时卡顿），一部分原因是由于华硕的 AI 噪音消除工具导致的，还有一部分是 AMD 的显卡驱动导致的（单独只用 AMD 核显或者单独只用 NVDIA 独显都不会导致卡顿，测试环境是新装系统不联网只安装其中一种驱动，但是一旦两种驱动都安装，就能出发该卡顿问题），但是华硕迟迟没有发布新的驱动程序（截至当前，最新的版本仍然是24年3月发布的），而 AMD 提供的驱动程序对本机兼容性不友好，暂时没有解决方案，只能等待厂商发布新的驱动程序。</p>
<h2 id="2025-02-23-更新">2025.02.23 更新</h2>
<p>更新了24H2系统，结果出现了新的问题</p>
<ol>
<li class="lvl-3">
<p>资源管理器侧边栏快速访问的 Linux 分区无法正常显示，但是可以正常访问解决方法是开关虚拟机相关功能，然后运行 WSL Setting</p>
</li>
<li class="lvl-3">
<p>启动 UAC 时，反应迟钝，但是可以正常使用起初我以为是 Windows Update 后，系统存在损坏，但运行了 SFC 以及 DISM  命令后仍然如此。然后我觉得可能是 Windows Defender 的问题，所以关闭了 Windows Defender，安装了卡巴斯基杀毒软件，问题依旧存在。也可能是驱动程序的问题，因为我注意到只使用核显的时候并没有该现象，独显直连的时候也不会产生，只有核显与独显共存时存在该问题；于是我进入安全模式，使用 DDU 清理英伟达驱动，AMD官方的 AMDCLEAN 驱动清理工具清理 AMD 驱动，然后重装了最新的驱动程序（Windows Update 提供的），问题依旧存在，于是我重复之前清理的步骤，安装了 OEM 提供的驱动程序，并手动更新了英伟达的最新 Studio 驱动，问题解决。</p>
</li>
</ol>
<p>关于 UAC POPUP 慢的问题，我注意到一个现象，当 AMD GPU 是 GPU 0 的时候，就可以复现这个问题（当 igpu + gpu 时，only igpu/direct gpu除外），当 NVDIA GPU 是 GPU 0 时，就不存在该问题，这个问题可能是由于 Windows 调度失误导致的。</p>
<p>2月24日</p>
<p>破案了，是英伟达驱动的问题，老驱动并没有这个问题，新的驱动才有，在英伟达控制面板里3D设置-&gt;首选图形处理器-&gt;自动选择改成高性能 NV 处理器</p>
<p>2月25日</p>
<p>旧病复发也，突然惊觉，一直是英伟达驱动更新的勤快，但是有没有可能，AMD 的也有问题，一看，AMD 的驱动上次更新还是23年末，好家伙，这24H2系统是24年末的，可能 AMD 的驱动不兼容了也是可能的，于是我更新了 AMD 的驱动，问题解决。</p>
<table>
<thead>
<tr>
<th>Vender</th>
<th>Version</th>
<th>File</th>
<th>Date</th>
</tr>
</thead>
<tbody>
<tr>
<td>AMD</td>
<td>30.0.12033.1030</td>
<td>whql-amd-software-adrenalin-edition-24.12.1-win10-win11-dec-rdna.exe</td>
<td>2024/11/27</td>
</tr>
<tr>
<td>NVIDIA</td>
<td>30.0.15.6636</td>
<td>566.36-notebook-win10-win11-64bit-international-nsd-dch-whql.exe</td>
<td>2024/12/3</td>
</tr>
</tbody>
</table>
<blockquote>
<p>注：皆是安装了 OEM 提供的驱动后升级安装</p>
</blockquote>
<p>华硕的笔记本驱动更新的很不勤快，而且兼容性很差，当时买了的时候，原装的OEM系统存在恶性BUG（无法正常睡眠，经常性黑屏死机），只能重装MSDN原版系统才能解决直到从21H2到23H2大概1年多时间，多次UEFI更新，驱动更新，才算稳定正常使用了而且，很多驱动在官网上无法下载到，而Microsoft Update Catalog上推送的驱动又可以查询到是ASUS推送的，但官网却没有下载。以及一些系统设备的驱动，华硕完全没有提供，必须下载奥创，然而奥创的灾难表现以及Bug，常常安装不上这些驱动，在设备管理器中显示未知的设备，让人不得不选择放弃，转而去从oem系统镜像中提取驱动。难以想象这是ASUS的ROG系列产品，测试完全交给消费者，软件非常不稳定，驱动更新不及时，维护不及时，售后服务也不及时，这是一个非常不负责任的行为。</p>
<h2 id="3月21日更新">3月21日更新</h2>
<p>windows update 给我更新了 24h2 03 积累更新，结果旧病复发。</p>
<p>这次使用了 DDU 卸载了英伟达驱动，AMD clean 实用程序卸载了 AMD 驱动。</p>
<p>使用<code>SFC /Scannow</code>扫描系统，<code>DISM /Online /Cleanup-image /Restorehealth</code>修复系统映像。</p>
<p>然后重装了 OEM 提供的驱动，更新了AMD的驱动（官网提供的25.3.1）版本，同时更新了芯片组驱动（OEM 提供的仍然是22年的，该芯片组驱动已经是24年的了），英伟达的驱动更新到565.90，问题解决。</p>
<p>奇怪的是此时 amd igpu 是 gpu 0，nvdia dgpu 是 gpu 1。</p>
<p>3月22日</p>
<p>这个芯片组驱动（7.02.13.148）存在问题，将导致S0睡眠相关问题，长时间睡眠后，有概率导致唤醒黑屏（无显示，有背光），但此时计算机并没有死机，对用户操作是可处理的，重复睡眠唤醒多次可以解决，但这并不是我想要的，故退回 OEM Chipset 驱动。</p>
<p>以及唤醒后锁屏页面色彩显示错误，发白等问题。</p>
<p>5月9日</p>
<p>这个有时候屏幕发白的问题，应该是屏幕校色的问题，重新进行校色或者相关文件的导入就可以解决。</p>
<p>我更新了24H2 04 更新，更新了最新瑞昱网卡驱动，最新AMD 4月芯片组驱动以及显卡驱动，目前使用一切正常</p>
<p>但又发现了新的问题，即我想使用 WOL，再打开 BIOS 的 PME以及网络启动后，但是在Windows 11 中无法使用将网卡的电源管理中网络唤醒打开，选项框是灰色的，无法选择。目前的原因不明（即使更改注册表加入PnP的选项，仍然无法使用），安装了瑞昱的最新驱动后，仍然是如此。有时间我使用原厂系统去测试一下，看看是系统原因还是该机型的问题。</p>
]]></content>
      <categories>
        <category>PC</category>
      </categories>
      <tags>
        <tag>分享</tag>
        <tag>玩机</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3-02</title>
    <url>/2023/09/07/2/</url>
    <content><![CDATA[<h2 id="属性绑定">属性绑定</h2>
<h3 id="v-bind">v-bind</h3>
<p>双大括号不能在 HTML 属性中使用，因为它们不是有效的属性值。取而代之的是，我们可以使用 v-bind 指令，它允许我们动态地绑定一个或多个属性，或者一个组件 prop 到表达式。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:id</span>=<span class="string">&quot;dynamicId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在这里，dynamicId 表达式的值会被作为 id 属性的值传递给 div 元素。这个表达式可以是任何返回字符串的合法 JavaScript 表达式，通常是一个 data 中的属性。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:id</span>=<span class="string">&quot;dynamicId&quot;</span> <span class="attr">v-bind:class</span>=<span class="string">&quot;dynamicClass&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>AppID<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">dynamicClass</span>:<span class="string">&quot;appclass&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">dynamicId</span>:<span class="string">&quot;appid&quot;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.appclass</span>&#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>:red;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>简写</p>
</blockquote>
<p>v-bind 十分常用，所以 Vue 提供了一个缩写：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 完整语法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 缩写 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="bool-attribute">bool attribute</h3>
<p>bool 型的 HTML attribute，如果它的值是 false、null 或 undefined，则该 attribute 不会被包含在渲染出来的元素中。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">:disabled</span>=<span class="string">&quot;isButtonDisabled&quot;</span>&gt;</span>Button<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">isButtonDisabled</span>:<span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="动态绑定多个属性">动态绑定多个属性</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">:disabled</span>=<span class="string">&quot;isButtonDisabled&quot;</span> <span class="attr">:id</span>=<span class="string">&quot;dynamicId&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;dynamicClass&quot;</span>&gt;</span>Button<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">isButtonDisabled</span>:<span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">dynamicClass</span>:<span class="string">&quot;appclass&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">dynamicId</span>:<span class="string">&quot;appid&quot;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="条件渲染">条件渲染</h2>
<p>在 Vue 中，我们可以使用 <code>v-if</code>、<code>v-else-if</code>、<code>v-else</code> 来创建条件块。这类似于 JavaScript 中的 if、else if 和 else。</p>
<blockquote>
<p>v-if</p>
</blockquote>
<p>v-if 是一个指令，它需要一个表达式作为参数。如果该表达式的值为真，则渲染元素，否则不渲染。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>条件渲染<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;seen&quot;</span>&gt;</span>现在你看到我了<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;seen = !seen&quot;</span>&gt;</span>切换<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">seen</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<details>
<summary>展开另一个 e.g.</summary>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>条件渲染<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;seen&quot;</span>&gt;</span>现在你看到我了<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else</span>&gt;</span>现在你看不到我了<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;type === &#x27;A&#x27;&quot;</span>&gt;</span>A<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">&quot;type === &#x27;B&#x27;&quot;</span>&gt;</span>B<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">&quot;type === &#x27;C&#x27;&quot;</span>&gt;</span>C<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span>&gt;</span>Not A/B/C<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">seen</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&#x27;A&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</details>
<hr>
<blockquote>
<p>v-show</p>
</blockquote>
<p>另一个用于根据条件展示元素的选项是 v-show 指令。用法大致一样：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>条件渲染<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-show</span>=<span class="string">&quot;seen&quot;</span>&gt;</span>现在你看到我了<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;seen = !seen&quot;</span>&gt;</span>切换<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">seen</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>不同的是带有 v-show 的元素始终会被渲染并保留在 DOM 中。v-show 只是简单地切换元素的 CSS 属性 display。</p>
<p><code>v-if</code> 是真实的条件渲染，因为它会确保条件块在切换当中适当地销毁与重建条件块内的事件监听器和子组件。<br>
<code>v-if</code> 也是惰性的：如果在初始渲染时条件为假，则什么也不做 - 在条件第一次变为真时才开始渲染条件块。</p>
<p>相比之下，<code>v-show</code> 就简单得多 - 不管初始条件如何，元素总是会被渲染，并且只是简单地基于 CSS 进行切换。</p>
<p>一般来说，<code>v-if</code> 有更高的切换开销，而 <code>v-show</code> 有更高的初始渲染开销。因此，如果需要非常频繁地切换，则使用 <code>v-show</code> 较好；如果在运行时条件很少改变，则使用 <code>v-if</code> 较好。</p>
<h2 id="列表渲染">列表渲染</h2>
<p>我们可以使用 v-for 指令基于一个数组来渲染一个列表。</p>
<p>需要使用 <code>item in items</code> 形式的特殊语法，其中 items 是源数据数组，而 item 则是被迭代的数组元素的别名。</p>
<blockquote>
<p>v-for</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>列表渲染<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span>&#123;&#123;item.text&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// item in items，中间的 in 是固定的，items 是数组，item 是数组中的每一项，item、items 可以随便取名</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">items</span>: [</span></span><br><span class="line"><span class="language-javascript">                &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">&#x27;蔬菜&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">&#x27;奶酪&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">text</span>: <span class="string">&#x27;随便其它什么人吃的东西&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">            ]</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>item in items</code> 中间的 in 可以使用 of 替代。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;item of items&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>v-for index</p>
</blockquote>
<p><code>v-for</code> 还支持一个可选的第二个参数为当前项的索引。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>列表渲染<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span>&#123;&#123;index&#125;&#125; - &#123;&#123;item.text&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">items</span>: [</span></span><br><span class="line"><span class="language-javascript">                &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">&#x27;蔬菜&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">&#x27;奶酪&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">text</span>: <span class="string">&#x27;随便其它什么人吃的东西&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">            ]</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>v-for object</p>
</blockquote>
<p><code>v-for</code> 也可以遍历对象的属性。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>列表渲染<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(value,key,index) in object&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span>&#123;&#123;index&#125;&#125; - &#123;&#123;key&#125;&#125; - &#123;&#123;value&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">object</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">firstName</span>: <span class="string">&#x27;John&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">lastName</span>: <span class="string">&#x27;Doe&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">age</span>: <span class="number">30</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>(value,key,index) in object</code> 中三个参数的顺序不能变，value 是属性值，key 是属性名，index 是索引。</p>
]]></content>
      <categories>
        <category>Vue3</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3-01</title>
    <url>/2023/09/03/1/</url>
    <content><![CDATA[<h2 id="Vue3">Vue3</h2>
<p>Vue3 是 Vue.js 的下一个主要版本。Vue3 的目标是为了提升开发体验，同时也考虑了性能的提升。</p>
<p>官网：<span class="exturl" data-url="aHR0cHM6Ly92My5jbi52dWVqcy5vcmcv">https://v3.cn.vuejs.org/<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="Vue-API-风格">Vue API 风格</h2>
<p>Vue 有两种 API 风格，一种是 2.x 版本的 Options API，另一种是 3.x 版本的 Composition API。</p>
<p>2.x 的风格称为 Options API，因为我们是通过一个个的 Options 来描述组件的，比如 data、methods、props 等等。</p>
<blockquote>
<p>e.g. Options API</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">count</span>++;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>3.x 的风格称为 Composition API，因为我们是通过组合的方式来描述组件的，比如 setup 函数、ref 函数等等。</p>
<blockquote>
<p>e.g. Composition API</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      count.<span class="property">value</span>++;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      count,</span><br><span class="line">      increment,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>我们该如何选择？</p>
</blockquote>
<p>在实际开发中，我们可以同时使用 Options API 和 Composition API，但是不建议在一个组件中同时使用 Options API 和 Composition API。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>当我们不需要使用构建工具时，或打算在低复杂度的场景下使用 Vue 时，我们可以使用 CDN 的方式引入 Vue，这种方式下我们推荐使用 Options API。</p>
</li>
<li class="lvl-2">
<p>当我们需要使用构建工具时，或打算在高复杂度的场景下使用 Vue 时，我们可以使用 npm 的方式引入 Vue，这种方式下我们推荐使用 Composition API。</p>
</li>
</ul>
<h2 id="开发前准备">开发前准备</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>Node.js</p>
</li>
<li class="lvl-2">
<p>ES6</p>
</li>
<li class="lvl-2">
<p>CLI</p>
</li>
</ul>
<blockquote>
<p>创建项目</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm init vue@latest</span><br></pre></td></tr></table></figure>
<blockquote>
<p>配置</p>
</blockquote>
<p>鉴于我是初学者，目前用不到 vue 提供的这些功能，所以我选择了默认配置(即全部 NO)。</p>
<blockquote>
<p>安装依赖</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p>由于国内网络原因，我们可以使用淘宝镜像来安装依赖。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cnpm install</span><br></pre></td></tr></table></figure>
<blockquote>
<p>运行项目</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<p>随后控制台会提示我们访问地址，我们在浏览器中打开即可。</p>
<h3 id="推荐开发环境">推荐开发环境</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>VSCode</p>
</li>
<li class="lvl-2">
<p>Vue Language Features (Volar) Extension</p>
</li>
<li class="lvl-2">
<p>[optional] TypeScript Vue Plugin (Volar) Extension</p>
</li>
</ul>
<p>以上是官方推荐的开发环境，我们可以在 VSCode 中安装 <code>Vue Language Features (Volar)</code> 插件，这样我们就可以使用 Vue3 的语法高亮、智能感知等功能了。</p>
<p>此外，我们还可以选择 jetbrains 的 WebStorm。</p>
<h2 id="Vue-项目目录结构">Vue 项目目录结构</h2>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">├─node_modules</span><br><span class="line">├─public</span><br><span class="line">└─src</span><br></pre></td></tr></table></figure>
<p>上面是一个精简的 Vue 项目目录结构，在这个目录中，<code>vite.config.js</code> 是 Vue 的配置文件。<code>index.html</code> 是 Vue 项目的入口文件，我们可以在这个文件中引入其他文件。<code>package.json</code> 是 Vue 项目的配置文件，我们可以在这个文件中配置 Vue 项目的依赖、脚本等等。</p>
<p>我们可以看到，Vue 项目的源码都在 src 目录下，public 目录下的内容是我们可以直接访问的。</p>
<p>src 目录下的内容如下：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">├─assets</span><br><span class="line">└─components</span><br></pre></td></tr></table></figure>
<p>这个目录还存在 <code>App.vue</code> 文件，这个文件是 Vue 项目的根组件，我们可以在这个文件中使用其他组件。<br>
<code>main.js</code> 是 Vue 项目的入口文件，我们可以在这个文件中创建 Vue 实例。</p>
<p>assets 目录下的内容是我们可以直接访问的，比如图片、字体等等。</p>
<p>components 目录下的内容是我们可以直接访问的，比如组件等等。</p>
<blockquote>
<p>初次使用 Vue，这个目录下存在一些文件，我们可以在这些文件中看到 Vue 的一些用法。所以推荐初学者可以先看一下这些文件。不用后直接删除即可，之后还要修改 App.vue 文件。</p>
</blockquote>
<p>App.vue 修改为：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="模板语法">模板语法</h2>
<p>Vue 使用了基于 HTML 的模板语法，允许开发者声明式地将 DOM 绑定至底层 Vue 实例的数据。</p>
<h3 id="文本插值">文本插值</h3>
<p>最基本的数据绑定是文本插值，使用“Mustache”语法（双大括号）的文本插值：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Message: &#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Mustache 标签将会被替代为对应数据对象上 msg 属性的值。无论何时，绑定的数据对象上 msg 属性发生了改变，插值处的内容都会更新。</p>
<details>
<summary>点击查看示例</summary>
<p>e.g.</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>模板语法-插值<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>Message: &#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeMsg&quot;</span>&gt;</span>Change Message<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; hello &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 这是一个组件</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// data 是一个函数，返回一个对象</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">msg</span>: <span class="string">&quot;Hello Vue! 你好，Vue！&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">hello</span>: <span class="string">&quot;Hello! 你好！&quot;</span>, <span class="comment">// 这是新增的</span></span></span><br><span class="line"><span class="language-javascript">      &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// methods 是一个对象</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">changeMsg</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">msg</span> = <span class="string">&quot;Hello World! 你好，世界！&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</details>
<h3 id="使用-JavaScript-表达式">使用 JavaScript 表达式</h3>
<p>Vue.js 支持在插值中使用 JavaScript 表达式，但是每个绑定都只能包含单个表达式。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 这是语句，不是表达式 --&gt;</span></span><br><span class="line">&#123;&#123; var a = 1 &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 流控制也不会生效，请使用三元表达式 --&gt;</span></span><br><span class="line">&#123;&#123; if (ok) &#123; return message &#125; &#125;&#125;</span><br></pre></td></tr></table></figure>
<p>正确的实例：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">number</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">ok</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">message</span>: <span class="string">&quot;Hello World!&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>使用 JavaScript 表达式<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; number + 1 &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; ok ? &#x27;YES&#x27; : &#x27;NO&#x27; &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; message.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们<strong>不推荐</strong>在模板中放入过多的逻辑，因为模板的目的是描述视图，而不是写入逻辑。</p>
<h3 id="原始-HTML">原始 HTML</h3>
<p>双大括号会将数据解释为纯文本，而非 HTML。为了输出真正的 HTML，我们需要使用 <code>v-html</code> 指令：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Using mustaches: &#123;&#123; rawHtml &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Using v-html directive: <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-html</span>=<span class="string">&quot;rawHtml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<details>
<summary>点击查看示例</summary>
<p>e.g.</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>原始 HTML<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Using mustaches: &#123;&#123; rawHtml &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Using v-html directive: <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-html</span>=<span class="string">&quot;rawHtml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">rawHtml</span>: <span class="string">&quot;&lt;span style=&#x27;color: red;&#x27;&gt;This should be red.&lt;/span&gt;&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面的例子中，<code>rawHtml</code> 的值最终会被渲染为红色，因为它使用了 <code>v-html</code> 指令。而使用双大括号的值 <code>&#123;&#123; rawhtml &#125;&#125;</code> 则不会被渲染为红色，因为浏览器会将其作为纯文本插入到 DOM 中。</p>
</details>
]]></content>
      <categories>
        <category>Vue3</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Let&#39;s Go 3</title>
    <url>/2023/08/07/1/</url>
    <content><![CDATA[<h2 id="Go-函数">Go 函数</h2>
<p>函数是基本的代码块，用于执行一个任务。</p>
<p>Go 函数定义格式如下：</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">function_name</span><span class="params">( [parameter list] )</span></span> [return_types] &#123;</span><br><span class="line">   函数体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="函数定义解析">函数定义解析</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>func：函数由 func 开始声明</p>
</li>
<li class="lvl-2">
<p>function_name：函数名称，函数名和参数列表一起构成了函数签名。</p>
</li>
<li class="lvl-2">
<p>parameter list：参数列表，参数就像一个占位符，当函数被调用时，你可以将值传递给参数，这个值被称为实际参数。</p>
</li>
<li class="lvl-2">
<p>return_types：返回类型，函数返回一列值。return_types 是该列值的数据类型。有些功能不需要返回值，则 return_types 不是必须的。</p>
</li>
<li class="lvl-2">
<p>函数体：函数定义的代码集合。</p>
</li>
</ul>
<h3 id="函数调用">函数调用</h3>
<p>定义函数只是指定了函数的形式，需要调用该函数才能执行指定的代码块。</p>
<p>函数调用就是执行函数定义的代码块。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="comment">/* 定义局部变量 */</span></span><br><span class="line">   <span class="keyword">var</span> a <span class="type">int</span> = <span class="number">100</span></span><br><span class="line">   <span class="keyword">var</span> b <span class="type">int</span> = <span class="number">200</span></span><br><span class="line">   <span class="keyword">var</span> ret <span class="type">int</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/* 调用函数并返回最大值 */</span></span><br><span class="line">   ret = max(a, b)</span><br><span class="line"></span><br><span class="line">   fmt.Printf( <span class="string">&quot;最大值是 : %d\n&quot;</span>, ret )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 函数返回两个数的最大值 */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span><span class="params">(num1, num2 <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">   <span class="comment">/* 声明局部变量 */</span></span><br><span class="line">   <span class="keyword">var</span> result <span class="type">int</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> (num1 &gt; num2) &#123;</span><br><span class="line">      result = num1</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      result = num2</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="函数返回多个值">函数返回多个值</h3>
<p>Go 函数支持返回多个返回值，函数定义时可以定义返回值的类型和个数。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(x, y <span class="type">string</span>)</span></span> (<span class="type">string</span>, <span class="type">string</span>) &#123;</span><br><span class="line">   <span class="keyword">return</span> y, x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   a, b := swap(<span class="string">&quot;Google&quot;</span>, <span class="string">&quot;Runoob&quot;</span>)</span><br><span class="line">   fmt.Println(a, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="函数作为值、类型">函数作为值、类型</h3>
<p>在 Go 语言中，函数也是一种变量，我们可以通过 type 来定义它，它的类型就是所有拥有相同的参数，相同的返回值的一种类型。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> cb <span class="function"><span class="keyword">func</span><span class="params">(<span class="type">int</span>)</span></span> <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> c cb</span><br><span class="line">   c = <span class="function"><span class="keyword">func</span><span class="params">(x <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> x * x</span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Println(c(<span class="number">10</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="形参、实参、可变参数与传值、传引用">形参、实参、可变参数与传值、传引用</h3>
<p>形参：形式参数，定义函数时，用于接收外部传入的数据。</p>
<p>实参：实际参数，调用函数时，传递给形参的数据。</p>
<p>可变参数：可变参数是指函数的参数数量不固定，可变参数需要放在形参最后。</p>
<p>传值：传值是指在调用函数时，将实际参数的值复制一份传递到函数中，这样在函数中如果对参数进行修改，将不会影响到实际参数。</p>
<p>传引用：传引用是指在调用函数时，将实际参数的地址传递到函数中，那么在函数中对参数所进行的修改，将影响到实际参数。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="comment">/* 定义局部变量 */</span></span><br><span class="line">   <span class="keyword">var</span> a <span class="type">int</span> = <span class="number">100</span></span><br><span class="line">   <span class="keyword">var</span> b <span class="type">int</span> = <span class="number">200</span></span><br><span class="line"></span><br><span class="line">   fmt.Printf(<span class="string">&quot;交换前 a 的值 : %d\n&quot;</span>, a )</span><br><span class="line">   fmt.Printf(<span class="string">&quot;交换前 b 的值 : %d\n&quot;</span>, b )</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* 通过调用函数来交换值 */</span></span><br><span class="line">   swap(a, b)</span><br><span class="line"></span><br><span class="line">   fmt.Printf(<span class="string">&quot;交换后 a 的值 : %d\n&quot;</span>, a )</span><br><span class="line">   fmt.Printf(<span class="string">&quot;交换后 b 的值 : %d\n&quot;</span>, b )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 定义相互交换值的函数 */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(x, y <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">   <span class="keyword">var</span> temp <span class="type">int</span></span><br><span class="line"></span><br><span class="line">   temp = x <span class="comment">/* 保存 x 的值 */</span></span><br><span class="line">   x = y    <span class="comment">/* 将 y 值赋给 x */</span></span><br><span class="line">   y = temp <span class="comment">/* 将 temp 值赋给 y*/</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> temp</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>分析：在上面的程序中，我们定义了一个 swap() 函数，用于交换传入的两个整型参数的值。</p>
<p>在 main() 函数中，我们声明了两个局部变量 a 和 b，并赋值为 100 和 200。</p>
<p>在调用 swap() 函数时，我们传递 a 和 b 的值作为参数，但实际上 swap() 函数接收到的是 a 和 b 的副本，swap() 函数交换的是这两个副本的值，并没有改变 a 和 b 的值。</p>
<h2 id="Go-函数方法">Go 函数方法</h2>
<p>Go 语言中同时有函数和方法。</p>
<p>一个方法就是一个包含了接受者的函数，接受者可以是命名类型或者结构体类型的一个值或者是一个指针。</p>
<p>所有给定类型的方法属于该类型的方法集。</p>
<p>语法格式如下：</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(variable_name variable_data_type)</span></span> function_name() [return_type]&#123;</span><br><span class="line">   <span class="comment">/* 函数体*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>variable_name：变量名，实例中的接受者。</p>
</li>
<li class="lvl-2">
<p>variable_data_type：变量类型，实例中的接受者类型。</p>
</li>
<li class="lvl-2">
<p>function_name：函数名，实例中的函数名。</p>
</li>
<li class="lvl-2">
<p>return_type：返回类型，实例中的返回类型。</p>
</li>
</ul>
<h3 id="函数方法实例">函数方法实例</h3>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Circle <span class="keyword">struct</span> &#123;</span><br><span class="line">   radius <span class="type">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> c1 Circle</span><br><span class="line">   c1.radius = <span class="number">10.00</span></span><br><span class="line">   fmt.Println(<span class="string">&quot;圆的面积 = &quot;</span>, c1.getArea())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//该 method 属于 Circle 类型对象中的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c Circle)</span></span> getArea() <span class="type">float64</span> &#123;</span><br><span class="line">   <span class="comment">//c.radius 即为 Circle 类型对象中的属性</span></span><br><span class="line">   <span class="keyword">return</span> <span class="number">3.14</span> * c.radius * c.radius</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Go-递归函数">Go 递归函数</h2>
<p>Go 语言支持递归，即在函数定义中调用自己。</p>
<p>但是在使用递归时，程序员需要注意定义一个退出条件，否则递归将陷入无限循环中。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Factorial</span><span class="params">(n <span class="type">uint64</span>)</span></span>(result <span class="type">uint64</span>) &#123;</span><br><span class="line">   <span class="keyword">if</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      result = n * Factorial(n<span class="number">-1</span>)</span><br><span class="line">      <span class="keyword">return</span> result</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> i <span class="type">int</span> = <span class="number">15</span></span><br><span class="line">   fmt.Printf(<span class="string">&quot;%d 的阶乘是 %d\n&quot;</span>, i, Factorial(<span class="type">uint64</span>(i)))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="defer-语句">defer 语句</h3>
<p>Go 语言中的 defer 语句会将其后面跟随的语句进行延迟处理。</p>
<p>在 defer 归属的函数即将返回时，将延迟处理的语句按 defer 定义的逆序进行执行，也就是说，先被 defer 的语句最后被执行，最后被 defer 的语句，最先被执行。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">defer</span> fmt.Println(<span class="string">&quot;world&quot;</span>)</span><br><span class="line"></span><br><span class="line">   fmt.Println(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="闭包">闭包</h2>
<p>闭包是匿名函数，可在动态编程中使用。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getSequence</span><span class="params">()</span></span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">   i:=<span class="number">0</span></span><br><span class="line">   <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">      i+=<span class="number">1</span></span><br><span class="line">     <span class="keyword">return</span> i  </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="comment">/* nextNumber 为一个函数，函数 i 为 0 */</span></span><br><span class="line">   nextNumber := getSequence()  </span><br><span class="line"></span><br><span class="line">   <span class="comment">/* 调用 nextNumber 函数，i 变量自增 1 并返回 */</span></span><br><span class="line">   fmt.Println(nextNumber())</span><br><span class="line">   fmt.Println(nextNumber())</span><br><span class="line">   fmt.Println(nextNumber())</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* 创建新的函数 nextNumber1，并查看结果 */</span></span><br><span class="line">   nextNumber1 := getSequence()  </span><br><span class="line">   fmt.Println(nextNumber1())</span><br><span class="line">   fmt.Println(nextNumber1())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="匿名函数推导式">匿名函数推导式</h3>
<p>匿名函数是指不需要定义函数名的一种函数实现方式。</p>
<p>匿名函数由一个不带函数名的函数声明和函数体组成。</p>
<p>匿名函数的优越性在于可以直接使用函数内的变量，不必申明。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="comment">/* 声明函数变量 */</span></span><br><span class="line">   getSquareRoot := <span class="function"><span class="keyword">func</span><span class="params">(x <span class="type">float64</span>)</span></span> <span class="type">float64</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> math.Sqrt(x)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* 使用函数 */</span></span><br><span class="line">   fmt.Println(getSquareRoot(<span class="number">9</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="函数式编程">函数式编程</h2>
<p>函数式编程是一种编程范式，它将电脑运算视为数学上的函数计算，并且避免使用程序状态以及易变对象。</p>
<p>函数式编程语言最重要的基础是λ演算（lambda calculus），而且λ演算的函数可以接受函数当作输入（引数）和输出（传出值）。</p>
<p>函数式编程的主要思想是把运算过程尽量写成一系列嵌套的函数调用。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="comment">/* 声明函数变量 */</span></span><br><span class="line">   getSquareRoot := <span class="function"><span class="keyword">func</span><span class="params">(x <span class="type">float64</span>)</span></span> <span class="type">float64</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> math.Sqrt(x)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* 使用函数 */</span></span><br><span class="line">   fmt.Println(getSquareRoot(<span class="number">9</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
  </entry>
  <entry>
    <title>Let&#39;s Go 2</title>
    <url>/2023/08/06/1/</url>
    <content><![CDATA[<h2 id="Go-运算符">Go 运算符</h2>
<h3 id="算术运算符">算术运算符</h3>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:center">描述</th>
<th style="text-align:center">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">+</td>
<td style="text-align:center">相加</td>
<td style="text-align:center">A + B 输出结果 30</td>
</tr>
<tr>
<td style="text-align:center">-</td>
<td style="text-align:center">相减</td>
<td style="text-align:center">A - B 输出结果 -10</td>
</tr>
<tr>
<td style="text-align:center">*</td>
<td style="text-align:center">相乘</td>
<td style="text-align:center">A * B 输出结果 200</td>
</tr>
<tr>
<td style="text-align:center">/</td>
<td style="text-align:center">相除</td>
<td style="text-align:center">B / A 输出结果 2</td>
</tr>
<tr>
<td style="text-align:center">%</td>
<td style="text-align:center">求余</td>
<td style="text-align:center">B % A 输出结果 0</td>
</tr>
<tr>
<td style="text-align:center">++</td>
<td style="text-align:center">自增</td>
<td style="text-align:center">A++ 输出结果 11</td>
</tr>
<tr>
<td style="text-align:center">–</td>
<td style="text-align:center">自减</td>
<td style="text-align:center">A-- 输出结果 9</td>
</tr>
</tbody>
</table>
<h3 id="关系运算符">关系运算符</h3>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:center">描述</th>
<th style="text-align:center">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">==</td>
<td style="text-align:center">检查两个操作数的值是否相等，如果相等则条件为真。</td>
<td style="text-align:center">(A == B) 为假。</td>
</tr>
<tr>
<td style="text-align:center">!=</td>
<td style="text-align:center">检查两个操作数的值是否相等，如果不相等则条件为真。</td>
<td style="text-align:center">(A != B) 为真。</td>
</tr>
<tr>
<td style="text-align:center">&gt;</td>
<td style="text-align:center">检查左操作数的值是否大于右操作数的值，如果是则条件为真。</td>
<td style="text-align:center">(A &gt; B) 为假。</td>
</tr>
<tr>
<td style="text-align:center">&lt;</td>
<td style="text-align:center">检查左操作数的值是否小于右操作数的值，如果是则条件为真。</td>
<td style="text-align:center">(A &lt; B) 为真。</td>
</tr>
<tr>
<td style="text-align:center">&gt;=</td>
<td style="text-align:center">检查左操作数的值是否大于或等于右操作数的值，如果是则条件为真。</td>
<td style="text-align:center">(A &gt;= B) 为假。</td>
</tr>
<tr>
<td style="text-align:center">&lt;=</td>
<td style="text-align:center">检查左操作数的值是否小于或等于右操作数的值，如果是则条件为真。</td>
<td style="text-align:center">(A &lt;= B) 为真。</td>
</tr>
</tbody>
</table>
<h3 id="逻辑运算符">逻辑运算符</h3>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:center">描述</th>
<th style="text-align:center">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&amp;&amp;</td>
<td style="text-align:center">如果两个操作数都非零，则条件为真。</td>
<td style="text-align:center">(A &amp;&amp; B) 为假。</td>
</tr>
<tr>
<td style="text-align:center">||</td>
<td style="text-align:center">如果两个操作数中有任意一个非零，则条件为真。</td>
<td style="text-align:center">(A || B) 为真。</td>
</tr>
<tr>
<td style="text-align:center">!</td>
<td style="text-align:center">用来反转操作数的逻辑状态。如果条件为真则逻辑非运算符将使其为假。</td>
<td style="text-align:center">!(A &amp;&amp; B) 为真。</td>
</tr>
</tbody>
</table>
<h3 id="位运算符">位运算符</h3>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:center">描述</th>
<th style="text-align:center">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">如果同时存在于两个操作数中，二进制 AND 运算符复制一位到结果中。</td>
<td style="text-align:center">(A &amp; B) 输出结果 12，二进制解释： 0000 1100</td>
</tr>
<tr>
<td style="text-align:center">|</td>
<td style="text-align:center">如果存在于任一操作数中，二进制 OR 运算符复制一位到结果中。</td>
<td style="text-align:center">(A | B) 输出结果 61，二进制解释： 0011 1101</td>
</tr>
<tr>
<td style="text-align:center">^</td>
<td style="text-align:center">如果存在于其中一个操作数中但不同时存在于两个操作数中，二进制异或运算符复制一位到结果中。</td>
<td style="text-align:center">(A ^ B) 输出结果 49，二进制解释： 0011 0001</td>
</tr>
<tr>
<td style="text-align:center">&lt;&lt;</td>
<td style="text-align:center">二进制左移运算符。左操作数的值向左移动右操作数指定的位数。</td>
<td style="text-align:center">A &lt;&lt; 2 输出结果 240 ，二进制解释： 1111 0000</td>
</tr>
<tr>
<td style="text-align:center">&gt;&gt;</td>
<td style="text-align:center">二进制右移运算符。左操作数的值向右移动右操作数指定的位数。</td>
<td style="text-align:center">A &gt;&gt; 2 输出结果 15 ，二进制解释： 0000 1111</td>
</tr>
</tbody>
</table>
<h3 id="赋值运算符">赋值运算符</h3>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:center">描述</th>
<th style="text-align:center">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">=</td>
<td style="text-align:center">简单的赋值运算符，将一个表达式的值赋给一个左值</td>
<td style="text-align:center">C = A + B 将 A + B 的值赋给 C</td>
</tr>
<tr>
<td style="text-align:center">+=</td>
<td style="text-align:center">相加后再赋值</td>
<td style="text-align:center">C += A 相当于 C = C + A</td>
</tr>
<tr>
<td style="text-align:center">-=</td>
<td style="text-align:center">相减后再赋值</td>
<td style="text-align:center">C -= A 相当于 C = C - A</td>
</tr>
<tr>
<td style="text-align:center">*=</td>
<td style="text-align:center">相乘后再赋值</td>
<td style="text-align:center">C *= A 相当于 C = C * A</td>
</tr>
<tr>
<td style="text-align:center">/=</td>
<td style="text-align:center">相除后再赋值</td>
<td style="text-align:center">C /= A 相当于 C = C / A</td>
</tr>
<tr>
<td style="text-align:center">%=</td>
<td style="text-align:center">求余后再赋值</td>
<td style="text-align:center">C %= A 相当于 C = C % A</td>
</tr>
<tr>
<td style="text-align:center">&lt;&lt;=</td>
<td style="text-align:center">左移后赋值</td>
<td style="text-align:center">C &lt;&lt;= 2 相当于 C = C &lt;&lt; 2</td>
</tr>
<tr>
<td style="text-align:center">&gt;&gt;=</td>
<td style="text-align:center">右移后赋值</td>
<td style="text-align:center">C &gt;&gt;= 2 相当于 C = C &gt;&gt; 2</td>
</tr>
<tr>
<td style="text-align:center">&amp;=</td>
<td style="text-align:center">按位与后赋值</td>
<td style="text-align:center">C &amp;= 2 相当于 C = C &amp; 2</td>
</tr>
<tr>
<td style="text-align:center">^=</td>
<td style="text-align:center">按位异或后赋值</td>
<td style="text-align:center">C ^= 2 相当于 C = C ^ 2</td>
</tr>
<tr>
<td style="text-align:center">|=</td>
<td style="text-align:center">按位或后赋值</td>
<td style="text-align:center">C |= 2 相当于 C = C | 2</td>
</tr>
</tbody>
</table>
<h3 id="其他运算符">其他运算符</h3>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:center">描述</th>
<th style="text-align:center">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">返回变量存储地址</td>
<td style="text-align:center">&amp;a; 将给出变量的实际地址。</td>
</tr>
<tr>
<td style="text-align:center">*</td>
<td style="text-align:center">指针变量。</td>
<td style="text-align:center">*a; 是一个指针变量</td>
</tr>
</tbody>
</table>
<h3 id="📚-运算符案例">📚 运算符案例</h3>
<blockquote>
<p>算术运算符</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a <span class="type">int</span> = <span class="number">21</span></span><br><span class="line">    <span class="keyword">var</span> b <span class="type">int</span> = <span class="number">10</span></span><br><span class="line">    <span class="keyword">var</span> c <span class="type">int</span></span><br><span class="line"></span><br><span class="line">    c = a + b</span><br><span class="line">    fmt.Printf(<span class="string">&quot;第一行 - c 的值为 %d\n&quot;</span>, c)</span><br><span class="line">    c = a - b</span><br><span class="line">    fmt.Printf(<span class="string">&quot;第二行 - c 的值为 %d\n&quot;</span>, c)</span><br><span class="line">    c = a * b</span><br><span class="line">    fmt.Printf(<span class="string">&quot;第三行 - c 的值为 %d\n&quot;</span>, c)</span><br><span class="line">    c = a / b</span><br><span class="line">    fmt.Printf(<span class="string">&quot;第四行 - c 的值为 %d\n&quot;</span>, c)</span><br><span class="line">    c = a % b</span><br><span class="line">    fmt.Printf(<span class="string">&quot;第五行 - c 的值为 %d\n&quot;</span>, c)</span><br><span class="line">    a++</span><br><span class="line">    fmt.Printf(<span class="string">&quot;第六行 - a 的值为 %d\n&quot;</span>, a)</span><br><span class="line">    a = <span class="number">21</span> <span class="comment">// 为了方便测试，a 这里重新赋值为 21</span></span><br><span class="line">    a--</span><br><span class="line">    fmt.Printf(<span class="string">&quot;第七行 - a 的值为 %d\n&quot;</span>, a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>关系运算符</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a <span class="type">int</span> = <span class="number">21</span></span><br><span class="line">    <span class="keyword">var</span> b <span class="type">int</span> = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (a == b) &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;第一行 - a 等于 b\n&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;第一行 - a 不等于 b\n&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (a &lt; b) &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;第二行 - a 小于 b\n&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;第二行 - a 不小于 b\n&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (a &gt; b) &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;第三行 - a 大于 b\n&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;第三行 - a 不大于 b\n&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* Lets change value of a and b */</span></span><br><span class="line">    a = <span class="number">5</span></span><br><span class="line">    b = <span class="number">20</span></span><br><span class="line">    <span class="keyword">if</span> (a &lt;= b) &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;第四行 - a 小于等于 b\n&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (b &gt;= a) &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;第五行 - b 大于等于 a\n&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>逻辑运算符</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a <span class="type">bool</span> = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">var</span> b <span class="type">bool</span> = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">if</span> (a &amp;&amp; b) &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;第一行 - 条件为 true\n&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (a || b) &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;第二行 - 条件为 true\n&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* 修改 a 和 b 的值 */</span></span><br><span class="line">    a = <span class="literal">false</span></span><br><span class="line">    b = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">if</span> (a &amp;&amp; b) &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;第三行 - 条件为 true\n&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;第三行 - 条件为 false\n&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!(a &amp;&amp; b)) &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;第四行 - 条件为 true\n&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>位运算符</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a <span class="type">uint</span> = <span class="number">60</span> <span class="comment">/* 60 = 0011 1100 */</span></span><br><span class="line">    <span class="keyword">var</span> b <span class="type">uint</span> = <span class="number">13</span> <span class="comment">/* 13 = 0000 1101 */</span></span><br><span class="line">    <span class="keyword">var</span> c <span class="type">uint</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    c = a &amp; b <span class="comment">/* 12 = 0000 1100 */</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;第一行 - c 的值为 %d\n&quot;</span>, c)</span><br><span class="line"></span><br><span class="line">    c = a | b <span class="comment">/* 61 = 0011 1101 */</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;第二行 - c 的值为 %d\n&quot;</span>, c)</span><br><span class="line"></span><br><span class="line">    c = a ^ b <span class="comment">/* 49 = 0011 0001 */</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;第三行 - c 的值为 %d\n&quot;</span>, c)</span><br><span class="line"></span><br><span class="line">    c = a &lt;&lt; <span class="number">2</span> <span class="comment">/* 240 = 1111 0000 */</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;第四行 - c 的值为 %d\n&quot;</span>, c)</span><br><span class="line"></span><br><span class="line">    c = a &gt;&gt; <span class="number">2</span> <span class="comment">/* 15 = 0000 1111 */</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;第五行 - c 的值为 %d\n&quot;</span>, c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>赋值运算符</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a <span class="type">int</span> = <span class="number">21</span></span><br><span class="line">    <span class="keyword">var</span> c <span class="type">int</span></span><br><span class="line"></span><br><span class="line">    c = a</span><br><span class="line">    fmt.Printf(<span class="string">&quot;第 1 行 - =  运算符实例，c 值为 = %d\n&quot;</span>, c)</span><br><span class="line"></span><br><span class="line">    c += a</span><br><span class="line">    fmt.Printf(<span class="string">&quot;第 2 行 - += 运算符实例，c 值为 = %d\n&quot;</span>, c)</span><br><span class="line"></span><br><span class="line">    c -= a</span><br><span class="line">    fmt.Printf(<span class="string">&quot;第 3 行 - -= 运算符实例，c 值为 = %d\n&quot;</span>, c)</span><br><span class="line"></span><br><span class="line">    c *= a</span><br><span class="line">    fmt.Printf(<span class="string">&quot;第 4 行 - *= 运算符实例，c 值为 = %d\n&quot;</span>, c)</span><br><span class="line"></span><br><span class="line">    c /= a</span><br><span class="line">    fmt.Printf(<span class="string">&quot;第 5 行 - /= 运算符实例，c 值为 = %d\n&quot;</span>, c)</span><br><span class="line"></span><br><span class="line">    c = <span class="number">200</span></span><br><span class="line"></span><br><span class="line">    c &lt;&lt;= <span class="number">2</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;第 6行  - &lt;&lt;= 运算符实例，c 值为 = %d\n&quot;</span>, c)</span><br><span class="line"></span><br><span class="line">    c &gt;&gt;= <span class="number">2</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;第 7 行 - &gt;&gt;= 运算符实例，c 值为 = %d\n&quot;</span>, c)</span><br><span class="line"></span><br><span class="line">    c &amp;= <span class="number">2</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;第 8 行 - &amp;= 运算符实例，c 值为 = %d\n&quot;</span>, c)</span><br><span class="line"></span><br><span class="line">    c ^= <span class="number">2</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;第 9 行 - ^= 运算符实例，c 值为 = %d\n&quot;</span>, c)</span><br><span class="line"></span><br><span class="line">    c |= <span class="number">2</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;第 10 行 - |= 运算符实例，c 值为 = %d\n&quot;</span>, c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>其他运算符</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a <span class="type">int</span> = <span class="number">4</span></span><br><span class="line">    <span class="keyword">var</span> b <span class="type">int32</span></span><br><span class="line">    <span class="keyword">var</span> c <span class="type">float32</span></span><br><span class="line">    <span class="keyword">var</span> ptr *<span class="type">int</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 运算符实例 */</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;第 1 行 - a 变量类型为 = %T\n&quot;</span>, a)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;第 2 行 - b 变量类型为 = %T\n&quot;</span>, b)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;第 3 行 - c 变量类型为 = %T\n&quot;</span>, c)</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*  &amp; 和 * 运算符实例 */</span></span><br><span class="line">    ptr = &amp;a <span class="comment">/* &#x27;ptr&#x27; 包含了 &#x27;a&#x27; 变量的地址 */</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;a 的值为  %d\n&quot;</span>, a)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;*ptr 为 %d\n&quot;</span>, *ptr)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="拓展">拓展</h2>
<h3 id="获取键盘输入">获取键盘输入</h3>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a <span class="type">int</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;请输入一个整数：&quot;</span>)</span><br><span class="line">    fmt.Scan(&amp;a)</span><br><span class="line">    fmt.Println(<span class="string">&quot;你输入的整数是：&quot;</span>, a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="编码规范">编码规范</h3>
<p>Go 语言中的变量名、函数名、常量名、包名、语句关键字等所有命名，都统一使用英文小写字母，多个单词之间用下划线分隔。</p>
<h2 id="Go-条件语句">Go 条件语句</h2>
<h3 id="if-语句">if 语句</h3>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a <span class="type">int</span> = <span class="number">10</span></span><br><span class="line">    <span class="keyword">if</span> a &lt; <span class="number">20</span> &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;a 小于 20\n&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;a 的值为 : %d\n&quot;</span>, a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="if…else-语句">if…else 语句</h3>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a <span class="type">int</span> = <span class="number">100</span></span><br><span class="line">    <span class="keyword">if</span> a &lt; <span class="number">20</span> &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;a 小于 20\n&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;a 不小于 20\n&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;a 的值为 : %d\n&quot;</span>, a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="if-嵌套语句">if 嵌套语句</h3>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a <span class="type">int</span> = <span class="number">100</span></span><br><span class="line">    <span class="keyword">var</span> b <span class="type">int</span> = <span class="number">200</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> a == <span class="number">100</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> b == <span class="number">200</span> &#123;</span><br><span class="line">            fmt.Printf(<span class="string">&quot;a 的值为 100 ， b 的值为 200\n&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;a 值为 : %d\n&quot;</span>, a)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;b 值为 : %d\n&quot;</span>, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="switch-语句">switch 语句</h3>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> grade <span class="type">string</span> = <span class="string">&quot;B&quot;</span></span><br><span class="line">    <span class="keyword">var</span> marks <span class="type">int</span> = <span class="number">90</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> marks &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">90</span>:</span><br><span class="line">        grade = <span class="string">&quot;A&quot;</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">80</span>:</span><br><span class="line">        grade = <span class="string">&quot;B&quot;</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">50</span>, <span class="number">60</span>, <span class="number">70</span>:</span><br><span class="line">        grade = <span class="string">&quot;C&quot;</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        grade = <span class="string">&quot;D&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> grade == <span class="string">&quot;A&quot;</span>:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;优秀!\n&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> grade == <span class="string">&quot;B&quot;</span>, grade == <span class="string">&quot;C&quot;</span>:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;良好\n&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> grade == <span class="string">&quot;D&quot;</span>:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;及格\n&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> grade == <span class="string">&quot;F&quot;</span>:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;不及格\n&quot;</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;差\n&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;你的等级是 %s\n&quot;</span>, grade)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="fallthrough-语句">fallthrough 语句</h3>
<p>fallthrough 语句可以执行满足条件的 case 的下一个 case，是为了兼容 C 语言中的 case 设计的。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> grade <span class="type">string</span> = <span class="string">&quot;B&quot;</span></span><br><span class="line">    <span class="keyword">var</span> marks <span class="type">int</span> = <span class="number">90</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> marks &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">90</span>:</span><br><span class="line">        grade = <span class="string">&quot;A&quot;</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">80</span>:</span><br><span class="line">        grade = <span class="string">&quot;B&quot;</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">50</span>, <span class="number">60</span>, <span class="number">70</span>:</span><br><span class="line">        grade = <span class="string">&quot;C&quot;</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        grade = <span class="string">&quot;D&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> grade == <span class="string">&quot;A&quot;</span>:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;优秀!\n&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> grade == <span class="string">&quot;B&quot;</span>:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;良好!\n&quot;</span>)</span><br><span class="line">        <span class="keyword">fallthrough</span></span><br><span class="line">    <span class="keyword">case</span> grade == <span class="string">&quot;C&quot;</span>:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;及格!\n&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> grade == <span class="string">&quot;D&quot;</span>:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;不及格!\n&quot;</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;差!\n&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;你的等级是 %s\n&quot;</span>, grade)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="select-语句">select 语句</h3>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> c1, c2, c3 <span class="keyword">chan</span> <span class="type">int</span></span><br><span class="line">    <span class="keyword">var</span> i1, i2 <span class="type">int</span></span><br><span class="line">    <span class="keyword">select</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> i1 = &lt;-c1:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;received &quot;</span>, i1, <span class="string">&quot; from c1\n&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> c2 &lt;- i2:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;sent &quot;</span>, i2, <span class="string">&quot; to c2\n&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> i3, ok := (&lt;-c3): <span class="comment">// same as: i3, ok := &lt;-c3</span></span><br><span class="line">        <span class="keyword">if</span> ok &#123;</span><br><span class="line">            fmt.Printf(<span class="string">&quot;received &quot;</span>, i3, <span class="string">&quot; from c3\n&quot;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            fmt.Printf(<span class="string">&quot;c3 is closed\n&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;no communication\n&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Go-循环语句">Go 循环语句</h2>
<h3 id="for-循环">for 循环</h3>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> b <span class="type">int</span> = <span class="number">15</span></span><br><span class="line">    <span class="keyword">var</span> a <span class="type">int</span></span><br><span class="line"></span><br><span class="line">    numbers := [<span class="number">6</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* for 循环 */</span></span><br><span class="line">    <span class="keyword">for</span> a := <span class="number">0</span>; a &lt; <span class="number">10</span>; a++ &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;a 的值为: %d\n&quot;</span>, a)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> a &lt; b &#123;</span><br><span class="line">        a++</span><br><span class="line">        fmt.Printf(<span class="string">&quot;a 的值为: %d\n&quot;</span>, a)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i, x := <span class="keyword">range</span> numbers &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;第 %d 位 x 的值 = %d\n&quot;</span>, i, x)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="break-语句">break 语句</h3>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a <span class="type">int</span> = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* for 循环 */</span></span><br><span class="line">    <span class="keyword">for</span> a &lt; <span class="number">20</span> &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;a 的值为 : %d\n&quot;</span>, a)</span><br><span class="line">        a++</span><br><span class="line">        <span class="keyword">if</span> a &gt; <span class="number">15</span> &#123;</span><br><span class="line">            <span class="comment">/* 使用 break 语句跳出循环 */</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="continue-语句">continue 语句</h3>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a <span class="type">int</span> = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* for 循环 */</span></span><br><span class="line">    <span class="keyword">for</span> a &lt; <span class="number">20</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> a == <span class="number">15</span> &#123;</span><br><span class="line">            <span class="comment">/* 跳过此次循环 */</span></span><br><span class="line">            a = a + <span class="number">1</span></span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;a 的值为 : %d\n&quot;</span>, a)</span><br><span class="line">        a++</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="goto-语句">goto 语句</h3>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">/* 定义局部变量 */</span></span><br><span class="line">    <span class="keyword">var</span> a <span class="type">int</span> = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 循环 */</span></span><br><span class="line">    LOOP: <span class="keyword">for</span> a &lt; <span class="number">20</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> a == <span class="number">15</span> &#123;</span><br><span class="line">            <span class="comment">/* 跳过迭代 */</span></span><br><span class="line">            a = a + <span class="number">1</span></span><br><span class="line">            <span class="keyword">goto</span> LOOP</span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;a 的值为 : %d\n&quot;</span>, a)</span><br><span class="line">        a++</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="历遍-string">历遍 string</h3>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> str <span class="type">string</span> = <span class="string">&quot;Go is a beautiful language!&quot;</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;The length of str is: %d\n&quot;</span>, <span class="built_in">len</span>(str))</span><br><span class="line">    <span class="keyword">for</span> pos, char := <span class="keyword">range</span> str &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;Character on position %d is: %c \n&quot;</span>, pos, char)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println()</span><br><span class="line">    str2 := <span class="string">&quot;Japanese: 日本語&quot;</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;The length of str2 is: %d\n&quot;</span>, <span class="built_in">len</span>(str2))</span><br><span class="line">    <span class="keyword">for</span> pos, char := <span class="keyword">range</span> str2 &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;character %c starts at byte position %d\n&quot;</span>, char, pos)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println()</span><br><span class="line">    fmt.Println(<span class="string">&quot;index int(rune) rune    char bytes&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> index, <span class="type">rune</span> := <span class="keyword">range</span> str2 &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%-2d    %d    %U &#x27;%c&#x27; % X\n&quot;</span>, index, <span class="type">rune</span>, <span class="type">rune</span>, <span class="type">rune</span>, []<span class="type">byte</span>(<span class="type">string</span>(<span class="type">rune</span>)))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="📚-循环语句案例">📚 循环语句案例</h3>
<blockquote>
<p>打印九九乘法表</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">9</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">1</span>; j &lt;= i; j++ &#123;</span><br><span class="line">            fmt.Printf(<span class="string">&quot;%d * %d = %d\t&quot;</span>, j, i, i*j)</span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Println()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><s>实测运行后报毒(雾)😒</s></p>
<blockquote>
<p>打印 55 方阵</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">1</span>; j &lt;= <span class="number">5</span>; j++ &#123;</span><br><span class="line">            fmt.Printf(<span class="string">&quot;*&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Println()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Go</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Let&#39;s Go 1</title>
    <url>/2023/08/04/2/</url>
    <content><![CDATA[<h2 id="Go">Go</h2>
<p><img src="https://www.runoob.com/wp-content/uploads/2015/06/go128.png" alt></p>
<h3 id="Go语言简介">Go语言简介</h3>
<p>Go是谷歌2009发布的第二款开源编程语言。Go语言学习曲线平缓，非常容易上手，而且它能够在不降低开发效率的情况下保证代码运行速度。Go语言是一门编译型语言，它结合了解释型语言的游刃有余，动态类型语言的开发效率，以及静态类型语言的安全性。</p>
<p>Go语言的主要特性有：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>自动垃圾回收</p>
</li>
<li class="lvl-2">
<p>更丰富的内置类型</p>
</li>
<li class="lvl-2">
<p>函数多返回值</p>
</li>
<li class="lvl-2">
<p>错误处理</p>
</li>
<li class="lvl-2">
<p>匿名函数和闭包</p>
</li>
<li class="lvl-2">
<p>类型和接口</p>
</li>
<li class="lvl-2">
<p>并发编程</p>
</li>
<li class="lvl-2">
<p>反射</p>
</li>
<li class="lvl-2">
<p>语言交互性</p>
</li>
<li class="lvl-2">
<p>etc.</p>
</li>
</ul>
<h3 id="Go-的常用库">Go 的常用库</h3>
<p>参考：<span class="exturl" data-url="aHR0cHM6Ly9zdHVkeWdvbGFuZy5jb20vcGtnZG9j">Go语言标准库<i class="fa fa-external-link-alt"></i></span></p>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL3BrZy9uZXQvaHR0cC8=">net/http<i class="fa fa-external-link-alt"></i></span>：提供了HTTP客户端和服务端的实现</p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL3BrZy9odG1sL3RlbXBsYXRlLw==">html/template<i class="fa fa-external-link-alt"></i></span>：提供了数据驱动的模板，用于生成可防止代码注入的安全的HTML内容</p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL3BrZy90ZXh0L3RlbXBsYXRlLw==">text/template<i class="fa fa-external-link-alt"></i></span>：提供了数据驱动的模板，用于生成可防止代码注入的安全的文本内容</p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL3BrZy9yZWdleHAv">regexp<i class="fa fa-external-link-alt"></i></span>：提供了正则表达式的实现</p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL3BrZy9kYXRhYmFzZS9zcWwv">database/sql<i class="fa fa-external-link-alt"></i></span>：提供了通用的接口，用于操作SQL数据库</p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL3BrZy90ZXN0aW5nLw==">testing<i class="fa fa-external-link-alt"></i></span>：提供了对Go包的自动化测试的支持</p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL3BrZy9nby90eXBlcy8=">go/types<i class="fa fa-external-link-alt"></i></span>：提供了对Go包的类型安全的类型检查</p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL3BrZy9nby9hc3Qv">go/ast<i class="fa fa-external-link-alt"></i></span>：提供了对Go包的抽象语法树的操作</p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL3BrZy9nby9wYXJzZXIv">go/parser<i class="fa fa-external-link-alt"></i></span>：提供了对Go源代码的解析</p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL3BrZy9nby90b2tlbi8=">go/token<i class="fa fa-external-link-alt"></i></span>：提供了对Go源代码的词法分析</p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL3BrZy9nby9kb2Mv">go/doc<i class="fa fa-external-link-alt"></i></span>：提供了对Go源代码的文档提取</p>
</li>
<li class="lvl-2">
<p>etc.</p>
</li>
</ul>
<h3 id="Go-能做什么">Go 能做什么</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>网络编程</p>
</li>
<li class="lvl-2">
<p>并发编程</p>
</li>
<li class="lvl-2">
<p>分布式系统</p>
</li>
<li class="lvl-2">
<p>etc.</p>
</li>
</ul>
<h3 id="Go-的安装">Go 的安装</h3>
<p>我使用的是 Windows 操作系统，所以这里只介绍 Windows 下的安装方法。</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL2RsLw==">官方下载地址<i class="fa fa-external-link-alt"></i></span>：<span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL2RsLw==">https://golang.org/dl/<i class="fa fa-external-link-alt"></i></span><br>
<span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcuZ29vZ2xlLmNuL2RsLw==">国内下载地址<i class="fa fa-external-link-alt"></i></span>：<span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcuZ29vZ2xlLmNuL2RsLw==">https://golang.google.cn/dl/<i class="fa fa-external-link-alt"></i></span><br>
<span class="exturl" data-url="aHR0cHM6Ly9zdHVkeWdvbGFuZy5jb20vZGw=">Go 中文网下载地址<i class="fa fa-external-link-alt"></i></span>：<span class="exturl" data-url="aHR0cHM6Ly9zdHVkeWdvbGFuZy5jb20vZGw=">https://studygolang.com/dl<i class="fa fa-external-link-alt"></i></span></p>
<p>下载完成后，双击安装包，一路 Next 即可。</p>
<p>安装完成后，打开命令行，输入 <code>go version</code>，如果能够看到类似 <code>go version go1.xx.xx windows/amd64</code> 的输出，说明安装成功。</p>
<h3 id="Go-的环境变量">Go 的环境变量</h3>
<p>Go 的环境变量有三个：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>GOROOT：Go 的安装目录</p>
</li>
<li class="lvl-2">
<p>GOPATH：Go 的工作目录</p>
</li>
<li class="lvl-2">
<p>GOBIN：Go 的可执行文件目录</p>
</li>
</ul>
<h4 id="GOROOT">GOROOT</h4>
<p>GOROOT 是 Go 的安装目录，安装完成后，GOROOT 会自动添加到环境变量中，如果没有添加，可以手动添加。</p>
<h4 id="GOPATH">GOPATH</h4>
<p>GOPATH 是 Go 的工作目录，Go 的工作目录可以有多个，但是一般只设置一个。</p>
<p>GOPATH 的目录结构如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">GOPATH</span><br><span class="line">├── bin</span><br><span class="line">├── pkg</span><br><span class="line">└── src</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>bin：存放可执行文件</p>
</li>
<li class="lvl-2">
<p>pkg：存放编译后的包文件</p>
</li>
<li class="lvl-2">
<p>src：存放源代码</p>
</li>
</ul>
<h4 id="GOBIN">GOBIN</h4>
<p>GOBIN 是 Go 的可执行文件目录，一般情况下，GOBIN 的值为 <code>$GOPATH/bin</code>。</p>
<h4 id="设置环境变量">设置环境变量</h4>
<p>在 Windows 系统中，可以通过以下方式设置环境变量：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>右键点击“我的电脑”，选择“属性”，在弹出的窗口中选择“高级系统设置”，在弹出的窗口中选择“环境变量”，在弹出的窗口中选择“新建”，在弹出的窗口中输入变量名和变量值，点击“确定”即可。</p>
</li>
<li class="lvl-2">
<p>在命令行中输入 <code>set GOPATH=xxx</code>，xxx 为 GOPATH 的值。</p>
</li>
</ul>
<h3 id="开发工具">开发工具</h3>
<blockquote>
<p>IDE</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuamV0YnJhaW5zLmNvbS9nby8=">GoLand<i class="fa fa-external-link-alt"></i></span>：GoLand 是 JetBrains 推出的一款 Go 语言 IDE，功能强大，但是收费。</p>
</li>
</ul>
<blockquote>
<p>Go Playground</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9wbGF5LmdvbGFuZy5vcmcv">The Go Playground<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9nb3BsYXkudG9vbHMv">Better Go Playground<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<blockquote>
<p>Editor</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9jb2RlLnZpc3VhbHN0dWRpby5jb20v">Visual Studio Code<i class="fa fa-external-link-alt"></i></span>：VS Code 是微软推出的一款轻量级的代码编辑器，功能强大，支持插件扩展，支持 Go 语言开发。</p>
</li>
</ul>
<p>初学者推荐使用 Go Playground，熟悉了 Go 语言的语法后，推荐使用 VS Code/GoLand。</p>
<h2 id="Hello-World">Hello World</h2>
<p>创建一个名为 <code>hello.go</code> 的文件，输入以下内容：</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;Hello, World!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在命令行中输入 <code>go run hello.go</code>，如果能够看到 <code>Hello, World!</code> 的输出，说明安装成功。</p>
<h2 id="基本语法">基本语法</h2>
<h3 id="注释">注释</h3>
<p>Go 语言支持单行注释和多行注释。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 单行注释</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">多行注释</span></span><br><span class="line"><span class="comment">多行注释</span></span><br><span class="line"><span class="comment">多行注释</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="标识符">标识符</h3>
<p>Go 语言中的标识符用来命名变量、类型等程序实体。标识符由字母、数字、下划线组成，但是第一个字符不能是数字。Go 语言中的标识符严格区分大小写。</p>
<h3 id="关键字">关键字</h3>
<p>Go 语言中有 25 个关键字：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">break</span>        default      func         interface    <span class="keyword">select</span></span><br><span class="line"><span class="keyword">case</span>         defer        go           map          struct</span><br><span class="line">chan         <span class="keyword">else</span>         goto         package      switch</span><br><span class="line">const        fallthrough  <span class="keyword">if</span>           range        <span class="built_in">type</span></span><br><span class="line"><span class="built_in">continue</span>     <span class="keyword">for</span>          import       <span class="built_in">return</span>       var</span><br></pre></td></tr></table></figure>
<h3 id="变量">变量</h3>
<p>Go 语言中的变量声明格式为：</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> 变量名 变量类型</span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="type">int</span></span><br><span class="line"><span class="keyword">var</span> b <span class="type">string</span></span><br><span class="line"><span class="keyword">var</span> c <span class="type">bool</span></span><br></pre></td></tr></table></figure>
<p>Go 语言中的变量声明格式为：</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> 变量名 = 值</span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="keyword">var</span> c = <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>Go 语言中的变量声明格式为：</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> 变量名<span class="number">1</span>, 变量名<span class="number">2</span>, 变量名<span class="number">3</span> = 值<span class="number">1</span>, 值<span class="number">2</span>, 值<span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a, b, c = <span class="number">1</span>, <span class="string">&quot;hello&quot;</span>, <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>Go 语言中的变量声明格式为：</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">变量名 := 值</span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">a := <span class="number">1</span></span><br><span class="line">b := <span class="string">&quot;hello&quot;</span></span><br><span class="line">c := <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>上面的例子中，Go 语言会根据变量的值自动推断变量的类型。</p>
<h4 id="命名规范">命名规范</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>变量名由字母、数字、下划线组成，但是第一个字符不能是数字。</p>
</li>
<li class="lvl-2">
<p>变量名严格区分大小写。</p>
</li>
<li class="lvl-2">
<p>变量名不能包含空格。</p>
</li>
<li class="lvl-2">
<p>变量名不能以数字开头。</p>
</li>
<li class="lvl-2">
<p>变量名不能使用 Go 语言的关键字。</p>
</li>
<li class="lvl-2">
<p>变量名不能使用 Go 语言的内置函数名。</p>
</li>
</ul>
<blockquote>
<p>驼峰命名法</p>
</blockquote>
<p>示范：</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myName <span class="type">string</span></span><br><span class="line"><span class="keyword">var</span> myAge <span class="type">int</span></span><br><span class="line"><span class="keyword">var</span> myHeight <span class="type">float64</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> isOk <span class="type">bool</span></span><br><span class="line"><span class="keyword">var</span> hasError <span class="type">bool</span></span><br></pre></td></tr></table></figure>
<h4 id="其他操作">其他操作</h4>
<blockquote>
<p>打印内存地址</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">fmt.Printf(<span class="string">&quot;%p\n&quot;</span>, &amp;a)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>交换变量的值</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">a, b = b, a</span><br></pre></td></tr></table></figure>
<blockquote>
<p>空白标识符</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">_, b = b, a</span><br></pre></td></tr></table></figure>
<blockquote>
<p>多重赋值</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">a, b, c = <span class="number">1</span>, <span class="string">&quot;hello&quot;</span>, <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>变量的作用域</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">2</span></span><br><span class="line">    fmt.Println(a, b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> c = <span class="number">3</span></span><br><span class="line">    fmt.Println(a, c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>全局变量</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(a)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>匿名变量</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a, _ := test()</span><br><span class="line">    fmt.Println(a)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span> (<span class="type">int</span>, <span class="type">int</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="常量">常量</h3>
<p>Go 语言中的常量声明格式为：</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> 常量名 = 值</span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">const</span> b = <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="keyword">const</span> c = <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h4 id="常量-iota">常量 iota</h4>
<p>Go 语言中的常量 iota 是一个自增的枚举值，从 0 开始。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    a = <span class="literal">iota</span></span><br><span class="line">    b</span><br><span class="line">    c</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>iota 的使用</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    a = <span class="number">1</span> &lt;&lt; <span class="literal">iota</span></span><br><span class="line">    b</span><br><span class="line">    c</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">4</span><br></pre></td></tr></table></figure>
<h3 id="数据类型">数据类型</h3>
<p>Go 语言中的数据类型有：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>布尔型：bool</p>
</li>
<li class="lvl-2">
<p>数字类型：int、int8、int16、int32、int64、uint、uint8、uint16、uint32、uint64、uintptr、float32、float64、complex64、complex128、byte、rune</p>
</li>
<li class="lvl-2">
<p>字符串：string</p>
</li>
<li class="lvl-2">
<p>派生类型：指针、数组、结构体、Channel、函数、切片、接口、Map</p>
</li>
</ul>
<h4 id="数据类型的转换">数据类型的转换</h4>
<p>Go 语言中的数据类型转换格式为：</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">变量名 := 数据类型(表达式)</span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="type">float64</span>(a)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Go</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>大前端基础 4</title>
    <url>/2023/07/22/1/</url>
    <content><![CDATA[<h2 id="Webpack">Webpack</h2>
<p>Webpack 是一个模块打包器，可以将多个模块打包成一个文件。</p>
<p>官网：<span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWNrLmpzLm9yZy8=">https://webpack.js.org/<i class="fa fa-external-link-alt"></i></span></p>
<blockquote>
<p>为什么需要模块打包器？</p>
</blockquote>
<p>在前端开发中，我们会将一个页面拆分成多个模块，比如：头部、底部、侧边栏、内容区域等。这些模块都是独立的，但是在浏览器中，我们需要将这些模块组合起来，形成一个完整的页面。这就需要一个模块打包器，将这些模块打包成一个文件。</p>
<h3 id="安装">安装</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --save-dev webpack webpack-cli</span><br></pre></td></tr></table></figure>
<p>或者全局安装：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g webpack webpack-cli</span><br></pre></td></tr></table></figure>
<p>对于 webpack4, 我们更倾向于在项目中安装 webpack，而不是全局安装。</p>
<h3 id="初始化项目">初始化项目</h3>
<ol>
<li class="lvl-3">
<p>创建一个项目目录</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> webpack-demo</span><br><span class="line"><span class="built_in">cd</span> webpack-demo</span><br></pre></td></tr></table></figure>
<ol start="2">
<li class="lvl-3">
<p>初始化项目</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>
<ol start="3">
<li class="lvl-3">
<p>创建一个 src 目录，用于存放源代码</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> src</span><br></pre></td></tr></table></figure>
<ol start="4">
<li class="lvl-3">
<p>创建一个 index.js 文件，和 util.js、 common.js 用于测试</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// src/index.js</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello webpack&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; add &#125; <span class="keyword">from</span> <span class="string">&#x27;./util.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; info &#125; <span class="keyword">from</span> <span class="string">&#x27;./common.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">info</span>(<span class="title function_">add</span>(<span class="number">1</span>, <span class="number">2</span>));</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// src/util.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// src/common.js</span></span><br><span class="line"><span class="keyword">export</span>.<span class="property">info</span> = <span class="keyword">function</span> (<span class="params">msg</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="5">
<li class="lvl-3">
<p>创建一个 dist 目录，用于存放打包后的文件，在这个目录下创建一个 index.html 文件</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> dist</span><br><span class="line"><span class="built_in">cd</span> dist</span><br><span class="line"><span class="built_in">touch</span> index.html</span><br></pre></td></tr></table></figure>
<ol start="6">
<li class="lvl-3">
<p>创建一个 webpack.config.js 文件，用于配置 webpack</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="comment">// 导入 path 模块，用于处理路径</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导出一个配置对象</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>参考：<span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWNrLmpzLm9yZy9jb25maWd1cmF0aW9uLw==">webpack 配置<i class="fa fa-external-link-alt"></i></span></p>
<ol start="7">
<li class="lvl-3">
<p>打包</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure>
<p>打包后，会在 dist 目录下生成一个 bundle.js 文件，这个文件就是打包后的文件。</p>
<ol start="8">
<li class="lvl-3">
<p>在 index.html 中引入打包后的文件</p>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>webpack demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./dist/bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>打开 index.html，可以看到控制台输出了 <code>hello webpack</code> 和 <code>3</code>。</p>
<blockquote>
<p>其他功能</p>
</blockquote>
<p>webpack 还有其他功能，比如：压缩、合并、编译、热更新等，这些功能都可以通过配置来实现。</p>
<p>参考：<span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWNrLmpzLm9yZy9jb25jZXB0cy8=">webpack 功能<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="合并-CSS-文件">合并 CSS 文件</h3>
<ol>
<li class="lvl-3">
<p>安装 css-loader 和 style-loader</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --save-dev css-loader style-loader</span><br></pre></td></tr></table></figure>
<ol start="2">
<li class="lvl-3">
<p>在 webpack.config.js 中配置</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 配置模块加载器</span></span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [&#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li class="lvl-3">
<p>在 src 目录下创建一个 index.css 文件</p>
</li>
</ol>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* src/index.css */</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f00</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li class="lvl-3">
<p>在 index.js 中引入 index.css</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// src/index.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span>;</span><br></pre></td></tr></table></figure>
<ol start="5">
<li class="lvl-3">
<p>打包</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure>
<p>打包后，打开 index.html，可以看到背景色变成了红色。</p>
<blockquote>
<p>拓展</p>
</blockquote>
<p>未来，我们学习各种框架后，可能使用不到 webpack，因为框架本身就有打包功能，比如：Vue、React、Angular 等。</p>
<p>但我们还是需要学习 webpack，因为 webpack 的思想是值得我们学习的。</p>
<h2 id="Vue">Vue</h2>
<p>Vue 是一个渐进式的 JavaScript 框架，它的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合。</p>
<p>官网：<span class="exturl" data-url="aHR0cHM6Ly9jbi52dWVqcy5vcmcv">https://cn.vuejs.org/<i class="fa fa-external-link-alt"></i></span></p>
<p>注意⚠️：本次学习的目的并非真正学习 Vue，只是对 Vue 有一个初步的了解，以便后续学习。</p>
<h2 id="Vue-Element-Admin">Vue-Element-Admin</h2>
<p>Vue-Element-Admin 是一个基于 Vue 和 Element UI 的后台管理系统模板。</p>
<p>官网：<span class="exturl" data-url="aHR0cHM6Ly9wYW5qaWFjaGVuLmdpdGh1Yi5pby92dWUtZWxlbWVudC1hZG1pbi1zaXRlL3poLw==">https://panjiachen.github.io/vue-element-admin-site/zh/<i class="fa fa-external-link-alt"></i></span></p>
<blockquote>
<p>使用</p>
</blockquote>
<ol>
<li class="lvl-3">
<p>克隆项目</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/PanJiaChen/vue-element-admin.git</span><br></pre></td></tr></table></figure>
<ol start="2">
<li class="lvl-3">
<p>进入项目目录</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> vue-element-admin</span><br></pre></td></tr></table></figure>
<ol start="3">
<li class="lvl-3">
<p>安装依赖</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>
<ol start="4">
<li class="lvl-3">
<p>建议不要用 cnpm 安装 会有各种诡异的bug 可以通过如下操作解决 npm 下载速度慢的问题</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --registry=https://registry.npmmirror.com</span><br></pre></td></tr></table></figure>
<ol start="5">
<li class="lvl-3">
<p>本地开发 启动项目</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<h2 id="大前端基础-结束">大前端基础 结束</h2>
<p>至此，大前端基础学习结束，对于前端开发来说，这些知识是必须要掌握的，后续的学习都是在这些基础上进行的。</p>
<p>撒花🎉</p>
<p>计划有关前端下一步学习 Vue -&gt; Uni-app -&gt; 小程序 -&gt; TypeScript -&gt; Electron<br>
（这个计划可能会变，不过大概就是这些😉）</p>
<p>对于后端，我已经学习了 Java, 并计划学习 C++ -&gt; Jo, 还有 Java 的一些框架，比如：Spring、Spring Boot、Spring Cloud 等。</p>
]]></content>
      <categories>
        <category>AdvancedWeb</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>大前端基础 3</title>
    <url>/2023/07/18/1/</url>
    <content><![CDATA[<h2 id="Babel">Babel</h2>
<p>Babel 是一个 JavaScript 编译器，可以将 ES6 代码转换为 ES5 代码，从而在现有环境中执行。</p>
<p>参考：<span class="exturl" data-url="aHR0cHM6Ly9iYWJlbGpzLmlvLw==">Babel 官网<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="安装">安装</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --save-dev @babel/core @babel/cli @babel/preset-env</span><br></pre></td></tr></table></figure>
<p>–save-dev 会将安装的包信息写入 package.json 中的 devDependencies 中。</p>
<p>这里安装 babel 建议加上 <code>--save-dev</code>，因为 babel 只是在开发阶段使用，项目上线后不需要。</p>
<h3 id="使用">使用</h3>
<blockquote>
<p>配置</p>
</blockquote>
<p>在项目根目录下创建一个 <code>.babelrc</code> 文件，内容如下：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;presets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;@babel/preset-env&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>假如要使用 es2015 的语法，那么就需要安装 <code>@babel/preset-es2015</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --save-dev @babel/preset-es2015</span><br></pre></td></tr></table></figure>
<p>然后在 <code>.babelrc</code> 中配置：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;presets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;@babel/preset-env&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;@babel/preset-es2015&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>进行编译：</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 编译 src 目录下的文件，输出到 lib 目录下</span></span><br><span class="line">npx babel src --out-dir lib</span><br><span class="line"><span class="comment"># --out-file 指定输出文件</span></span><br><span class="line">npx babel src --out-file lib/index.js</span><br><span class="line"><span class="comment"># 或者使用 -o</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --out-dir / -d 指定输出目录</span></span><br><span class="line">npx babel src -d lib</span><br></pre></td></tr></table></figure>
<p>可以在命令中省略 <code>npx</code>，直接使用 <code>babel</code>，但是需要全局安装 babel-cli。</p>
<h3 id="自定义脚本">自定义脚本</h3>
<p>改写 <code>package.json</code> 文件中的 <code>scripts</code> 字段，如下：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;babel src -d lib&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>这样就可以使用 <code>npm run build</code> 来执行编译了。</p>
<h2 id="模块化">模块化</h2>
<p>随着前端项目越来越复杂，代码量越来越大，为了方便管理代码，就需要将代码分割成一个个模块，然后在需要的地方引入。</p>
<blockquote>
<p>模块化规范</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>CommonJS</p>
</li>
<li class="lvl-2">
<p>ES6 Module</p>
</li>
</ul>
<h3 id="CommonJS">CommonJS</h3>
<p>CommonJS 是 Node.js 采用的模块化规范。</p>
<blockquote>
<p>案例</p>
</blockquote>
<ol>
<li class="lvl-3">
<p>在 <code>src</code> 目录下创建 <code>module.js</code> 文件，内容如下：</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义模块</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;module&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">18</span>;</span><br><span class="line"><span class="keyword">let</span> say = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 暴露模块</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    name,</span><br><span class="line">    age,</span><br><span class="line">    say</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li class="lvl-3">
<p>在 <code>src</code> 目录下创建 <code>index.js</code> 文件，内容如下：</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引入模块</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable language_">module</span> = <span class="built_in">require</span>(<span class="string">&#x27;./module&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用模块</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">module</span>.<span class="property">name</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">module</span>.<span class="property">age</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="title function_">say</span>();</span><br></pre></td></tr></table></figure>
<h3 id="ES6-Module">ES6 Module</h3>
<p>ES6 Module 是 ES6 中新增的模块化规范。</p>
<blockquote>
<p>案例</p>
</blockquote>
<ol>
<li class="lvl-3">
<p>在 <code>src</code> 目录下创建 <code>userApi.js</code> 文件，内容如下：</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;get user&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">addUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;add user&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li class="lvl-3">
<p>在 <code>src</code> 目录下创建 <code>index.js</code> 文件，内容如下：</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引入模块</span></span><br><span class="line"><span class="keyword">import</span> &#123; getUser, addUser &#125; <span class="keyword">from</span> <span class="string">&#x27;./userApi&#x27;</span>;</span><br><span class="line"><span class="comment">// 这样其实会报错，因为浏览器不支持 ES6 Module，需要使用 babel 进行编译</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用模块</span></span><br><span class="line"><span class="title function_">getUser</span>();</span><br><span class="line"><span class="title function_">addUser</span>();</span><br></pre></td></tr></table></figure>
<ol start="3">
<li class="lvl-3">
<p>使用 babel 进行编译</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npx babel src -d lib</span><br></pre></td></tr></table></figure>
<ol start="4">
<li class="lvl-3">
<p>使用 node 运行编译后的文件</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">node lib/index.js</span><br></pre></td></tr></table></figure>
<blockquote>
<p>拓展</p>
</blockquote>
<details>
<summary>点击展开</summary>
<p>是否好奇 Babel 是如何将 ES6 Module 编译成 Babel.js 的呢？</p>
<p>打开 <code>lib/index.js</code> 文件，内容如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> _userApi = <span class="built_in">require</span>(<span class="string">&quot;./userApi&quot;</span>);</span><br><span class="line">(<span class="number">0</span>, _userApi.<span class="property">getUser</span>)();</span><br><span class="line">(<span class="number">0</span>, _userApi.<span class="property">addUser</span>)();</span><br></pre></td></tr></table></figure>
<p>可以看到，babel 将 ES6 Module 编译成了 Babel.js 的形式。</p>
</details>
]]></content>
      <categories>
        <category>AdvancedWeb</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>大前端基础 2</title>
    <url>/2023/07/17/1/</url>
    <content><![CDATA[<h2 id="对象初始化简写">对象初始化简写</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ES5</span></span><br><span class="line"><span class="keyword">var</span> info = &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;大前端基础&#x27;</span>,</span><br><span class="line">    <span class="attr">link</span>: <span class="string">&#x27;https://www.baidu.com&#x27;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&#x27;大前端基础知识&#x27;</span></span><br><span class="line">    <span class="attr">go</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;go&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="keyword">var</span> title = <span class="string">&#x27;大前端基础&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> link = <span class="string">&#x27;https://www.baidu.com&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> description = <span class="string">&#x27;大前端基础知识&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> info = &#123;</span><br><span class="line">    title,</span><br><span class="line">    link,</span><br><span class="line">    description</span><br><span class="line">    <span class="title function_">go</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;go&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>案例</p>
</blockquote>
<details>
<summary>点击展开案例</summary>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>对象初始化简写<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;form&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Account: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;account&quot;</span> <span class="attr">id</span>=<span class="string">&quot;account&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Password: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Submit&quot;</span> <span class="attr">id</span>=<span class="string">&quot;loginbtn&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// document.getElementById(&#x27;loginbtn&#x27;).onclick = function() &#123;&#125;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&#x27;#loginbtn&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> account = $(<span class="string">&#x27;#account&#x27;</span>).<span class="title function_">val</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> password = $(<span class="string">&#x27;#password&#x27;</span>).<span class="title function_">val</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// async request</span></span></span><br><span class="line"><span class="language-javascript">            $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="string">&#x27;http://localhost:8080/login&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                    account,</span></span><br><span class="line"><span class="language-javascript">                    password</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 这里也能简写</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// success(data) &#123;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     console.log(data);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</details>
<p>在以后的 vue.js 中，我们会经常使用这种简写方式。</p>
<h2 id="对象结构">对象结构</h2>
<p>对象结构是 ES6 中的一个新特性，可以让我们快速的从一个对象中获取属性值。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 对象以 key-value 的形式存储数据，获取对象属性和方法的方式有两种</span></span><br><span class="line"><span class="comment">// 1. 点语法</span></span><br><span class="line"><span class="comment">// 2. 方括号语法 []</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过点语法获取对象属性</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(info.<span class="property">title</span>);</span><br><span class="line"><span class="comment">// 通过方括号语法获取对象属性</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(info[<span class="string">&#x27;title&#x27;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6 中的对象结构</span></span><br><span class="line"><span class="comment">// 通过对象结构获取对象属性（一种快速获取对象属性的方式）</span></span><br><span class="line"><span class="keyword">let</span> &#123; title, link, description &#125; = info;</span><br><span class="line"><span class="comment">// 而在 ES5 中，我们需要这样获取对象属性</span></span><br><span class="line"><span class="comment">// let title = info.title;</span></span><br><span class="line"><span class="comment">// let link = info.link;</span></span><br><span class="line"><span class="comment">// let description = info.description;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(title, link, description);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>为什么对象取值要使用两种方式？</p>
</blockquote>
<p>因为对象的属性名不一定是一个合法的标识符，比如：<code>info['title']</code>，这种方式就可以获取到对象的属性值。</p>
<h2 id="对象传播操作符">对象传播操作符</h2>
<p>对象传播操作符是 ES6 中的一个新特性，可以让我们快速的将一个对象的属性和方法传播到另一个对象中。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 对象传播操作符</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;Yuzhii&quot;</span></span><br><span class="line">    <span class="attr">addres</span>:<span class="string">&quot;China&quot;</span></span><br><span class="line">    <span class="attr">id</span>:<span class="string">&quot;0718&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解构</span></span><br><span class="line"><span class="keyword">let</span> &#123; name, addres, ...person2 &#125; = person;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>案例</p>
</blockquote>
<details>
<summary>点击展开案例</summary>
<p>在 java 后台</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 数据格式： </span></span><br><span class="line"><span class="type">var</span> <span class="variable">userPage</span> <span class="operator">=</span> &#123;page: <span class="number">10</span>, users: [&#123;&#125;, &#123;&#125;],pageNo: <span class="number">1</span>, pageSize: <span class="number">100</span>, total: <span class="number">100</span>&#125;</span><br><span class="line">async request</span><br><span class="line">$.post(<span class="string">&#x27;http://localhost:8080/user/serch&#x27;</span>, function(res) &#123;</span><br><span class="line">    res = &#123;page: <span class="number">10</span>, users: [&#123;&#125;, &#123;&#125;],pageNo: <span class="number">1</span>, pageSize: <span class="number">100</span>, total: <span class="number">100</span>&#125;&#125;)</span><br></pre></td></tr></table></figure>
<p>前端</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> userPage = &#123;<span class="attr">page</span>: <span class="number">10</span>, <span class="attr">users</span>: [&#123;&#125;, &#123;&#125;],<span class="attr">pageNo</span>: <span class="number">1</span>, <span class="attr">pageSize</span>: <span class="number">100</span>, <span class="attr">total</span>: <span class="number">100</span>&#125;</span><br><span class="line"><span class="keyword">let</span> &#123; page, users, ...userPage2 &#125; = userPage;</span><br></pre></td></tr></table></figure>
</details>
<h2 id="数组-Map">数组 Map</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 对 arr 每个元素进行 *2 操作</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = arr.<span class="title function_">map</span>(<span class="keyword">function</span>(<span class="params">item</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> item * <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 传统的 for 循环</span></span><br><span class="line"><span class="keyword">let</span> arr3 = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    arr3.<span class="title function_">push</span>(arr[i] * <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// map 处理对象数据</span></span><br><span class="line"><span class="keyword">let</span> users = [&#123;<span class="attr">age</span>: <span class="number">18</span>, <span class="attr">id</span>: <span class="number">1</span>&#125;, &#123;<span class="attr">age</span>: <span class="number">19</span>, <span class="attr">id</span>: <span class="number">2</span>&#125;, &#123;<span class="attr">age</span>: <span class="number">20</span>, <span class="attr">id</span>: <span class="number">3</span>&#125;];</span><br><span class="line"><span class="keyword">let</span> users2 = users.<span class="title function_">map</span>(<span class="keyword">function</span>(<span class="params">ele</span>) &#123;</span><br><span class="line">    ele.<span class="property">age</span> = ele.<span class="property">age</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> ele;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 这样就可以将 users 中的每个用户的年龄都加 1</span></span><br><span class="line"><span class="comment">// 以下是简写</span></span><br><span class="line"><span class="keyword">let</span> users3 = users.<span class="title function_">map</span>(<span class="function"><span class="params">ele</span> =&gt;</span> &#123;</span><br><span class="line">    ele.<span class="property">age</span> = ele.<span class="property">age</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> ele;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="数组-Reduce">数组 Reduce</h2>
<blockquote>
<p>什么是 reduce？</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="comment">// reduce 方法接收两个参数</span></span><br><span class="line">arr.<span class="title function_">reduce</span>(<span class="keyword">function</span>(<span class="params">prev, cur</span>) &#123;</span><br><span class="line">    <span class="comment">// prev 是上一次调用回调函数时的返回值</span></span><br><span class="line">    <span class="comment">// cur 是当前正在处理的数组元素</span></span><br><span class="line">    <span class="comment">// reduce 方法的返回值会作为下一次调用回调函数的 prev</span></span><br><span class="line">    <span class="keyword">return</span> prev + cur;</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="comment">// 0 是 reduce 方法的第二个参数，表示 prev 的初始值</span></span><br><span class="line"><span class="comment">// 如果不传第二个参数，prev 的初始值就是数组的第一个元素</span></span><br><span class="line"><span class="comment">// reduce 方法的返回值就是最后一次调用回调函数的返回值</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>例子</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>];</span><br><span class="line"><span class="keyword">let</span> sum = arr2.<span class="title function_">reduce</span>(<span class="keyword">function</span>(<span class="params">prev, cur</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> prev + cur;</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sum); <span class="comment">// 55</span></span><br></pre></td></tr></table></figure>
<h2 id="NPM">NPM</h2>
<p>NPM (Node Package Manager) 是 Node.js 的包管理工具，可以用来下载和管理第三方包。</p>
<p>作用：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>快速构建项目</p>
</li>
<li class="lvl-2">
<p>快速安装第三方包</p>
</li>
</ul>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tLw==">官网<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="快速构建项目">快速构建项目</h2>
<p>打开要构建项目的文件夹，然后在命令行中输入以下命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 初始化项目</span></span><br><span class="line">npm init</span><br><span class="line"><span class="comment"># 会要求输入项目名称、版本号、描述等信息</span></span><br><span class="line"><span class="comment"># 初始化完成后，会生成一个 package.json 文件</span></span><br></pre></td></tr></table></figure>
<h2 id="快速管理第三方包">快速管理第三方包</h2>
<p>这里以 jquery 为例在项目文件夹下，打开命令行</p>
<h3 id="安装">安装</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装第三方包</span></span><br><span class="line">npm install jquery</span><br><span class="line"><span class="comment"># 安装完成后，会在当前目录下生成一个 node_modules 文件夹</span></span><br><span class="line"><span class="comment"># node_modules 文件夹中存储了 jquery 包的所有文件</span></span><br></pre></td></tr></table></figure>
<p>通过 npm 安装的第三方包，会被记录在 package.json 文件中</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm-demo&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm demo&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span> </span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISC&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;jquery&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.5.1&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>不用去记住 json 的语法，只需要知道 dependencies 中存储了当前项目中安装的第三方包的信息即可。</p>
<blockquote>
<p>技巧</p>
</blockquote>
<p>因为 <code>npm install abc abd abe adf ...</code> 安装多个包需要很久，我们可以直接编辑 <code>package.json</code> 到当前项目的根目录，然后在命令行中输入 <code>npm install</code>，这样就可以快速安装项目中的所有第三方包。</p>
<p>或许有人疑问为何不直接拷贝 <code>node_modules</code> 文件夹到项目中，这样不就可以了吗？这样做是不行的，因为 <code>node_modules</code> 文件夹中存储的不仅仅是第三方包，还有第三方包的依赖包，这些依赖包也是必须的。其次，这些文件数量相当巨大。</p>
<h3 id="使用">使用</h3>
<p>require() 函数用来加载第三方包</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 加载 jquery 包</span></span><br><span class="line"><span class="keyword">let</span> $ = <span class="built_in">require</span>(<span class="string">&#x27;jquery&#x27;</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>技巧</p>
</blockquote>
<p>国内使用 npm 下载第三方包速度很慢，或因为 DNS 污染甚至无法安装，我们可以使用淘宝镜像来下载第三方包。cnpm 是淘宝镜像提供的命令行工具，可以用来下载第三方包。<s>阿里系为数不多的良心产品。😉</s></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 全局安装 cnpm</span></span><br><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class="line"><span class="comment"># 安装完成后，就可以使用 cnpm 命令来下载第三方包了</span></span><br><span class="line">cnpm install jquery</span><br></pre></td></tr></table></figure>
<h3 id="其他命令">其他命令</h3>
<p>更多命令可以通过 <code>npm --help</code> 查看</p>
<blockquote>
<p>卸载</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 卸载 jquery 包</span></span><br><span class="line">npm uninstall jquery</span><br></pre></td></tr></table></figure>
<blockquote>
<p>更新</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 更新 jquery 包</span></span><br><span class="line">npm update jquery</span><br></pre></td></tr></table></figure>
<blockquote>
<p>查看</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看 jquery 包的版本</span></span><br><span class="line">npm view jquery version</span><br></pre></td></tr></table></figure>
<blockquote>
<p>查看当前项目中安装了哪些第三方包</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看当前项目中安装了哪些第三方包</span></span><br><span class="line">npm list</span><br></pre></td></tr></table></figure>
<blockquote>
<p>指定版本号</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装 jquery 3.4.1 版本</span></span><br><span class="line">npm install jquery@3.4.1</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AdvancedWeb</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>大前端基础 1</title>
    <url>/2023/07/15/1/</url>
    <content><![CDATA[<h2 id="准备工作">准备工作</h2>
<p>所谓大前端，就是前端开发人员需要掌握的技术范围更广了。在学习了 HTML、CSS、JavaScript 之后，还需要学习一些其他的技术，比如：Node.js、Vue.js、React.js、TypeScript、Webpack、Git 等。而这些技术都是在前端开发的基础上进行的，所以说，大前端的基础就是前端开发。</p>
<p>在大前端之前，而又在前端基础之后，这有一个过渡的阶段，就是前端进阶。这就要求我们掌握更多的知识与技术。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9jb2RlLnZpc3VhbHN0dWRpby5jb20v">VSCode<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuamV0YnJhaW5zLmNvbS93ZWJzdG9ybS8=">WebStorm<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9ub2RlanMub3JnL2VuLw==">Node.js<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXQtc2NtLmNvbS8=">Git<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY2hyb21pdW0ub3JnL2dldHRpbmctaW52b2x2ZWQvZG93bmxvYWQtY2hyb21pdW0=">Chromium<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cubW96aWxsYS5vcmcvZW4tVVMvZmlyZWZveC9uZXcv">Firefox<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h2 id="Node-js">Node.js</h2>
<p>Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行环境。Node.js 使用了一个事件驱动、非阻塞式 I/O 的模型，使其轻量又高效。<br>
<span class="exturl" data-url="aHR0cHM6Ly9ub2RlanMub3JnL2VuLw==">Node.js<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="Httpserver">Httpserver</h3>
<p>Node.js 有一个内置的 http 模块，可以用来创建一个 http 服务器。这个模块属于 Node.js 的核心模块，不需要使用 npm 安装。</p>
<blockquote>
<p>编写 httpserver.js 文件</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在 Node.js 中导入 http 模块</span></span><br><span class="line"><span class="comment">// 使用 require 关键字</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 创建一个 http 服务器</span></span><br><span class="line">http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 2. 处理请求和响应</span></span><br><span class="line">    <span class="comment">// 设置响应头</span></span><br><span class="line">    response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;</span><br><span class="line">        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 设置响应体</span></span><br><span class="line">    response.<span class="title function_">write</span>(<span class="string">&#x27;Hello World!&#x27;</span>);</span><br><span class="line">    <span class="comment">// 结束响应</span></span><br><span class="line">    response.<span class="title function_">end</span>();</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">8080</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 3. 启动服务器</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务器启动成功&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务器地址：http://localhost:8080&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>运行 <code>node httpserver.js</code> 启动服务器，访问 <code>http://localhost:8080</code> 即可看到 <code>Hello World</code>。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">node httpserver.js</span><br></pre></td></tr></table></figure>
<h3 id="操作-MySQL-数据库">操作 MySQL 数据库</h3>
<p>Node.js 操作 MySQL 数据库需要使用到 mysql 模块。这个模块属于第三方模块，需要使用 npm 安装。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install mysql</span><br></pre></td></tr></table></figure>
<p>这样安装的 mysql 模块是安装在当前项目中的，如果想要在全局使用，需要使用 <code>-g</code> 参数。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install mysql -g</span><br></pre></td></tr></table></figure>
<p>通常，全局安装更多的是一些工具，比如：webpack、vue-cli 等。</p>
<blockquote>
<p>编写 mysql.js 文件</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 导入 mysql 模块</span></span><br><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 配置数据库连接信息</span></span><br><span class="line">mysql.<span class="title function_">createConnection</span>(&#123;</span><br><span class="line">    <span class="attr">host</span>:<span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">    <span class="attr">port</span>:<span class="number">3306</span>,</span><br><span class="line">    <span class="attr">user</span>:<span class="string">&quot;root&quot;</span>,</span><br><span class="line">    <span class="attr">password</span>:<span class="string">&quot;123456&quot;</span>,</span><br><span class="line">    <span class="attr">datebase</span>:<span class="string">&quot;test&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 连接数据库</span></span><br><span class="line">connection.<span class="title function_">connect</span>();</span><br><span class="line"><span class="comment">// CURD</span></span><br><span class="line">connection.<span class="title function_">query</span>(<span class="string">&#x27;SELECT * FROM `user`&#x27;</span>, <span class="function">(<span class="params">error, results, fields</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (error) <span class="keyword">throw</span> error;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;The solution is: &#x27;</span>, results);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 关闭数据库连接</span></span><br><span class="line">connection.<span class="title function_">end</span>();</span><br></pre></td></tr></table></figure>
<p>js 不仅是一门前端语言，也是一门后端语言。所以说 js 是一门全栈语言。</p>
<h3 id="更多-API">更多 API</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9ub2RlanMub3JnL2Rpc3QvbGF0ZXN0LXYxNC54L2RvY3MvYXBpLw==">Node.js API<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLm5wbWpzLmNvbS8=">npm API<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cDovL25vZGVqcy5jbi8=">Node.js 中文网<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h2 id="学习-ES6-上">学习 ES6 上</h2>
<p>ES6 是 ECMAScript 的第六个版本，也是 JavaScript 的第六个版本，它在 2015 年 6 月发布。ES6 是一个大版本，它引入了很多新的语法特性，比如：let、const、箭头函数、模板字符串、解构赋值、Promise 等。</p>
<h3 id="let-和-const">let 和 const</h3>
<p>早期的 JavaScript 只有两种声明变量的方式：var 和 function。var 声明的变量是全局变量，而 function 声明的变量是局部变量。这样就会导致变量的作用域不明确，var 声明的变量可能会被覆盖，function 声明的变量可能会被提升。</p>
<blockquote>
<p>旧的声明变量的方式：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// var 声明的变量是全局变量</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// function 声明的变量是局部变量</span></span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// 2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义变量是 var，而常量也是 var</span></span><br><span class="line"><span class="keyword">var</span> <span class="variable constant_">PI</span> = <span class="number">3.14</span>;</span><br></pre></td></tr></table></figure>
<p>而 ES6 引入了两种新的声明变量的方式：let 和 const。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>let 声明的变量是局部变量，</p>
</li>
<li class="lvl-2">
<p>const 声明的变量是常量。</p>
</li>
</ul>
<blockquote>
<p>新的声明变量的方式：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// let 声明的变量是局部变量</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">2</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// 2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// const 声明的变量是常量</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PI</span> = <span class="number">3.14</span>;</span><br></pre></td></tr></table></figure>
<h3 id="新定义方式的特点">新定义方式的特点</h3>
<blockquote>
<p>请看代码：</p>
</blockquote>
<details>
<summary>点击查看代码</summary>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. let 声明的变量不能重复声明</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> a = <span class="number">2</span>; <span class="comment">// Uncaught SyntaxError: Identifier &#x27;a&#x27; has already been declared</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. const 声明的变量不能重复声明</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PI</span> = <span class="number">3.14</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PI</span> = <span class="number">3.1415926</span>; <span class="comment">// Uncaught SyntaxError: Identifier &#x27;PI&#x27; has already been declared</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. let 声明的变量不能提升</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// Uncaught ReferenceError: Cannot access &#x27;a&#x27; before initialization</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. const 声明的变量不能提升</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">PI</span>); <span class="comment">// Uncaught ReferenceError: Cannot access &#x27;PI&#x27; before initialization</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PI</span> = <span class="number">3.14</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. let 声明的变量不能重复赋值</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line">a = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6. const 声明的变量不能重复赋值</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PI</span> = <span class="number">3.14</span>;</span><br><span class="line"><span class="variable constant_">PI</span> = <span class="number">3.1415926</span>; <span class="comment">// Uncaught TypeError: Assignment to constant variable.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 7. const 声明的变量必须初始化</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PI</span>; <span class="comment">// Uncaught SyntaxError: Missing initializer in const declaration</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对比 var 声明的变量</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i); <span class="comment">// 10</span></span><br><span class="line">这样的结果是因为 <span class="keyword">var</span> 声明的变量是全局变量，所以在循环结束之后，i 的值就变成了 <span class="number">10</span>。</span><br><span class="line"><span class="comment">// 称为变量穿透</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">PI2</span> = <span class="number">3.14</span>;</span><br><span class="line"><span class="title class_">PI2</span> = <span class="number">3.1415926</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">PI2</span>); <span class="comment">// 3.1415926</span></span><br><span class="line"><span class="comment">// 这样的结果是因为 var 声明的变量可以重复赋值，所以 PI2 的值就变成了 3.1415926。</span></span><br></pre></td></tr></table></figure>
</details>
<p>在实际开发和生产环境中，比如：Vue.js、React.js、Node.js，uni-app、小程序等，都是使用 let 和 const 来声明变量和常量的。</p>
<p>但是如果是在老的浏览器中，比如：IE 11，就不支持 let 和 const，这时候就需要使用 babel 来将 ES6 的代码转换成 ES5 的代码。</p>
<p>在 web 开发中，还是大量使用 ES5 的代码，此时还是建议使用 var 来声明变量。</p>
<h3 id="模板字符串">模板字符串</h3>
<p>模板字符串是 ES6 中新增的一种字符串的表示方式，它使用反引号（`）来代替单引号（'）和双引号（&quot;）。</p>
<blockquote>
<p>例子</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 旧的字符串拼接方式</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;我叫&#x27;</span> + person.<span class="property">name</span> + <span class="string">&#x27;，今年&#x27;</span> + person.<span class="property">age</span> + <span class="string">&#x27;岁了。&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str); <span class="comment">// 我叫张三，今年18岁了。</span></span><br><span class="line"><span class="comment">// 新的字符串拼接方式</span></span><br><span class="line"><span class="keyword">let</span> str2 = <span class="string">`我叫<span class="subst">$&#123;person.name&#125;</span>，今年<span class="subst">$&#123;person.age&#125;</span>岁了。`</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str2); <span class="comment">// 我叫张三，今年18岁了。</span></span><br></pre></td></tr></table></figure>
<p>总之，模板字符串就是一种更加方便的字符串拼接方式。</p>
<h3 id="默认参数">默认参数</h3>
<p>默认参数是 ES6 中新增的一种函数的参数的默认值的表示方式。</p>
<blockquote>
<p>例子</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 旧的函数参数默认值的表示方式</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="comment">// 如果 b 为 undefined，就将 b 的值设置为 0</span></span><br><span class="line">    b = b === <span class="literal">undefined</span> ? <span class="number">0</span> : b;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a + b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>(<span class="number">1</span>); <span class="comment">// 1</span></span><br><span class="line"><span class="title function_">fn</span>(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 3</span></span><br><span class="line"><span class="comment">// 新的函数参数默认值的表示方式</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn2</span>(<span class="params">a, b = <span class="number">0</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a + b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn2</span>(<span class="number">1</span>); <span class="comment">// 1</span></span><br><span class="line"><span class="title function_">fn2</span>(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<h3 id="箭头函数">箭头函数</h3>
<p>箭头函数是 ES6 中新增的一种函数的定义方式，它使用箭头（=&gt;）来代替 function 关键字。</p>
<blockquote>
<p>例子</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 旧的函数定义方式</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 新的函数定义方式</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">fn2</span> = (<span class="params">a, b</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 如果函数体中只有一行代码，可以省略 return 关键字</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">fn3</span> = (<span class="params">a, b</span>) =&gt; a + b;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">var</span> newArr = arr.<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> item * <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(newArr); <span class="comment">// [2, 4, 6, 8, 10]</span></span><br><span class="line"><span class="comment">// 使用箭头函数</span></span><br><span class="line"><span class="keyword">var</span> newArr2 = arr.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> item * <span class="number">2</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(newArr2); <span class="comment">// [2, 4, 6, 8, 10]</span></span><br></pre></td></tr></table></figure>
<p>从上面的例子可知看到，箭头函数的语法更加简洁使用箭头函数的规律：</p>
<ol>
<li class="lvl-3">
<p>去掉 function 关键字</p>
</li>
<li class="lvl-3">
<p>在参数列表和函数体之间添加箭头（=&gt;）</p>
</li>
<li class="lvl-3">
<p>如果函数体中只有一行代码，可以省略 return 关键字</p>
</li>
<li class="lvl-3">
<p>如果参数列表中只有一个参数，可以省略参数列表的小括号</p>
</li>
</ol>
<p>但是它也有一些缺点，比如：箭头函数没有自己的 this，它的 this 是继承父级作用域的 this。</p>
]]></content>
      <categories>
        <category>AdvancedWeb</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker 教程</title>
    <url>/2023/06/30/2/</url>
    <content><![CDATA[<h2 id="Docker-简介">Docker 简介</h2>
<p>Docker 是一个开源的应用容器引擎，基于 Go 语言 并遵从 Apache2.0 协议开源。<br>
Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口（类似 iPhone 的 app），更重要的是容器性能开销极低。</p>
<h2 id="Docker-架构">Docker 架构</h2>
<p>Docker 使用客户端-服务器 (C/S) 架构模式，使用远程API来管理和创建Docker容器。<br>
Docker 容器通过 Docker 镜像来创建。容器与镜像的关系类似于面向对象编程中的对象与类。</p>
<h2 id="为什么要使用-Docker？">为什么要使用 Docker？</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>更高效的利用系统资源</p>
</li>
<li class="lvl-2">
<p>更快速的启动时间</p>
</li>
<li class="lvl-2">
<p>一致的运行环境</p>
</li>
<li class="lvl-2">
<p>持续交付和部署</p>
</li>
<li class="lvl-2">
<p>更轻松的迁移</p>
</li>
<li class="lvl-2">
<p>更轻松的维护和扩展</p>
</li>
</ul>
<h2 id="Docker-与传统虚拟化的区别">Docker 与传统虚拟化的区别</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>传统虚拟机技术是虚拟出一套硬件后，在其上运行一个完整的操作系统，而容器内的应用直接运行在宿主机的操作系统上。</p>
</li>
<li class="lvl-2">
<p>容器不需要进行硬件虚拟以及操作系统虚拟，因此容器的性能开销极小。</p>
</li>
<li class="lvl-2">
<p>Docker 属于操作系统层面的虚拟化技术。</p>
</li>
</ul>
<h2 id="容器与虚拟机的区别">容器与虚拟机的区别</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>容器是用户态的进程，而虚拟机是内核态的进程。</p>
</li>
<li class="lvl-2">
<p>容器是不需要虚拟出一套硬件，不需要进行硬件虚拟以及操作系统虚拟，因此容器的性能开销极小。</p>
</li>
<li class="lvl-2">
<p>容器是直接运行在宿主机的操作系统上，而虚拟机是运行在虚拟机监控器（VMM）上。</p>
</li>
</ul>
<h2 id="Docker-基本原理和概念">Docker 基本原理和概念</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p>镜像（Image）</p>
</li>
<li class="lvl-2">
<p>容器（Container）</p>
</li>
<li class="lvl-2">
<p>仓库（Repository）</p>
</li>
</ul>
<h2 id="Docker-安装">Docker 安装</h2>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuZG9ja2VyLmNvbS8=">Docker 官网<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20v">Docker 官方文档<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9odWIuZG9ja2VyLmNvbS8=">Docker Hub<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<p>注意：Docker for Windows 要求系统打开 Hyper-V，而 VMware Workstation 和 VirtualBox 等虚拟机软件也需要使用到虚拟化技术，因此这些软件不能在同一台机器上同时运行。详见链接：<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dhYnJpZWxsZV9PeU8vYXJ0aWNsZS9kZXRhaWxzLzEyMDM2MTIxOA==">Windows 下 Docker 与 VMware 共存<i class="fa fa-external-link-alt"></i></span></p>
<p>这里我选择在 Windows 系统下安装 VMware Workstation 虚拟机，然后在虚拟机中安装 Ubuntu 系统，再在 Ubuntu 系统中安装 Docker。<s>套娃了属于是</s></p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">Ubuntu 22.04.2 LTS</span><br><span class="line">The latest LTS version of Ubuntu, for desktop PCs and laptops. LTS stands for long-term support — which means five years of free security and maintenance updates, guaranteed until April 2027.</span><br><span class="line"></span><br><span class="line">Ubuntu 22.04 LTS release notes</span><br><span class="line"></span><br><span class="line">Recommended system requirements:</span><br><span class="line"></span><br><span class="line">2 GHz dual-core processor or better </span><br><span class="line">4 GB system memory </span><br><span class="line">25 GB of free hard drive space </span><br><span class="line">Internet access is helpful </span><br><span class="line">Either a DVD drive or a USB port for the installer media</span><br></pre></td></tr></table></figure>
<h2 id="容器化和-Dockerfile">容器化和 Dockerfile</h2>
<p>容器化是指将应用程序及其依赖，打包成一个镜像，运行时再通过这个镜像来创建容器，这样就实现了应用程序的容器化。</p>
<p>Dockerfile 是一个文本文件，用来配置镜像，Docker 根据 Dockerfile 的配置信息来构建镜像。</p>
<ol>
<li class="lvl-3">
<p>编写 Dockerfile 文件</p>
</li>
<li class="lvl-3">
<p>执行 docker build 命令来构建镜像</p>
</li>
<li class="lvl-3">
<p>执行 docker run 命令来创建并启动容器</p>
</li>
</ol>
<h2 id="实践">实践</h2>
<ol>
<li class="lvl-3">
<p>创建项目目录 <code>HelloDocker</code></p>
</li>
<li class="lvl-3">
<p>在项目目录下创建 <code>index.js</code> 文件</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">conslone.<span class="title function_">log</span>(<span class="string">&#x27;Hello Docker!&#x27;</span>);</span><br></pre></td></tr></table></figure>
<ol start="3">
<li class="lvl-3">
<p>使用命令 <code>node index.js</code> 来运行 <code>index.js</code> 文件，输出 <code>Hello Docker!</code>。</p>
</li>
<li class="lvl-3">
<p>在项目目录下创建 <code>Dockerfile</code> 文件</p>
</li>
</ol>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> node:<span class="number">14.17</span>.<span class="number">0</span>-alpine3.<span class="number">13</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> index.js /app/index.js</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> node index.js</span></span><br></pre></td></tr></table></figure>
<ol start="5">
<li class="lvl-3">
<p>使用命令 <code>docker build -t hello-docker .</code> 来构建镜像</p>
</li>
<li class="lvl-3">
<p>使用命令 <code>docker image ls</code> 来查看镜像列表</p>
</li>
<li class="lvl-3">
<p>使用命令 <code>docker run hello-docker</code> 来创建并启动容器</p>
</li>
<li class="lvl-3">
<p>(可选) 使用命令 <code>docker ps -a</code> 来查看容器列表</p>
</li>
<li class="lvl-3">
<p>(可选) 使用命令 <code>docker rm -f &lt;container-id&gt;</code> 来删除容器</p>
</li>
<li class="lvl-4">
<p>(可选) 使用命令 <code>docker rmi &lt;image-id&gt;</code> 来删除镜像</p>
</li>
<li class="lvl-4">
<p>(可选) 上传镜像到 Docker Hub</p>
</li>
<li class="lvl-4">
<p>(可选) 在线运行镜像，使用 <span class="exturl" data-url="aHR0cHM6Ly9sYWJzLnBsYXktd2l0aC1kb2NrZXIuY29tLw==">Docker Playground<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ol>
<h2 id="DockerCompose">DockerCompose</h2>
<p>DockerCompose 是一个用于定义和运行多容器 Docker 应用程序的工具。通过 Compose，可以使用 YML 文件来配置应用程序需要的所有服务，然后使用一个命令，即可从 YML 文件配置中创建并启动所有服务。<br>
Compose 可以在所有环境中工作：生产、阶段、开发、测试等。</p>
<p>docker-compose.yml 文件示例：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.9&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;5000:5000&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">.:/code</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">logvolume01:/var/log</span></span><br><span class="line">    <span class="attr">links:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">redis</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis</span></span><br></pre></td></tr></table></figure>
<p>Compose 有两个重要的概念：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>服务 (service)：一个应用的容器，实际上可以包括若干运行相同镜像的容器实例。</p>
</li>
<li class="lvl-2">
<p>项目 (project)：由一组关联的应用容器组成的一个完整业务单元，在 docker-compose.yml 文件中定义。</p>
</li>
</ul>
<p>Compose 的常用命令：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>docker-compose up</code>：创建并启动所有容器。</p>
</li>
<li class="lvl-2">
<p><code>docker-compose up -d</code>：创建并启动所有容器，后台运行。</p>
</li>
<li class="lvl-2">
<p><code>docker-compose up --build</code>：创建并启动所有容器，强制重新构建镜像。</p>
</li>
<li class="lvl-2">
<p><code>docker-compose up -d --build</code>：创建并启动所有容器，后台运行，强制重新构建镜像。</p>
</li>
<li class="lvl-2">
<p><code>docker-compose ps</code>：查看项目中的容器。</p>
</li>
<li class="lvl-2">
<p><code>docker-compose logs</code>：查看容器日志。</p>
</li>
<li class="lvl-2">
<p><code>docker-compose logs -f</code>：查看容器日志，实时输出。</p>
</li>
</ul>
<p>参考链接：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vY29tcG9zZS8=">Docker Compose<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zODc4NDAzODE=">docker compose 配置文件 .yml 全面指南<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
]]></content>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>JDK17 新特性 Preview 2</title>
    <url>/2023/06/14/1/</url>
    <content><![CDATA[<p>接着上一篇 Preview 1，本文将继续介绍 JDK17 的新特性。</p>
<h2 id="Record-类">Record 类</h2>
<p>“类似 lombok 的属性只读”。在 JDK 14 中，引入了 Record 类，可以用来创建只读的类，这样就不需要使用 lombok 来实现了。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">record</span> <span class="title class_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从上面的代码可以看出，Record 类的定义和普通类的定义很相似，只是在类名前面加上了 record 关键字。<br>
Record 类的属性默认是 final 的，且只有 getter 方法，没有 setter 方法，所以 Record 类的属性是只读的。</p>
<h2 id="优化空指针异常">优化空指针异常</h2>
<p>在 JDK 17 中，对空指针异常进行了优化，当出现空指针异常时，会打印出更加详细的信息，包括：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>空指针异常的位置</p>
</li>
<li class="lvl-2">
<p>空指针异常的原因</p>
</li>
<li class="lvl-2">
<p>空指针异常的堆栈信息</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NullPointerExceptionDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        System.out.println(str.length());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 JDK 17 中，运行上面的代码，会打印出如下信息：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Exception in thread <span class="string">&quot;main&quot;</span> java.lang.NullPointerException: Cannot invoke <span class="string">&quot;String.length()&quot;</span> because <span class="string">&quot;str&quot;</span> is <span class="literal">null</span></span><br><span class="line">    at com.example.demo.NullPointerExceptionDemo.main(NullPointerExceptionDemo.java:<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<p>可以看出，JDK 17 对空指针异常进行了优化，打印出了更加详细的信息。</p>
<h2 id="ZGC垃圾回收器">ZGC垃圾回收器</h2>
<p>在 JDK 17 中，引入了 ZGC 垃圾回收器，ZGC 垃圾回收器是一种低延迟的垃圾回收器，可以在几毫秒内处理几个字节到几个TB的堆。<br>
ZGC 垃圾回收器的特点：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>低延迟</p>
</li>
<li class="lvl-2">
<p>可以处理几个字节到几个TB的堆</p>
</li>
<li class="lvl-2">
<p>与应用程序线程并发执行</p>
</li>
<li class="lvl-2">
<p>不卡顿</p>
</li>
</ul>
<p>使用 ZGC 垃圾回收器：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">java -XX:+UseZGC</span><br></pre></td></tr></table></figure>
<p>在 JVM 启动时，使用 -XX:+UseZGC 参数，就可以使用 ZGC 垃圾回收器。</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>JDK17 新特性 Preview 1</title>
    <url>/2023/06/11/1/</url>
    <content><![CDATA[<p>2023年，越来越多的开发者和企业将会迁移到 JDK 17，我们学习 Java 也应该跟上时代的步伐。随着 JDK 17 的发布，Java 语言和 JVM 将迎来一些新的特性，本文将介绍 JDK 17 的新特性。</p>
<h2 id="switch-增强">switch 增强</h2>
<p>JDk 17 为 switch 增加了一些新的特性，包括：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>switch 表达式</p>
</li>
<li class="lvl-2">
<p>switch 语句中的 yield 语句</p>
</li>
<li class="lvl-2">
<p>switch 语句中的模式匹配</p>
</li>
</ul>
<h3 id="switch-表达式">switch 表达式</h3>
<p>Before JDK 17:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwitchDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">switch</span> (num) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;num is 1&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;num is 2&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;num is not 1 or 2&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>After JDK 17:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwitchDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">switch</span> (num) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span> -&gt; System.out.println(<span class="string">&quot;num is 1&quot;</span>);</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span> -&gt; System.out.println(<span class="string">&quot;num is 2&quot;</span>);</span><br><span class="line">            <span class="keyword">default</span> -&gt; System.out.println(<span class="string">&quot;num is not 1 or 2&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看出，原先的 switch 语句中，每个 case 都需要加上 break 语句，否则会出现穿透现象。而在 JDK 17 中，switch 语句中的 case 可以直接使用 -&gt; 来代替，这样就不需要加上 break 语句了。</p>
<h3 id="switch-语句中的-yield-语句">switch 语句中的 yield 语句</h3>
<p>Before JDK 17:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;徐庶&quot;</span>;</span><br><span class="line">String country; </span><br><span class="line"><span class="keyword">switch</span> (name) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;诸葛亮&quot;</span>:</span><br><span class="line">        country = <span class="string">&quot;蜀国&quot;</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;司马懿&quot;</span>:</span><br><span class="line">        country = <span class="string">&quot;魏国&quot;</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;徐庶&quot;</span>:</span><br><span class="line">        country = <span class="string">&quot;吴国&quot;</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        country = <span class="string">&quot;未知&quot;</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(name + <span class="string">&quot;是&quot;</span> + country + <span class="string">&quot;人&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>After JDK 17:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;徐庶&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">country</span> <span class="operator">=</span> <span class="keyword">switch</span> (name) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;诸葛亮&quot;</span>, <span class="string">&quot;庞统&quot;</span> -&gt; &#123;</span><br><span class="line">        <span class="keyword">yield</span> <span class="string">&quot;蜀国&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;司马懿&quot;</span>, <span class="string">&quot;郭嘉&quot;</span> -&gt; &#123;</span><br><span class="line">        <span class="keyword">yield</span> <span class="string">&quot;魏国&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;徐庶&quot;</span>, <span class="string">&quot;周瑜&quot;</span> -&gt; &#123;</span><br><span class="line">        <span class="keyword">yield</span> <span class="string">&quot;吴国&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">default</span> -&gt; &#123;</span><br><span class="line">        <span class="keyword">yield</span> <span class="string">&quot;未知&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">System.out.println(name + <span class="string">&quot;是&quot;</span> + country + <span class="string">&quot;人&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>在 JDK 17 中，switch 语句中的 case 可以直接使用 yield 语句来代替 break 语句。而且 yield 语句可以返回一个值，这样就不需要定义一个变量来接收了。在原来的 switch 语句中，每个 case 都需要加上 break 语句，否则会出现穿透现象。而在 JDK 17 中，switch 语句中的 case 可以直接使用 yield 语句来代替，这样就不需要加上 break 语句了。</p>
<h3 id="switch-语句中的模式匹配">switch 语句中的模式匹配</h3>
<p>JDK 17:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> String <span class="title function_">getCountry</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">switch</span> (obj) &#123;</span><br><span class="line">        <span class="keyword">case</span> String s -&gt; &#123;</span><br><span class="line">            <span class="keyword">switch</span> (s) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;诸葛亮&quot;</span>, <span class="string">&quot;庞统&quot;</span> -&gt; &#123;</span><br><span class="line">                    <span class="keyword">yield</span> <span class="string">&quot;蜀国&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;司马懿&quot;</span>, <span class="string">&quot;郭嘉&quot;</span> -&gt; &#123;</span><br><span class="line">                    <span class="keyword">yield</span> <span class="string">&quot;魏国&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;徐庶&quot;</span>, <span class="string">&quot;周瑜&quot;</span> -&gt; &#123;</span><br><span class="line">                    <span class="keyword">yield</span> <span class="string">&quot;吴国&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">default</span> -&gt; &#123;</span><br><span class="line">                    <span class="keyword">yield</span> <span class="string">&quot;未知&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">case</span> Integer i -&gt; &#123;</span><br><span class="line">            <span class="keyword">switch</span> (i) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> -&gt; &#123;</span><br><span class="line">                    <span class="keyword">yield</span> <span class="string">&quot;蜀国&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span> -&gt; &#123;</span><br><span class="line">                    <span class="keyword">yield</span> <span class="string">&quot;魏国&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span> -&gt; &#123;</span><br><span class="line">                    <span class="keyword">yield</span> <span class="string">&quot;吴国&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">default</span> -&gt; &#123;</span><br><span class="line">                    <span class="keyword">yield</span> <span class="string">&quot;未知&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">default</span> -&gt; &#123;</span><br><span class="line">            <span class="keyword">yield</span> <span class="string">&quot;未知&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这是 JDK 17 中的新特性，可以在 switch 语句中使用模式匹配，这样就不需要使用 instanceof 来判断对象的类型了。</p>
<h2 id="拼接字符串增强">拼接字符串增强</h2>
<p>JDK 17 为 String 类增加了一个新的方法，用于拼接字符串。</p>
<p>Before JDK 17:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">str = str + <span class="string">&quot; World&quot;</span>;</span><br><span class="line">System.out.println(str);</span><br></pre></td></tr></table></figure>
<p>After JDK 17:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">str = str.concat(<span class="string">&quot; World&quot;</span>);</span><br><span class="line">System.out.println(str);</span><br></pre></td></tr></table></figure>
<p>使用 \ 来拼接字符串，使用 \s 来表示空格，使用 \n 来表示换行。</p>
<p>Before JDK 17:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">html</span> <span class="operator">=</span> <span class="string">&quot;&lt;html&gt;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;&lt;body&gt;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;    &lt;h1&gt;Hello World&lt;/h1&gt;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;&lt;/body&gt;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;&lt;/html&gt;&quot;</span>;</span><br><span class="line">System.out.println(html);</span><br></pre></td></tr></table></figure>
<p>原先每一行都需要加上 \n 来表示换行，这样的代码可读性很差。</p>
<p>After JDK 17:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">html</span> <span class="operator">=</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        &lt;html&gt;</span></span><br><span class="line"><span class="string">            &lt;body&gt;</span></span><br><span class="line"><span class="string">                &lt;h1&gt;Hello World&lt;/h1&gt;</span></span><br><span class="line"><span class="string">            &lt;/body&gt;</span></span><br><span class="line"><span class="string">        &lt;/html&gt;</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span>;</span><br><span class="line">System.out.println(html);</span><br></pre></td></tr></table></figure>
<h2 id="instanceof-模式匹配">instanceof 模式匹配</h2>
<p>JDK 17 为 instanceof 增加了模式匹配的功能。</p>
<p>Before JDK 17:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InstanceofDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> (String) obj;</span><br><span class="line">            System.out.println(str.toUpperCase());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>After JDK 17:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InstanceofDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> String str) &#123;</span><br><span class="line">            System.out.println(str.toUpperCase());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在原先的代码中，我们需要先判断 obj 是否是 String 类型，如果是，我们需要将 obj 强转为 String 类型，然后才能调用 String 类型的方法。在 JDK 17 中，我们可以直接在 if 语句中使用 instanceof，如果 obj 是 String 类型，我们可以直接使用 str 变量，而不需要强转。</p>
<h2 id="密封类">密封类</h2>
<p>JDK 17 为类增加了一个新的修饰符 sealed，用于修饰类，接口和枚举。对于称之为密封类，更多是为了限制子类的继承，防止子类变成父类。</p>
<p>Before JDK 17:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SealedClassDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Animal</span> <span class="variable">animal</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">        animal.eat();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;动物吃东西&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>After JDK 17:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SealedClassDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Animal</span> <span class="variable">animal</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">        animal.eat();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">sealed</span> <span class="keyword">class</span> <span class="title class_">Animal</span> <span class="keyword">permits</span> Cat, Dog &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;动物吃东西&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;猫吃鱼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;狗吃肉&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 JDK 17 中，我们使用 sealed 修饰 Animal 类，使用 permits 关键字来指定 Animal 类可以被哪些类继承，这里我们指定 Cat 和 Dog 类可以继承 Animal 类。在 Cat 和 Dog 类中，我们使用 final 修饰类，防止子类继续继承 Cat 和 Dog 类。除了final 修饰类，我们还可以使用 sealed 修饰类，这样的类只能被指定的类继承，不能被其他类继承。</p>
<p>这种方式有很多优点</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>限制子类的继承，防止子类变成父类</p>
</li>
<li class="lvl-2">
<p>限制子类的个数，防止子类过多</p>
</li>
<li class="lvl-2">
<p>限制子类的继承层级，防止继承层级过多</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机网络（IPv4部分）</title>
    <url>/2023/06/04/2/</url>
    <content><![CDATA[<h1>IPv4</h1>
<p>IPv4是目前使用最广泛的IP协议，它的地址长度为32位，通常用点分十进制表示。</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line"># 32位二进制</span><br><span class="line">11000000.10101000.00000001.00000001</span><br><span class="line"># 点分十进制</span><br><span class="line">192.168.1.1</span><br></pre></td></tr></table></figure>
<hr>
<p>如何将32位二进制转换为点分十进制呢？将32位二进制分成4组，每组8位，然后将每组转换为十进制，就得到了点分十进制。</p>
<hr>
<p>如何计算二进制的十进制呢？将二进制的每一位乘以2的n次方，n从0开始，从右往左递增，然后将每一位的结果相加，就得到了十进制。</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line"># 11000000.10101000.00000001.00000001</span><br><span class="line"># 1*2^7 + 1*2^6 + 0*2^5 + 0*2^4 + 0*2^3 + 0*2^2 + 0*2^1 + 0*2^0 = 192</span><br><span class="line"># 1*2^7 + 0*2^6 + 1*2^5 + 0*2^4 + 1*2^3 + 0*2^2 + 0*2^1 + 0*2^0 = 168</span><br><span class="line"># 0*2^7 + 0*2^6 + 0*2^5 + 0*2^4 + 0*2^3 + 0*2^2 + 0*2^1 + 1*2^0 = 1</span><br><span class="line"># 0*2^7 + 0*2^6 + 0*2^5 + 0*2^4 + 0*2^3 + 0*2^2 + 0*2^1 + 1*2^0 = 1</span><br></pre></td></tr></table></figure>
<p>技巧：一般IPv4地址32位分成4组，每组8位，每组的最大值为255，所以第8位为1的二进制的十进制最大值为255，第8位为0的二进制的十进制最大值为127。</p>
<hr>
<p>那么，十进制怎么转化成二进制呢？将十进制除以2，得到的余数就是二进制的每一位，然后将商再除以2，得到的余数就是二进制的每一位，以此类推，直到商为0为止，然后将余数从下往上排列，就得到了二进制。</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line"># 192</span><br><span class="line"># 192/2 = 96 余数0</span><br><span class="line"># 96/2 = 48 余数0</span><br><span class="line"># 48/2 = 24 余数0</span><br><span class="line"># 24/2 = 12 余数0</span><br><span class="line"># 12/2 = 6 余数0</span><br><span class="line"># 6/2 = 3 余数0</span><br><span class="line"># 3/2 = 1 余数1</span><br><span class="line"># 1/2 = 0 余数1</span><br><span class="line"># 11000000</span><br></pre></td></tr></table></figure>
<h2 id="分类编址IPv4地址">分类编址IPv4地址</h2>
<p>IP地址是指互联网上的每一台主机的地址，它由网络号和主机号组成，网络号用来标识主机所在的网络，主机号用来标识主机。</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">IP地址 = 网络号 + 主机号</span><br></pre></td></tr></table></figure>
<hr>
<p>A类IP地址一个A类IP地址由1字节的网络地址和3字节主机地址组成，即8位网络地址和24位主机地址，它主要为大型网络而设计的，网络地址的最高位必须是“0”， 地址范围从1.0.0.0 到127.0.0.0）。可用的A类网络有127个，每个网络能容纳16777214个主机。其中127.0.0.1是一个特殊的IP地址，表示主机本身，用于本地机器的测试。<br>
2^7 = 128，减去两个保留地址，126个网络。每个网络可容纳2^24 - 2 = 16777214个主机。</p>
<p>注：<br>
A:0-127，其中0代表任何地址，127为回环测试地址，因此，A类ip地址的实际范围是1-126.<br>
默认子网掩码为255.0.0.0</p>
<p>B类IP地址一个B类IP地址由2个字节的网络地址和2个字节的主机地址组成，即16位网络地址和16位主机地址，它主要为中型网络而设计的，网络地址的最高位必须是“10”，地址范围从128.0.0.0到191.255.255.255。可用的B类网络有16382个，每个网络能容纳6万多个主机 。<br>
2^14 = 16384，减去两个保留地址，16382个网络。每个网络可容纳2^16 - 2 = 65534个主机。</p>
<p>注：<br>
B:128-191，其中128.0.0.0和191.255.0.0为保留ip，实际范围是128.1.0.0–191.254.0.0。</p>
<p>C类IP地址一个C类IP地址由3字节的网络地址和1字节的主机地址组成，即24位网络地址和8位主机地址，它主要为小型网络而设计的，网络地址的最高位必须是“110”。范围从192.0.0.0到223.255.255.255。C类网络可达209万余个，每个网络能容纳254个主机。<br>
2^21 = 2097152，减去两个保留地址，2097150个网络。每个网络可容纳2^8 - 2 = 254个主机。</p>
<p>注：<br>
C:192-223，其中192.0.0.0和223.255.255.0为保留ip，实际范围是192.0.1.0–223.255.254.0</p>
<p>D类地址用于多点广播（Multicast）。 D类IP地址第一个字节以“lll0”开始，它是一个专门保留的地址。它并不指向特定的网络，目前这一类地址被用在多点广播（Multicast）中。多点广播地址用来一次寻址一组计算机，它标识共享同一协议的一组计算机。224.0.0.0到239.255.255.255用于多点广播 。</p>
<p>E类IP地址以“llll0”开始，为将来使用保留。240.0.0.0到255.255.255.254，255.255.255.255用于广播地址。</p>
<pre><code>全零（“0．0．0．0”）地址对应于当前主机。全“1”的IP地址（“255．255．255．255”）是当前子网的广播地址。
</code></pre>
<p>在IP地址3种主要类型里，各保留了3个区域作为私有地址，其地址范围如下：<br>
A类地址：10.0.0.0～10.255.255.255<br>
B类地址：172.16.0.0～172.31.255.255<br>
C类地址：192.168.0.0～192.168.255.255</p>
<p>eg.</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">0.0.0.0 是一个特殊的IP地址，表示主机本身，用于本地机器的测试。</span><br><span class="line">以127开头的非全0地址或非全1的地址，表示的是本机的回环地址，即自己访问自己，一般用于测试。</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>类别</th>
<th>可用网络数</th>
<th>每个网络可容纳的主机数</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>126</td>
<td>16777214</td>
</tr>
<tr>
<td>B</td>
<td>16382</td>
<td>65534</td>
</tr>
<tr>
<td>C</td>
<td>2097150</td>
<td>254</td>
</tr>
</tbody>
</table>
<h2 id="划分子网的IPv4地址">划分子网的IPv4地址</h2>
<p>子网掩码是用来划分网络地址和主机地址的，它是一个32位的二进制数，其中网络地址部分全为“1”，主机地址部分全为“0”。<strong>子网掩码的作用是将IP地址划分为网络地址和主机地址两部分</strong>。</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">IP地址 = 网络号 + 主机号</span><br><span class="line">子网掩码 = 网络号 + 主机号</span><br></pre></td></tr></table></figure>
<p>目的：将一个网络划分为多个子网，以满足不同的网络需求。</p>
<p>32位的子网掩码，从左到右，连续的1表示网络号，连续的0表示主机号。将划分的子网的IPv4地址和子网掩码进行逻辑与运算，得到的结果就是子网的网络号。</p>
<p>eg1.</p>
<p><img src="./eg2.png" alt><br>
<img src="./eg2_1.png" alt></p>
<p>eg2.<br>
<img src="./eg3.png" alt><br>
<img src="./eg3_1.png" alt></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>来自 <span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWM0NDExZDdqYi8/cD00NQ==">Bilibili 计算机网络微课堂<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h3 id="默认子网掩码">默认子网掩码</h3>
<p>默认子网掩码是指在没有划分子网的情况下，根据IP地址的类别，自动分配的子网掩码。</p>
<table>
<thead>
<tr>
<th>IP地址类别</th>
<th>默认子网掩码</th>
<th>子网掩码的二进制表示</th>
<th>构成</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>255.0.0.0</td>
<td>11111111.00000000.00000000.00000000</td>
<td>8位网络号 + 24位主机号</td>
</tr>
<tr>
<td>B</td>
<td>255.255.0.0</td>
<td>11111111.11111111.00000000.00000000</td>
<td>16位网络号 + 16位主机号</td>
</tr>
<tr>
<td>C</td>
<td>255.255.255.0</td>
<td>11111111.11111111.11111111.00000000</td>
<td>24位网络号 + 8位主机号</td>
</tr>
</tbody>
</table>
<h2 id="无分类编址CIDR">无分类编址CIDR</h2>
<p>CIDR（Classless Inter-Domain Routing，无分类域间路由选择），是为了解决IP地址的耗尽问题而提出的。CIDR采用了一种新的IP地址分配方法，它不再将IP地址看成是A、B、C类地址，而是将一个IP地址写成：IP地址/子网掩码的形式，其中“/”后面的数值表示子网掩码中连续的“1”的个数。</p>
<p>优点：CIDR可以将一个网络划分为多个子网，也可以将多个网络合并为一个网络，从而更加灵活地分配IP地址。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>CIDR使用&quot;斜线记法&quot;来表示IP地址和子网掩码的组合，如：<br>
eg.</p>
  <figure class="highlight text"><table><tr><td class="code"><pre><span class="line">128.14.35.7/20</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p>CIDR实际上是<strong>将网络前缀都相同的连续的IP地址块组成一个CIDR块</strong>，这样就可以用一个较短的前缀来表示一组IP地址块。</p>
</li>
<li class="lvl-2">
<p>只要知道了CIDR地址块中任何一个IP地址，就可以知道CIDR地址块的全部细节</p>
<ul class="lvl-2">
<li class="lvl-6">地址块中最小的IP地址</li>
<li class="lvl-6">地址块中最大的IP地址</li>
<li class="lvl-6">地址块中的IP地址总数</li>
<li class="lvl-6">地址块聚合某类网络数量</li>
<li class="lvl-6">地址掩码</li>
</ul>
</li>
</ul>
<p>eg.<br>
<img src="./eg4.png" alt></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>来自 <span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWM0NDExZDdqYi8/cD00Ng==">Bilibili 计算机网络微课堂<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h3 id="路由聚合-构造超网">路由聚合(构造超网)</h3>
<p>路由聚合是指将多个路由聚合成一个路由，从而减少路由表的规模，提高路由查找的效率。</p>
<p>路由聚合的基本思想是：将多个具有相同前缀的路由聚合成一个路由，这样就可以用一个较短的前缀来表示一组路由。</p>
<p>eg.<br>
<img src="./eg5.png" alt></p>
<h2 id="IPv4地址应用规划">IPv4地址应用规划</h2>
<p>为了更好地利用IPv4地址，需要对IPv4地址进行合理的规划，以便于管理和使用。</p>
<h3 id="定长子网掩码-Fixed-Length-Subnet-Mask">定长子网掩码(Fixed-Length Subnet Mask)</h3>
<p>FLSM：指在一个网络中，所有子网的子网掩码都相同。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>使用同一个子网掩码的子网，其主机数相同，这样就方便了管理。</p>
</li>
<li class="lvl-2">
<p>每一个子网分配的主机数都是固定的，这样就不利于灵活地分配IP地址。</p>
</li>
</ul>
<p>eg.<br>
<img src="./eg6.png" alt><br>
<img src="./eg6_1.png" alt><br>
<img src="./eg6_2.png" alt></p>
<p>只能划分出2^n 个子网，每个子网的主机数都是2^m-2个，其中n+m=32。造成了大量的IP地址浪费，原因是：每个子网的主机数都是固定的，而实际使用的主机数往往比较少，这样就造成了IP地址的浪费。</p>
<h3 id="可变长子网掩码-Variable-Length-Subnet-Mask">可变长子网掩码(Variable-Length Subnet Mask)</h3>
<p>VLSM：指在一个网络中，不同子网的子网掩码可以不同。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>使用不同子网掩码的子网，其主机数可以不同，这样就方便了管理。</p>
</li>
<li class="lvl-2">
<p>每一个子网分配的主机数都是可变的，这样就利于灵活地分配IP地址。</p>
</li>
</ul>
<p>eg.<br>
<img src="./eg7.png" alt><br>
<img src="./eg7_1.png" alt></p>
<h3 id="总结">总结</h3>
<p><img src="./eg8.png" alt></p>
]]></content>
      <categories>
        <category>Network</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>关于电子书</title>
    <url>/2023/05/22/1/</url>
    <content><![CDATA[<h2 id="关于电子书">关于电子书</h2>
<p>我喜欢看电子书，我看过的多数课外书籍基本是电子书。中国有很多电子书平台，如著名的起点中文网。但是，这些平台的电子书都是有版权的，而且有些电子书的版权是很贵的。</p>
<h3 id="ZLibrary">ZLibrary</h3>
<p>ZLibrary是一个免费的电子书网站，上面有很多免费的电子书，还有论文。前些时间，Zlib被美国相关部门封锁了，但是现在（2023-05）又可以访问了。但我看见Zlib给我发的邮件时，我非常感动······</p>
<p>Zlib是互联网精神的一部分，它是一个免费的电子书网站，它的存在是为了让更多的人能够阅读更多的书籍，而不是为了盈利。<br>
<img src="./img/zlib.png" alt></p>
<h3 id="知轩藏书（zxcs-me）">知轩藏书（<span class="exturl" data-url="aHR0cDovL3p4Y3MubWU=">zxcs.me<i class="fa fa-external-link-alt"></i></span>）</h3>
<p>不知道什么时候开始，我就使用知轩藏书来下载电子书了。它上面有很多精校版的电子书，而且是免费的。但是如今，它停止运营了，我感觉很可惜。不知道它的运营者为什么要停止运营，我猜测可能是因为版权问题吧。也不知道能否和Zlib一样，能够重新上线。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">关于“知轩藏书”站点的临时说明</span><br><span class="line">从 2023 年 4 月 5 日开始，用户无法访问知轩藏书站点。笔者通过对网站的基本信息进行分析后，初步判断是站长未续费网站服务器所导致的问题。</span><br><span class="line">后续网站是否能够恢复，取决于站长有没有备份网站数据，以及其是否还有意愿维护网站。</span><br><span class="line"></span><br><span class="line">不复存在的“知轩藏书”站点</span><br><span class="line">当你看到这个页面，说明“知轩藏书”的站长没有续费 92.242.62.123 服务器，并且没有更改域名解析记录。</span><br><span class="line">想了解更多信息请访问“知轩藏书”站点情况说明站点，</span><br><span class="line">因为笔者不打算长期续费此服务器，笔者没有“知轩藏书”站点的网站数据，这是个“重新安装”的服务器。</span><br><span class="line"></span><br><span class="line">过渡方案</span><br><span class="line">在百度贴吧知轩藏书吧内，网友“Anonymous般若”分享了其抓取的“知轩藏书”站点资源。</span><br><span class="line">而网友“鸣庚◎点墨”则根据这些资源，结合 AList 这个文件列表程序，建立了一个知轩藏书备份站。</span><br><span class="line"></span><br><span class="line">ZXCS | 百度网盘（已失效；压缩包密码：@123123）</span><br><span class="line">知轩藏书备份站（由于被攻击，即将关闭。）</span><br><span class="line">阿里云盘（由网友“筒蠹”提供，将文件类型“exe”重命名为“rar”即可解压）</span><br><span class="line">OneDrive for Business 国际版（由网友“神龙氏少主”提供，其同时运营着一个流媒体网站必达影视）</span><br><span class="line">天翼云盘（由网友“贴吧用户_0XN9bX5”提供）</span><br><span class="line">知轩藏书备份站（由网友“Sukanka”提供）</span><br><span class="line">请注意，zxcs.info 或 zxcstxt.com 等绝不是所谓的新站点，站长没有理由放弃运营 zxcs.me，转而运营一个不如其知名的站点。</span><br><span class="line"></span><br><span class="line">如果朋友们知道其他精校小说网站，也欢迎向我反馈，我会在“知轩藏书”站点情况说明站点中分享。</span><br><span class="line"></span><br><span class="line">笔者的电子邮件地址：webmaster@zxcs.wiki（受限于服务商，笔者无法回复邮件，敬请见谅）</span><br><span class="line">笔者不赞同访问 zxcs.info 或 zxcstxt.com 等盗用他人名称的站点，因为这是一种为了不良竞争以及快速获取知名度的手段。</span><br><span class="line">笔者认为如果网站真的足够优秀，那么使用自己原创的站点名称一样能够成功，使用他人名称更多是一种“浑水摸鱼”的做法。</span><br><span class="line"></span><br><span class="line">© 2023 zxcs.me (zxcs.wiki) - 关于“知轩藏书”站点的临时说明</span><br></pre></td></tr></table></figure>
<iframe src="https://www.zxcs.me/"></iframe>
<blockquote>
<p>如果上面的iframe无法显示，或者显示出无关内容，说明知轩藏书已经彻底停止运营了。</p>
</blockquote>
<div itemprop="text">
          <p>
            在百度贴吧<span class="exturl" data-url="aHR0cHM6Ly90aWViYS5iYWlkdS5jb20vZj9pZT11dGYtOCZrdz0lRTclOUYlQTUlRTglQkQlQTklRTglOTclOEYlRTQlQjklQTY=" title="知轩藏书吧-百度贴吧">知轩藏书吧<i class="fa fa-external-link-alt"></i></span>内，网友“Anonymous般若”<span class="exturl" data-url="aHR0cHM6Ly90aWViYS5iYWlkdS5jb20vcC84MzQ5OTQ5MTE3" title="建站至今所有数据分享，另附2022年8月仙毒草数据【知轩藏书吧】_百度贴吧">分享了其抓取的“知轩藏书”站点资源<i class="fa fa-external-link-alt"></i></span>。
            <br>
            而网友“鸣庚◎点墨”则根据这些资源，结合 AList 这个文件列表程序，<span class="exturl" data-url="aHR0cHM6Ly90aWViYS5iYWlkdS5jb20vcC84Mzc5NjU0OTgy" title="知轩藏书备份资源下载站来了（地址看2楼）_知轩藏书吧_百度贴吧">建立了一个知轩藏书备份站<i class="fa fa-external-link-alt"></i></span>。
          </p>
          <ul>
            <li><del><span class="exturl" data-url="aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMW1wU2lzTlFXekhLQlI1LTNCZDdYbUE/cHdkPWFqMmo=" title="ZXCS_免费高速下载|百度网盘-分享无限制">ZXCS |
                  百度网盘<i class="fa fa-external-link-alt"></i></span></del><i>（<strong>已失效</strong>；压缩包密码：@123123）</i>
            </li>
            <li><span class="exturl" data-url="aHR0cHM6Ly96eGNzLmRtbmIuY2Yv" title="主页 | 知轩藏书（备份）">知轩藏书备份站<i class="fa fa-external-link-alt"></i></span><i>（由于<span class="exturl" data-url="aHR0cHM6Ly90aWViYS5iYWlkdS5jb20vcC84NDE4OTU3NTQyP2ZpZD0xNzY5MzQ3OSZwaWQ9MTQ3NjQxNDIxMDU5IzE0NzY0MTQyMTA1OQ==" title="郑重声明：本站仅提供单文件下载，要下整个库的你直接下anonymous打包的书库去，你别从我这刷！我这里一天只有十万的访问额度【知轩藏书吧】_百度贴吧">被攻击<i class="fa fa-external-link-alt"></i></span>，即将关闭。）</i></li>
            <li><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWxpeXVuZHJpdmUuY29tL3MvTEdFaWtpeXNpOEs=" title="阿里云盘分享">阿里云盘<i class="fa fa-external-link-alt"></i></span><i>（由网友“筒蠹”<span class="exturl" data-url="aHR0cHM6Ly90aWViYS5iYWlkdS5jb20vcC84MzQ5OTQ5MTE3P2ZpZD0xNzY5MzQ3OSZwaWQ9MTQ3MzI0MTM0MDU0JmNpZD0xNDczMzY3Mzc4MjYjMTQ3MzM2NzM3ODI2" title="建站至今所有数据分享，另附2022年8月仙毒草数据【知轩藏书吧】_百度贴吧">提供<i class="fa fa-external-link-alt"></i></span>，将文件类型“exe”重命名为“rar”即可解压）</i></li>
            <li><span class="exturl" data-url="aHR0cHM6Ly9kbC4xNGJpZGEubWUvMTRiaWRhL0Jvb2svJUU3JTlGJUE1JUU4JUJEJUE5JUU4JTk3JThGJUU0JUI5JUE2JUU1JUE0JTg3JUU0JUJCJUJE" title="必达影视下载站 | 知轩藏书备份">OneDrive for Business
                国际版<i class="fa fa-external-link-alt"></i></span><i>（由网友“神龙氏少主”<span class="exturl" data-url="aHR0cHM6Ly90aWViYS5iYWlkdS5jb20vcC84MzQ5OTQ5MTE3P2ZpZD0xNzY5MzQ3OSZwaWQ9MTQ3MzI0MTM0MDU0JmNpZD0xNDc0NjU5NjY1MjYjMTQ3NDY1OTY2NTI2" title="建站至今所有数据分享，另附2022年8月仙毒草数据【知轩藏书吧】_百度贴吧">提供<i class="fa fa-external-link-alt"></i></span>，其同时运营着一个流媒体网站<span class="exturl" data-url="aHR0cHM6Ly8xNGJpZGEubWUv" title="必达影视">必达影视<i class="fa fa-external-link-alt"></i></span></i>）
            </li>
            <li><span class="exturl" data-url="aHR0cHM6Ly9jbG91ZC4xODkuY24vdC9CVmJ5ZW1KRlZWbm0=" title="知轩藏书 全站小说（7681本） 免费高速下载 | 天翼云盘 珍藏美好生活 家庭云|网盘|文件备份|资源分享">天翼云盘<i class="fa fa-external-link-alt"></i></span><i>（由网友“贴吧用户_0XN9bX5”<span class="exturl" data-url="aHR0cHM6Ly90aWViYS5iYWlkdS5jb20vcC84MzQ5OTQ5MTE3P2ZpZD0xNzY5MzQ3OSZwaWQ9MTQ3MzI0MTM0MDU0JmNpZD0xNDc1MzkwMDc3NzUjMTQ3NTM5MDA3Nzc1" title="建站至今所有数据分享，另附2022年8月仙毒草数据【知轩藏书吧】_百度贴吧">提供<i class="fa fa-external-link-alt"></i></span>）</i></li>
            <li><span class="exturl" data-url="aHR0cHM6Ly9kbC5hc2trLmNjL2NtY2Mv" title="cmcc | Sukanka 的仓库">知轩藏书备份站<i class="fa fa-external-link-alt"></i></span><i>（由<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmFza2suY2Mv" title="sukanka 的博客 - sukanka 的博客">网友“Sukanka”<i class="fa fa-external-link-alt"></i></span>提供）</i></li>
          </ul>
</div>
<h2 id="我的希望"><s>我的希望</s></h2>
<p><s>如果可以，我希望我以后可以自组一台NAS，将Zlib的所有书籍都备份</s></p>
]]></content>
  </entry>
  <entry>
    <title>尝鲜AI画图：Stable-Diffusion</title>
    <url>/2023/03/13/1/</url>
    <content><![CDATA[<h2 id="准备">准备</h2>
<ul class="lvl-0">
<li class="lvl-2">安装python3.10</li>
<li class="lvl-2">安装Git</li>
</ul>
<div class="note warning"><h3 id="注意">注意</h3>
<p>如果你是Windows用户，请不要使用最新的python3.11部署SD,因为stable-diffusion的依赖包pytorch不支持windows的python3.11,将系统环境变量的python改为3.10版本即可。</p>
</div>
<blockquote>
<p>官方推荐使用3.10.6版本，但是我使用3.10.10版本也可以正常运行</p>
</blockquote>
<h2 id="SD-WebUI">SD-WebUI</h2>
<p>项目地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0FVVE9NQVRJQzExMTEvc3RhYmxlLWRpZmZ1c2lvbi13ZWJ1aQ==">https://github.com/AUTOMATIC1111/stable-diffusion-webui<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="安装SD-WebUI">安装SD-WebUI</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:AUTOMATIC1111/stable-diffusion-webui.git</span><br></pre></td></tr></table></figure>
<h3 id="运行SD-WebUI">运行SD-WebUI</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> stable-diffusion-webui</span><br><span class="line">call webui-user.bat</span><br></pre></td></tr></table></figure>
<p>等待程序自动创建所需环境，安装所有依赖包，注意：如果依赖包安装错误，请手动安装依赖包，或者检查你的网络环境。但是，这里提供一种方法解决因网络问题而无法安装。</p>
<blockquote>
<p>打开SD-WebUI目录下的launch.py文件，将其中所有依赖包的github源稍加修改，如下：</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 依赖包修改前</span></span><br><span class="line">    gfpgan_package = os.environ.get(<span class="string">&#x27;GFPGAN_PACKAGE&#x27;</span>, <span class="string">&quot;git+https://github.com/TencentARC/GFPGAN.git@8d2447a2d918f8eba5a4a01463fd48e45126a379&quot;</span>)</span><br><span class="line"><span class="comment"># 依赖包修改后</span></span><br><span class="line">    gfpgan_package = os.environ.get(<span class="string">&#x27;GFPGAN_PACKAGE&#x27;</span>, <span class="string">&quot;git+https://ghproxy.com/https://github.com/TencentARC/GFPGAN.git@8d2447a2d918f8eba5a4a01463fd48e45126a379&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>即在github源前加上<code>https://ghproxy.com/</code>，然后重新运行webui.bat，等待程序自动创建所需环境，安装所有依赖包。</p>
<h3 id="运行">运行</h3>
<p>直接运行webui.bat即可。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">call webui-user.bat</span><br></pre></td></tr></table></figure>
<p>程序会提示你打开一个本地网页，ctrl+鼠标左键点击即可打开网页。</p>
<blockquote>
<p>一般，这个网址会是：<span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo3ODYwLw==">http://127.0.0.1:7860/<i class="fa fa-external-link-alt"></i></span></p>
</blockquote>
<h2 id="模型">模型</h2>
<h3 id="Stable-diffusion">Stable-diffusion</h3>
<p>如今Stable-Diffusion如火如荼，已有很多相关社区，这里推荐两个时下热门的社区：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9jaXZpdGFpLmNvbS8=">CIVITAI<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9odWdnaW5nZmFjZS5jby8=">Hugging Face<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<p>我使用了两个热门的模型：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>Anything4.5 <code>anything-v4.5-pruned.safetensors</code></p>
</li>
<li class="lvl-2">
<p>chilloutmix <code>chilloutmix_NiPrunedFp32Fix.safetensors</code></p>
</li>
</ul>
<h3 id="Lora">Lora</h3>
<blockquote>
<p><span class="exturl" data-url="aHR0cHM6Ly9hcnhpdi5vcmcvYWJzLzIxMDYuMDk2ODU=">LoRA: Low-Rank Adaptation of Large Language Models<i class="fa fa-external-link-alt"></i></span>：大语言模型的低秩适应是微软研究人员为处理微调大语言模型的问题而引入的一项新技术。具有数十亿个参数的强大模型（例如 GPT-3）为了适应特定任务或领域而进行微调的成本非常高。LoRA 建议冻结预先训练的模型权重并注入可训练层 （秩分解矩阵） 在每个变压器块中.这大大减少了可训练参数的数量和 GPU 内存要求，因为不需要为大多数模型权重计算梯度。研究人员发现，通过专注于大语言模型的Transformer注意力块，LoRA的微调质量与完整模型微调相当，同时速度更快，需要的计算更少。</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p><code>cuteGirlMix4_v10.safetensors</code></p>
</li>
<li class="lvl-2">
<p><code>daili_v20.safetensors</code></p>
</li>
<li class="lvl-2">
<p><code>japaneseDollLikeness_v10.safetensors</code></p>
</li>
<li class="lvl-2">
<p><code>koreanDollLikeness_v10.safetensors</code></p>
</li>
<li class="lvl-2">
<p><code>yaeMikoRealistic_yaemikoMixed.safetensors</code></p>
</li>
<li class="lvl-2">
<p>etc.</p>
</li>
</ul>
<h3 id="Extensions">Extensions</h3>
<p>我使用了</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL01pa3ViaWxsL3NkLXdlYnVpLWNvbnRyb2xuZXQ=">骨架分析插件ControlNet<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL01pa3ViaWxsL3NkLXdlYnVpLWNvbnRyb2xuZXQ=">Webui中文化插件<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p>etc.</p>
</li>
</ul>
<p>安装方法：打开SD-WebUI，在插件管理中，安装即可。</p>
<h2 id="使用">使用</h2>
<p>通常是使用文生图,一般流程是：选择模型，输入正向提示词，反向提示词，选择采样器，调整采样步数，调整分辨率，提示词引导系数等，然后点击生成图片。或者使用图生图，与文生图类似，只是输入的是图片，这里不再赘述。<br>
Stable-Diffusion还有很多功能，有兴趣的可以自行探索。</p>
<h2 id="欣赏">欣赏</h2>
<h3 id="我生成的图片">我生成的图片</h3>
<blockquote>
<p><strong>以下图片可能引起您的不适，请斟酌后点击展开</strong></p>
</blockquote>
<details>
<summary>点击展开</summary>
<br>
<del>赛博炼丹了属于是</del>
<p><img src="./The-AI-Drawing-Tool-Stable-Diffusion/images/00001-1949489537.png" alt><br>
<img src="./The-AI-Drawing-Tool-Stable-Diffusion/images/00042-3202830595.png" alt><br>
<img src="./The-AI-Drawing-Tool-Stable-Diffusion/images/00063-561642427.png" alt></p>
</details>
<style>
# box1 {
    width: 80%;
    height: 130px;
    background-color: white;
    border: 5px solid #00bcd4;
    border-radius: 50px;
    padding: 8px 12px;
    margin-bottom: 20px;
    text-align: center;
    line-height: 30px;
    margin: 0 auto;
    text-decoration: none;
}
# box2 {
    width: 20%;
    height: 20%;
    background-color: #f5f5f5;
    border: 2px solid #000000;
    border-radius: 50px;
    padding: 8px 12px;
    text-align: center;
    line-height: 50px;
    margin: 0 auto;
    position: relative;
    text-decoration: none;
}
# box2 a {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    line-height: 35px;
    text-decoration: none;
}
# box2 a:hover {
    background-color: #ff4081;
    color: white;
    border: 0 solid #000000;
    border-radius: 50px;
    text-align: center;
    text-decoration: none;
}
</style>
<div id="box1" hidden>
<span style="text-align: center; color:black;"><del>AI高质量色图<del></del></del></span>
<br>
<span style="text-align: center; color:black;">13.1 MB (13,769,536 字节)</span>
<br>
<span style="text-align: center; color:black;">解压密码：<em>MjAyMzAzMjU=<em></em></em></span>
<div id="box2">
<a href="./src/1.7z" data-pjax-state="load" download="high quality.7z">点击下载</a>
</div>
</div>
<div hidden>
<a>将1.7z改成src.7z即可获取文件</a>
</div>
<h3 id="网络分享的方案">网络分享的方案</h3>
<blockquote>
<p><strong>以下图片可能引起您的不适，请斟酌后点击展开</strong></p>
</blockquote>
<details>
<summary>点击展开</summary>
<br>
<iframe src="https://civitai.com/gallery/238491?reviewId=39222&infinite=false&returnUrl=%2Fmodels%2F7240%2Fmeinamix" frameborder="0" width="100%" height="200%"></iframe>
<iframe src="https://civitai.com/gallery/215134?modelId=7240&modelVersionId=20322&infinite=false&returnUrl=%2Fmodels%2F7240%2Fmeinamix" frameborder="0" width="100%" height="2000%"></iframe>
<iframe src="https://civitai.com/gallery/235934?reviewId=38713&infinite=false&returnUrl=%2Fmodels%2F6925%2Frealdosmix" frameborder="0" width="100%" height="2000%"></iframe>
<iframe src="https://civitai.com/gallery/242428?reviewId=39973&infinite=false&returnUrl=%2Fmodels%2F6424%2Fchilloutmix" frameborder="0" width="100%" height="2000%"></iframe>
</details>
<p>参考：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9odWdnaW5nZmFjZS5jby9ibG9nL2xvcmE=">https://huggingface.co/blog/lora<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL01pa3ViaWxsL3NkLXdlYnVpLWNvbnRyb2xuZXQjcmVhZG1l">https://github.com/Mikubill/sd-webui-controlnet#readme<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li class="lvl-2">
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0FVVE9NQVRJQzExMTEvc3RhYmxlLWRpZmZ1c2lvbi13ZWJ1aSNyZWFkbWU=">https://github.com/AUTOMATIC1111/stable-diffusion-webui#readme<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
]]></content>
      <tags>
        <tag>分享</tag>
      </tags>
  </entry>
  <entry>
    <title>我的Debain设备与Linux</title>
    <url>/2023/03/06/1/</url>
    <content><![CDATA[<h2 id="我的Debain设备">我的Debain设备</h2>
<h3 id="设备介绍">设备介绍</h3>
<blockquote>
<p>这个东西其实就是随身wifi，但他的硬件很有趣，所以被开发出来了许多玩法</p>
</blockquote>
<p><img src="./1.png" alt><br>
<img src="./2.png" alt></p>
<h3 id="为什么要用这个设备学习linux">为什么要用这个设备学习linux</h3>
<blockquote>
<p>因为这个学期有linux的课程，所以我就把这个东西拿来学习linux，因为这个东西的硬件比较好，所以我就把他当作我的开发板来学习linux<br>
开始上linux课的时候，要求我们用虚拟机来学习，但是我觉得这样不太好</p>
<ul class="lvl-1">
<li class="lvl-2">一是因为我的电脑是游戏本，很厚重，上课带来带去很麻烦</li>
<li class="lvl-2">二是目前学习linux并不需要很高的性能，这个设备已经有足够的性能来学习linux了</li>
</ul>
</blockquote>
<h3 id="为什么不用安卓手机呢">为什么不用安卓手机呢</h3>
<blockquote>
<p>众所周知安卓手机也使用了linux内核</p>
<ul class="lvl-1">
<li class="lvl-2">安卓手机通常无法获取root权限，这样就无法学习linux内核，即使手机支持root，也需要折腾很久，我不想在主力机上root，因为我的数据都在里面</li>
<li class="lvl-2">安卓的Linux内核经过了修改，所以学习起来会比较麻烦</li>
</ul>
</blockquote>
<h2 id="学习Linux">学习Linux</h2>
<p><img src="./3.png" alt></p>
<blockquote>
<p>其实linux只是个操作系统而已，只是其Gui界面较少，操作通常使用命令行，所以学习linux并不难，只要学会一些基本的命令就可以了</p>
</blockquote>
<h3 id="基本命令">基本命令</h3>
<p>ls:列出当前目录下的文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ls</span> -l:列出详细信息</span><br><span class="line"><span class="built_in">ls</span> -a:列出所有文件</span><br><span class="line"><span class="built_in">ls</span> -al:列出所有文件的详细信息</span><br></pre></td></tr></table></figure>
<p>cd:切换目录</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ..:返回上一级目录</span><br><span class="line"><span class="built_in">cd</span> ~:返回根目录</span><br></pre></td></tr></table></figure>
<p>pwd:显示当前目录</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">pwd</span> -P:显示真实路径</span><br></pre></td></tr></table></figure>
<p>mkdir:创建目录</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p:创建多级目录</span><br></pre></td></tr></table></figure>
<p>rm:删除文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">rm</span> -r:删除目录</span><br><span class="line"><span class="built_in">rm</span> -f:强制删除</span><br></pre></td></tr></table></figure>
<p>rmdir:删除目录</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">rmdir</span> -p:删除多级目录</span><br></pre></td></tr></table></figure>
<p>cp:复制文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cp</span> -r:复制目录</span><br><span class="line"><span class="built_in">cp</span> -a:复制目录并保留属性</span><br></pre></td></tr></table></figure>
<p>mv:移动文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mv</span> -f:强制移动</span><br></pre></td></tr></table></figure>
<p>cat:显示文件内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> -n:显示行号</span><br></pre></td></tr></table></figure>
<p>touch:创建文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">touch</span> -a:修改文件的访问时间</span><br><span class="line"><span class="built_in">touch</span> -m:修改文件的修改时间</span><br><span class="line"><span class="built_in">touch</span> -c:不创建文件，只修改文件的时间</span><br></pre></td></tr></table></figure>
<p>echo:输出内容到文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hello world&quot;</span> &gt; hello.txt:输出内容到文件</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hello world&quot;</span> &gt;&gt; hello.txt:输出内容到文件末尾</span><br></pre></td></tr></table></figure>
<p>find:查找文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find . -name <span class="string">&quot;hello.txt&quot;</span>:查找当前目录下的hello.txt文件</span><br><span class="line">find . -name <span class="string">&quot;hello.txt&quot;</span> -<span class="built_in">type</span> f:查找当前目录下的hello.txt文件并且是文件</span><br><span class="line">find . -name <span class="string">&quot;hello.txt&quot;</span> -<span class="built_in">type</span> d:查找当前目录下的hello.txt文件并且是目录</span><br><span class="line">find . -name <span class="string">&quot;hello.txt&quot;</span> -<span class="built_in">type</span> f -<span class="built_in">exec</span> <span class="built_in">rm</span> -rf &#123;&#125; \;:查找当前目录下的hello.txt文件并且是文件并且删除</span><br></pre></td></tr></table></figure>
<p>grep:查找文件内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep <span class="string">&quot;hello&quot;</span> hello.txt:查找hello.txt文件中的hello</span><br><span class="line">grep -i <span class="string">&quot;hello&quot;</span> hello.txt:忽略大小写</span><br><span class="line">grep -v <span class="string">&quot;hello&quot;</span> hello.txt:查找不包含hello的行</span><br><span class="line">grep -n <span class="string">&quot;hello&quot;</span> hello.txt:查找包含hello的行并且显示行号</span><br><span class="line">grep -c <span class="string">&quot;hello&quot;</span> hello.txt:查找包含hello的行并且显示行数</span><br><span class="line">grep -r <span class="string">&quot;hello&quot;</span> .:查找当前目录下的所有文件中包含hello的行</span><br></pre></td></tr></table></figure>
<p>wc:统计文件内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">wc</span> -l hello.txt:统计hello.txt文件的行数</span><br><span class="line"><span class="built_in">wc</span> -w hello.txt:统计hello.txt文件的单词数</span><br><span class="line"><span class="built_in">wc</span> -c hello.txt:统计hello.txt文件的字符数</span><br></pre></td></tr></table></figure>
<p>sort:排序文件内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sort</span> hello.txt:对hello.txt文件进行排序</span><br><span class="line"><span class="built_in">sort</span> -r hello.txt:对hello.txt文件进行倒序排序</span><br><span class="line"><span class="built_in">sort</span> -n hello.txt:对hello.txt文件进行数字排序</span><br><span class="line"><span class="built_in">sort</span> -u hello.txt:对hello.txt文件进行去重排序</span><br></pre></td></tr></table></figure>
<p>uniq:去重文件内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">uniq</span> hello.txt:去重hello.txt文件</span><br><span class="line"><span class="built_in">uniq</span> -c hello.txt:去重并且统计重复次数</span><br></pre></td></tr></table></figure>
<p>head:显示文件头部内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">head</span> -n 10 hello.txt:显示hello.txt文件的前10行</span><br></pre></td></tr></table></figure>
<p>tail:显示文件尾部内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">tail</span> -n 10 hello.txt:显示hello.txt文件的后10行</span><br></pre></td></tr></table></figure>
<p>diff:比较文件内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">diff example1.txt example2.txt 比较文件差异</span><br></pre></td></tr></table></figure>
<h3 id="vim">vim</h3>
<p>vim是linux下的文本编辑器，其操作方式与windows下的记事本类似，但是vim的功能更加强大，所以学习vim是学习linux的必备技能</p>
<p>vim的操作方式有两种，一种是命令模式，一种是编辑模式，命令模式下可以进行一些操作，比如复制粘贴，编辑模式下可以进行编辑。vim有多个模式，分别是</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>正常模式(normal mode),默认模式,可以进行复制粘贴等操作</p>
</li>
<li class="lvl-2">
<p>插入模式(insert mode),可以进行编辑</p>
</li>
<li class="lvl-2">
<p>命令行模式(command mode),可以执行一些命令</p>
</li>
<li class="lvl-2">
<p>可视模式(visual mode),可以进行选择</p>
</li>
</ul>
<h4 id="新建保存和退出">新建保存和退出</h4>
<p>新建文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim hello.txt</span><br></pre></td></tr></table></figure>
<p>保存文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">:w</span><br></pre></td></tr></table></figure>
<p>退出文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">:q</span><br></pre></td></tr></table></figure>
<p>强制退出文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">:q!</span><br></pre></td></tr></table></figure>
<p>保存并退出文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">:wq</span><br></pre></td></tr></table></figure>
<p>进入编辑模式</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">i</span><br></pre></td></tr></table></figure>
<p>退出编辑模式</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">esc</span><br></pre></td></tr></table></figure>
<h4 id="初步导航和编辑">初步导航和编辑</h4>
<p>通常vim移动光标的方式是使用方向键，但是vim也提供了一些快捷键，可以使用快捷键来移动光标</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>h:左移</p>
</li>
<li class="lvl-2">
<p>j:下移</p>
</li>
<li class="lvl-2">
<p>k:上移</p>
</li>
<li class="lvl-2">
<p>l:右移</p>
</li>
<li class="lvl-2">
<p>i:插入，插入到当前光标的前面</p>
</li>
<li class="lvl-2">
<p>shift+a或A:追加，追加到当前光标的后面</p>
</li>
</ul>
<p>新建一行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">o 新建下一行或者</span><br><span class="line"><span class="built_in">shift</span>+o 新建下一行</span><br></pre></td></tr></table></figure>
<h4 id="进阶导航和编辑">进阶导航和编辑</h4>
<p>行号</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">:<span class="built_in">set</span> nu</span><br></pre></td></tr></table></figure>
<p>移动到最后</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">shift</span>+g</span><br><span class="line">G</span><br></pre></td></tr></table></figure>
<p>移动到顶部</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gg</span><br></pre></td></tr></table></figure>
<p>相对行号</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">:<span class="built_in">set</span> rnu</span><br></pre></td></tr></table></figure>
<p>复制粘贴</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yy 复制一行</span><br><span class="line">p 粘贴</span><br></pre></td></tr></table></figure>
<p>删除一行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">dd</span></span><br></pre></td></tr></table></figure>
<p>重复上一次操作</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">.</span><br></pre></td></tr></table></figure>
<p>撤销</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">u</span><br></pre></td></tr></table></figure>
<p>返回上一次操作</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ctrl+r</span><br></pre></td></tr></table></figure>
<p>删除一个单词</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">dw</span><br></pre></td></tr></table></figure>
<p>改变一个单词</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cw</span><br></pre></td></tr></table></figure>
<p>按单词移动</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">w 向后移动一个单词</span><br><span class="line">b 向前移动一个单词</span><br></pre></td></tr></table></figure>
<p>跳到单词最后</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">e</span><br></pre></td></tr></table></figure>
<p>跳到单词最前</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">0</span><br></pre></td></tr></table></figure>
<h4 id="搜索替换和视觉模式">搜索替换和视觉模式</h4>
<p>搜索</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/word</span><br></pre></td></tr></table></figure>
<p>替换</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">:%s/old/new/g 最后的g是全局的意思</span><br></pre></td></tr></table></figure>
<p>复制一个单词</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yw</span><br></pre></td></tr></table></figure>
<p>粘贴3次</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">3p</span><br></pre></td></tr></table></figure>
<p>删除大括号内的内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ci&#123;</span><br><span class="line">ci&#125;</span><br></pre></td></tr></table></figure>
<p>视觉模式</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ctrl+v</span><br></pre></td></tr></table></figure>
<p>其他的快捷键</p>
<blockquote>
<ul class="lvl-1">
<li class="lvl-2">
<p>:set nu:显示行号</p>
</li>
<li class="lvl-2">
<p>:set nonu:不显示行号</p>
</li>
<li class="lvl-2">
<p>:set ai:自动缩进</p>
</li>
<li class="lvl-2">
<p>:set noai:不自动缩进</p>
</li>
<li class="lvl-2">
<p>:set si:智能缩进</p>
</li>
<li class="lvl-2">
<p>:set nosi:不智能缩进</p>
</li>
<li class="lvl-2">
<p>:set ts=4:设置缩进为4个空格</p>
</li>
<li class="lvl-2">
<p>:set ts=8:设置缩进为8个空格</p>
</li>
<li class="lvl-2">
<p>:set ts=tab:设置缩进为tab</p>
</li>
</ul>
</blockquote>
<p>参考：</p>
<iframe class="video-frame" src="//player.bilibili.com/player.html?aid=983519439&cid=775999565&autoplay=0&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>学习笔记</tag>
        <tag>分享</tag>
        <tag>玩机</tag>
      </tags>
  </entry>
  <entry>
    <title>一流的练习打字的网站</title>
    <url>/2023/03/02/2/</url>
    <content><![CDATA[<p>目前学习计算机专业，需要经常打字，使用键盘操作，所以需要练习打字，这里推荐两个好的练习打字的网站。</p>
<h2 id="1-Typing-com">1. <span class="exturl" data-url="aHR0cHM6Ly93d3cudHlwaW5nLmNvbQ==">Typing.com<i class="fa fa-external-link-alt"></i></span></h2>
<p>Typing.com是一个练习打字的网站，可以练习打字，UI精美，指导性很强，非常适合初学者。</p>
<blockquote>
<p><span class="exturl" data-url="aHR0cDovL1R5cGluZy5jb20=">Typing.com<i class="fa fa-external-link-alt"></i></span> is a free online typing tutor. Learn touch typing, practice your keyboarding skills, take typing tests and find your true typing speed.</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>适合初学者</p>
</li>
</ul>
<p><img src="./typing%20the%20home.png" alt></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>指导性强</p>
</li>
</ul>
<p><img src="./typing%20tips.png" alt></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>按键指导</p>
</li>
</ul>
<p><img src="./typing%20keyboard%20guide.png" alt></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>打字练习</p>
</li>
</ul>
<p><img src="./typing%20pracice.png" alt></p>
<h2 id="2-qwerty-kaiyi-cool">2. <span class="exturl" data-url="aHR0cHM6Ly9xd2VydHkua2FpeWkuY29vbC8=">qwerty.kaiyi.cool<i class="fa fa-external-link-alt"></i></span></h2>
<p>qwerty.kaiyi.cool是一个练习打字的网站，可以练习打字，UI简洁，指导性不强，适合熟悉打字的人。</p>
<blockquote>
<p>但其内容实用性强，有CET4/6，GMAT，GRE，TOEFL，雅思，托福，SAT，ACT，英语专四，英八，PTE，计算机代码练习，甚至日语罗马音······等</p>
</blockquote>
<p>在其中，你能在熟练打字的同时，学习到你需要的知识。</p>
<p><img src="./qwert1.png" alt></p>
<p><img src="./qwert2.png" alt></p>
<p><img src="./qwert3.png" alt></p>
]]></content>
      <tags>
        <tag>分享</tag>
      </tags>
  </entry>
</search>
